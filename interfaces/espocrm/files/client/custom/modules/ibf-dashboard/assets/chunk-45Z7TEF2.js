import{A as Jt,a as N,c as kt,d as Y,e as Ft,f as Lt,g as At,h as Rt,i as Bt,j as ot,k as jt,l as zt,m as Ht,n as Vt,o as $t,p as Gt,q as Kt,r as Xt,s as F,t as qt,u as Nt,v as Yt,w as Zt,x as L}from"./chunk-LHYVP2FA.js";import{A as vt,Aa as X,D as V,E as et,Ea as It,Fa as Dt,Ga as Ut,Ja as nt,La as Tt,R as yt,Z as I,_ as D,cb as it,fa as $,ga as U,gb as q,ha as _t,hb as Et,i as ht,ia as T,j as ft,ja as E,k as bt,ma as Mt,na as Pt,oa as St,pa as xt,qa as Ot,ta as G,w as H,wa as K,x as Ct,y as w,ya as wt,za as k}from"./chunk-PDTEAZI5.js";import{Ab as M,Bb as P,Cb as i,Db as e,Eb as s,Ib as dt,Lb as pt,Mb as S,Na as lt,Qb as mt,Ra as o,U as A,Wb as c,Xb as b,Yb as f,Za as d,cb as O,db as R,dc as gt,ea as st,ec as z,fa as ct,hb as Q,kc as h,lc as C,mc as tt,qc as ut,ub as u,wb as y,yb as B,zb as j}from"./chunk-IZSDXEDD.js";import"./chunk-6Y6TZ5DU.js";import"./chunk-B5XQ7TKQ.js";import"./chunk-2ZTJ4CQE.js";import"./chunk-4TS7RF7E.js";import"./chunk-CKHRE3EB.js";import"./chunk-NJKHWUZQ.js";import"./chunk-RR6ROPEN.js";import"./chunk-UX77KJ7N.js";import"./chunk-EOLXYSZT.js";import"./chunk-VPSQTYI3.js";import"./chunk-NQOZPK3S.js";import"./chunk-3VPKZZES.js";import"./chunk-55MUSWHY.js";import"./chunk-JKOCDGOA.js";import"./chunk-PJKO2XHO.js";import"./chunk-RUGFDS43.js";import"./chunk-P4HVPFJD.js";import"./chunk-O23PZQDP.js";import"./chunk-CZNOOQK5.js";import"./chunk-RGXYJBLP.js";import"./chunk-UFB7CFK7.js";import"./chunk-IIGIEWRB.js";import"./chunk-DTON4BNA.js";import"./chunk-74OYS3EQ.js";import{g as x}from"./chunk-2R6CW7ES.js";var se=()=>["/"];function ce(t,m){if(t&1&&(i(0,"ion-col",13)(1,"ion-text")(2,"strong"),c(3),e()()()),t&2){let n=m.$implicit;o(3),b(n)}}function le(t,m){if(t&1){let n=dt();i(0,"div",6)(1,"ion-row")(2,"ion-col",8)(3,"h4"),c(4),h(5,"translate"),e(),i(6,"p"),c(7),h(8,"translate"),e(),i(9,"p"),c(10),h(11,"translate"),e()(),i(12,"ion-col",9)(13,"ion-row",10)(14,"ion-button",11),pt("click",function(){st(n);let a=S(2);return ct(a.copyToClipboard())}),c(15),h(16,"translate"),e()()()(),i(17,"ion-row",12),M(18,ce,4,1,"ion-col",13,j),e()()}if(t&2){let n=S(2);o(4),f(" ",C(5,4,"activation-page.page-title")," "),o(3),f(" ",C(8,6,"activation-page.page-explanation")," "),o(3),f(" ",C(11,8,"activation-page.copy-instructions")," "),o(5),f(" ",C(16,10,"activation-page.copy-to-clipboard")," "),o(3),P(n.activationLogs.headerData)}}function de(t,m){if(t&1&&(i(0,"ion-col",14)(1,"ion-text"),c(2),e()()),t&2){let n=m.$implicit;o(2),b(n)}}function pe(t,m){if(t&1&&(i(0,"ion-row",12),M(1,de,3,1,"ion-col",14,j),e()),t&2){let n=m.$implicit;o(),P(n)}}function me(t,m){if(t&1&&(i(0,"div",7),M(1,pe,3,0,"ion-row",12,j),e()),t&2){let n=S(2);o(),P(n.activationLogs.rowsData)}}function ge(t,m){if(t&1&&Q(0,le,20,12,"div",6)(1,me,3,0,"div",7),t&2){let n=S();B(n.activationLogs.headerData?0:-1),o(),B(n.activationLogs.rowsData?1:-1)}}var J=(()=>{class t{constructor(n,r,a,v,g,l){this.apiService=n,this.analyticsService=r,this.activatedRoute=a,this.toastController=v,this.translate=g,this.disasterTypeService=l,this.onFetchActivationLogs=p=>{this.activationLogs=this.jsonToCsv(p)},this.activatedRoute.queryParams.subscribe(p=>{this.countryCodeISO3=p?.countryCodeISO3,this.disasterType=p?.disasterType})}ngOnInit(){this.analyticsService.logPageView(N.activationLog),this.activationLogSubscription=this.apiService.getActivationLogs(this.countryCodeISO3,this.disasterType).subscribe(this.onFetchActivationLogs)}ngOnDestroy(){this.activationLogSubscription.unsubscribe()}jsonToCsv(n){if(n.length===0)return"";let r=Object.keys(n[0]),a=n.map(v=>r.map(g=>v[g]));return{headerData:r,rowsData:a}}copyToClipboard(){let n="headerData",r="rowsData",a=this.activationLogs[n].join("	")+`
`;for(let v of this.activationLogs[r])a+=v.join("	")+`
`;navigator.clipboard.writeText(a).then(()=>this.presentToast(this.translate.instant("activation-page.copy-success"),"ibf-primary")).catch(()=>this.presentToast(this.translate.instant("activation-page.copy-fail"),"alert"))}presentToast(n,r){return x(this,null,function*(){yield(yield this.toastController.create({message:n,duration:5e3,position:"top",color:r,animated:!0})).present()})}static{this.\u0275fac=function(r){return new(r||t)(d(q),d(Y),d(vt),d(Dt),d(H),d(Ft))}}static{this.\u0275cmp=O({type:t,selectors:[["app-activation-log"]],standalone:!1,decls:9,vars:5,consts:[[1,"ion-no-border"],["slot","start"],["title","Home",3,"routerLink"],["name","apps","slot","icon-only"],[3,"isLoggedIn","showCountry"],[1,"ion-padding-horizontal"],["id","table-header",1,"ion-no-padding"],["id","table-body",1,"ion-margin-bottom"],["size","9",1,"explanation"],["size","3"],[1,"ion-justify-content-end"],["size","small","color","ibf-primary","shape","round","width","180px",1,"ion-margin-vertical",3,"click"],[1,"table-row"],[1,"table-cell"],[1,"table-body-cell","table-cell"]],template:function(r,a){r&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),s(4,"ion-icon",3),e()(),s(5,"app-user-state",4),e(),s(6,"app-disclaimer-toolbar"),e(),i(7,"ion-content",5),Q(8,ge,2,2),e()),r&2&&(o(3),u("routerLink",z(4,se)),o(2),u("isLoggedIn",!0)("showCountry",!!a.countryCodeISO3),o(3),B(a.activationLogs?8:-1))},styles:["#table-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;opacity:1;background-color:#fff;width:fit-content}#table-header[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{border-top:1px solid var(--ion-color-ibf-grey)}#table-body[_ngcontent-%COMP%]{width:fit-content}.table-row[_ngcontent-%COMP%]{height:inherit;border-right:1px solid var(--ion-color-ibf-grey)}.table-cell[_ngcontent-%COMP%]{padding:8px;border-left:1px solid var(--ion-color-ibf-grey);border-bottom:1px solid var(--ion-color-ibf-grey);text-align:left;word-break:break-all;font-size:10px;width:7vw}.explanation[_ngcontent-%COMP%]{font-size:14px}"]})}}return t})();var ee=(()=>{class t{static{this.instanceCount=0}constructor(n,r,a,v,g){this.authService=n,this.analyticsService=r,this.popoverController=a,this.debugService=v,this.cdr=g,this.version=nt.ibfSystemVersion,this.isDev=!1,this.isMultiCountry=!1,this.templateRendered=!1,this.adminRole=Tt.Admin,this.environmentConfiguration=nt.configuration,this.onUserChange=l=>{l&&(this.isDev=l.userRole===this.adminRole,this.isMultiCountry=l.countries.length>1,this.cdr.markForCheck(),console.log("\u{1F504} DashboardPage: Component marked for check by user change",{isDev:this.isDev,isMultiCountry:this.isMultiCountry}))},t.instanceCount++,this.instanceId=t.instanceCount,this.debugService.logComponentInit("DashboardPage",`Constructor called - Instance #${this.instanceId}`),t.instanceCount>1&&(console.error(`\u{1F6A8} CRITICAL: Multiple DashboardPage instances created! Current count: ${t.instanceCount}`),console.error("\u{1F6A8} This indicates a routing or component lifecycle issue")),console.log("\u{1F9ED} DashboardPage: Constructor - Current URL:",window.location.href),console.log("\u{1F9ED} DashboardPage: Constructor - Timestamp:",new Date().toISOString()),!(!this.isPhone()&&!this.isTablet())&&(this.isTablet()&&screen.orientation.type.includes("landscape")||this.showScreenOrientationPopover())}ngOnInit(){this.authSubscription=this.authService.getAuthSubscription().subscribe(this.onUserChange),this.debugService.logComponentInit("DashboardPage",{isDev:this.isDev,isMultiCountry:this.isMultiCountry,version:this.version}),setTimeout(()=>{this.templateRendered=!0,this.cdr.markForCheck(),console.log("\u{1F504} DashboardPage: Initial template rendering scheduled")},0),this.analyticsService.logPageView(N.dashboard),this.cdr.markForCheck(),console.log("\u{1F50D} DashboardPage ngOnInit - DOM check immediately:"),console.log("\u{1F50D} Dashboard element exists:",!!document.querySelector('[data-testid="ibf-dashboard-interface"]')),console.log("\u{1F50D} App root exists:",!!document.querySelector("#app")),console.log("\u{1F50D} Router outlet exists:",!!document.querySelector("router-outlet")),console.log("\u{1F50D} Total DOM elements:",document.querySelectorAll("*").length),setTimeout(()=>{this.debugService.logDOMState(),this.cdr.markForCheck()},100),setTimeout(()=>{this.cdr.markForCheck(),console.log("\u{1F504} DashboardPage: Additional change detection at 250ms")},250),setTimeout(()=>{this.cdr.markForCheck(),console.log("\u{1F504} DashboardPage: Additional change detection at 500ms"),this.debugService.logDOMState()},500)}ngAfterViewInit(){this.debugService.logComponentAfterViewInit("DashboardPage"),this.cdr.markForCheck(),setTimeout(()=>{this.debugService.logDOMState(),this.debugService.logCSSStyles("DashboardPage",".ibf-dashboard-left-column"),this.debugService.logCSSStyles("DashboardPage",".ibf-dashboard-right-column"),this.debugService.logCSSStyles("DashboardPage","app-chat"),this.debugService.logCSSStyles("DashboardPage","app-map"),this.cdr.markForCheck()},500),setTimeout(()=>{this.cdr.markForCheck(),this.debugService.logDOMState(),document.querySelector('[data-testid="ibf-dashboard-interface"]')||(console.error("\u{1F6A8} CRITICAL: Dashboard template still not rendered after 2 seconds"),console.error("\u{1F6A8} Component state:",{isDev:this.isDev,isMultiCountry:this.isMultiCountry,templateRendered:this.templateRendered,version:this.version}),this.templateRendered=!0,this.cdr.markForCheck(),setTimeout(()=>{this.debugService.logDOMState(),console.log("\u{1F504} Final change detection attempt complete")},100))},2e3)}ngOnDestroy(){t.instanceCount--,console.log(`\u{1F480} DashboardPage: Instance #${this.instanceId} destroyed. Remaining: ${t.instanceCount}`),this.authSubscription&&this.authSubscription.unsubscribe()}isTablet(){return/ipad|tablet|android(?!.*mobile)|windows(?!.*phone).*touch|kindle|playbook|silk|puffin(?!.*(?:IP|AP|WP))/.test(navigator.userAgent.toLowerCase())}isPhone(){return/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(?:hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(?:ob|in)i|palm(?: os)?|phone|p(?:ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(?:browser|link)|vodafone|wap|windows (?:ce|phone)|xda|xiino/i.test(navigator.userAgent.toLowerCase())}showScreenOrientationPopover(){return x(this,null,function*(){yield(yield this.popoverController.create({component:At,animated:!0,cssClass:`ibf-popover ${this.isTablet()?"ibf-popover-normal":""}`,translucent:!0,showBackdrop:!0,componentProps:{device:this.isPhone()?"mobile":"tablet"}})).present()})}getTodayDate(){return Lt.now().toJSDate()}static{this.\u0275fac=function(r){return new(r||t)(d(Et),d(Y),d(It),d(Rt),d(ut))}}static{this.\u0275cmp=O({type:t,selectors:[["app-dashboard"]],standalone:!1,decls:95,vars:34,consts:[["side","start","type","push","contentId","ibf-dashboard-interface","menuId","dev-control"],["menu","dev-control"],["data-testid","dashboard-dev-control-close-button","slot","start"],["name","chevron-back-outline"],[3,"translate"],[1,"ion-no-padding"],["lines","full","target","_blank",3,"href"],[1,"ion-align-items-center"],["href","/log","lines","full","target","_blank",3,"translate"],["href","/status-report","lines","full","target","_blank",3,"translate"],["id","ibf-dashboard-interface","data-testid","ibf-dashboard-interface",1,"ibf-dashboard-interface"],[1,"ion-no-border",2,"border-bottom","1px solid var(--ion-color-ibf-no-alert-primary)"],["slot","start"],["data-testid","dashboard-home-button","title","Home"],["name","apps","slot","icon-only"],["data-testid","dashboard-dev-control-button"],[3,"isLoggedIn"],[2,"position","fixed","top","80px","right","10px","background","rgba(0,0,0,0.9)","color","white","padding","10px","border-radius","5px","z-index","9999","font-size","11px","max-width","320px","font-family","monospace"],[2,"color","#4ade80"],[2,"color","#10b981"],[2,"margin","5px 0","border-color","#444"],[2,"color","#fbbf24"],[2,"font-size","10px","color","#94a3b8"],[1,"page-structure","ion-no-padding"],[1,"page-structure--content"],["sizeXs","12","sizeMd","3","sizeLg","3","sizeXl","3",1,"ibf-dashboard-left-column","ion-no-padding"],["data-testid","dashboard-top-bar",1,"component-title","ion-justify-content-start","ion-align-items-center"],[2,"margin-left","8px"],[2,"margin-left","8px","display","flex","flex-direction","column","align-items","flex-start"],[2,"font-size","18px"],[2,"font-size","12px"],[1,"component-content"],["sizeXs","12","sizeMd","9","sizeLg","9","sizeXl","9",1,"ibf-dashboard-right-column","ion-no-padding"],[1,"button-border-line"],["data-testid","dashboard-aggregate-section","sizeXs","12","sizeMd","3","sizeLg","3","sizeXl","3",1,"ibf-dashboard-right-column-left-sub-column"],[1,"ibf-dashboard-right-column-left-sub-column-grid","ion-no-padding"],[1,"margin-top-auto"],["sizeXs","12","sizeMd","9","sizeLg","9","sizeXl","9"],["id","ibf-dashboard-map"],["data-testid","dashboard-map-componenet"]],template:function(r,a){r&1&&(i(0,"ion-menu",0)(1,"ion-menu-toggle",1)(2,"ion-header")(3,"ion-toolbar")(4,"ion-buttons",2),s(5,"ion-icon",3),e(),s(6,"ion-title",4),e()()(),i(7,"ion-content")(8,"ion-list",5)(9,"ion-item",6)(10,"ion-label"),c(11),h(12,"translate"),e(),i(13,"ion-text"),c(14),e()(),s(15,"app-country-switcher",7)(16,"app-backend-mock-scenario",7),e(),i(17,"ion-list",5),s(18,"ion-item",8),e(),i(19,"ion-list",5),s(20,"ion-item",9),e()()(),i(21,"div",10)(22,"ion-header",11)(23,"ion-toolbar")(24,"ion-buttons",12)(25,"ion-button",13),s(26,"ion-icon",14),e(),i(27,"ion-menu-toggle",1)(28,"ion-button",15),s(29,"ion-icon",14),e()()(),s(30,"app-user-state",16),e(),s(31,"app-disclaimer-toolbar"),e(),i(32,"ion-content")(33,"div",17)(34,"div")(35,"strong"),c(36,"\u{1F50D} Enhanced Debug Info"),e()(),i(37,"div",18),c(38,"\u2705 Dashboard Template: RENDERED"),e(),i(39,"div",19),c(40,"\u2705 Change Detection: Active"),e(),i(41,"div"),c(42),e(),i(43,"div"),c(44),e(),i(45,"div"),c(46),e(),i(47,"div"),c(48),e(),s(49,"hr",20),i(50,"div",21)(51,"strong"),c(52,"\u26A1 Status"),e()(),i(53,"div",22),c(54,"Template is rendering!"),e(),i(55,"div",22),c(56,"OnPush change detection working"),e(),i(57,"div",22),c(58,"Check console for details"),e()(),i(59,"ion-grid",23)(60,"ion-row",24)(61,"ion-col",25)(62,"ion-row",26)(63,"div",27),s(64,"app-disaster-type"),e(),i(65,"div",28)(66,"ion-text",29)(67,"strong"),c(68),h(69,"date"),e()(),i(70,"ion-text",30),c(71),h(72,"date"),e()()(),i(73,"ion-row",31)(74,"ion-col",5),s(75,"app-chat"),e()()(),i(76,"ion-col",32)(77,"ion-row")(78,"ion-col"),s(79,"app-timeline",33),e()(),i(80,"ion-row",31)(81,"ion-col",34)(82,"ion-content")(83,"ion-grid",35)(84,"ion-row")(85,"ion-col"),s(86,"app-aggregates"),e()(),i(87,"ion-row",36)(88,"ion-col"),s(89,"app-areas-of-focus-summary"),e()()()()(),i(90,"ion-col",37),s(91,"app-matrix"),i(92,"ion-content",38),s(93,"app-map-controls")(94,"app-map",39),e()()()()()()()()),r&2&&(o(6),u("translate","dashboard-page.dev-menu.title"),o(3),y("ion-hide",!a.isDev),mt("href","https://github.com/rodekruis/IBF-system/releases/tag/",a.version,""),o(2),b(C(12,26,"common.version")),o(3),b(a.version),o(2),y("ion-hide",!a.isDev),o(),y("ion-hide",!a.isDev),o(),u("translate","activation-page.activation-report"),o(),y("ion-hide",!a.isDev),o(),u("translate","status-report-page.dev-menu-link"),o(5),y("ion-hide",a.isDev||a.isMultiCountry),o(2),y("ion-hide",!a.isDev&&!a.isMultiCountry),o(3),u("isLoggedIn",!0),o(12),f("isDev: ",a.isDev,""),o(2),f("isMultiCountry: ",a.isMultiCountry,""),o(2),f("templateRendered: ",a.templateRendered,""),o(2),f("Version: ",a.version,""),o(20),b(tt(69,28,a.getTodayDate(),"d LLL y")),o(3),b(tt(72,31,a.getTodayDate(),"EEEE, HH:mm z")))},dependencies:[I,D,$,U,_t,T,E,Mt,Pt,St,xt,Ot,G,K,wt,k,Ht,Vt,$t,Gt,Kt,Xt,F,qt,Nt,Yt,Zt,Ct,L,ht,w],styles:[".debug-container[_ngcontent-%COMP%]{outline:1px dashed hotpink}.debug-placeholder[_ngcontent-%COMP%]{display:flex}.debug-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}#ibf-dashboard-map[_ngcontent-%COMP%]{pointer-events:all!important}#ibf-dashboard-mapibf-dashboard[_nghost-%COMP%], ibf-dashboard   [_nghost-%COMP%]{min-height:400px;height:100%;width:100%}ibf-dashboard[_nghost-%COMP%]   .ibf-dashboard-interface[_ngcontent-%COMP%], ibf-dashboard   [_nghost-%COMP%]   .ibf-dashboard-interface[_ngcontent-%COMP%]{min-height:500px;height:100%}ibf-dashboard[_nghost-%COMP%]   .page-structure--content[_ngcontent-%COMP%], ibf-dashboard   [_nghost-%COMP%]   .page-structure--content[_ngcontent-%COMP%]{min-height:400px}ibf-dashboard[_nghost-%COMP%]   app-map[_ngcontent-%COMP%], ibf-dashboard   [_nghost-%COMP%]   app-map[_ngcontent-%COMP%]{min-height:400px;height:100%}.ibf-dashboard-interface[_ngcontent-%COMP%]{height:100%;overflow:auto;display:flex;flex-direction:column}ion-menu[_ngcontent-%COMP%]   ion-menu-toggle[_ngcontent-%COMP%]{cursor:pointer}app-export-view[_ngcontent-%COMP%]{display:flex;height:100%}.today-date[_ngcontent-%COMP%]{height:40px;margin-top:0;margin-bottom:0;margin-left:0;padding-left:0}.page-structure[_ngcontent-%COMP%]{min-height:100%;display:flex;flex-flow:column nowrap}.embedded[_nghost-%COMP%]   .page-structure[_ngcontent-%COMP%], .embedded   [_nghost-%COMP%]   .page-structure[_ngcontent-%COMP%]{min-height:600px!important;height:100%!important}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]{flex-grow:1}.embedded[_nghost-%COMP%]   .page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%], .embedded   [_nghost-%COMP%]   .page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]{min-height:500px!important}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.embedded[_nghost-%COMP%]   .page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%], .embedded   [_nghost-%COMP%]   .page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]{min-height:500px!important}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]   .component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]{--background: transparent;--height: 40px;--min-height: 40px;--inner-padding-end: 0px}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]   .component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{text-transform:uppercase;opacity:1;padding-inline-start:0px;height:60%;margin:0}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]   .component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   app-date-button[_ngcontent-%COMP%]{background-color:var(--ion-color-ibf-primary);color:var(--ion-color-ibf-primary-contrast);border:var(--ion-color-ibf-primary-contrast);height:38px;width:70px;font-weight:700;padding:5px}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]   .component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   .button-border-line[_ngcontent-%COMP%]{border-bottom-color:2px solid var(--ion-color-ibf-primary);border-bottom:var(--ion-color-ibf-primary);border-bottom:solid rgb(83,7,224);border-width:2px;background-color:var(--ion-color-ibf-primary-contrast)}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]   .component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]   .component-title-thumbnail[_ngcontent-%COMP%]{height:24px;width:24px;display:none}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-left-column[_ngcontent-%COMP%]   .component-content[_ngcontent-%COMP%]{flex-grow:1}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-right-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-right-column[_ngcontent-%COMP%]   .component-content[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-right-column[_ngcontent-%COMP%]   .component-content[_ngcontent-%COMP%]   .ibf-dashboard-right-column-left-sub-column[_ngcontent-%COMP%]{display:flex;--ion-background-color: var(--ion-color-fiveten-neutral-100)}.page-structure[_ngcontent-%COMP%]   .page-structure--content[_ngcontent-%COMP%]   .ibf-dashboard-right-column[_ngcontent-%COMP%]   .component-content[_ngcontent-%COMP%]   .ibf-dashboard-right-column-left-sub-column[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   .ibf-dashboard-right-column-left-sub-column-grid[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;overflow:auto;height:100%}"],changeDetection:0})}}return t})();var he=()=>["/"],ne=(t,m)=>m.key;function fe(t,m){if(t&1&&(i(0,"div",11),s(1,"img",12),i(2,"span",13),c(3),e()()),t&2){let n=m.$implicit,r=S().$implicit;u("id","country--"+r.key+"--"+n.key),o(),u("src",n.value.imgSrc,lt),o(),y("danger",n.value.isStale),o(),b(n.value.date)}}function be(t,m){if(t&1&&(i(0,"div",9)(1,"div",10),c(2),e(),M(3,fe,4,5,"div",11,ne),h(5,"keyvalue"),e()),t&2){let n=m.$implicit;o(),u("id","country--"+n.key),o(),f(" ",n.key," "),o(),P(C(5,2,n.value))}}var ie=(()=>{class t{constructor(n,r,a,v){this.apiService=n,this.countryService=r,this.eventService=a,this.translate=v,this.statusData={},this.onGetAllCountries=g=>{for(let l of g){this.statusData[l.countryCodeISO3]={};let p=l.disasterTypes;for(let _ of p)this.statusData[l.countryCodeISO3][_.disasterType]={imgSrc:"",date:"",isStale:!0},this.apiService.getLastUploadDate(l.countryCodeISO3,_.disasterType).subscribe(W=>{this.onLastUploadDate(W,l.countryCodeISO3,_)})}},this.onLastUploadDate=(g,l,p)=>{this.statusData[l][p.disasterType].date=g?.timestamp?Bt(ot(g?.timestamp),"yyyy-MM-dd HH:mm"):this.translate.instant("status-report-page.no-data"),this.statusData[l][p.disasterType].isStale=g?.timestamp?this.eventService.isLastUploadDateLate(ot(g.timestamp),p):!0,this.apiService.getEvents(l,p.disasterType).subscribe(_=>{this.onGetEvents(_,l,p.disasterType)})},this.onGetEvents=(g,l,p)=>{let _=g.some(({alertLevel:W})=>W===jt.TRIGGER);this.statusData[l][p].imgSrc=_?it[p].selectedTriggered:it[p].selectedNonTriggered}}ngOnInit(){return x(this,null,function*(){this.countryService.getAllCountries().subscribe(n=>{this.onGetAllCountries(n)})})}static{this.\u0275fac=function(r){return new(r||t)(d(q),d(kt),d(zt),d(H))}}static{this.\u0275cmp=O({type:t,selectors:[["app-status-report"]],standalone:!1,decls:17,vars:9,consts:[[1,"ion-no-border"],["slot","start"],["title","Home",3,"routerLink"],["name","apps","slot","icon-only"],[3,"isLoggedIn","showCountry"],[1,"ion-padding-horizontal"],["id","report"],["id","today"],["id","countries"],[1,"country"],[1,"country--name",3,"id"],[1,"disaster",3,"id"],[1,"disaster--logo",3,"src"],[1,"disaster--date"]],template:function(r,a){r&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),s(4,"ion-icon",3),e()(),s(5,"app-user-state",4),e(),s(6,"app-disclaimer-toolbar"),e(),i(7,"ion-content",5)(8,"div",6)(9,"h1"),c(10),h(11,"translate"),e(),s(12,"h2",7),i(13,"div",8),M(14,be,6,4,"div",9,ne),h(16,"keyvalue"),e()()()),r&2&&(o(3),u("routerLink",z(8,he)),o(2),u("isLoggedIn",!0)("showCountry",!1),o(5),b(C(11,4,"status-report-page.page-title")),o(4),P(C(16,6,a.statusData)))},dependencies:[I,D,U,T,E,k,X,F,L,V,ft,w],styles:['@font-face{font-family:Inter;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v19/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2JL7SUc.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Inter;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v19/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa0ZL7SUc.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Inter;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v19/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2ZL7SUc.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Inter;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v19/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1pL7SUc.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Inter;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v19/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa2pL7SUc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Inter;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v19/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa25L7SUc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Inter;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v19/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1ZL7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Inter,sans-serif;font-weight:400}#report[_ngcontent-%COMP%]{padding:.5rem}#countries[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.country[_ngcontent-%COMP%]{width:31%;margin:0 2% 2% 0;padding:1%;border:1px solid #ccc;border-radius:4px}.country--name[_ngcontent-%COMP%]{margin-bottom:1rem}.disaster[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:.5rem 0}.disaster--logo[_ngcontent-%COMP%]{margin-right:.5rem}.danger[_ngcontent-%COMP%]{color:red}']})}}return t})();var Ce=[{path:"",component:ee},{path:"log",component:J},{path:"status-report",component:ie}],oe=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=R({type:t})}static{this.\u0275inj=A({imports:[et.forChild(Ce),et]})}}return t})();var pn=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=R({type:t})}static{this.\u0275inj=A({imports:[bt,yt,Ut,Jt,oe]})}}return t})();gt(J,[I,D,$,U,T,E,G,K,k,X,F,L,V],[w]);export{pn as DashboardPageModule};
