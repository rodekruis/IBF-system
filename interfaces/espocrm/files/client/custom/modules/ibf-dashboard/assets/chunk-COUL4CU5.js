import{A as re,a as C,b as X,c as Z,d as ee,s as te,x as ie,y as ne,z as oe}from"./chunk-LHYVP2FA.js";import{$ as A,E as v,Ea as Q,Ga as W,Ja as d,R as z,Z as j,_ as F,aa as G,ba as H,ca as N,cb as b,da as R,fa as U,ga as V,ha as Y,ia as $,ja as q,k as B,ta as J,x as D,y as k,za as K}from"./chunk-PDTEAZI5.js";import{Ab as O,Bb as T,Cb as o,Db as a,E as _,Eb as r,Lb as w,Ma as I,Mb as E,Qb as L,Ra as i,U as g,Wb as h,Yb as y,Za as f,cb as x,db as u,kc as p,lc as m,ub as s,zb as S}from"./chunk-IZSDXEDD.js";import"./chunk-6Y6TZ5DU.js";import"./chunk-B5XQ7TKQ.js";import"./chunk-2ZTJ4CQE.js";import"./chunk-4TS7RF7E.js";import"./chunk-CKHRE3EB.js";import"./chunk-NJKHWUZQ.js";import"./chunk-RR6ROPEN.js";import"./chunk-UX77KJ7N.js";import"./chunk-EOLXYSZT.js";import"./chunk-VPSQTYI3.js";import"./chunk-NQOZPK3S.js";import"./chunk-3VPKZZES.js";import"./chunk-55MUSWHY.js";import"./chunk-JKOCDGOA.js";import"./chunk-PJKO2XHO.js";import"./chunk-RUGFDS43.js";import"./chunk-P4HVPFJD.js";import"./chunk-O23PZQDP.js";import"./chunk-CZNOOQK5.js";import"./chunk-RGXYJBLP.js";import"./chunk-UFB7CFK7.js";import"./chunk-IIGIEWRB.js";import"./chunk-DTON4BNA.js";import"./chunk-74OYS3EQ.js";import{g as M}from"./chunk-2R6CW7ES.js";function de(e,le){if(e&1&&(o(0,"span",9),r(1,"ion-icon",18),a()),e&2){let n=le.$implicit,t=E();i(),s("src",t.getIconByCountry(n))("title",n)}}var se=(()=>{class e{constructor(n,t,c){this.popoverController=n,this.analyticsService=t,this.countryService=c,this.version=d.ibfSystemVersion,this.envDisasterTypes=[],this.allDisasterTypes=[],this.disasterTypeMap=b,this.environmentConfiguration=d.configuration,this.analyticsLogged=!1,this.getIconByCountry=l=>this.envDisasterTypes?.includes(l)?this.disasterTypeMap[l].selectedNonTriggered:this.disasterTypeMap[l].disabled,this.onGetAllCountries=l=>{l.forEach(pe=>{pe.disasterTypes.forEach(P=>{this.envDisasterTypes.find(me=>me===P.disasterType)||this.envDisasterTypes.push(P.disasterType)})})}}ngOnInit(){this.analyticsLogged||(this.analyticsService.logPageView(C.login),this.analyticsLogged=!0),this.allDisasterTypes=Object.keys(b),this.countriesSubscription=this.countryService.getAllCountries().pipe(_(1)).subscribe(this.onGetAllCountries)}ngOnDestroy(){this.countriesSubscription&&this.countriesSubscription.unsubscribe(),this.countrySubscription&&this.countrySubscription.unsubscribe()}presentPopover(){return M(this,null,function*(){let n=yield this.popoverController.create({component:ne,componentProps:{videoUrl:d.ibfVideoGuideUrl,pdfUrl:d.ibfPdfGuideUrl},animated:!0,cssClass:"ibf-popover ibf-popover-large",translucent:!0,showBackdrop:!0});this.analyticsService.logEvent(X.watchIbfGuide,{page:C.login,component:this.constructor.name}),n.present()})}static{this.\u0275fac=function(t){return new(t||e)(f(Q),f(ee),f(Z))}}static{this.\u0275cmp=x({type:e,selectors:[["app-login"]],standalone:!1,decls:34,vars:18,consts:[[1,"ion-no-border"],["slot","start"],["href","/",3,"title"],["name","apps","slot","icon-only"],[3,"isLoggedIn"],["slot","end"],["target","_blank",3,"href","title"],[1,"ion-justify-content-center","ion-align-items-center"],["size-xs","12","size-sm","11","size-md","9","size-lg","7","size-xl","6"],["data-test","disaster-Type",1,"container"],["color","ibf-no-alert-primary",1,"ibf-welcome-card"],["src","assets/icons/IBF_Impact_Based_Forecast_Logo_32x32.svg"],["data-testid","login-welcome-message",3,"translate"],[3,"translate"],["expand","full","shape","round","color","fiveten-neutral-0","size","small",3,"click"],[3,"innerHtml"],[1,"ibf-login-card"],["name","person","color","ibf-no-alert-primary",1,"person"],["slot","start",1,"disaster-type-icon",3,"src","title"]],template:function(t,c){t&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),p(4,"translate"),r(5,"ion-icon",3),a()(),r(6,"app-user-state",4),o(7,"ion-buttons",5)(8,"ion-button",6),p(9,"translate"),h(10),a()()(),r(11,"app-disclaimer-toolbar"),a(),o(12,"ion-content")(13,"ion-grid")(14,"ion-row",7)(15,"ion-col",8),O(16,de,2,2,"span",9,S),o(18,"ion-card",10),r(19,"ion-icon",11),o(20,"ion-card-header"),r(21,"ion-card-title",12)(22,"ion-card-subtitle",13),a(),o(23,"ion-card-content")(24,"ion-button",14),w("click",function(){return c.presentPopover()}),h(25),p(26,"translate"),a(),r(27,"br")(28,"span",15),p(29,"translate"),a()(),o(30,"ion-card",16),r(31,"ion-icon",17),o(32,"ion-card-content"),r(33,"app-login-form"),a()()()()()()),t&2&&(i(3),s("title",m(4,10,"app-name")),i(3),s("isLoggedIn",!1),i(2),L("href","https://github.com/rodekruis/IBF-system/releases/tag/",c.version,""),s("title",m(9,12,"common.version")+" "+c.version),i(2),y(" ",c.version," "),i(6),T(c.allDisasterTypes),i(5),s("translate","login-page.welcome"),i(),s("translate","login-page.instruction"),i(3),y(" ",m(26,14,"ibf-guide-component.title")," "),i(3),s("innerHtml",m(29,16,"login-page.note"),I))},dependencies:[j,F,A,G,H,N,R,U,V,Y,$,q,J,K,te,oe,D,ie,k],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-ibf-grey-light)}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{min-height:80vh;display:flex;flex-direction:column}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin:auto 0}.ibf-welcome-card[_ngcontent-%COMP%]{overflow:visible;margin-left:64px}.ibf-welcome-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{cursor:pointer}.ibf-welcome-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]:hover{text-decoration:underline}.ibf-welcome-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;position:absolute;left:-50px}.ibf-login-card[_ngcontent-%COMP%]{overflow:visible;margin-right:64px}.ibf-login-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;background:var(--ion-color-ibf-no-alert-primary-contrast);border-radius:50%;padding:6px;position:absolute;right:-48px}.ibf-login-card[_ngcontent-%COMP%]   ion-icon.person[_ngcontent-%COMP%]{font-size:34px!important}.container[_ngcontent-%COMP%]{text-align:center;margin-left:20px}.disaster-type-icon[_ngcontent-%COMP%]{height:32px;width:32px;margin:0 5px;padding-right:10px}"]})}}return e})();var ge=[{path:"",component:se}],ce=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=g({imports:[v.forChild(ge),v]})}}return e})();var Ge=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=g({imports:[B,z,W,re,ce]})}}return e})();export{Ge as LoginPageModule};
