<div class="ibf-map-layer-control">
  <ion-menu-toggle
    menu="layer-control"
    (click)="isLayerControlMenuOpen()"
    [class.ion-hide]="!showLayerControlToggleButton"
  >
    <ion-header>
      <ion-toolbar color="ibf-royal-blue">
        <ion-buttons slot="end">
          <ion-icon name="chevron-back-outline"></ion-icon>
        </ion-buttons>
        <ion-title>Layers</ion-title>
      </ion-toolbar>
    </ion-header>
  </ion-menu-toggle>
  <ion-menu
    side="end"
    type="overlay"
    contentId="ibf-dashboard-map"
    menuId="layer-control"
  >
    <ion-menu-toggle menu="layer-control" (click)="isLayerControlMenuOpen()">
      <ion-header>
        <ion-toolbar color="ibf-royal-blue">
          <ion-buttons slot="end">
            <ion-icon name="chevron-forward-outline"></ion-icon>
          </ion-buttons>
          <ion-title>Layers</ion-title>
        </ion-toolbar>
      </ion-header>
    </ion-menu-toggle>
    <ion-content>
      <ion-list color="dark" class="ion-no-padding">
        <ion-item
          lines="full"
          *ngFor="let layer of layers"
          [class.layer-active]="layer.active"
          (click)="updateLayer(layer.name, !layer.active)"
          class="ion-no-padding"
        >
          <ion-row>
            <ion-col size="6" class="layer-control-label-col">
              <ion-item lines="none" class="ion-no-padding">
                <ion-label class="ion-no-margin ion-text-wrap">
                  {{ layer.label }}
                </ion-label>
              </ion-item>
            </ion-col>
            <ion-col
              size="3"
              class="layer-control-legend-col"
              [class.point-layer]="
                layer.type === IbfLayerType.point && layer.active
              "
              [style.background]="layer.active ? layer.legendColor : null"
            ></ion-col>
            <ion-col
              size="3"
              class="layer-control-info-col ion-align-items-center ion-justify-content-center"
            >
              <ion-icon
                name="information-circle"
                size="large"
                color="light"
                class="layer-control-info-icon"
                (click)="presentPopover($event, layer)"
              ></ion-icon>
            </ion-col>
          </ion-row>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>
</div>
