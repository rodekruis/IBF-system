<ion-app id="app" data-testid="app" [class.embedded]="isEmbedded">
  <!-- Always render router-outlet to prevent infinite recreation loops -->
  <router-outlet></router-outlet>
  
  <!-- Show loader overlay when loading, without destroying router-outlet -->
  @if (loading) {
    <div class="loader" data-testid="loader">
      <ion-spinner color="light"></ion-spinner>
    </div>
  }
</ion-app>
