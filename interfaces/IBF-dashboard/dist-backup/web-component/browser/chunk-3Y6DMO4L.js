import{$ as bi,$a as i1,A as IC,Ba as YC,C as PC,Ca as Qp,Da as BC,Ea as at,Fa as zC,Ga as UC,Ha as HC,J as Ql,Ja as Ut,K as ec,L as tc,La as Pv,M as ic,Ma as fi,N as nc,Na as VC,O as Up,Oa as GC,P as Hp,Pa as WC,Q as LC,Qa as ZC,R as AC,Ra as Lv,Sa as jC,Ta as $C,Ua as qC,Va as XC,W as Vp,Wa as JC,X as OC,Xa as KC,Y as Gp,Ya as QC,Z as Ke,Za as e1,_a as t1,aa as xi,ab as n1,ba as Zi,bb as r1,cb as o1,d as ya,da as ji,db as Vn,e as xC,ea as Wp,eb as rn,f as DC,fa as uo,fb as a1,g as Sa,ga as Zp,gb as Di,h as wC,ha as jp,hb as Nn,ja as Ze,k as Bp,ka as $p,la as qp,ma as Ot,na as si,oa as rc,ra as Xp,sa as MC,ta as dr,u as zp,ua as kC,va as RC,w as qt,wa as ho,x as NC,xa as Jp,y as Oe,ya as Kp,z as Iv,za as FC}from"./chunk-ZW3JXNCZ.js";import{$b as bv,Ab as Bt,Bb as zt,C as aC,Cb as D,Db as x,Eb as X,Fb as Mp,Gb as kp,Hb as mC,Ib as Ye,L as jl,Lb as oe,Ma as ot,Mb as B,Na as $l,Nb as _C,Oa as uC,Ob as vC,Pb as Jl,Qa as dC,Qb as lo,Ra as E,Sb as Rp,T as Nt,Tb as Fp,U as ma,Ub as Yp,Vb as Kl,Wa as hC,Wb as M,Xb as be,Y as Se,Yb as ne,Za as P,Zb as ga,_b as gC,ac as xv,bc as Dv,cb as ce,da as Et,db as _a,dc as yC,ea as _e,eb as Ap,ec as SC,fa as ve,fb as pC,fc as It,g as Zt,ga as sC,gc as CC,hb as se,hc as EC,ic as wv,ja as lC,jc as Nv,kc as Y,l as iC,lc as Z,mc as Je,na as Oi,nc as TC,oa as Tv,p as nC,pc as bC,qc as co,ra as cC,sb as fC,tb as Op,ub as W,v as rC,vb as va,wb as Ti,xb as ql,yb as re,z as oC,zb as Xl}from"./chunk-IZSDXEDD.js";import{a as Te,b as Ei,d as Ev,e as tC,f as Zl,g as ft}from"./chunk-2R6CW7ES.js";var zu=tC((k_,CD)=>{(function(e,n){typeof k_=="object"&&typeof CD<"u"?n(k_):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.leaflet={}))})(k_,function(e){"use strict";var n="1.9.4";function t(r){var a,c,h,_;for(c=1,h=arguments.length;c<h;c++){_=arguments[c];for(a in _)r[a]=_[a]}return r}var i=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function o(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var h=c.call(arguments,2);return function(){return r.apply(a,h.length?h.concat(c.call(arguments)):arguments)}}var s=0;function l(r){return"_leaflet_id"in r||(r._leaflet_id=++s),r._leaflet_id}function u(r,a,c){var h,_,y,w;return w=function(){h=!1,_&&(y.apply(c,_),_=!1)},y=function(){h?_=arguments:(r.apply(c,arguments),setTimeout(w,a),h=!0)},y}function d(r,a,c){var h=a[1],_=a[0],y=h-_;return r===h&&c?r:((r-_)%y+y)%y+_}function f(){return!1}function p(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function m(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function g(r){return m(r).split(/\s+/)}function v(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?i(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function C(r,a,c){var h=[];for(var _ in r)h.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(r[_]));return(!a||a.indexOf("?")===-1?"?":"&")+h.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function b(r,a){return r.replace(T,function(c,h){var _=a[h];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(a)),_})}var S=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function I(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var U="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function j(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var k=0;function De(r){var a=+new Date,c=Math.max(0,16-(a-k));return k=a+c,window.setTimeout(r,c)}var $=window.requestAnimationFrame||j("RequestAnimationFrame")||De,yt=window.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function He(r,a,c){if(c&&$===De)r.call(a);else return $.call(window,o(r,a))}function ct(r){r&&yt.call(window,r)}var Ce={__proto__:null,extend:t,create:i,bind:o,get lastId(){return s},stamp:l,throttle:u,wrapNum:d,falseFn:f,formatNum:p,trim:m,splitWords:g,setOptions:v,getParamString:C,template:b,isArray:S,indexOf:I,emptyImageUrl:U,requestFn:$,cancelFn:yt,requestAnimFrame:He,cancelAnimFrame:ct};function Wt(){}Wt.extend=function(r){var a=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,h=i(c);h.constructor=a,a.prototype=h;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(a[_]=this[_]);return r.statics&&t(a,r.statics),r.includes&&(Hi(r.includes),t.apply(null,[h].concat(r.includes))),t(h,r),delete h.statics,delete h.includes,h.options&&(h.options=c.options?i(c.options):{},t(h.options,r.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,w=h._initHooks.length;y<w;y++)h._initHooks[y].call(this)}},a},Wt.include=function(r){var a=this.prototype.options;return t(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Wt.mergeOptions=function(r){return t(this.prototype.options,r),this},Wt.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Hi(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=S(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Pt={on:function(r,a,c){if(typeof r=="object")for(var h in r)this._on(h,r[h],a);else{r=g(r);for(var _=0,y=r.length;_<y;_++)this._on(r[_],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var h in r)this._off(h,r[h],a);else{r=g(r);for(var _=arguments.length===1,y=0,w=r.length;y<w;y++)_?this._off(r[y]):this._off(r[y],a,c)}return this},_on:function(r,a,c,h){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var _={fn:a,ctx:c};h&&(_.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(_)}},_off:function(r,a,c){var h,_,y;if(this._events&&(h=this._events[r],!!h)){if(arguments.length===1){if(this._firingCount)for(_=0,y=h.length;_<y;_++)h[_].fn=f;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var w=this._listens(r,a,c);if(w!==!1){var O=h[w];this._firingCount&&(O.fn=f,this._events[r]=h=h.slice()),h.splice(w,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var h=t({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var _=this._events[r];if(_){this._firingCount=this._firingCount+1||1;for(var y=0,w=_.length;y<w;y++){var O=_[y],z=O.fn;O.once&&this.off(r,z,O.ctx),z.call(O.ctx||this,h)}this._firingCount--}}return c&&this._propagateEvent(h),this},listens:function(r,a,c,h){typeof r!="string"&&console.warn('"string" type argument expected');var _=a;typeof a!="function"&&(h=!!a,_=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,_,c)!==!1)return!0;if(h){for(var w in this._eventParents)if(this._eventParents[w].listens(r,a,c,h))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var h=this._events[r]||[];if(!a)return!!h.length;c===this&&(c=void 0);for(var _=0,y=h.length;_<y;_++)if(h[_].fn===a&&h[_].ctx===c)return _;return!1},once:function(r,a,c){if(typeof r=="object")for(var h in r)this._on(h,r[h],a,!0);else{r=g(r);for(var _=0,y=r.length;_<y;_++)this._on(r[_],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[l(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[l(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,t({layer:r.target,propagatedFrom:r.target},r),!0)}};Pt.addEventListener=Pt.on,Pt.removeEventListener=Pt.clearAllEventListeners=Pt.off,Pt.addOneTimeEventListener=Pt.once,Pt.fireEvent=Pt.fire,Pt.hasEventListeners=Pt.listens;var Vi=Wt.extend(Pt);function Pe(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var Gi=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};Pe.prototype={clone:function(){return new Pe(this.x,this.y)},add:function(r){return this.clone()._add(ge(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(ge(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new Pe(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new Pe(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Gi(this.x),this.y=Gi(this.y),this},distanceTo:function(r){r=ge(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=ge(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=ge(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function ge(r,a,c){return r instanceof Pe?r:S(r)?new Pe(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new Pe(r.x,r.y):new Pe(r,a,c)}function qe(r,a){if(r)for(var c=a?[r,a]:r,h=0,_=c.length;h<_;h++)this.extend(c[h])}qe.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof Pe||typeof r[0]=="number"||"x"in r)a=c=ge(r);else if(r=F(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return ge((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return ge(this.min.x,this.max.y)},getTopRight:function(){return ge(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof Pe?r=ge(r):r=F(r),r instanceof qe?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=F(r);var a=this.min,c=this.max,h=r.min,_=r.max,y=_.x>=a.x&&h.x<=c.x,w=_.y>=a.y&&h.y<=c.y;return y&&w},overlaps:function(r){r=F(r);var a=this.min,c=this.max,h=r.min,_=r.max,y=_.x>a.x&&h.x<c.x,w=_.y>a.y&&h.y<c.y;return y&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,h=Math.abs(a.x-c.x)*r,_=Math.abs(a.y-c.y)*r;return F(ge(a.x-h,a.y-_),ge(c.x+h,c.y+_))},equals:function(r){return r?(r=F(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function F(r,a){return!r||r instanceof qe?r:new qe(r,a)}function Q(r,a){if(r)for(var c=a?[r,a]:r,h=0,_=c.length;h<_;h++)this.extend(c[h])}Q.prototype={extend:function(r){var a=this._southWest,c=this._northEast,h,_;if(r instanceof H)h=r,_=r;else if(r instanceof Q){if(h=r._southWest,_=r._northEast,!h||!_)return this}else return r?this.extend(G(r)||A(r)):this;return!a&&!c?(this._southWest=new H(h.lat,h.lng),this._northEast=new H(_.lat,_.lng)):(a.lat=Math.min(h.lat,a.lat),a.lng=Math.min(h.lng,a.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,h=Math.abs(a.lat-c.lat)*r,_=Math.abs(a.lng-c.lng)*r;return new Q(new H(a.lat-h,a.lng-_),new H(c.lat+h,c.lng+_))},getCenter:function(){return new H((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new H(this.getNorth(),this.getWest())},getSouthEast:function(){return new H(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof H||"lat"in r?r=G(r):r=A(r);var a=this._southWest,c=this._northEast,h,_;return r instanceof Q?(h=r.getSouthWest(),_=r.getNorthEast()):h=_=r,h.lat>=a.lat&&_.lat<=c.lat&&h.lng>=a.lng&&_.lng<=c.lng},intersects:function(r){r=A(r);var a=this._southWest,c=this._northEast,h=r.getSouthWest(),_=r.getNorthEast(),y=_.lat>=a.lat&&h.lat<=c.lat,w=_.lng>=a.lng&&h.lng<=c.lng;return y&&w},overlaps:function(r){r=A(r);var a=this._southWest,c=this._northEast,h=r.getSouthWest(),_=r.getNorthEast(),y=_.lat>a.lat&&h.lat<c.lat,w=_.lng>a.lng&&h.lng<c.lng;return y&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=A(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function A(r,a){return r instanceof Q?r:new Q(r,a)}function H(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}H.prototype={equals:function(r,a){if(!r)return!1;r=G(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+p(this.lat,r)+", "+p(this.lng,r)+")"},distanceTo:function(r){return N.distance(this,G(r))},wrap:function(){return N.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return A([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new H(this.lat,this.lng,this.alt)}};function G(r,a,c){return r instanceof H?r:S(r)&&typeof r[0]!="object"?r.length===3?new H(r[0],r[1],r[2]):r.length===2?new H(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new H(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new H(r,a,c)}var de={latLngToPoint:function(r,a){var c=this.projection.project(r),h=this.scale(a);return this.transformation._transform(c,h)},pointToLatLng:function(r,a){var c=this.scale(a),h=this.transformation.untransform(r,c);return this.projection.unproject(h)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),h=this.transformation.transform(a.min,c),_=this.transformation.transform(a.max,c);return new qe(h,_)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?d(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?d(r.lat,this.wrapLat,!0):r.lat,h=r.alt;return new H(c,a,h)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),h=a.lat-c.lat,_=a.lng-c.lng;if(h===0&&_===0)return r;var y=r.getSouthWest(),w=r.getNorthEast(),O=new H(y.lat-h,y.lng-_),z=new H(w.lat-h,w.lng-_);return new Q(O,z)}},N=t({},de,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,h=r.lat*c,_=a.lat*c,y=Math.sin((a.lat-r.lat)*c/2),w=Math.sin((a.lng-r.lng)*c/2),O=y*y+Math.cos(h)*Math.cos(_)*w*w,z=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*z}}),V=6378137,q={R:V,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,h=Math.max(Math.min(c,r.lat),-c),_=Math.sin(h*a);return new Pe(this.R*r.lng*a,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(r){var a=180/Math.PI;return new H((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=V*Math.PI;return new qe([-r,-r],[r,r])}()};function ue(r,a,c,h){if(S(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=h}ue.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new Pe((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function we(r,a,c,h){return new ue(r,a,c,h)}var Ve=t({},N,{code:"EPSG:3857",projection:q,transformation:function(){var r=.5/(Math.PI*q.R);return we(r,.5,-r,.5)}()}),ut=t({},Ve,{code:"EPSG:900913"});function Ft(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function tn(r,a){var c="",h,_,y,w,O,z;for(h=0,y=r.length;h<y;h++){for(O=r[h],_=0,w=O.length;_<w;_++)z=O[_],c+=(_?"L":"M")+z.x+" "+z.y;c+=a?Ie.svg?"z":"x":""}return c||"M0 0"}var jt=document.documentElement.style,R="ActiveXObject"in window,J=R&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ie=ro("webkit"),le=ro("android"),Ne=ro("android 2")||ro("android 3"),ke=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),St=le&&ro("Google")&&ke<537&&!("AudioNode"in window),Ge=!!window.opera,Lt=!te&&ro("chrome"),$t=ro("gecko")&&!ie&&!Ge&&!R,Sn=!Lt&&ro("safari"),Ds=ro("phantom"),Lo="OTransition"in jt,Dn=navigator.platform.indexOf("Win")===0,Rl=R&&"transition"in jt,$_="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ne,iS="MozPerspective"in jt,ow=!window.L_DISABLE_3D&&(Rl||$_||iS)&&!Lo&&!Ds,ju=typeof orientation<"u"||ro("mobile"),aw=ju&&ie,sw=ju&&$_,nS=!window.PointerEvent&&window.MSPointerEvent,rS=!!(window.PointerEvent||nS),oS="ontouchstart"in window||!!window.TouchEvent,lw=!window.L_NO_TOUCH&&(oS||rS),cw=ju&&Ge,uw=ju&&$t,dw=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hw=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",f,a),window.removeEventListener("testPassiveEventSupport",f,a)}catch{}return r}(),pw=function(){return!!document.createElement("canvas").getContext}(),q_=!!(document.createElementNS&&Ft("svg").createSVGRect),fw=!!q_&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),mw=!q_&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),_w=navigator.platform.indexOf("Mac")===0,vw=navigator.platform.indexOf("Linux")===0;function ro(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var Ie={ie:R,ielt9:J,edge:te,webkit:ie,android:le,android23:Ne,androidStock:St,opera:Ge,chrome:Lt,gecko:$t,safari:Sn,phantom:Ds,opera12:Lo,win:Dn,ie3d:Rl,webkit3d:$_,gecko3d:iS,any3d:ow,mobile:ju,mobileWebkit:aw,mobileWebkit3d:sw,msPointer:nS,pointer:rS,touch:lw,touchNative:oS,mobileOpera:cw,mobileGecko:uw,retina:dw,passiveEvents:hw,canvas:pw,svg:q_,vml:mw,inlineSvg:fw,mac:_w,linux:vw},aS=Ie.msPointer?"MSPointerDown":"pointerdown",sS=Ie.msPointer?"MSPointerMove":"pointermove",lS=Ie.msPointer?"MSPointerUp":"pointerup",cS=Ie.msPointer?"MSPointerCancel":"pointercancel",X_={touchstart:aS,touchmove:sS,touchend:lS,touchcancel:cS},uS={touchstart:Tw,touchmove:fp,touchend:fp,touchcancel:fp},Fl={},dS=!1;function gw(r,a,c){return a==="touchstart"&&Ew(),uS[a]?(c=uS[a].bind(this,c),r.addEventListener(X_[a],c,!1),c):(console.warn("wrong event specified:",a),f)}function yw(r,a,c){if(!X_[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(X_[a],c,!1)}function Sw(r){Fl[r.pointerId]=r}function Cw(r){Fl[r.pointerId]&&(Fl[r.pointerId]=r)}function hS(r){delete Fl[r.pointerId]}function Ew(){dS||(document.addEventListener(aS,Sw,!0),document.addEventListener(sS,Cw,!0),document.addEventListener(lS,hS,!0),document.addEventListener(cS,hS,!0),dS=!0)}function fp(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Fl)a.touches.push(Fl[c]);a.changedTouches=[a],r(a)}}function Tw(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&nn(a),fp(r,a)}function bw(r){var a={},c,h;for(h in r)c=r[h],a[h]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var xw=200;function Dw(r,a){r.addEventListener("dblclick",a);var c=0,h;function _(y){if(y.detail!==1){h=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var w=vS(y);if(!(w.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!w.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var O=Date.now();O-c<=xw?(h++,h===2&&a(bw(y))):h=1,c=O}}}return r.addEventListener("click",_),{dblclick:a,simDblclick:_}}function ww(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var J_=vp(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$u=vp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pS=$u==="webkitTransition"||$u==="OTransition"?$u+"End":"transitionend";function fS(r){return typeof r=="string"?document.getElementById(r):r}function qu(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(r,null);c=h?h[a]:null}return c==="auto"?null:c}function Tt(r,a,c){var h=document.createElement(r);return h.className=a||"",c&&c.appendChild(h),h}function Qt(r){var a=r.parentNode;a&&a.removeChild(r)}function mp(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Yl(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Bl(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function K_(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=_p(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function rt(r,a){if(r.classList!==void 0)for(var c=g(a),h=0,_=c.length;h<_;h++)r.classList.add(c[h]);else if(!K_(r,a)){var y=_p(r);Q_(r,(y?y+" ":"")+a)}}function pi(r,a){r.classList!==void 0?r.classList.remove(a):Q_(r,m((" "+_p(r)+" ").replace(" "+a+" "," ")))}function Q_(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function _p(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function lr(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Nw(r,a)}function Nw(r,a){var c=!1,h="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(h)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+h+"(opacity="+a+")"}function vp(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function ws(r,a,c){var h=a||new Pe(0,0);r.style[J_]=(Ie.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(c?" scale("+c+")":"")}function Si(r,a){r._leaflet_pos=a,Ie.any3d?ws(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function Ns(r){return r._leaflet_pos||new Pe(0,0)}var Xu,Ju,ev;if("onselectstart"in document)Xu=function(){Xe(window,"selectstart",nn)},Ju=function(){Yt(window,"selectstart",nn)};else{var Ku=vp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xu=function(){if(Ku){var r=document.documentElement.style;ev=r[Ku],r[Ku]="none"}},Ju=function(){Ku&&(document.documentElement.style[Ku]=ev,ev=void 0)}}function tv(){Xe(window,"dragstart",nn)}function iv(){Yt(window,"dragstart",nn)}var gp,nv;function rv(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(yp(),gp=r,nv=r.style.outlineStyle,r.style.outlineStyle="none",Xe(window,"keydown",yp))}function yp(){gp&&(gp.style.outlineStyle=nv,gp=void 0,nv=void 0,Yt(window,"keydown",yp))}function mS(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function ov(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Iw={__proto__:null,TRANSFORM:J_,TRANSITION:$u,TRANSITION_END:pS,get:fS,getStyle:qu,create:Tt,remove:Qt,empty:mp,toFront:Yl,toBack:Bl,hasClass:K_,addClass:rt,removeClass:pi,setClass:Q_,getClass:_p,setOpacity:lr,testProp:vp,setTransform:ws,setPosition:Si,getPosition:Ns,get disableTextSelection(){return Xu},get enableTextSelection(){return Ju},disableImageDrag:tv,enableImageDrag:iv,preventOutline:rv,restoreOutline:yp,getSizedParentNode:mS,getScale:ov};function Xe(r,a,c,h){if(a&&typeof a=="object")for(var _ in a)sv(r,_,a[_],c);else{a=g(a);for(var y=0,w=a.length;y<w;y++)sv(r,a[y],c,h)}return this}var oo="_leaflet_events";function Yt(r,a,c,h){if(arguments.length===1)_S(r),delete r[oo];else if(a&&typeof a=="object")for(var _ in a)lv(r,_,a[_],c);else if(a=g(a),arguments.length===2)_S(r,function(O){return I(a,O)!==-1});else for(var y=0,w=a.length;y<w;y++)lv(r,a[y],c,h);return this}function _S(r,a){for(var c in r[oo]){var h=c.split(/\d/)[0];(!a||a(h))&&lv(r,h,null,null,c)}}var av={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sv(r,a,c,h){var _=a+l(c)+(h?"_"+l(h):"");if(r[oo]&&r[oo][_])return this;var y=function(O){return c.call(h||r,O||window.event)},w=y;!Ie.touchNative&&Ie.pointer&&a.indexOf("touch")===0?y=gw(r,a,y):Ie.touch&&a==="dblclick"?y=Dw(r,y):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(av[a]||a,y,Ie.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(y=function(O){O=O||window.event,uv(r,O)&&w(O)},r.addEventListener(av[a],y,!1)):r.addEventListener(a,w,!1):r.attachEvent("on"+a,y),r[oo]=r[oo]||{},r[oo][_]=y}function lv(r,a,c,h,_){_=_||a+l(c)+(h?"_"+l(h):"");var y=r[oo]&&r[oo][_];if(!y)return this;!Ie.touchNative&&Ie.pointer&&a.indexOf("touch")===0?yw(r,a,y):Ie.touch&&a==="dblclick"?ww(r,y):"removeEventListener"in r?r.removeEventListener(av[a]||a,y,!1):r.detachEvent("on"+a,y),r[oo][_]=null}function Is(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function cv(r){return sv(r,"wheel",Is),this}function Qu(r){return Xe(r,"mousedown touchstart dblclick contextmenu",Is),r._leaflet_disable_click=!0,this}function nn(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Ps(r){return nn(r),Is(r),this}function vS(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function gS(r,a){if(!a)return new Pe(r.clientX,r.clientY);var c=ov(a),h=c.boundingClientRect;return new Pe((r.clientX-h.left)/c.x-a.clientLeft,(r.clientY-h.top)/c.y-a.clientTop)}var Pw=Ie.linux&&Ie.chrome?window.devicePixelRatio:Ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yS(r){return Ie.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Pw:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function uv(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Lw={__proto__:null,on:Xe,off:Yt,stopPropagation:Is,disableScrollPropagation:cv,disableClickPropagation:Qu,preventDefault:nn,stop:Ps,getPropagationPath:vS,getMousePosition:gS,getWheelDelta:yS,isExternalTarget:uv,addListener:Xe,removeListener:Yt},SS=Vi.extend({run:function(r,a,c,h){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=Ns(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=He(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),Si(this._el,c),this.fire("step")},_complete:function(){ct(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ct=Vi.extend({options:{crs:Ve,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=v(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(G(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$u&&Ie.any3d&&!Ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xe(this._proxy,pS,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(G(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=t({animate:c.animate},c.zoom),c.pan=t({animate:c.animate,duration:c.duration},c.pan));var h=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var h=this.getZoomScale(a),_=this.getSize().divideBy(2),y=r instanceof Pe?r:this.latLngToContainerPoint(r),w=y.subtract(_).multiplyBy(1-1/h),O=this.containerPointToLatLng(_.add(w));return this.setView(O,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():A(r);var c=ge(a.paddingTopLeft||a.padding||[0,0]),h=ge(a.paddingBottomRight||a.padding||[0,0]),_=this.getBoundsZoom(r,!1,c.add(h));if(_=typeof a.maxZoom=="number"?Math.min(a.maxZoom,_):_,_===1/0)return{center:r.getCenter(),zoom:_};var y=h.subtract(c).divideBy(2),w=this.project(r.getSouthWest(),_),O=this.project(r.getNorthEast(),_),z=this.unproject(w.add(O).divideBy(2).add(y),_);return{center:z,zoom:_}},fitBounds:function(r,a){if(r=A(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=ge(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new SS,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){rt(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!Ie.any3d)return this.setView(r,a,c);this._stop();var h=this.project(this.getCenter()),_=this.project(r),y=this.getSize(),w=this._zoom;r=G(r),a=a===void 0?w:a;var O=Math.max(y.x,y.y),z=O*this.getZoomScale(w,a),K=_.distanceTo(h)||1,me=1.42,Re=me*me;function dt(Ci){var Lp=Ci?-1:1,yN=Ci?z:O,SN=z*z-O*O+Lp*Re*Re*K*K,CN=2*yN*Re*K,Cv=SN/CN,eC=Math.sqrt(Cv*Cv+1)-Cv,EN=eC<1e-9?-18:Math.log(eC);return EN}function Cn(Ci){return(Math.exp(Ci)-Math.exp(-Ci))/2}function Wi(Ci){return(Math.exp(Ci)+Math.exp(-Ci))/2}function ur(Ci){return Cn(Ci)/Wi(Ci)}var wn=dt(0);function Wl(Ci){return O*(Wi(wn)/Wi(wn+me*Ci))}function mN(Ci){return O*(Wi(wn)*ur(wn+me*Ci)-Cn(wn))/Re}function _N(Ci){return 1-Math.pow(1-Ci,1.5)}var vN=Date.now(),KS=(dt(1)-wn)/me,gN=c.duration?1e3*c.duration:1e3*KS*.8;function QS(){var Ci=(Date.now()-vN)/gN,Lp=_N(Ci)*KS;Ci<=1?(this._flyToFrame=He(QS,this),this._move(this.unproject(h.add(_.subtract(h).multiplyBy(mN(Lp)/K)),w),this.getScaleZoom(O/Wl(Lp),w),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),QS.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=A(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),h=this._limitCenter(c,this._zoom,A(r));return c.equals(h)||this.panTo(h,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=ge(a.paddingTopLeft||a.padding||[0,0]),h=ge(a.paddingBottomRight||a.padding||[0,0]),_=this.project(this.getCenter()),y=this.project(r),w=this.getPixelBounds(),O=F([w.min.add(c),w.max.subtract(h)]),z=O.getSize();if(!O.contains(y)){this._enforcingBounds=!0;var K=y.subtract(O.getCenter()),me=O.extend(y).getSize().subtract(z);_.x+=K.x<0?-me.x:me.x,_.y+=K.y<0?-me.y:me.y,this.panTo(this.unproject(_),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=t({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),h=a.divideBy(2).round(),_=c.divideBy(2).round(),y=h.subtract(_);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=t({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=o(this._handleGeolocationResponse,this),c=o(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,h=new H(a,c),_=h.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var w=this.getBoundsZoom(_);this.setView(h,y.maxZoom?Math.min(w,y.maxZoom):w)}var O={latlng:h,bounds:_,timestamp:r.timestamp};for(var z in r.coords)typeof r.coords[z]=="number"&&(O[z]=r.coords[z]);this.fire("locationfound",O)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ct(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Qt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),h=Tt("div",c,a||this._mapPane);return r&&(this._panes[r]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Q(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=A(r),c=ge(c||[0,0]);var h=this.getZoom()||0,_=this.getMinZoom(),y=this.getMaxZoom(),w=r.getNorthWest(),O=r.getSouthEast(),z=this.getSize().subtract(c),K=F(this.project(O,h),this.project(w,h)).getSize(),me=Ie.any3d?this.options.zoomSnap:1,Re=z.x/K.x,dt=z.y/K.y,Cn=a?Math.max(Re,dt):Math.min(Re,dt);return h=this.getScaleZoom(Cn,h),me&&(h=Math.round(h/(me/100))*(me/100),h=a?Math.ceil(h/me)*me:Math.floor(h/me)*me),Math.max(_,Math.min(y,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Pe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new qe(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var h=c.zoom(r*c.scale(a));return isNaN(h)?1/0:h},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(G(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(ge(r),a)},layerPointToLatLng:function(r){var a=ge(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(G(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(G(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(A(r))},distance:function(r,a){return this.options.crs.distance(G(r),G(a))},containerPointToLayerPoint:function(r){return ge(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return ge(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(ge(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(G(r)))},mouseEventToContainerPoint:function(r){return gS(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=fS(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xe(a,"scroll",this._onScroll,this),this._containerId=l(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ie.any3d,rt(r,"leaflet-container"+(Ie.touch?" leaflet-touch":"")+(Ie.retina?" leaflet-retina":"")+(Ie.ielt9?" leaflet-oldie":"")+(Ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=qu(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Si(this._mapPane,new Pe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(rt(r.markerPane,"leaflet-zoom-hide"),rt(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){Si(this._mapPane,new Pe(0,0));var h=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var _=this._zoom!==a;this._moveStart(_,c)._move(r,a)._moveEnd(_),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,h){a===void 0&&(a=this._zoom);var _=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),h?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ct(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Si(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[l(this._container)]=this;var a=r?Yt:Xe;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),Ie.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ct(this._resizeRequest),this._resizeRequest=He(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],h,_=a==="mouseout"||a==="mouseover",y=r.target||r.srcElement,w=!1;y;){if(h=this._targets[l(y)],h&&(a==="click"||a==="preclick")&&this._draggableMoved(h)){w=!0;break}if(h&&h.listens(a,!0)&&(_&&!uv(y,r)||(c.push(h),_))||y===this._container)break;y=y.parentNode}return!c.length&&!w&&!_&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&rv(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var h=t({},r);h.type="preclick",this._fireDOMEvent(h,h.type,c)}var _=this._findEventTargets(r,a);if(c){for(var y=[],w=0;w<c.length;w++)c[w].listens(a,!0)&&y.push(c[w]);_=y.concat(_)}if(_.length){a==="contextmenu"&&nn(r);var O=_[0],z={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var K=O.getLatLng&&(!O._radius||O._radius<=10);z.containerPoint=K?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(r),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=K?O.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(w=0;w<_.length;w++)if(_[w].fire(a,z,!0),z.originalEvent._stopped||_[w].options.bubblingMouseEvents===!1&&I(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return Ns(this._mapPane)||new Pe(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var h=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(h)},_latLngBoundsToNewLayerBounds:function(r,a,c){var h=this._getNewPixelOrigin(c,a);return F([this.project(r.getSouthWest(),a)._subtract(h),this.project(r.getNorthWest(),a)._subtract(h),this.project(r.getSouthEast(),a)._subtract(h),this.project(r.getNorthEast(),a)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var h=this.project(r,a),_=this.getSize().divideBy(2),y=new qe(h.subtract(_),h.add(_)),w=this._getBoundsOffset(y,c,a);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?r:this.unproject(h.add(w),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),h=new qe(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(h,a))},_getBoundsOffset:function(r,a,c){var h=F(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),_=h.min.subtract(r.min),y=h.max.subtract(r.max),w=this._rebound(_.x,-y.x),O=this._rebound(_.y,-y.y);return new Pe(w,O)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),h=Ie.any3d?this.options.zoomSnap:1;return h&&(r=Math.round(r/h)*h),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=J_,h=this._proxy.style[c];ws(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),h===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();ws(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(a),_=this._getCenterOffset(r)._divideBy(1-1/h);return c.animate!==!0&&!this.getSize().contains(_)?!1:(He(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,h){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,rt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Aw(r,a){return new Ct(r,a)}var Ar=Wt.extend({options:{position:"topright"},initialize:function(r){v(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),h=r._controlCorners[c];return rt(a,"leaflet-control"),c.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),ed=function(r){return new Ar(r)};Ct.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Tt("div",a+"control-container",this._container);function h(_,y){var w=a+_+" "+a+y;r[_+y]=Tt("div",w,c)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Qt(this._controlCorners[r]);Qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var CS=Ar.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,h){return c<h?-1:h<c?1:0}},initialize:function(r,a,c){v(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in r)this._addLayer(r[h],h);for(h in a)this._addLayer(a[h],h,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Ar.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(l(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){rt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(rt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):pi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Tt("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Qu(a),cv(a);var h=this._section=Tt("section",r+"-list");c&&(this._map.on("click",this.collapse,this),Xe(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Tt("a",r+"-toggle",a);_.href="#",_.title="Layers",_.setAttribute("role","button"),Xe(_,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){nn(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Tt("div",r+"-base",h),this._separator=Tt("div",r+"-separator",h),this._overlaysList=Tt("div",r+"-overlays",h),a.appendChild(h)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&l(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(o(function(h,_){return this.options.sortFunction(h.layer,_.layer,h.name,_.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mp(this._baseLayersList),mp(this._overlaysList),this._layerControlInputs=[];var r,a,c,h,_=0;for(c=0;c<this._layers.length;c++)h=this._layers[c],this._addItem(h),a=a||h.overlay,r=r||!h.overlay,_+=h.overlay?0:1;return this.options.hideSingleBase&&(r=r&&_>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(l(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=c,h.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),h;r.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=c):h=this._createRadioElement("leaflet-base-layers_"+l(this),c),this._layerControlInputs.push(h),h.layerId=l(r.layer),Xe(h,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+r.name;var y=document.createElement("span");a.appendChild(y),y.appendChild(h),y.appendChild(_);var w=r.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,h=[],_=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)a=r[y],c=this._getLayer(a.layerId).layer,a.checked?h.push(c):a.checked||_.push(c);for(y=0;y<_.length;y++)this._map.hasLayer(_[y])&&this._map.removeLayer(_[y]);for(y=0;y<h.length;y++)this._map.hasLayer(h[y])||this._map.addLayer(h[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,h=this._map.getZoom(),_=r.length-1;_>=0;_--)a=r[_],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&h<c.options.minZoom||c.options.maxZoom!==void 0&&h>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Xe(r,"click",nn),this.expand();var a=this;setTimeout(function(){Yt(r,"click",nn),a._preventClick=!1})}}),Ow=function(r,a,c){return new CS(r,a,c)},dv=Ar.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Tt("div",a+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,h,_){var y=Tt("a",c,h);return y.innerHTML=r,y.href="#",y.title=a,y.setAttribute("role","button"),y.setAttribute("aria-label",a),Qu(y),Xe(y,"click",Ps),Xe(y,"click",_,this),Xe(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";pi(this._zoomInButton,a),pi(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(rt(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(rt(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ct.mergeOptions({zoomControl:!0}),Ct.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new dv,this.addControl(this.zoomControl))});var Mw=function(r){return new dv(r)},ES=Ar.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Tt("div",a),h=this.options;return this._addScales(h,a+"-line",c),r.on(h.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Tt("div",a,c)),r.imperial&&(this._iScale=Tt("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,h,_;a>5280?(c=a/5280,h=this._getRoundNum(c),this._updateScale(this._iScale,h+" mi",h/c)):(_=this._getRoundNum(a),this._updateScale(this._iScale,_+" ft",_/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),kw=function(r){return new ES(r)},Rw='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hv=Ar.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ie.inlineSvg?Rw+" ":"")+"Leaflet</a>"},initialize:function(r){v(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),Qu(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ct.mergeOptions({attributionControl:!0}),Ct.addInitHook(function(){this.options.attributionControl&&new hv().addTo(this)});var Fw=function(r){return new hv(r)};Ar.Layers=CS,Ar.Zoom=dv,Ar.Scale=ES,Ar.Attribution=hv,ed.layers=Ow,ed.zoom=Mw,ed.scale=kw,ed.attribution=Fw;var ao=Wt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ao.addTo=function(r,a){return r.addHandler(a,this),this};var Yw={Events:Pt},TS=Ie.touch?"touchstart mousedown":"mousedown",pa=Vi.extend({options:{clickTolerance:3},initialize:function(r,a,c,h){v(this,h),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(Xe(this._dragStartTarget,TS,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(pa._dragging===this&&this.finishDrag(!0),Yt(this._dragStartTarget,TS,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!K_(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){pa._dragging===this&&this.finishDrag();return}if(!(pa._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(pa._dragging=this,this._preventOutline&&rv(this._element),tv(),Xu(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=mS(this._element);this._startPoint=new Pe(a.clientX,a.clientY),this._startPos=Ns(this._element),this._parentScale=ov(c);var h=r.type==="mousedown";Xe(document,h?"mousemove":"touchmove",this._onMove,this),Xe(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new Pe(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,nn(r),this._moved||(this.fire("dragstart"),this._moved=!0,rt(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),rt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Si(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){pi(document.body,"leaflet-dragging"),this._lastTarget&&(pi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yt(document,"mousemove touchmove",this._onMove,this),Yt(document,"mouseup touchend touchcancel",this._onUp,this),iv(),Ju();var a=this._moved&&this._moving;this._moving=!1,pa._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function bS(r,a,c){var h,_=[1,4,2,8],y,w,O,z,K,me,Re,dt;for(y=0,me=r.length;y<me;y++)r[y]._code=Ls(r[y],a);for(O=0;O<4;O++){for(Re=_[O],h=[],y=0,me=r.length,w=me-1;y<me;w=y++)z=r[y],K=r[w],z._code&Re?K._code&Re||(dt=Sp(K,z,Re,a,c),dt._code=Ls(dt,a),h.push(dt)):(K._code&Re&&(dt=Sp(K,z,Re,a,c),dt._code=Ls(dt,a),h.push(dt)),h.push(z));r=h}return r}function xS(r,a){var c,h,_,y,w,O,z,K,me;if(!r||r.length===0)throw new Error("latlngs not passed");cr(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Re=G([0,0]),dt=A(r),Cn=dt.getNorthWest().distanceTo(dt.getSouthWest())*dt.getNorthEast().distanceTo(dt.getNorthWest());Cn<1700&&(Re=pv(r));var Wi=r.length,ur=[];for(c=0;c<Wi;c++){var wn=G(r[c]);ur.push(a.project(G([wn.lat-Re.lat,wn.lng-Re.lng])))}for(O=z=K=0,c=0,h=Wi-1;c<Wi;h=c++)_=ur[c],y=ur[h],w=_.y*y.x-y.y*_.x,z+=(_.x+y.x)*w,K+=(_.y+y.y)*w,O+=w*3;O===0?me=ur[0]:me=[z/O,K/O];var Wl=a.unproject(ge(me));return G([Wl.lat+Re.lat,Wl.lng+Re.lng])}function pv(r){for(var a=0,c=0,h=0,_=0;_<r.length;_++){var y=G(r[_]);a+=y.lat,c+=y.lng,h++}return G([a/h,c/h])}var Bw={__proto__:null,clipPolygon:bS,polygonCenter:xS,centroid:pv};function DS(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=Hw(r,c),r=Uw(r,c),r}function wS(r,a,c){return Math.sqrt(td(r,a,c,!0))}function zw(r,a,c){return td(r,a,c)}function Uw(r,a){var c=r.length,h=typeof Uint8Array<"u"?Uint8Array:Array,_=new h(c);_[0]=_[c-1]=1,fv(r,_,a,0,c-1);var y,w=[];for(y=0;y<c;y++)_[y]&&w.push(r[y]);return w}function fv(r,a,c,h,_){var y=0,w,O,z;for(O=h+1;O<=_-1;O++)z=td(r[O],r[h],r[_],!0),z>y&&(w=O,y=z);y>c&&(a[w]=1,fv(r,a,c,h,w),fv(r,a,c,w,_))}function Hw(r,a){for(var c=[r[0]],h=1,_=0,y=r.length;h<y;h++)Vw(r[h],r[_])>a&&(c.push(r[h]),_=h);return _<y-1&&c.push(r[y-1]),c}var NS;function IS(r,a,c,h,_){var y=h?NS:Ls(r,c),w=Ls(a,c),O,z,K;for(NS=w;;){if(!(y|w))return[r,a];if(y&w)return!1;O=y||w,z=Sp(r,a,O,c,_),K=Ls(z,c),O===y?(r=z,y=K):(a=z,w=K)}}function Sp(r,a,c,h,_){var y=a.x-r.x,w=a.y-r.y,O=h.min,z=h.max,K,me;return c&8?(K=r.x+y*(z.y-r.y)/w,me=z.y):c&4?(K=r.x+y*(O.y-r.y)/w,me=O.y):c&2?(K=z.x,me=r.y+w*(z.x-r.x)/y):c&1&&(K=O.x,me=r.y+w*(O.x-r.x)/y),new Pe(K,me,_)}function Ls(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Vw(r,a){var c=a.x-r.x,h=a.y-r.y;return c*c+h*h}function td(r,a,c,h){var _=a.x,y=a.y,w=c.x-_,O=c.y-y,z=w*w+O*O,K;return z>0&&(K=((r.x-_)*w+(r.y-y)*O)/z,K>1?(_=c.x,y=c.y):K>0&&(_+=w*K,y+=O*K)),w=r.x-_,O=r.y-y,h?w*w+O*O:new Pe(_,y)}function cr(r){return!S(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function PS(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),cr(r)}function LS(r,a){var c,h,_,y,w,O,z,K;if(!r||r.length===0)throw new Error("latlngs not passed");cr(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var me=G([0,0]),Re=A(r),dt=Re.getNorthWest().distanceTo(Re.getSouthWest())*Re.getNorthEast().distanceTo(Re.getNorthWest());dt<1700&&(me=pv(r));var Cn=r.length,Wi=[];for(c=0;c<Cn;c++){var ur=G(r[c]);Wi.push(a.project(G([ur.lat-me.lat,ur.lng-me.lng])))}for(c=0,h=0;c<Cn-1;c++)h+=Wi[c].distanceTo(Wi[c+1])/2;if(h===0)K=Wi[0];else for(c=0,y=0;c<Cn-1;c++)if(w=Wi[c],O=Wi[c+1],_=w.distanceTo(O),y+=_,y>h){z=(y-h)/_,K=[O.x-z*(O.x-w.x),O.y-z*(O.y-w.y)];break}var wn=a.unproject(ge(K));return G([wn.lat+me.lat,wn.lng+me.lng])}var Gw={__proto__:null,simplify:DS,pointToSegmentDistance:wS,closestPointOnSegment:zw,clipSegment:IS,_getEdgeIntersection:Sp,_getBitCode:Ls,_sqClosestPointOnSegment:td,isFlat:cr,_flat:PS,polylineCenter:LS},mv={project:function(r){return new Pe(r.lng,r.lat)},unproject:function(r){return new H(r.y,r.x)},bounds:new qe([-180,-90],[180,90])},_v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new qe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,h=r.lat*a,_=this.R_MINOR/c,y=Math.sqrt(1-_*_),w=y*Math.sin(h),O=Math.tan(Math.PI/4-h/2)/Math.pow((1-w)/(1+w),y/2);return h=-c*Math.log(Math.max(O,1e-10)),new Pe(r.lng*a*c,h)},unproject:function(r){for(var a=180/Math.PI,c=this.R,h=this.R_MINOR/c,_=Math.sqrt(1-h*h),y=Math.exp(-r.y/c),w=Math.PI/2-2*Math.atan(y),O=0,z=.1,K;O<15&&Math.abs(z)>1e-7;O++)K=_*Math.sin(w),K=Math.pow((1-K)/(1+K),_/2),z=Math.PI/2-2*Math.atan(y*K)-w,w+=z;return new H(w*a,r.x*a/c)}},Ww={__proto__:null,LonLat:mv,Mercator:_v,SphericalMercator:q},Zw=t({},N,{code:"EPSG:3395",projection:_v,transformation:function(){var r=.5/(Math.PI*_v.R);return we(r,.5,-r,.5)}()}),AS=t({},N,{code:"EPSG:4326",projection:mv,transformation:we(1/180,1,-1/180,.5)}),jw=t({},de,{projection:mv,transformation:we(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,h=a.lat-r.lat;return Math.sqrt(c*c+h*h)},infinite:!0});de.Earth=N,de.EPSG3395=Zw,de.EPSG3857=Ve,de.EPSG900913=ut,de.EPSG4326=AS,de.Simple=jw;var Or=Vi.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[l(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[l(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ct.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=l(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=l(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return l(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?S(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[l(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=l(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var h in this._zoomBoundLayers){var _=this._zoomBoundLayers[h].options;r=_.minZoom===void 0?r:Math.min(r,_.minZoom),a=_.maxZoom===void 0?a:Math.max(a,_.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zl=Or.extend({initialize:function(r,a){v(this,a),this._layers={};var c,h;if(r)for(c=0,h=r.length;c<h;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,h;for(c in this._layers)h=this._layers[c],h[r]&&h[r].apply(h,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return l(r)}}),$w=function(r,a){return new zl(r,a)},Ao=zl.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),zl.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),zl.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Q;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),qw=function(r,a){return new Ao(r,a)},Ul=Wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){v(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(h,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(r,a){var c=this.options,h=c[a+"Size"];typeof h=="number"&&(h=[h,h]);var _=ge(h),y=ge(a==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),_&&(r.style.width=_.x+"px",r.style.height=_.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return Ie.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Xw(r){return new Ul(r)}var id=Ul.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof id.imagePath!="string"&&(id.imagePath=this._detectIconPath()),(this.options.imagePath||id.imagePath)+Ul.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,h,_){var y=h.exec(c);return y&&y[_]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Tt("div","leaflet-default-icon-path",document.body),a=qu(r,"background-image")||qu(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),OS=ao.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new pa(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),rt(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,h=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,y=Ns(a._icon),w=c.getPixelBounds(),O=c.getPixelOrigin(),z=F(w.min._subtract(O).add(_),w.max._subtract(O).subtract(_));if(!z.contains(y)){var K=ge((Math.max(z.max.x,y.x)-z.max.x)/(w.max.x-z.max.x)-(Math.min(z.min.x,y.x)-z.min.x)/(w.min.x-z.min.x),(Math.max(z.max.y,y.y)-z.max.y)/(w.max.y-z.max.y)-(Math.min(z.min.y,y.y)-z.min.y)/(w.min.y-z.min.y)).multiplyBy(h);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),Si(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=He(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(ct(this._panRequest),this._panRequest=He(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,h=Ns(a._icon),_=a._map.layerPointToLatLng(h);c&&Si(c,h),a._latlng=_,r.latlng=_,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){ct(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Cp=Or.extend({options:{icon:new id,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){v(this,a),this._latlng=G(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=G(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),h=!1;c!==this._icon&&(this._icon&&this._removeIcon(),h=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),rt(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(c,"focus",this._panOnFocus,this);var _=r.icon.createShadow(this._shadow),y=!1;_!==this._shadow&&(this._removeShadow(),y=!0),_&&(rt(_,a),_.alt=""),this._shadow=_,r.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yt(this._icon,"focus",this._panOnFocus,this),Qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Si(this._icon,r),this._shadow&&Si(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(rt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),OS)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new OS(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&lr(this._icon,r),this._shadow&&lr(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?ge(a.iconSize):ge(0,0),h=a.iconAnchor?ge(a.iconAnchor):ge(0,0);r.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:c.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Jw(r,a){return new Cp(r,a)}var fa=Or.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return v(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ep=fa.extend({options:{fill:!0,radius:10},initialize:function(r,a){v(this,a),this._latlng=G(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=G(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return fa.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),h=[r+c,a+c];this._pxBounds=new qe(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Kw(r,a){return new Ep(r,a)}var vv=Ep.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=t({},c,{radius:a})),v(this,a),this._latlng=G(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Q(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:fa.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,h=c.options.crs;if(h.distance===N.distance){var _=Math.PI/180,y=this._mRadius/N.R/_,w=c.project([a+y,r]),O=c.project([a-y,r]),z=w.add(O).divideBy(2),K=c.unproject(z).lat,me=Math.acos((Math.cos(y*_)-Math.sin(a*_)*Math.sin(K*_))/(Math.cos(a*_)*Math.cos(K*_)))/_;(isNaN(me)||me===0)&&(me=y/Math.cos(Math.PI/180*a)),this._point=z.subtract(c.getPixelOrigin()),this._radius=isNaN(me)?0:z.x-c.project([K,r-me]).x,this._radiusY=z.y-w.y}else{var Re=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Re).x}this._updateBounds()}});function Qw(r,a,c){return new vv(r,a,c)}var Oo=fa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){v(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,h=td,_,y,w=0,O=this._parts.length;w<O;w++)for(var z=this._parts[w],K=1,me=z.length;K<me;K++){_=z[K-1],y=z[K];var Re=h(r,_,y,!0);Re<a&&(a=Re,c=h(r,_,y))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return LS(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=G(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Q,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=cr(r),h=0,_=r.length;h<_;h++)c?(a[h]=G(r[h]),this._bounds.extend(a[h])):a[h]=this._convertLatLngs(r[h]);return a},_project:function(){var r=new qe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new Pe(r,r);this._rawPxBounds&&(this._pxBounds=new qe([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var h=r[0]instanceof H,_=r.length,y,w;if(h){for(w=[],y=0;y<_;y++)w[y]=this._map.latLngToLayerPoint(r[y]),c.extend(w[y]);a.push(w)}else for(y=0;y<_;y++)this._projectLatlngs(r[y],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,h,_,y,w,O,z;for(c=0,_=0,y=this._rings.length;c<y;c++)for(z=this._rings[c],h=0,w=z.length;h<w-1;h++)O=IS(z[h],z[h+1],r,h,!0),O&&(a[_]=a[_]||[],a[_].push(O[0]),(O[1]!==z[h+1]||h===w-2)&&(a[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,h=r.length;c<h;c++)r[c]=DS(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,h,_,y,w,O,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(O=this._parts[c],h=0,w=O.length,_=w-1;h<w;_=h++)if(!(!a&&h===0)&&wS(r,O[_],O[h])<=z)return!0;return!1}});function eN(r,a){return new Oo(r,a)}Oo._flat=PS;var Hl=Oo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xS(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Oo.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof H&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Oo.prototype._setLatLngs.call(this,r),cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new Pe(a,a);if(r=new qe(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,_=this._rings.length,y;h<_;h++)y=bS(this._rings[h],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,h,_,y,w,O,z,K;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,z=this._parts.length;y<z;y++)for(c=this._parts[y],w=0,K=c.length,O=K-1;w<K;O=w++)h=c[w],_=c[O],h.y>r.y!=_.y>r.y&&r.x<(_.x-h.x)*(r.y-h.y)/(_.y-h.y)+h.x&&(a=!a);return a||Oo.prototype._containsPoint.call(this,r,!0)}});function tN(r,a){return new Hl(r,a)}var Mo=Ao.extend({initialize:function(r,a){v(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=S(r)?r:r.features,c,h,_;if(a){for(c=0,h=a.length;c<h;c++)_=a[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var w=Tp(r,y);return w?(w.feature=Dp(r),w.defaultOptions=w.options,this.resetStyle(w),y.onEachFeature&&y.onEachFeature(r,w),this.addLayer(w)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=t({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Tp(r,a){var c=r.type==="Feature"?r.geometry:r,h=c?c.coordinates:null,_=[],y=a&&a.pointToLayer,w=a&&a.coordsToLatLng||gv,O,z,K,me;if(!h&&!c)return null;switch(c.type){case"Point":return O=w(h),MS(y,r,O,a);case"MultiPoint":for(K=0,me=h.length;K<me;K++)O=w(h[K]),_.push(MS(y,r,O,a));return new Ao(_);case"LineString":case"MultiLineString":return z=bp(h,c.type==="LineString"?0:1,w),new Oo(z,a);case"Polygon":case"MultiPolygon":return z=bp(h,c.type==="Polygon"?1:2,w),new Hl(z,a);case"GeometryCollection":for(K=0,me=c.geometries.length;K<me;K++){var Re=Tp({geometry:c.geometries[K],type:"Feature",properties:r.properties},a);Re&&_.push(Re)}return new Ao(_);case"FeatureCollection":for(K=0,me=c.features.length;K<me;K++){var dt=Tp(c.features[K],a);dt&&_.push(dt)}return new Ao(_);default:throw new Error("Invalid GeoJSON object.")}}function MS(r,a,c,h){return r?r(a,c):new Cp(c,h&&h.markersInheritOptions&&h)}function gv(r){return new H(r[1],r[0],r[2])}function bp(r,a,c){for(var h=[],_=0,y=r.length,w;_<y;_++)w=a?bp(r[_],a-1,c):(c||gv)(r[_]),h.push(w);return h}function yv(r,a){return r=G(r),r.alt!==void 0?[p(r.lng,a),p(r.lat,a),p(r.alt,a)]:[p(r.lng,a),p(r.lat,a)]}function xp(r,a,c,h){for(var _=[],y=0,w=r.length;y<w;y++)_.push(a?xp(r[y],cr(r[y])?0:a-1,c,h):yv(r[y],h));return!a&&c&&_.length>0&&_.push(_[0].slice()),_}function Vl(r,a){return r.feature?t({},r.feature,{geometry:a}):Dp(a)}function Dp(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Sv={toGeoJSON:function(r){return Vl(this,{type:"Point",coordinates:yv(this.getLatLng(),r)})}};Cp.include(Sv),vv.include(Sv),Ep.include(Sv),Oo.include({toGeoJSON:function(r){var a=!cr(this._latlngs),c=xp(this._latlngs,a?1:0,!1,r);return Vl(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Hl.include({toGeoJSON:function(r){var a=!cr(this._latlngs),c=a&&!cr(this._latlngs[0]),h=xp(this._latlngs,c?2:a?1:0,!0,r);return a||(h=[h]),Vl(this,{type:(c?"Multi":"")+"Polygon",coordinates:h})}}),zl.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),Vl(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",h=[];return this.eachLayer(function(_){if(_.toGeoJSON){var y=_.toGeoJSON(r);if(c)h.push(y.geometry);else{var w=Dp(y);w.type==="FeatureCollection"?h.push.apply(h,w.features):h.push(w)}}}),c?Vl(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function kS(r,a){return new Mo(r,a)}var iN=kS,wp=Or.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=A(a),v(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(rt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Yl(this._image),this},bringToBack:function(){return this._map&&Bl(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=A(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Tt("img");if(rt(a,"leaflet-image-layer"),this._zoomAnimated&&rt(a,"leaflet-zoom-animated"),this.options.className&&rt(a,this.options.className),a.onselectstart=f,a.onmousemove=f,a.onload=o(this.fire,this,"load"),a.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ws(this._image,c,a)},_reset:function(){var r=this._image,a=new qe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Si(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){lr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),nN=function(r,a,c){return new wp(r,a,c)},RS=wp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Tt("video");if(rt(a,"leaflet-image-layer"),this._zoomAnimated&&rt(a,"leaflet-zoom-animated"),this.options.className&&rt(a,this.options.className),a.onselectstart=f,a.onmousemove=f,a.onloadeddata=o(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),h=[],_=0;_<c.length;_++)h.push(c[_].src);this._url=c.length>0?h:[a.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var w=Tt("source");w.src=this._url[y],a.appendChild(w)}}});function rN(r,a,c){return new RS(r,a,c)}var FS=wp.extend({_initImage:function(){var r=this._image=this._url;rt(r,"leaflet-image-layer"),this._zoomAnimated&&rt(r,"leaflet-zoom-animated"),this.options.className&&rt(r,this.options.className),r.onselectstart=f,r.onmousemove=f}});function oN(r,a,c){return new FS(r,a,c)}var so=Or.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof H||S(r))?(this._latlng=G(r),v(this,a)):(v(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&lr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&lr(this._container,1),this.bringToFront(),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(lr(this._container,0),this._removeTimeout=setTimeout(o(Qt,void 0,this._container),200)):Qt(this._container),this.options.interactive&&(pi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=G(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yl(this._container),this},bringToBack:function(){return this._map&&Bl(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Ao){a=null;var c=this._source._layers;for(var h in c)if(c[h]._map){a=c[h];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=ge(this.options.offset),c=this._getAnchor();this._zoomAnimated?Si(this._container,r.add(c)):a=a.add(r).add(c);var h=this._containerBottom=-a.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=h+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ct.include({_initOverlay:function(r,a,c,h){var _=a;return _ instanceof r||(_=new r(h).setContent(a)),c&&_.setLatLng(c),_}}),Or.include({_initOverlay:function(r,a,c,h){var _=c;return _ instanceof r?(v(_,h),_._source=this):(_=a&&!h?a:new r(h,this),_.setContent(c)),_}});var Np=so.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,so.prototype.openOn.call(this,r)},onAdd:function(r){so.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fa||this._source.on("preclick",Is))},onRemove:function(r){so.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fa||this._source.off("preclick",Is))},getEvents:function(){var r=so.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Tt("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Tt("div",r+"-content-wrapper",a);if(this._contentNode=Tt("div",r+"-content",c),Qu(a),cv(this._contentNode),Xe(a,"contextmenu",Is),this._tipContainer=Tt("div",r+"-tip-container",a),this._tip=Tt("div",r+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Tt("a",r+"-close-button",a);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',Xe(h,"click",function(_){nn(_),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var h=r.offsetHeight,_=this.options.maxHeight,y="leaflet-popup-scrolled";_&&h>_?(a.height=_+"px",rt(r,y)):pi(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Si(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(qu(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,h=this._containerWidth,_=new Pe(this._containerLeft,-c-this._containerBottom);_._add(Ns(this._container));var y=r.layerPointToContainerPoint(_),w=ge(this.options.autoPanPadding),O=ge(this.options.autoPanPaddingTopLeft||w),z=ge(this.options.autoPanPaddingBottomRight||w),K=r.getSize(),me=0,Re=0;y.x+h+z.x>K.x&&(me=y.x+h-K.x+z.x),y.x-me-O.x<0&&(me=y.x-O.x),y.y+c+z.y>K.y&&(Re=y.y+c-K.y+z.y),y.y-Re-O.y<0&&(Re=y.y-O.y),(me||Re)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([me,Re]))}},_getAnchor:function(){return ge(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),aN=function(r,a){return new Np(r,a)};Ct.mergeOptions({closePopupOnClick:!0}),Ct.include({openPopup:function(r,a,c){return this._initOverlay(Np,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Or.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Np,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Ao||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Ps(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof fa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ip=so.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){so.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){so.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=so.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,h=this._map,_=this._container,y=h.latLngToContainerPoint(h.getCenter()),w=h.layerPointToContainerPoint(r),O=this.options.direction,z=_.offsetWidth,K=_.offsetHeight,me=ge(this.options.offset),Re=this._getAnchor();O==="top"?(a=z/2,c=K):O==="bottom"?(a=z/2,c=0):O==="center"?(a=z/2,c=K/2):O==="right"?(a=0,c=K/2):O==="left"?(a=z,c=K/2):w.x<y.x?(O="right",a=0,c=K/2):(O="left",a=z+(me.x+Re.x)*2,c=K/2),r=r.subtract(ge(a,c,!0)).add(me).add(Re),pi(_,"leaflet-tooltip-right"),pi(_,"leaflet-tooltip-left"),pi(_,"leaflet-tooltip-top"),pi(_,"leaflet-tooltip-bottom"),rt(_,"leaflet-tooltip-"+O),Si(_,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&lr(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return ge(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sN=function(r,a){return new Ip(r,a)};Ct.include({openTooltip:function(r,a,c){return this._initOverlay(Ip,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Or.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ip,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Ao||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(Xe(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Xe(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,h;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),h=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(a)}});var YS=Ul.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(mp(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var h=ge(c.bgPos);a.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function lN(r){return new YS(r)}Ul.Default=id;var nd=Or.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){v(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Qt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Bl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof Pe?r:new Pe(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),h=0,_=a.length,y;h<_;h++)y=a[h].style.zIndex,a[h]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie.ielt9){lr(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var h in this._tiles){var _=this._tiles[h];if(!(!_.current||!_.loaded)){var y=Math.min(1,(r-_.loaded)/200);lr(_.el,y),y<1?a=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(ct(this._fadeFrame),this._fadeFrame=He(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Qt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var h=this._levels[r],_=this._map;return h||(h=this._levels[r]={},h.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=a,h.origin=_.project(_.unproject(_.getPixelOrigin()),r).round(),h.zoom=r,this._setZoomTransform(h,_.getCenter(),_.getZoom()),f(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var h=a.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Qt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,h){var _=Math.floor(r/2),y=Math.floor(a/2),w=c-1,O=new Pe(+_,+y);O.z=+w;var z=this._tileCoordsToKey(O),K=this._tiles[z];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),w>h?this._retainParent(_,y,w,h):!1)},_retainChildren:function(r,a,c,h){for(var _=2*r;_<2*r+2;_++)for(var y=2*a;y<2*a+2;y++){var w=new Pe(_,y);w.z=c+1;var O=this._tileCoordsToKey(w),z=this._tiles[O];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);c+1<h&&this._retainChildren(_,y,c+1,h)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,h){var _=Math.round(a);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var y=this.options.updateWhenZooming&&_!==this._tileZoom;(!h||y)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var h=this._map.getZoomScale(c,r.zoom),_=r.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(a,c)).round();Ie.any3d?ws(r.el,_,h):Si(r.el,_)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),h=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],h).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],h).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],h).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],h).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),h=a.getZoomScale(c,this._tileZoom),_=a.project(r,this._tileZoom).floor(),y=a.getSize().divideBy(h*2);return new qe(_.subtract(y),_.add(y))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(r),_=this._pxBoundsToTileRange(h),y=_.getCenter(),w=[],O=this.options.keepBuffer,z=new qe(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var me=this._tiles[K].coords;(me.z!==this._tileZoom||!z.contains(new Pe(me.x,me.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var Re=_.min.y;Re<=_.max.y;Re++)for(var dt=_.min.x;dt<=_.max.x;dt++){var Cn=new Pe(dt,Re);if(Cn.z=this._tileZoom,!!this._isValidTile(Cn)){var Wi=this._tiles[this._tileCoordsToKey(Cn)];Wi?Wi.current=!0:w.push(Cn)}}if(w.sort(function(wn,Wl){return wn.distanceTo(y)-Wl.distanceTo(y)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ur=document.createDocumentFragment();for(dt=0;dt<w.length;dt++)this._addTile(w[dt],ur);this._level.el.appendChild(ur)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(r);return A(this.options.bounds).overlaps(h)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),h=r.scaleBy(c),_=h.add(c),y=a.unproject(h,r.z),w=a.unproject(_,r.z);return[y,w]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Q(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new Pe(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Qt(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){rt(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=f,r.onmousemove=f,Ie.ielt9&&this.options.opacity<1&&lr(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),h=this._tileCoordsToKey(r),_=this.createTile(this._wrapCoords(r),o(this._tileReady,this,r));this._initTile(_),this.createTile.length<2&&He(o(this._tileReady,this,r,null,_)),Si(_,c),this._tiles[h]={el:_,coords:r,current:!0},a.appendChild(_),this.fire("tileloadstart",{tile:_,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var h=this._tileCoordsToKey(r);c=this._tiles[h],c&&(c.loaded=+new Date,this._map._fadeAnimated?(lr(c.el,0),ct(this._fadeFrame),this._fadeFrame=He(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(rt(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie.ielt9||!this._map._fadeAnimated?He(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new Pe(this._wrapX?d(r.x,this._wrapX):r.x,this._wrapY?d(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new qe(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function cN(r){return new nd(r)}var Gl=nd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=v(this,a),a.detectRetina&&Ie.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return Xe(c,"load",o(this._tileOnLoad,this,a,c)),Xe(c,"error",o(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:Ie.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return b(this._url,t(a,this.options))},_tileOnLoad:function(r,a){Ie.ielt9?setTimeout(o(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var h=this.options.errorTileUrl;h&&a.getAttribute("src")!==h&&(a.src=h),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,h=this.options.zoomOffset;return c&&(r=a-r),r+h},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=f,a.onerror=f,!a.complete)){a.src=U;var c=this._tiles[r].coords;Qt(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",U),nd.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===U))return nd.prototype._tileReady.call(this,r,a,c)}});function BS(r,a){return new Gl(r,a)}var zS=Gl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=t({},this.defaultWmsParams);for(var h in a)h in this.options||(c[h]=a[h]);a=v(this,a);var _=a.detectRetina&&Ie.retina?2:1,y=this.getTileSize();c.width=y.x*_,c.height=y.y*_,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Gl.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,h=F(c.project(a[0]),c.project(a[1])),_=h.min,y=h.max,w=(this._wmsVersion>=1.3&&this._crs===AS?[_.y,_.x,y.y,y.x]:[_.x,_.y,y.x,y.y]).join(","),O=Gl.prototype.getTileUrl.call(this,r);return O+C(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(r,a){return t(this.wmsParams,r),a||this.redraw(),this}});function uN(r,a){return new zS(r,a)}Gl.WMS=zS,BS.wms=uN;var ko=Or.extend({options:{padding:.1},initialize:function(r){v(this,r),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),rt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,a),y=h.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(r,a));Ie.any3d?ws(this._container,y,c):Si(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new qe(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),US=ko.extend({options:{tolerance:0},getEvents:function(){var r=ko.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ko.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Xe(r,"mousemove",this._onMouseMove,this),Xe(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xe(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){ct(this._redrawRequest),delete this._ctx,Qt(this._container),Yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ko.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),h=Ie.retina?2:1;Si(a,r.min),a.width=h*c.x,a.height=h*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",Ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){ko.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[l(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,h=a.prev;c?c.prev=h:this._drawLast=h,h?h.next=c:this._drawFirst=c,delete r._order,delete this._layers[l(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],h,_;for(_=0;_<a.length;_++){if(h=Number(a[_]),isNaN(h))return;c.push(h)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||He(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new qe,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)r=h.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,h,_,y,w=r._parts,O=w.length,z=this._ctx;if(O){for(z.beginPath(),c=0;c<O;c++){for(h=0,_=w[c].length;h<_;h++)y=w[c][h],z[h?"lineTo":"moveTo"](y.x,y.y);a&&z.closePath()}this._fillStroke(z,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,h=Math.max(Math.round(r._radius),1),_=(Math.max(Math.round(r._radiusY),1)||h)/h;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(a.x,a.y/_,h,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,h,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(h=c);this._fireEvent(h?[h]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(pi(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,h,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(h=c);h!==this._hoveredLayer&&(this._handleMouseOut(r),h&&(rt(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,h=a.prev;if(c)c.prev=h;else return;h?h.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,h=a.prev;if(h)h.next=c;else return;c?c.prev=h:h&&(this._drawLast=h),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function HS(r){return Ie.canvas?new US(r):null}var rd=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dN={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ko.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=rd("shape");rt(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=rd("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[l(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Qt(a),r.removeInteractiveTarget(a),delete this._layers[l(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,h=r.options,_=r._container;_.stroked=!!h.stroke,_.filled=!!h.fill,h.stroke?(a||(a=r._stroke=rd("stroke")),_.appendChild(a),a.weight=h.weight+"px",a.color=h.color,a.opacity=h.opacity,h.dashArray?a.dashStyle=S(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=h.lineCap.replace("butt","flat"),a.joinstyle=h.lineJoin):a&&(_.removeChild(a),r._stroke=null),h.fill?(c||(c=r._fill=rd("fill")),_.appendChild(c),c.color=h.fillColor||h.color,c.opacity=h.fillOpacity):c&&(_.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),h=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+h+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){Yl(r._container)},_bringToBack:function(r){Bl(r._container)}},Pp=Ie.vml?rd:Ft,od=ko.extend({_initContainer:function(){this._container=Pp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qt(this._container),Yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ko.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Si(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Pp("path");r.options.className&&rt(a,r.options.className),r.options.interactive&&rt(a,"leaflet-interactive"),this._updateStyle(r),this._layers[l(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Qt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[l(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,tn(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),h=Math.max(Math.round(r._radiusY),1)||c,_="a"+c+","+h+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){Yl(r._path)},_bringToBack:function(r){Bl(r._path)}});Ie.vml&&od.include(dN);function VS(r){return Ie.svg||Ie.vml?new od(r):null}Ct.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&HS(r)||VS(r)}});var GS=Hl.extend({initialize:function(r,a){Hl.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=A(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function hN(r,a){return new GS(r,a)}od.create=Pp,od.pointsToPath=tn,Mo.geometryToLayer=Tp,Mo.coordsToLatLng=gv,Mo.coordsToLatLngs=bp,Mo.latLngToCoords=yv,Mo.latLngsToCoords=xp,Mo.getFeature=Vl,Mo.asFeature=Dp,Ct.mergeOptions({boxZoom:!0});var WS=ao.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xu(),tv(),this._startPoint=this._map.mouseEventToContainerPoint(r),Xe(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),rt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new qe(this._point,this._startPoint),c=a.getSize();Si(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Qt(this._box),pi(this._container,"leaflet-crosshair")),Ju(),iv(),Yt(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var a=new Q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ct.addInitHook("addHandler","boxZoom",WS),Ct.mergeOptions({doubleClickZoom:!0});var ZS=ao.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),h=a.options.zoomDelta,_=r.originalEvent.shiftKey?c-h:c+h;a.options.doubleClickZoom==="center"?a.setZoom(_):a.setZoomAround(r.containerPoint,_)}});Ct.addInitHook("addHandler","doubleClickZoom",ZS),Ct.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var jS=ao.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new pa(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}rt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pi(this._map._container,"leaflet-grab"),pi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=A(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,h=this._draggable._newPos.x,_=(h-a+c)%r+a-c,y=(h+a+c)%r-a-c,w=Math.abs(_+c)<Math.abs(y+c)?_:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(r){var a=this._map,c=a.options,h=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),h)a.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,w=c.easeLinearity,O=_.multiplyBy(w/y),z=O.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,z),me=O.multiplyBy(K/z),Re=K/(c.inertiaDeceleration*w),dt=me.multiplyBy(-Re/2).round();!dt.x&&!dt.y?a.fire("moveend"):(dt=a._limitOffset(dt,a.options.maxBounds),He(function(){a.panBy(dt,{duration:Re,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});Ct.addInitHook("addHandler","dragging",jS),Ct.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $S=ao.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Xe(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,h=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(h,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,h,_;for(h=0,_=c.left.length;h<_;h++)a[c.left[h]]=[-1*r,0];for(h=0,_=c.right.length;h<_;h++)a[c.right[h]]=[r,0];for(h=0,_=c.down.length;h<_;h++)a[c.down[h]]=[0,r];for(h=0,_=c.up.length;h<_;h++)a[c.up[h]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,h,_;for(h=0,_=c.zoomIn.length;h<_;h++)a[c.zoomIn[h]]=r;for(h=0,_=c.zoomOut.length;h<_;h++)a[c.zoomOut[h]]=-r},_addHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,h;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(h=this._panKeys[a],r.shiftKey&&(h=ge(h).multiplyBy(3)),c.options.maxBounds&&(h=c._limitOffset(ge(h),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(h)));c.panTo(_)}else c.panBy(h)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Ps(r)}}});Ct.addInitHook("addHandler","keyboard",$S),Ct.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qS=ao.extend({addHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=yS(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var h=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),h),Ps(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,y=c?Math.ceil(_/c)*c:_,w=r._limitZoom(a+(this._delta>0?y:-y))-a;this._delta=0,this._startTime=null,w&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+w):r.setZoomAround(this._lastMousePos,a+w))}});Ct.addInitHook("addHandler","scrollWheelZoom",qS);var pN=600;Ct.mergeOptions({tapHold:Ie.touchNative&&Ie.safari&&Ie.mobile,tapTolerance:15});var XS=ao.extend({addHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new Pe(a.clientX,a.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Xe(document,"touchend",nn),Xe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),pN),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Yt(document,"touchend",nn),Yt(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Yt(document,"touchend touchcancel contextmenu",this._cancel,this),Yt(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new Pe(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ct.addInitHook("addHandler","tapHold",XS),Ct.mergeOptions({touchZoom:Ie.touch,bounceAtZoomLimits:!0});var JS=ao.extend({addHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pi(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),h=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(h)._divideBy(2))),this._startDist=c.distanceTo(h),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),nn(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),h=a.mouseEventToContainerPoint(r.touches[1]),_=c.distanceTo(h)/this._startDist;if(this._zoom=a.getScaleZoom(_,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&_<1||this._zoom>a.getMaxZoom()&&_>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var y=c._add(h)._divideBy(2)._subtract(this._centerPoint);if(_===1&&y.x===0&&y.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),ct(this._animRequest);var w=o(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=He(w,this,!0),nn(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ct(this._animRequest),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ct.addInitHook("addHandler","touchZoom",JS),Ct.BoxZoom=WS,Ct.DoubleClickZoom=ZS,Ct.Drag=jS,Ct.Keyboard=$S,Ct.ScrollWheelZoom=qS,Ct.TapHold=XS,Ct.TouchZoom=JS,e.Bounds=qe,e.Browser=Ie,e.CRS=de,e.Canvas=US,e.Circle=vv,e.CircleMarker=Ep,e.Class=Wt,e.Control=Ar,e.DivIcon=YS,e.DivOverlay=so,e.DomEvent=Lw,e.DomUtil=Iw,e.Draggable=pa,e.Evented=Vi,e.FeatureGroup=Ao,e.GeoJSON=Mo,e.GridLayer=nd,e.Handler=ao,e.Icon=Ul,e.ImageOverlay=wp,e.LatLng=H,e.LatLngBounds=Q,e.Layer=Or,e.LayerGroup=zl,e.LineUtil=Gw,e.Map=Ct,e.Marker=Cp,e.Mixin=Yw,e.Path=fa,e.Point=Pe,e.PolyUtil=Bw,e.Polygon=Hl,e.Polyline=Oo,e.Popup=Np,e.PosAnimation=SS,e.Projection=Ww,e.Rectangle=GS,e.Renderer=ko,e.SVG=od,e.SVGOverlay=FS,e.TileLayer=Gl,e.Tooltip=Ip,e.Transformation=ue,e.Util=Ce,e.VideoOverlay=RS,e.bind=o,e.bounds=F,e.canvas=HS,e.circle=Qw,e.circleMarker=Kw,e.control=ed,e.divIcon=lN,e.extend=t,e.featureGroup=qw,e.geoJSON=kS,e.geoJson=iN,e.gridLayer=cN,e.icon=Xw,e.imageOverlay=nN,e.latLng=G,e.latLngBounds=A,e.layerGroup=$w,e.map=Aw,e.marker=Jw,e.point=ge,e.polygon=tN,e.polyline=eN,e.popup=aN,e.rectangle=hN,e.setOptions=v,e.stamp=l,e.svg=VS,e.svgOverlay=oN,e.tileLayer=BS,e.tooltip=sN,e.transformation=we,e.version=n,e.videoOverlay=rN;var fN=window.L;e.noConflict=function(){return window.L=fN,this},window.L=e})});var ID=tC((U_,ND)=>{(function(e,n){typeof U_=="object"&&typeof ND<"u"?n(U_):typeof define=="function"&&define.amd?define(["exports"],n):(e=e||self,n((e.Leaflet=e.Leaflet||{},e.Leaflet.markercluster={})))})(U_,function(e){"use strict";var n=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(i){L.Util.setOptions(this,i),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var o=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,o?this._withAnimation:this._noAnimation),this._markerCluster=o?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(i){if(i instanceof L.LayerGroup)return this.addLayers([i]);if(!i.getLatLng)return this._nonPointGroup.addLayer(i),this.fire("layeradd",{layer:i}),this;if(!this._map)return this._needsClustering.push(i),this.fire("layeradd",{layer:i}),this;if(this.hasLayer(i))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(i,this._maxZoom),this.fire("layeradd",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var o=i,s=this._zoom;if(i.__parent)for(;o.__parent._zoom>=s;)o=o.__parent;return this._currentShownBounds.contains(o.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(i,o):this._animationAddLayerNonAnimated(i,o)),this},removeLayer:function(i){return i instanceof L.LayerGroup?this.removeLayers([i]):i.getLatLng?this._map?i.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(i)),this._removeLayer(i,!0),this.fire("layerremove",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),i.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(i)&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,i)&&this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}),this):(this._nonPointGroup.removeLayer(i),this.fire("layerremove",{layer:i}),this)},addLayers:function(i,o){if(!L.Util.isArray(i))return this.addLayer(i);var s=this._featureGroup,l=this._nonPointGroup,u=this.options.chunkedLoading,d=this.options.chunkInterval,f=this.options.chunkProgress,p=i.length,m=0,g=!0,v;if(this._map){var C=new Date().getTime(),T=L.bind(function(){var S=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();m<p;m++){if(u&&m%200===0){var I=new Date().getTime()-S;if(I>d)break}if(v=i[m],v instanceof L.LayerGroup){g&&(i=i.slice(),g=!1),this._extractNonGroupLayers(v,i),p=i.length;continue}if(!v.getLatLng){l.addLayer(v),o||this.fire("layeradd",{layer:v});continue}if(!this.hasLayer(v)&&(this._addLayer(v,this._maxZoom),o||this.fire("layeradd",{layer:v}),v.__parent&&v.__parent.getChildCount()===2)){var U=v.__parent.getAllChildMarkers(),j=U[0]===v?U[1]:U[0];s.removeLayer(j)}}f&&f(m,p,new Date().getTime()-C),m===p?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(T,this.options.chunkDelay)},this);T()}else for(var b=this._needsClustering;m<p;m++){if(v=i[m],v instanceof L.LayerGroup){g&&(i=i.slice(),g=!1),this._extractNonGroupLayers(v,i),p=i.length;continue}if(!v.getLatLng){l.addLayer(v);continue}this.hasLayer(v)||b.push(v)}return this},removeLayers:function(i){var o,s,l=i.length,u=this._featureGroup,d=this._nonPointGroup,f=!0;if(!this._map){for(o=0;o<l;o++){if(s=i[o],s instanceof L.LayerGroup){f&&(i=i.slice(),f=!1),this._extractNonGroupLayers(s,i),l=i.length;continue}this._arraySplice(this._needsClustering,s),d.removeLayer(s),this.hasLayer(s)&&this._needsRemoving.push({layer:s,latlng:s._latlng}),this.fire("layerremove",{layer:s})}return this}if(this._unspiderfy){this._unspiderfy();var p=i.slice(),m=l;for(o=0;o<m;o++){if(s=p[o],s instanceof L.LayerGroup){this._extractNonGroupLayers(s,p),m=p.length;continue}this._unspiderfyLayer(s)}}for(o=0;o<l;o++){if(s=i[o],s instanceof L.LayerGroup){f&&(i=i.slice(),f=!1),this._extractNonGroupLayers(s,i),l=i.length;continue}if(!s.__parent){d.removeLayer(s),this.fire("layerremove",{layer:s});continue}this._removeLayer(s,!0,!0),this.fire("layerremove",{layer:s}),u.hasLayer(s)&&(u.removeLayer(s),s.clusterShow&&s.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(i){i.off(this._childMarkerEventHandlers,this),delete i.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var i=new L.LatLngBounds;this._topClusterLevel&&i.extend(this._topClusterLevel._bounds);for(var o=this._needsClustering.length-1;o>=0;o--)i.extend(this._needsClustering[o].getLatLng());return i.extend(this._nonPointGroup.getBounds()),i},eachLayer:function(i,o){var s=this._needsClustering.slice(),l=this._needsRemoving,u,d,f;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(s),d=s.length-1;d>=0;d--){for(u=!0,f=l.length-1;f>=0;f--)if(l[f].layer===s[d]){u=!1;break}u&&i.call(o,s[d])}this._nonPointGroup.eachLayer(i,o)},getLayers:function(){var i=[];return this.eachLayer(function(o){i.push(o)}),i},getLayer:function(i){var o=null;return i=parseInt(i,10),this.eachLayer(function(s){L.stamp(s)===i&&(o=s)}),o},hasLayer:function(i){if(!i)return!1;var o,s=this._needsClustering;for(o=s.length-1;o>=0;o--)if(s[o]===i)return!0;for(s=this._needsRemoving,o=s.length-1;o>=0;o--)if(s[o].layer===i)return!1;return!!(i.__parent&&i.__parent._group===this)||this._nonPointGroup.hasLayer(i)},zoomToShowLayer:function(i,o){var s=this._map;typeof o!="function"&&(o=function(){});var l=function(){(s.hasLayer(i)||s.hasLayer(i.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",l,this),this.off("animationend",l,this),s.hasLayer(i)?o():i.__parent._icon&&(this.once("spiderfied",o,this),i.__parent.spiderfy()))};i._icon&&this._map.getBounds().contains(i.getLatLng())?o():i.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",l,this),this._map.panTo(i.getLatLng())):(this._map.on("moveend",l,this),this.on("animationend",l,this),i.__parent.zoomToBounds())},onAdd:function(i){this._map=i;var o,s,l;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(i),this._nonPointGroup.addTo(i),this._gridClusters||this._generateInitialClusters(),this._maxLat=i.options.crs.projection.MAX_LATITUDE,o=0,s=this._needsRemoving.length;o<s;o++)l=this._needsRemoving[o],l.newlatlng=l.layer._latlng,l.layer._latlng=l.latlng;for(o=0,s=this._needsRemoving.length;o<s;o++)l=this._needsRemoving[o],this._removeLayer(l.layer,!0),l.layer._latlng=l.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),s=this._needsClustering,this._needsClustering=[],this.addLayers(s,!0)},onRemove:function(i){i.off("zoomend",this._zoomEnd,this),i.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(i){for(var o=i;o&&!o._icon;)o=o.__parent;return o||null},_arraySplice:function(i,o){for(var s=i.length-1;s>=0;s--)if(i[s]===o)return i.splice(s,1),!0},_removeFromGridUnclustered:function(i,o){for(var s=this._map,l=this._gridUnclustered,u=Math.floor(this._map.getMinZoom());o>=u&&l[o].removeObject(i,s.project(i.getLatLng(),o));o--);},_childMarkerDragStart:function(i){i.target.__dragStart=i.target._latlng},_childMarkerMoved:function(i){if(!this._ignoreMove&&!i.target.__dragStart){var o=i.target._popup&&i.target._popup.isOpen();this._moveChild(i.target,i.oldLatLng,i.latlng),o&&i.target.openPopup()}},_moveChild:function(i,o,s){i._latlng=o,this.removeLayer(i),i._latlng=s,this.addLayer(i)},_childMarkerDragEnd:function(i){var o=i.target.__dragStart;delete i.target.__dragStart,o&&this._moveChild(i.target,o,i.target._latlng)},_removeLayer:function(i,o,s){var l=this._gridClusters,u=this._gridUnclustered,d=this._featureGroup,f=this._map,p=Math.floor(this._map.getMinZoom());o&&this._removeFromGridUnclustered(i,this._maxZoom);var m=i.__parent,g=m._markers,v;for(this._arraySplice(g,i);m&&(m._childCount--,m._boundsNeedUpdate=!0,!(m._zoom<p));)o&&m._childCount<=1?(v=m._markers[0]===i?m._markers[1]:m._markers[0],l[m._zoom].removeObject(m,f.project(m._cLatLng,m._zoom)),u[m._zoom].addObject(v,f.project(v.getLatLng(),m._zoom)),this._arraySplice(m.__parent._childClusters,m),m.__parent._markers.push(v),v.__parent=m.__parent,m._icon&&(d.removeLayer(m),s||d.addLayer(v))):m._iconNeedsUpdate=!0,m=m.__parent;delete i.__parent},_isOrIsParent:function(i,o){for(;o;){if(i===o)return!0;o=o.parentNode}return!1},fire:function(i,o,s){if(o&&o.layer instanceof L.MarkerCluster){if(o.originalEvent&&this._isOrIsParent(o.layer._icon,o.originalEvent.relatedTarget))return;i="cluster"+i}L.FeatureGroup.prototype.fire.call(this,i,o,s)},listens:function(i,o){return L.FeatureGroup.prototype.listens.call(this,i,o)||L.FeatureGroup.prototype.listens.call(this,"cluster"+i,o)},_defaultIconCreateFunction:function(i){var o=i.getChildCount(),s=" marker-cluster-";return o<10?s+="small":o<100?s+="medium":s+="large",new L.DivIcon({html:"<div><span>"+o+"</span></div>",className:"marker-cluster"+s,iconSize:new L.Point(40,40)})},_bindEvents:function(){var i=this._map,o=this.options.spiderfyOnMaxZoom,s=this.options.showCoverageOnHover,l=this.options.zoomToBoundsOnClick,u=this.options.spiderfyOnEveryZoom;(o||l||u)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),s&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),i.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(i){var o=i.layer,s=o;if(!(i.type==="clusterkeypress"&&i.originalEvent&&i.originalEvent.keyCode!==13)){for(;s._childClusters.length===1;)s=s._childClusters[0];s._zoom===this._maxZoom&&s._childCount===o._childCount&&this.options.spiderfyOnMaxZoom?o.spiderfy():this.options.zoomToBoundsOnClick&&o.zoomToBounds(),this.options.spiderfyOnEveryZoom&&o.spiderfy(),i.originalEvent&&i.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(i){var o=this._map;this._inZoomAnimation||(this._shownPolygon&&o.removeLayer(this._shownPolygon),i.layer.getChildCount()>2&&i.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(i.layer.getConvexHull(),this.options.polygonOptions),o.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var i=this.options.spiderfyOnMaxZoom,o=this.options.showCoverageOnHover,s=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom,u=this._map;(i||s||l)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),o&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),u.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var i=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,i),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),i),this._currentShownBounds=i}},_generateInitialClusters:function(){var i=Math.ceil(this._map.getMaxZoom()),o=Math.floor(this._map.getMinZoom()),s=this.options.maxClusterRadius,l=s;typeof s!="function"&&(l=function(){return s}),this.options.disableClusteringAtZoom!==null&&(i=this.options.disableClusteringAtZoom-1),this._maxZoom=i,this._gridClusters={},this._gridUnclustered={};for(var u=i;u>=o;u--)this._gridClusters[u]=new L.DistanceGrid(l(u)),this._gridUnclustered[u]=new L.DistanceGrid(l(u));this._topClusterLevel=new this._markerCluster(this,o-1)},_addLayer:function(i,o){var s=this._gridClusters,l=this._gridUnclustered,u=Math.floor(this._map.getMinZoom()),d,f;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(i),i.on(this._childMarkerEventHandlers,this);o>=u;o--){d=this._map.project(i.getLatLng(),o);var p=s[o].getNearObject(d);if(p){p._addChild(i),i.__parent=p;return}if(p=l[o].getNearObject(d),p){var m=p.__parent;m&&this._removeLayer(p,!1);var g=new this._markerCluster(this,o,p,i);s[o].addObject(g,this._map.project(g._cLatLng,o)),p.__parent=g,i.__parent=g;var v=g;for(f=o-1;f>m._zoom;f--)v=new this._markerCluster(this,f,v),s[f].addObject(v,this._map.project(p.getLatLng(),f));m._addChild(v),this._removeFromGridUnclustered(p,o);return}l[o].addObject(i,d)}this._topClusterLevel._addChild(i),i.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(i){i instanceof L.MarkerCluster&&i._iconNeedsUpdate&&i._updateIcon()})},_enqueue:function(i){this._queue.push(i),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var i=0;i<this._queue.length;i++)this._queue[i].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var i=Math.round(this._map._zoom);this._processQueue(),this._zoom<i&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,i)):this._zoom>i?(this._animationStart(),this._animationZoomOut(this._zoom,i)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(i){var o=this._maxLat;return o!==void 0&&(i.getNorth()>=o&&(i._northEast.lat=1/0),i.getSouth()<=-o&&(i._southWest.lat=-1/0)),i},_animationAddLayerNonAnimated:function(i,o){if(o===i)this._featureGroup.addLayer(i);else if(o._childCount===2){o._addToMap();var s=o.getAllChildMarkers();this._featureGroup.removeLayer(s[0]),this._featureGroup.removeLayer(s[1])}else o._updateIcon()},_extractNonGroupLayers:function(i,o){var s=i.getLayers(),l=0,u;for(o=o||[];l<s.length;l++){if(u=s[l],u instanceof L.LayerGroup){this._extractNonGroupLayers(u,o);continue}o.push(u)}return o},_overrideMarkerIcon:function(i){var o=i.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[i]}});return o}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(i,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(i,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(i,o){this._animationAddLayerNonAnimated(i,o)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(i,o){var s=this._getExpandedVisibleBounds(),l=this._featureGroup,u=Math.floor(this._map.getMinZoom()),d;this._ignoreMove=!0,this._topClusterLevel._recursively(s,i,u,function(f){var p=f._latlng,m=f._markers,g;for(s.contains(p)||(p=null),f._isSingleParent()&&i+1===o?(l.removeLayer(f),f._recursivelyAddChildrenToMap(null,o,s)):(f.clusterHide(),f._recursivelyAddChildrenToMap(p,o,s)),d=m.length-1;d>=0;d--)g=m[d],s.contains(g._latlng)||l.removeLayer(g)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,o),l.eachLayer(function(f){!(f instanceof L.MarkerCluster)&&f._icon&&f.clusterShow()}),this._topClusterLevel._recursively(s,i,o,function(f){f._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,i,u,function(f){l.removeLayer(f),f.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(i,o){this._animationZoomOutSingle(this._topClusterLevel,i-1,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i,this._getExpandedVisibleBounds())},_animationAddLayer:function(i,o){var s=this,l=this._featureGroup;l.addLayer(i),o!==i&&(o._childCount>2?(o._updateIcon(),this._forceLayout(),this._animationStart(),i._setPos(this._map.latLngToLayerPoint(o.getLatLng())),i.clusterHide(),this._enqueue(function(){l.removeLayer(i),i.clusterShow(),s._animationEnd()})):(this._forceLayout(),s._animationStart(),s._animationZoomOutSingle(o,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(i,o,s){var l=this._getExpandedVisibleBounds(),u=Math.floor(this._map.getMinZoom());i._recursivelyAnimateChildrenInAndAddSelfToMap(l,u,o+1,s);var d=this;this._forceLayout(),i._recursivelyBecomeVisible(l,s),this._enqueue(function(){if(i._childCount===1){var f=i._markers[0];this._ignoreMove=!0,f.setLatLng(f.getLatLng()),this._ignoreMove=!1,f.clusterShow&&f.clusterShow()}else i._recursively(l,s,u,function(p){p._recursivelyRemoveChildrenFromMap(l,u,o+1)});d._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(i){return new L.MarkerClusterGroup(i)};var t=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(i,o,s,l){L.Marker.prototype.initialize.call(this,s?s._cLatLng||s.getLatLng():new L.LatLng(0,0),{icon:this,pane:i.options.clusterPane}),this._group=i,this._zoom=o,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,s&&this._addChild(s),l&&this._addChild(l)},getAllChildMarkers:function(i,o){i=i||[];for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s].getAllChildMarkers(i,o);for(var l=this._markers.length-1;l>=0;l--)o&&this._markers[l].__dragStart||i.push(this._markers[l]);return i},getChildCount:function(){return this._childCount},zoomToBounds:function(i){for(var o=this._childClusters.slice(),s=this._group._map,l=s.getBoundsZoom(this._bounds),u=this._zoom+1,d=s.getZoom(),f;o.length>0&&l>u;){u++;var p=[];for(f=0;f<o.length;f++)p=p.concat(o[f]._childClusters);o=p}l>u?this._group._map.setView(this._latlng,u):l<=d?this._group._map.setView(this._latlng,d+1):this._group._map.fitBounds(this._bounds,i)},getBounds:function(){var i=new L.LatLngBounds;return i.extend(this._bounds),i},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(i,o){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(i),i instanceof L.MarkerCluster?(o||(this._childClusters.push(i),i.__parent=this),this._childCount+=i._childCount):(o||this._markers.push(i),this._childCount++),this.__parent&&this.__parent._addChild(i,!0)},_setClusterCenter:function(i){this._cLatLng||(this._cLatLng=i._cLatLng||i._latlng)},_resetBounds:function(){var i=this._bounds;i._southWest&&(i._southWest.lat=1/0,i._southWest.lng=1/0),i._northEast&&(i._northEast.lat=-1/0,i._northEast.lng=-1/0)},_recalculateBounds:function(){var i=this._markers,o=this._childClusters,s=0,l=0,u=this._childCount,d,f,p,m;if(u!==0){for(this._resetBounds(),d=0;d<i.length;d++)p=i[d]._latlng,this._bounds.extend(p),s+=p.lat,l+=p.lng;for(d=0;d<o.length;d++)f=o[d],f._boundsNeedUpdate&&f._recalculateBounds(),this._bounds.extend(f._bounds),p=f._wLatLng,m=f._childCount,s+=p.lat*m,l+=p.lng*m;this._latlng=this._wLatLng=new L.LatLng(s/u,l/u),this._boundsNeedUpdate=!1}},_addToMap:function(i){i&&(this._backupLatlng=this._latlng,this.setLatLng(i)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(i,o,s){this._recursively(i,this._group._map.getMinZoom(),s-1,function(l){var u=l._markers,d,f;for(d=u.length-1;d>=0;d--)f=u[d],f._icon&&(f._setPos(o),f.clusterHide())},function(l){var u=l._childClusters,d,f;for(d=u.length-1;d>=0;d--)f=u[d],f._icon&&(f._setPos(o),f.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(i,o,s,l){this._recursively(i,l,o,function(u){u._recursivelyAnimateChildrenIn(i,u._group._map.latLngToLayerPoint(u.getLatLng()).round(),s),u._isSingleParent()&&s-1===l?(u.clusterShow(),u._recursivelyRemoveChildrenFromMap(i,o,s)):u.clusterHide(),u._addToMap()})},_recursivelyBecomeVisible:function(i,o){this._recursively(i,this._group._map.getMinZoom(),o,null,function(s){s.clusterShow()})},_recursivelyAddChildrenToMap:function(i,o,s){this._recursively(s,this._group._map.getMinZoom()-1,o,function(l){if(o!==l._zoom)for(var u=l._markers.length-1;u>=0;u--){var d=l._markers[u];s.contains(d._latlng)&&(i&&(d._backupLatlng=d.getLatLng(),d.setLatLng(i),d.clusterHide&&d.clusterHide()),l._group._featureGroup.addLayer(d))}},function(l){l._addToMap(i)})},_recursivelyRestoreChildPositions:function(i){for(var o=this._markers.length-1;o>=0;o--){var s=this._markers[o];s._backupLatlng&&(s.setLatLng(s._backupLatlng),delete s._backupLatlng)}if(i-1===this._zoom)for(var l=this._childClusters.length-1;l>=0;l--)this._childClusters[l]._restorePosition();else for(var u=this._childClusters.length-1;u>=0;u--)this._childClusters[u]._recursivelyRestoreChildPositions(i)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(i,o,s,l){var u,d;this._recursively(i,o-1,s-1,function(f){for(d=f._markers.length-1;d>=0;d--)u=f._markers[d],(!l||!l.contains(u._latlng))&&(f._group._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow())},function(f){for(d=f._childClusters.length-1;d>=0;d--)u=f._childClusters[d],(!l||!l.contains(u._latlng))&&(f._group._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow())})},_recursively:function(i,o,s,l,u){var d=this._childClusters,f=this._zoom,p,m;if(o<=f&&(l&&l(this),u&&f===s&&u(this)),f<o||f<s)for(p=d.length-1;p>=0;p--)m=d[p],m._boundsNeedUpdate&&m._recalculateBounds(),i.intersects(m._bounds)&&m._recursively(i,o,s,l,u)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var i=this.options.opacity;return this.setOpacity(0),this.options.opacity=i,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(i){this._cellSize=i,this._sqCellSize=i*i,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(i,o){var s=this._getCoord(o.x),l=this._getCoord(o.y),u=this._grid,d=u[l]=u[l]||{},f=d[s]=d[s]||[],p=L.Util.stamp(i);this._objectPoint[p]=o,f.push(i)},updateObject:function(i,o){this.removeObject(i),this.addObject(i,o)},removeObject:function(i,o){var s=this._getCoord(o.x),l=this._getCoord(o.y),u=this._grid,d=u[l]=u[l]||{},f=d[s]=d[s]||[],p,m;for(delete this._objectPoint[L.Util.stamp(i)],p=0,m=f.length;p<m;p++)if(f[p]===i)return f.splice(p,1),m===1&&delete d[s],!0},eachObject:function(i,o){var s,l,u,d,f,p,m,g=this._grid;for(s in g){f=g[s];for(l in f)for(p=f[l],u=0,d=p.length;u<d;u++)m=i.call(o,p[u]),m&&(u--,d--)}},getNearObject:function(i){var o=this._getCoord(i.x),s=this._getCoord(i.y),l,u,d,f,p,m,g,v,C=this._objectPoint,T=this._sqCellSize,b=null;for(l=s-1;l<=s+1;l++)if(f=this._grid[l],f){for(u=o-1;u<=o+1;u++)if(p=f[u],p)for(d=0,m=p.length;d<m;d++)g=p[d],v=this._sqDist(C[L.Util.stamp(g)],i),(v<T||v<=T&&b===null)&&(T=v,b=g)}return b},_getCoord:function(i){var o=Math.floor(i/this._cellSize);return isFinite(o)?o:i},_sqDist:function(i,o){var s=o.x-i.x,l=o.y-i.y;return s*s+l*l}},function(){L.QuickHull={getDistant:function(i,o){var s=o[1].lat-o[0].lat,l=o[0].lng-o[1].lng;return l*(i.lat-o[0].lat)+s*(i.lng-o[0].lng)},findMostDistantPointFromBaseLine:function(i,o){var s=0,l=null,u=[],d,f,p;for(d=o.length-1;d>=0;d--){if(f=o[d],p=this.getDistant(f,i),p>0)u.push(f);else continue;p>s&&(s=p,l=f)}return{maxPoint:l,newPoints:u}},buildConvexHull:function(i,o){var s=[],l=this.findMostDistantPointFromBaseLine(i,o);return l.maxPoint?(s=s.concat(this.buildConvexHull([i[0],l.maxPoint],l.newPoints)),s=s.concat(this.buildConvexHull([l.maxPoint,i[1]],l.newPoints)),s):[i[0]]},getConvexHull:function(i){var o=!1,s=!1,l=!1,u=!1,d=null,f=null,p=null,m=null,g=null,v=null,C;for(C=i.length-1;C>=0;C--){var T=i[C];(o===!1||T.lat>o)&&(d=T,o=T.lat),(s===!1||T.lat<s)&&(f=T,s=T.lat),(l===!1||T.lng>l)&&(p=T,l=T.lng),(u===!1||T.lng<u)&&(m=T,u=T.lng)}s!==o?(v=f,g=d):(v=m,g=p);var b=[].concat(this.buildConvexHull([v,g],i),this.buildConvexHull([g,v],i));return b}}}(),L.MarkerCluster.include({getConvexHull:function(){var i=this.getAllChildMarkers(),o=[],s,l;for(l=i.length-1;l>=0;l--)s=i[l].getLatLng(),o.push(s);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var i=this.getAllChildMarkers(null,!0),o=this._group,s=o._map,l=s.latLngToLayerPoint(this._latlng),u;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?u=this._group.options.spiderfyShapePositions(i.length,l):i.length>=this._circleSpiralSwitchover?u=this._generatePointsSpiral(i.length,l):(l.y+=10,u=this._generatePointsCircle(i.length,l)),this._animationSpiderfy(i,u)}},unspiderfy:function(i){this._group._inZoomAnimation||(this._animationUnspiderfy(i),this._group._spiderfied=null)},_generatePointsCircle:function(i,o){var s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+i),l=s/this._2PI,u=this._2PI/i,d=[],f,p;for(l=Math.max(l,35),d.length=i,f=0;f<i;f++)p=this._circleStartAngle+f*u,d[f]=new L.Point(o.x+l*Math.cos(p),o.y+l*Math.sin(p))._round();return d},_generatePointsSpiral:function(i,o){var s=this._group.options.spiderfyDistanceMultiplier,l=s*this._spiralLengthStart,u=s*this._spiralFootSeparation,d=s*this._spiralLengthFactor*this._2PI,f=0,p=[],m;for(p.length=i,m=i;m>=0;m--)m<i&&(p[m]=new L.Point(o.x+l*Math.cos(f),o.y+l*Math.sin(f))._round()),f+=u/l+m*5e-4,l+=d/f;return p},_noanimationUnspiderfy:function(){var i=this._group,o=i._map,s=i._featureGroup,l=this.getAllChildMarkers(null,!0),u,d;for(i._ignoreMove=!0,this.setOpacity(1),d=l.length-1;d>=0;d--)u=l[d],s.removeLayer(u),u._preSpiderfyLatlng&&(u.setLatLng(u._preSpiderfyLatlng),delete u._preSpiderfyLatlng),u.setZIndexOffset&&u.setZIndexOffset(0),u._spiderLeg&&(o.removeLayer(u._spiderLeg),delete u._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:l}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(i,o){var s=this._group,l=s._map,u=s._featureGroup,d=this._group.options.spiderLegPolylineOptions,f,p,m,g;for(s._ignoreMove=!0,f=0;f<i.length;f++)g=l.layerPointToLatLng(o[f]),p=i[f],m=new L.Polyline([this._latlng,g],d),l.addLayer(m),p._spiderLeg=m,p._preSpiderfyLatlng=p._latlng,p.setLatLng(g),p.setZIndexOffset&&p.setZIndexOffset(1e6),u.addLayer(p);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:i})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(i,o){var s=this,l=this._group,u=l._map,d=l._featureGroup,f=this._latlng,p=u.latLngToLayerPoint(f),m=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),v=g.opacity,C,T,b,S,I,U;for(v===void 0&&(v=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=v,l._ignoreMove=!0,C=0;C<i.length;C++)T=i[C],U=u.layerPointToLatLng(o[C]),b=new L.Polyline([f,U],g),u.addLayer(b),T._spiderLeg=b,m&&(S=b._path,I=S.getTotalLength()+.1,S.style.strokeDasharray=I,S.style.strokeDashoffset=I),T.setZIndexOffset&&T.setZIndexOffset(1e6),T.clusterHide&&T.clusterHide(),d.addLayer(T),T._setPos&&T._setPos(p);for(l._forceLayout(),l._animationStart(),C=i.length-1;C>=0;C--)U=u.layerPointToLatLng(o[C]),T=i[C],T._preSpiderfyLatlng=T._latlng,T.setLatLng(U),T.clusterShow&&T.clusterShow(),m&&(b=T._spiderLeg,S=b._path,S.style.strokeDashoffset=0,b.setStyle({opacity:v}));this.setOpacity(.3),l._ignoreMove=!1,setTimeout(function(){l._animationEnd(),l.fire("spiderfied",{cluster:s,markers:i})},200)},_animationUnspiderfy:function(i){var o=this,s=this._group,l=s._map,u=s._featureGroup,d=i?l._latLngToNewLayerPoint(this._latlng,i.zoom,i.center):l.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(null,!0),p=L.Path.SVG,m,g,v,C,T,b;for(s._ignoreMove=!0,s._animationStart(),this.setOpacity(1),g=f.length-1;g>=0;g--)m=f[g],m._preSpiderfyLatlng&&(m.closePopup(),m.setLatLng(m._preSpiderfyLatlng),delete m._preSpiderfyLatlng,b=!0,m._setPos&&(m._setPos(d),b=!1),m.clusterHide&&(m.clusterHide(),b=!1),b&&u.removeLayer(m),p&&(v=m._spiderLeg,C=v._path,T=C.getTotalLength()+.1,C.style.strokeDashoffset=T,v.setStyle({opacity:0})));s._ignoreMove=!1,setTimeout(function(){var S=0;for(g=f.length-1;g>=0;g--)m=f[g],m._spiderLeg&&S++;for(g=f.length-1;g>=0;g--)m=f[g],m._spiderLeg&&(m.clusterShow&&m.clusterShow(),m.setZIndexOffset&&m.setZIndexOffset(0),S>1&&u.removeLayer(m),l.removeLayer(m._spiderLeg),delete m._spiderLeg);s._animationEnd(),s.fire("unspiderfied",{cluster:o,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(i){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(i))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(i){this._spiderfied&&this._spiderfied.unspiderfy(i)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(i){i._spiderLeg&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow(),i.setZIndexOffset&&i.setZIndexOffset(0),this._map.removeLayer(i._spiderLeg),delete i._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(i){return i?i instanceof L.MarkerClusterGroup?i=i._topClusterLevel.getAllChildMarkers():i instanceof L.LayerGroup?i=i._layers:i instanceof L.MarkerCluster?i=i.getAllChildMarkers():i instanceof L.Marker&&(i=[i]):i=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(i),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(i),this},_flagParentsIconsNeedUpdate:function(i){var o,s;for(o in i)for(s=i[o].__parent;s;)s._iconNeedsUpdate=!0,s=s.__parent},_refreshSingleMarkerModeMarkers:function(i){var o,s;for(o in i)s=i[o],this.hasLayer(s)&&s.setIcon(this._overrideMarkerIcon(s))}}),L.Marker.include({refreshIconOptions:function(i,o){var s=this.options.icon;return L.setOptions(s,i),this.setIcon(s),o&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),e.MarkerClusterGroup=n,e.MarkerCluster=t,Object.defineProperty(e,"__esModule",{value:!0})})});function TN(e,n){e&1&&(D(0,"ion-toolbar",0)(1,"ion-title",1),M(2,"IBF DEMO - SIMULATED DATA"),x()())}var Sk=(()=>{class e{constructor(){this.environmentConfiguration=Ut.configuration}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=ce({type:e,selectors:[["app-disclaimer-toolbar"]],standalone:!1,decls:1,vars:1,consts:[["color","ibf-primary",1,"disclaimer-toolbar"],["size","small",1,"ion-text-center"]],template:function(i,o){i&1&&se(0,TN,3,0,"ion-toolbar",0),i&2&&re(o.environmentConfiguration==="stage"?0:-1)},dependencies:[Kp,FC],styles:[".disclaimer-toolbar[_ngcontent-%COMP%]{--min-height: 36px}.disclaimer-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:700}"]})}}return e})();var kt=function(e){return e.activationLog="activation-Log",e.dashboard="dashboard",e.login="login",e}(kt||{}),pt=function(e){return e.aboutTrigger="about-trigger",e.adminLevel="admin-level",e.aggregateInformation="aggregate-information",e.communityNotification="community-notification",e.dam="dam",e.eapAction="eap-action",e.eapSubmit="eap-submit",e.evacuationCenter="evacuation-center",e.exportView="export-view",e.glofasStation="glofas-station",e.healthSite="health-site",e.leadTime="lead-time",e.logOut="log-out",e.mapLayer="map-layer",e.mapLayerInformation="map-layer-information",e.mapMarker="map-marker",e.mapPlaceSelect="map-place-select",e.redCrossBranch="red-cross-branch",e.riverGauge="river-gauge",e.school="school",e.setTrigger="set-trigger",e.typhoonTrack="typhoon-track",e.watchIbfGuide="watch-ibf-guide",e.waterPoint="water-point",e}(pt||{});var bN=["changePasswordForm"];function xN(e,n){e&1&&(D(0,"ion-note",10)(1,"small")(2,"strong"),M(3),Y(4,"translate"),x()()()),e&2&&(E(3),be(Z(4,1,"user-state.password-error")))}var s1=(()=>{class e{constructor(t,i){this.authService=t,this.popoverController=i,this.showDifferentPasswordMessage=!1,this.model={newPassword:"",confirmPassword:""}}onSubmit(){if(this.changePasswordForm.form.valid){if(this.model.confirmPassword!==this.model.newPassword){this.showDifferentPasswordMessage=!0;return}this.authService.changePassword(this.model.newPassword).add(()=>ft(this,null,function*(){this.changePasswordForm.resetForm(),yield this.popoverController.dismiss()}))}}onChange(){this.showDifferentPasswordMessage=!1}closePopover(){return ft(this,null,function*(){yield this.popoverController.dismiss()})}static{this.\u0275fac=function(i){return new(i||e)(P(Nn),P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-change-password-popover"]],viewQuery:function(i,o){if(i&1&&Rp(bN,5),i&2){let s;Fp(s=Yp())&&(o.changePasswordForm=s.first)}},standalone:!1,decls:24,vars:16,consts:[["changePasswordForm","ngForm"],[1,"popover-window-card"],["color","fiveten-navy-900"],["name","close-circle","size","large",1,"popover-close-button",3,"click"],[1,"ion-padding-top","ion-text-center"],[1,"change-password-form",3,"ngSubmit"],["position","stacked"],["name","new-password","type","password","required","","autocomplete","new-password","minlength","4","clearInput","true","clearOnEdit","false",3,"ngModelChange","ionChange","ngModel"],["name","confirm-password","type","password","required","","autocomplete","new-password","minlength","4","clearInput","true","clearOnEdit","false",3,"ngModelChange","ionChange","ngModel"],[1,"validation-message","ion-margin-top"],["color","danger"],["type","submit","shape","round","color","fiveten-navy-900",3,"disabled"]],template:function(i,o){if(i&1){let s=Ye();D(0,"ion-card",1)(1,"ion-card-header",2)(2,"ion-icon",3),oe("click",function(){return _e(s),ve(o.closePopover())}),x(),D(3,"ion-card-title"),M(4),Y(5,"translate"),x()(),D(6,"ion-card-content",4)(7,"form",5,0),oe("ngSubmit",function(){return _e(s),ve(o.onSubmit())}),D(9,"ion-item")(10,"ion-label",6),M(11),Y(12,"translate"),x(),D(13,"ion-input",7),oe("ngModelChange",function(u){return _e(s),ve(o.model.newPassword=u)})("ionChange",function(){return _e(s),ve(o.onChange())}),x()(),D(14,"ion-item")(15,"ion-label",6),M(16),Y(17,"translate"),x(),D(18,"ion-input",8),oe("ngModelChange",function(u){return _e(s),ve(o.model.confirmPassword=u)})("ionChange",function(){return _e(s),ve(o.onChange())}),x()(),D(19,"div",9),se(20,xN,5,3,"ion-note",10),x(),D(21,"ion-button",11),M(22),Y(23,"translate"),x()()()()}if(i&2){let s=Kl(8);E(4),be(Z(5,8,"user-state.password-change")),E(7),be(Z(12,10,"user-state.password-new")),E(2),W("ngModel",o.model.newPassword),E(3),be(Z(17,12,"user-state.password-confirm")),E(2),W("ngModel",o.model.confirmPassword),E(2),re(o.showDifferentPasswordMessage?20:-1),E(),W("disabled",!s.form.valid),E(),be(Z(23,14,"user-state.password-change"))}},dependencies:[nc,Ql,ec,Up,Hp,ic,tc,Ke,bi,xi,Zi,ji,Ze,qp,Ot,si,Xp,Gp,Oe],styles:[".validation-message[_ngcontent-%COMP%]{min-height:36px}.change-password-form[_ngcontent-%COMP%]{width:100%}ion-input[_ngcontent-%COMP%]{border:none;background:transparent}ion-input[_ngcontent-%COMP%]     .native-input{box-shadow:none}.popover-window-card[_ngcontent-%COMP%]{border-color:var(--ion-color-fiveten-navy-900)}"],changeDetection:0})}}return e})();var ef,tf="undefined",af="constructor",po="prototype",sf="function",lf="_dynInstFuncs",kv="_isDynProxy",ac="_dynClass",DN="_dynCls$",Rv="_dynInstChk",ad=Rv,h1="_dfOpts",l1="_unknown_",Bv="__proto__",nf="_dyn"+Bv,c1="__dynProto$Gbl",Ov="_dynInstProto",rf="useBaseInst",Fv="setInstFuncs",df=Object,sd=df.getPrototypeOf,u1=df.getOwnPropertyNames;function wN(){var e;return typeof globalThis!==tf&&(e=globalThis),!e&&typeof self!==tf&&(e=self),!e&&typeof window!==tf&&(e=window),!e&&typeof global!==tf&&(e=global),e||{}}var d1=wN(),Yv=d1[c1]||(d1[c1]={o:(ef={},ef[Fv]=!0,ef[rf]=!0,ef),n:1e3});function Ro(e,n){return e&&df[po].hasOwnProperty.call(e,n)}function of(e){return e&&(e===df[po]||e===Array[po])}function zv(e){return of(e)||e===Function[po]}function As(e){var n;if(e){if(sd)return sd(e);var t=e[Bv]||e[po]||(e[af]?e[af][po]:null);n=e[nf]||t,Ro(e,nf)||(delete e[Ov],n=e[nf]=e[Ov]||e[nf],e[Ov]=t)}return n}function cf(e,n){var t=[];if(u1)t=u1(e);else for(var i in e)typeof i=="string"&&Ro(e,i)&&t.push(i);if(t&&t.length>0)for(var o=0;o<t.length;o++)n(t[o])}function Uv(e,n,t){return n!==af&&typeof e[n]===sf&&(t||Ro(e,n))&&n!==Bv&&n!==po}function uf(e){throw new TypeError("DynamicProto: "+e)}function sc(){return Object.create?function(e){var n=Object.create;if(n)return n(e);if(e==null)return{};var t=typeof e;if(t!=="object"&&t!=="function")throw new TypeError("Object prototype may only be an Object:"+e);function i(){}return i.prototype=e,new i}(null):{}}function NN(e){var n=sc();return cf(e,function(t){!n[t]&&Uv(e,t,!1)&&(n[t]=e[t])}),n}function Hv(e,n){for(var t=e.length-1;t>=0;t--)if(e[t]===n)return!0;return!1}function IN(e,n,t,i){function o(d,f,p){var m=f[p];if(m[kv]&&i){var g=d[lf]||{};g[ad]!==!1&&(m=(g[f[ac]]||{})[p]||m)}return function(){return m.apply(d,arguments)}}var s=sc();cf(t,function(d){s[d]=o(n,t,d)});for(var l=As(e),u=[];l&&!zv(l)&&!Hv(u,l);)cf(l,function(d){!s[d]&&Uv(l,d,!sd)&&(s[d]=o(n,l,d))}),u.push(l),l=As(l);return s}function PN(e,n,t,i){var o=null;if(e&&Ro(t,ac)){var s=e[lf]||sc();if(o=(s[t[ac]]||sc())[n],o||uf("Missing ["+n+"] "+sf),!o[Rv]&&s[ad]!==!1){for(var l=!Ro(e,n),u=As(e),d=[];l&&u&&!zv(u)&&!Hv(d,u);){var f=u[n];if(f){l=f===i;break}d.push(u),u=As(u)}try{l&&(e[n]=o),o[Rv]=1}catch{s[ad]=!1}}}return o}function LN(e,n,t){var i=n[e];return i===t&&(i=As(n)[e]),typeof i!==sf&&uf("["+e+"] is not a "+sf),i}function AN(e,n,t,i,o){function s(d,f){var p=function(){var m=PN(this,f,d,p)||LN(f,d,p);return m.apply(this,arguments)};return p[kv]=1,p}if(!of(e)){var l=t[lf]=t[lf]||sc();if(!of(l)){var u=l[n]=l[n]||sc();l[ad]!==!1&&(l[ad]=!!o),of(u)||cf(t,function(d){Uv(t,d,!1)&&t[d]!==i[d]&&(u[d]=t[d],delete t[d],(!Ro(e,d)||e[d]&&!e[d][kv])&&(e[d]=s(e,d)))})}}}function ON(e,n){if(sd){for(var t=[],i=As(n);i&&!zv(i)&&!Hv(t,i);){if(i===e)return!0;t.push(i),i=As(i)}return!1}return!0}function Mv(e,n){return Ro(e,po)?e.name||n||l1:((e||{})[af]||{}).name||n||l1}function Be(e,n,t,i){Ro(e,po)||uf("theClass is an invalid class definition.");var o=e[po];ON(o,n)||uf("["+Mv(e)+"] not in hierarchy of ["+Mv(n)+"]");var s=null;Ro(o,ac)?s=o[ac]:(s=DN+Mv(e,"_")+"$"+Yv.n,Yv.n++,o[ac]=s);var l=Be[h1],u=!!l[rf];u&&i&&i[rf]!==void 0&&(u=!!i[rf]);var d=NN(n),f=IN(o,n,d,u);t(n,f);var p=!!sd&&!!l[Fv];p&&i&&(p=!!i[Fv]),AN(o,s,n,d,p!==!1)}Be[h1]=Yv.o;var hr="function",In="object",Pn="undefined",ei="prototype",ld="hasOwnProperty";var Gn=Object,lc=Gn[ei],cc=Gn.assign,hf=Gn.create,uc=Gn.defineProperty,fo=lc[ld];var p1=null;function pr(e){e===void 0&&(e=!0);var n=e===!1?null:p1;return n||(typeof globalThis!==Pn&&(n=globalThis),!n&&typeof self!==Pn&&(n=self),!n&&typeof window!==Pn&&(n=window),!n&&typeof global!==Pn&&(n=global),p1=n),n}function dc(e){throw new TypeError(e)}function hc(e){var n=hf;if(n)return n(e);if(e==null)return{};var t=typeof e;t!==In&&t!==hr&&dc("Object prototype may only be an Object:"+e);function i(){}return i[ei]=e,new i}var Lk=(pr()||{}).Symbol,Ak=(pr()||{}).Reflect;var kN=function(e){for(var n,t=1,i=arguments.length;t<i;t++){n=arguments[t];for(var o in n)lc[ld].call(n,o)&&(e[o]=n[o])}return e},mi=cc||kN,Vv=function(e,n){return Vv=Gn.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i[ld](o)&&(t[o]=i[o])},Vv(e,n)};function $i(e,n){typeof n!==hr&&n!==null&&dc("Class extends value "+String(n)+" is not a constructor or null"),Vv(e,n);function t(){this.constructor=e}e[ei]=n===null?hc(n):(t[ei]=n[ei],new t)}function pf(e,n){for(var t=0,i=n.length,o=e.length;t<i;t++,o++)e[o]=n[t];return e}var Mr="initialize",dn="name",cd="getNotifyMgr",kr="identifier",nt="push",Wn="isInitialized",mo="config",ff="instrumentationKey",qi="logger",Me="length",Os="time",Ht="processNext",mf="getProcessTelContext",Ms="addNotificationListener",ks="removeNotificationListener",Gv="stopPollingInternalLogs",Rs="onComplete",Fs="getPlugin",pc="flush",ud="_extensions",Rr="splice",Zn="teardown",fc="messageId",Ca="message",Fr="isAsync",mc="_doTeardown",Ys="update",jn="getNext",fr="diagLog",Ea="setNextPlugin",Fo="createNew",_f="cookieCfg",Yo="indexOf",_c="substring",vc="userAgent",Bo="split",dd="setEnabled",Ta="substr",vf="nodeType",_o="apply",Yr="replace",Wv="enableDebugExceptions",Zv="logInternalMessage",hd="toLowerCase",Mi="call",vo="type",gf="handler",Bs="listeners",pd="isChildEvt",zs="getCtx",Br="setCtx",yf="complete",fd="traceId",Sf="spanId",md="traceFlags",jv="version";var je="",$v="channels",ti="core",qv="createPerfMgr",_d="disabled",gc="extensionConfig",f1="extensions",Ln="processTelemetry",mr="priority",yc="eventsSent",ba="eventsDiscarded",Sc="eventsSendRequest",xa="perfEvent",Cf="errorToConsole",vd="warnToConsole",Us="getPerfMgr";var C1="toISOString",E1="endsWith",RN="startsWith",m1="indexOf",_1="map",v1="reduce",Jv="trim",T1="toString",FN="__proto__",Ef="constructor",g1=uc,Kv=Gn.freeze,rR=Gn.seal,y1=Gn.keys,eg=String[ei],YN=eg[Jv],BN=eg[E1],oR=eg[RN],zN=Date[ei],UN=zN[C1],HN=Array.isArray,b1=lc[T1],x1=fo[T1],VN=x1[Mi](Gn),GN=/-([a-z])/g,WN=/([^\w\d_$])/g,ZN=/^(\d+[\w\d_$])/,Tf=Object.getPrototypeOf;function tg(e){if(e){if(Tf)return Tf(e);var n=e[FN]||e[ei]||e[Ef];if(n)return n}return null}function Xt(e){return e===void 0||typeof e===Pn}function ee(e){return e===null||Xt(e)}function ig(e){return!ee(e)}function bf(e,n){return!!(e&&fo[Mi](e,n))}function hn(e){return!!(e&&typeof e===In)}function Le(e){return!!(e&&typeof e===hr)}function Hs(e){var n=e;return n&&xe(n)&&(n=n[Yr](GN,function(t,i){return i.toUpperCase()}),n=n[Yr](WN,"_"),n=n[Yr](ZN,function(t,i){return"_"+i})),n}function lt(e,n){if(e)for(var t in e)fo[Mi](e,t)&&n[Mi](e,t,e[t])}function gd(e,n){var t=!1;return e&&n&&!(t=e===n)&&(t=BN?e[E1](n):jN(e,n)),t}function jN(e,n){var t=!1,i=n?n[Me]:0,o=e?e[Me]:0;if(i&&o&&o>=i&&!(t=e===n)){for(var s=o-1,l=i-1;l>=0;l--){if(e[s]!=n[l])return!1;s--}t=!0}return t}function ki(e,n){return e&&n?e[Yo](n)!==-1:!1}var st=HN||$N;function $N(e){return!!(e&&b1[Mi](e)==="[object Array]")}function Vs(e){return!!(e&&b1[Mi](e)==="[object Error]")}function xe(e){return typeof e=="string"}function yd(e){return typeof e=="number"}function D1(e){return typeof e=="boolean"}function Qv(e){var n=!1;if(e&&typeof e=="object"){var t=Tf?Tf(e):tg(e);t?(t[Ef]&&fo[Mi](t,Ef)&&(t=t[Ef]),n=typeof t===hr&&x1[Mi](t)===VN):n=!0}return n}function $n(e){if(e)return UN?e[C1]():qN(e)}function qN(e){if(e&&e.getUTCFullYear){var n=function(t){var i=String(t);return i[Me]===1&&(i="0"+i),i};return e.getUTCFullYear()+"-"+n(e.getUTCMonth()+1)+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function fe(e,n,t){var i=e[Me];try{for(var o=0;o<i&&!(o in e&&n[Mi](t||e,e[o],o,e)===-1);o++);}catch{}}function wi(e,n,t){if(e){if(e[m1])return e[m1](n,t);var i=e[Me],o=t||0;try{for(var s=Math.max(o>=0?o:i-Math.abs(o),0);s<i;s++)if(s in e&&e[s]===n)return s}catch{}}return-1}function Gs(e,n,t){var i;if(e){if(e[_1])return e[_1](n,t);var o=e[Me],s=t||e;i=new Array(o);try{for(var l=0;l<o;l++)l in e&&(i[l]=n[Mi](s,e[l],e))}catch{}}return i}function ng(e,n,t){var i;if(e){if(e[v1])return e[v1](n,t);var o=e[Me],s=0;if(arguments[Me]>=3)i=arguments[2];else{for(;s<o&&!(s in e);)s++;i=e[s++]}for(;s<o;)s in e&&(i=n(i,e[s],s,e)),s++}return i}function _i(e){return e&&(e=YN&&e[Jv]?e[Jv]():e[Yr]?e[Yr](/^\s+|(?=\s)\s+$/g,je):e),e}var S1=!{toString:null}.propertyIsEnumerable("toString"),Xv=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function An(e){var n=typeof e;if(n!==hr&&(n!==In||e===null)&&dc("objKeys called on non-object"),!S1&&y1)return y1(e);var t=[];for(var i in e)e&&fo[Mi](e,i)&&t[nt](i);if(S1)for(var o=Xv[Me],s=0;s<o;s++)e&&fo[Mi](e,Xv[s])&&t[nt](Xv[s]);return t}function _r(e,n,t,i){if(g1)try{var o={enumerable:!0,configurable:!0};return t&&(o.get=t),i&&(o.set=i),g1(e,n,o),!0}catch{}return!1}function XN(e){return e}function Cc(e){return Kv&&lt(e,function(n,t){(st(t)||hn(t))&&Kv(t)}),go(e)}var go=Kv||XN;function Xi(){var e=Date;return e.now?e.now():new e().getTime()}function Qe(e){return Vs(e)?e[dn]:je}function _t(e,n,t,i,o){var s=t;return e&&(s=e[n],s!==t&&(!o||o(s))&&(!i||i(t))&&(s=t,e[n]=s)),s}function li(e,n,t){var i;return e?(i=e[n],!i&&ee(i)&&(i=Xt(t)?{}:t,e[n]=i)):i=Xt(t)?{}:t,i}function qn(e,n){return ee(e)?n:e}function Ec(e){return!!e}function ii(e){throw new Error(e)}function w1(e,n){var t=null,i=null;return Le(e)?t=e:i=e,function(){var o=arguments;if(t&&(i=t()),i)return i[n][_o](i,o)}}function rg(e,n,t){if(e&&n&&hn(e)&&hn(n)){var i=function(s){if(xe(s)){var l=n[s];Le(l)?(!t||t(s,!0,n,e))&&(e[s]=w1(n,s)):(!t||t(s,!1,n,e))&&(bf(e,s)&&delete e[s],_r(e,s,function(){return n[s]},function(u){n[s]=u})||(e[s]=l))}};for(var o in n)i(o)}return e}function Tc(e,n,t,i,o){e&&n&&t&&(o!==!1||Xt(e[n]))&&(e[n]=w1(t,i))}function zo(e,n,t,i){return e&&n&&hn(e)&&st(t)&&fe(t,function(o){xe(o)&&Tc(e,o,n,o,i)}),e}function og(e){return function(){function n(){var t=this;e&&lt(e,function(i,o){t[i]=o})}return n}()}function xf(e){return e&&cc&&(e=Gn(cc({},e))),e}function bc(e,n,t,i,o,s){var l=arguments,u=l[0]||{},d=l[Me],f=!1,p=1;for(d>0&&D1(u)&&(f=u,u=l[p]||{},p++),hn(u)||(u={});p<d;p++){var m=l[p],g=st(m),v=hn(m);for(var C in m){var T=g&&C in m||v&&fo[Mi](m,C);if(T){var b=m[C],S=void 0;if(f&&b&&((S=st(b))||Qv(b))){var I=u[C];S?st(I)||(I=[]):Qv(I)||(I={}),b=bc(f,I,b)}b!==void 0&&(u[C]=b)}}}return u}function Df(e){var n={};return lt(e,function(t,i){n[t]=i,n[i]=t}),Cc(n)}function ag(e){var n={};return lt(e,function(t,i){n[t]=i[1],n[i[0]]=i[1]}),Cc(n)}var N1="window",JN="document",KN="documentMode",QN="navigator",eI="history",tI="location",iI="console",nI="performance",I1="JSON",rI="crypto",oI="msCrypto",aI="ReactNative",ug="msie",dg="trident/",P1="XMLHttpRequest",sg=null,lg=null,sI=!1,xc=null,cg=null;function L1(e,n){var t=!1;if(e){try{if(t=n in e,!t){var i=e[ei];i&&(t=n in i)}}catch{}if(!t)try{var o=new e;t=!Xt(o[n])}catch{}}return t}function ni(e){var n=pr();return n&&n[e]?n[e]:e===N1&&Uo()?window:null}function Uo(){return!!(typeof window===In&&window)}function Xn(){return Uo()?window:ni(N1)}function wf(){return!!(typeof document===In&&document)}function vi(){return wf()?document:ni(JN)}function hg(){return!!(typeof navigator===In&&navigator)}function En(){return hg()?navigator:ni(QN)}function Nf(){return!!(typeof history===In&&history)}function pg(){return Nf()?history:ni(eI)}function On(e){if(e&&sI){var n=ni("__mockLocation");if(n)return n}return typeof location===In&&location?location:ni(tI)}function fg(){return typeof console!==Pn?console:ni(iI)}function vr(){return ni(nI)}function zr(){return!!(typeof JSON===In&&JSON||ni(I1)!==null)}function Ri(){return zr()?JSON||ni(I1):null}function mg(){return ni(rI)}function _g(){return ni(oI)}function vg(){var e=En();return e&&e.product?e.product===aI:!1}function Dc(){var e=En();if(e&&(e[vc]!==lg||sg===null)){lg=e[vc];var n=(lg||je)[hd]();sg=ki(n,ug)||ki(n,dg)}return sg}function wc(e){if(e===void 0&&(e=null),!e){var n=En()||{};e=n?(n[vc]||je)[hd]():je}var t=(e||je)[hd]();if(ki(t,ug)){var i=vi()||{};return Math.max(parseInt(t[Bo](ug)[1]),i[KN]||0)}else if(ki(t,dg)){var o=parseInt(t[Bo](dg)[1]);if(o)return o+4}return null}function ye(e){var n=Object[ei].toString[Mi](e),t=je;return n==="[object Error]"?t="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[dn]+"'":zr()&&(t=Ri().stringify(e)),n+t}function Da(){return cg===null&&(cg=hg()&&!!En().sendBeacon),cg}function If(e){var n=!1;try{n=!!ni("fetch");var t=ni("Request");n&&e&&t&&(n=L1(t,"keepalive"))}catch{}return n}function Pf(){return xc===null&&(xc=typeof XDomainRequest!==Pn,xc&&Ws()&&(xc=xc&&!L1(ni(P1),"withCredentials"))),xc}function Ws(){var e=!1;try{var n=ni(P1);e=!!n}catch{}return e}var gg=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Af=null,Lf;function lI(e,n){return function(){var t=arguments,i=yg(n);if(i){var o=i.listener;o&&o[e]&&o[e][_o](o,t)}}}function cI(){var e=ni("Microsoft");return e&&(Af=e.ApplicationInsights),Af}function yg(e){var n=Af;return!n&&e.disableDbgExt!==!0&&(n=Af||cI()),n?n.ChromeDbgExt:null}function A1(e){if(!Lf){Lf={};for(var n=0;n<gg[Me];n++)Lf[gg[n]]=lI(gg[n],e)}return Lf}var uI="AI (Internal): ",dI="AI: ",hI="AITR_";function O1(e){return e?'"'+e[Yr](/\"/g,je)+'"':je}function M1(e,n){var t=fg();if(t){var i="log";t[e]&&(i=e),Le(t[i])&&t[i](n)}}var Ho=function(){function e(n,t,i,o){i===void 0&&(i=!1);var s=this;s[fc]=n,s[Ca]=(i?dI:uI)+n;var l=je;zr()&&(l=Ri().stringify(o));var u=(t?" message:"+O1(t):je)+(o?" props:"+O1(l):je);s[Ca]+=u}return e.dataType="MessageData",e}();function Ur(e,n){return(e||{})[qi]||new Zs(n)}var Zs=function(){function e(n){this.identifier="DiagnosticLogger",this.queue=[];var t=0,i={},o,s,l,u;Be(e,this,function(d){p(n||{}),d.consoleLoggingLevel=function(){return o},d.telemetryLoggingLevel=function(){return s},d.maxInternalMessageLimit=function(){return l},d[Wv]=function(){return u},d.throwInternal=function(v,C,T,b,S){S===void 0&&(S=!1);var I=new Ho(C,T,S,b);if(u)throw ye(I);var U=v===1?Cf:vd;if(Xt(I[Ca]))g("throw"+(v===1?"Critical":"Warning"),I);else{if(S){var j=+I[fc];!i[j]&&o>=v&&(d[U](I[Ca]),i[j]=!0)}else o>=v&&d[U](I[Ca]);f(v,I)}},d[vd]=function(v){M1("warn",v),g("warning",v)},d[Cf]=function(v){M1("error",v),g("error",v)},d.resetInternalMessageCount=function(){t=0,i={}},d[Zv]=f;function f(v,C){if(!m()){var T=!0,b=hI+C[fc];if(i[b]?T=!1:i[b]=!0,T&&(v<=s&&(d.queue[nt](C),t++,g(v===1?"error":"warn",C)),t===l)){var S="Internal events throttle limit per PageView reached for this app.",I=new Ho(23,S,!1);d.queue[nt](I),v===1?d[Cf](S):d[vd](S)}}}function p(v){o=qn(v.loggingLevelConsole,0),s=qn(v.loggingLevelTelemetry,1),l=qn(v.maxMessageLimit,25),u=qn(v.enableDebug,qn(v[Wv],!1))}function m(){return t>=l}function g(v,C){var T=yg(n||{});T&&T[fr]&&T[fr](v,C)}})}return e.__ieDyn=1,e}();function Sg(e){return e||new Zs}function ae(e,n,t,i,o,s){s===void 0&&(s=!1),Sg(e).throwInternal(n,t,i,o,s)}function gr(e,n){Sg(e)[vd](n)}function Cg(e,n,t){Sg(e)[Zv](n,t)}var Nc="ctx",Tg="ParentContextKey",Sd="ChildrenContextKey",pI=null,Cd=function(){function e(n,t,i){var o=this,s=!1;if(o.start=Xi(),o[dn]=n,o[Fr]=i,o[pd]=function(){return!1},Le(t)){var l;s=_r(o,"payload",function(){return!l&&Le(t)&&(l=t(),t=null),l})}o[zs]=function(u){return u?u===e[Tg]||u===e[Sd]?o[u]:(o[Nc]||{})[u]:null},o[Br]=function(u,d){if(u)if(u===e[Tg])o[u]||(o[pd]=function(){return!0}),o[u]=d;else if(u===e[Sd])o[u]=d;else{var f=o[Nc]=o[Nc]||{};f[u]=d}},o[yf]=function(){var u=0,d=o[zs](e[Sd]);if(st(d))for(var f=0;f<d[Me];f++){var p=d[f];p&&(u+=p[Os])}o[Os]=Xi()-o.start,o.exTime=o[Os]-u,o[yf]=function(){},!s&&Le(t)&&(o.payload=t())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}();var bg=function(){function e(n){this.ctx={},Be(e,this,function(t){t.create=function(i,o,s){return new Cd(i,o,s)},t.fire=function(i){i&&(i[yf](),n&&Le(n[xa])&&n[xa](i))},t[Br]=function(i,o){if(i){var s=t[Nc]=t[Nc]||{};s[i]=o}},t[zs]=function(i){return(t[Nc]||{})[i]}})}return e.__ieDyn=1,e}();var Eg="CoreUtils.doPerf";function wa(e,n,t,i,o){if(e){var s=e;if(s[Us]&&(s=s[Us]()),s){var l=void 0,u=s[zs](Eg);try{if(l=s.create(n(),i,o),l){if(u&&l[Br]&&(l[Br](Cd[Tg],u),u[zs]&&u[Br])){var d=u[zs](Cd[Sd]);d||(d=[],u[Br](Cd[Sd],d)),d[nt](l)}return s[Br](Eg,l),t(l)}}catch(f){l&&l[Br]&&l[Br]("exception",f)}finally{l&&s.fire(l),s[Br](Eg,u)}}}return t()}function xg(){return pI}var k1=4294967296,js=4294967295,R1=!1,Ed=123456789,Td=987654321;function fI(e){e<0&&(e>>>=0),Ed=123456789+e&js,Td=987654321-e&js,R1=!0}function mI(){try{var e=Xi()&2147483647;fI((Math.random()*k1^e)+e)}catch{}}function $s(e){var n=0,t=mg()||_g();return t&&t.getRandomValues&&(n=t.getRandomValues(new Uint32Array(1))[0]&js),n===0&&Dc()&&(R1||mI(),n=Dg()&js),n===0&&(n=Math.floor(k1*Math.random()|0)),e||(n>>>=0),n}function Dg(e){Td=36969*(Td&65535)+(Td>>16)&js,Ed=18e3*(Ed&65535)+(Ed>>16)&js;var n=(Td<<16)+(Ed&65535)>>>0&js|0;return e||(n>>>=0),n}function Vo(e){e===void 0&&(e=22);for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=$s()>>>0,i=0,o=je;o[Me]<e;)i++,o+=n.charAt(t&63),t>>>=6,i===5&&(t=($s()<<2&4294967295|t&3)>>>0,i=0);return o}var F1=uc,Y1="2.8.18",_I="."+Vo(6),vI=0;function gI(e,n,t){if(F1)try{return F1(e,n,{value:t,enumerable:!1,configurable:!0}),!0}catch{}return!1}function B1(e){return e[vf]===1||e[vf]===9||!+e[vf]}function yI(e,n){var t=n[e.id];if(!t){t={};try{B1(n)&&(gI(n,e.id,t)||(n[e.id]=t))}catch{}}return t}function Ji(e,n){return n===void 0&&(n=!1),Hs(e+vI+++(n?"."+Y1:je)+_I)}function Of(e){var n={id:Ji("_aiData-"+(e||je)+"."+Y1),accept:function(t){return B1(t)},get:function(t,i,o,s){var l=t[n.id];return l?l[Hs(i)]:(s&&(l=yI(n,t),l[Hs(i)]=o),o)},kill:function(t,i){if(t&&t[i])try{delete t[i]}catch{}}};return n}var z1="toGMTString",U1="toUTCString",Lg="cookie",wg="expires",Ig="enabled",H1="isCookieUseDisabled",V1="disableCookiesUsage",Na="_ckMgr",Mf=null,Ng=null,G1=null,bd=vi(),W1={},Rf={};function SI(e,n){var t=qs[Na]||Rf[Na];return t||(t=qs[Na]=qs(e,n),Rf[Na]=t),t}function kf(e){return e?e.isEnabled():!0}function CI(e){var n=e[_f]=e[_f]||{};if(_t(n,"domain",e.cookieDomain,ig,ee),_t(n,"path",e.cookiePath||"/",null,ee),ee(n[Ig])){var t=void 0;Xt(e[H1])||(t=!e[H1]),Xt(e[V1])||(t=!e[V1]),n[Ig]=t}return n}function q1(e,n){return n&&e&&st(e.ignoreCookies)?e.ignoreCookies[Yo](n)!==-1:!1}function EI(e,n){return n&&e&&st(e.blockedCookies)&&e.blockedCookies[Yo](n)!==-1?!0:q1(e,n)}function Xs(e,n){var t;if(e)t=e.getCookieMgr();else if(n){var i=n[_f];i[Na]?t=i[Na]:t=qs(n)}return t||(t=SI(n,(e||{})[qi])),t}function qs(e,n){var t,i=CI(e||Rf),o=i.path||"/",s=i.domain,l=i[Ig]!==!1,u=(t={isEnabled:function(){var d=l&&Pg(n),f=Rf[Na];return d&&f&&u!==f&&(d=kf(f)),d}},t[dd]=function(d){l=d!==!1},t.set=function(d,f,p,m,g){var v=!1;if(kf(u)&&!EI(i,d)){var C={},T=_i(f||je),b=T[Yo](";");if(b!==-1&&(T=_i(f[_c](0,b)),C=X1(f[_c](b+1))),_t(C,"domain",m||s,Ec,Xt),!ee(p)){var S=Dc();if(Xt(C[wg])){var I=Xi(),U=I+p*1e3;if(U>0){var j=new Date;j.setTime(U),_t(C,wg,Z1(j,S?z1:U1)||Z1(j,S?z1:U1)||je,Ec)}}S||_t(C,"max-age",je+p,null,Xt)}var k=On();k&&k.protocol==="https:"&&(_t(C,"secure",null,null,Xt),Ng===null&&(Ng=!Ag((En()||{})[vc])),Ng&&_t(C,"SameSite","None",null,Xt)),_t(C,"path",g||o,null,Xt);var De=i.setCookie||$1;De(d,j1(T,C)),v=!0}return v},t.get=function(d){var f=je;return kf(u)&&!q1(i,d)&&(f=(i.getCookie||TI)(d)),f},t.del=function(d,f){var p=!1;return kf(u)&&(p=u.purge(d,f)),p},t.purge=function(d,f){var p,m=!1;if(Pg(n)){var g=(p={},p.path=f||"/",p[wg]="Thu, 01 Jan 1970 00:00:01 GMT",p);Dc()||(g["max-age"]="0");var v=i.delCookie||$1;v(d,j1(je,g)),m=!0}return m},t);return u[Na]=u,u}function Pg(e){if(Mf===null){Mf=!1;try{var n=bd||{};Mf=n[Lg]!==void 0}catch(t){ae(e,2,68,"Cannot access document.cookie - "+Qe(t),{exception:ye(t)})}}return Mf}function X1(e){var n={};if(e&&e[Me]){var t=_i(e)[Bo](";");fe(t,function(i){if(i=_i(i||je),i){var o=i[Yo]("=");o===-1?n[i]=null:n[_i(i[_c](0,o))]=_i(i[_c](o+1))}})}return n}function Z1(e,n){return Le(e[n])?e[n]():null}function j1(e,n){var t=e||je;return lt(n,function(i,o){t+="; "+i+(ee(o)?je:"="+o)}),t}function TI(e){var n=je;if(bd){var t=bd[Lg]||je;G1!==t&&(W1=X1(t),G1=t),n=_i(W1[e]||je)}return n}function $1(e,n){bd&&(bd[Lg]=e+"="+n)}function Ag(e){return xe(e)?!!(ki(e,"CPU iPhone OS 12")||ki(e,"iPad; CPU OS 12")||ki(e,"Macintosh; Intel Mac OS X 10_14")&&ki(e,"Version/")&&ki(e,"Safari")||ki(e,"Macintosh; Intel Mac OS X 10_14")&&gd(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||ki(e,"Chrome/5")||ki(e,"Chrome/6")||ki(e,"UnrealEngine")&&!ki(e,"Chrome")||ki(e,"UCBrowser/12")||ki(e,"UCBrowser/11")):!1}var nE="on",J1="attachEvent",K1="addEventListener",Q1="detachEvent",eE="removeEventListener",Og="events",Mg="visibilitychange",zf="pagehide";var rE="unload",oE="beforeunload",aE=Ji("aiEvtPageHide"),JR=Ji("aiEvtPageShow"),bI=/\.[\.]+/g,xI=/[\.]+$/,DI=1,Ff=Of("events"),wI=/^([^.]*)(?:\.(.+)|)/;function tE(e){return e&&e[Yr]?e[Yr](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,je):e}function kg(e,n){var t;if(n){var i=je;st(n)?(i=je,fe(n,function(s){s=tE(s),s&&(s[0]!=="."&&(s="."+s),i+=s)})):i=tE(n),i&&(i[0]!=="."&&(i="."+i),e=(e||je)+i)}var o=wI.exec(e||je)||[];return t={},t[vo]=o[1],t.ns=(o[2]||je).replace(bI,".").replace(xI,je)[Bo](".").sort().join("."),t}function sE(e,n,t){t===void 0&&(t=!0);var i=Ff.get(e,Og,{},t),o=i[n];return o||(o=i[n]=[]),o}function lE(e,n,t,i){e&&n&&n[vo]&&(e[eE]?e[eE](n[vo],t,i):e[Q1]&&e[Q1](nE+n[vo],t))}function NI(e,n,t,i){var o=!1;return e&&n&&n[vo]&&t&&(e[K1]?(e[K1](n[vo],t,i),o=!0):e[J1]&&(e[J1](nE+n[vo],t),o=!0)),o}function iE(e,n,t,i){for(var o=n[Me];o--;){var s=n[o];s&&(!t.ns||t.ns===s.evtName.ns)&&(!i||i(s))&&(lE(e,s.evtName,s[gf],s.capture),n[Rr](o,1))}}function II(e,n,t){if(n[vo])iE(e,sE(e,n[vo]),n,t);else{var i=Ff.get(e,Og,{});lt(i,function(o,s){iE(e,s,n,t)}),An(i)[Me]===0&&Ff.kill(e,Og)}}function Jn(e,n){var t;return n?(st(n)?t=[e].concat(n):t=[e,n],t=kg("xx",t).ns[Bo](".")):t=e,t}function yr(e,n,t,i,o){var s;o===void 0&&(o=!1);var l=!1;if(e)try{var u=kg(n,i);if(l=NI(e,u,t,o),l&&Ff.accept(e)){var d=(s={guid:DI++,evtName:u},s[gf]=t,s.capture=o,s);sE(e,u.type)[nt](d)}}catch{}return l}function Ia(e,n,t,i,o){if(o===void 0&&(o=!1),e)try{var s=kg(n,i),l=!1;II(e,s,function(u){return s.ns&&!t||u[gf]===t?(l=!0,!0):!1}),l||lE(e,s,t,o)}catch{}}function cE(e,n,t){var i=!1,o=Xn();o&&(i=yr(o,e,n,t),i=yr(o.body,e,n,t)||i);var s=vi();return s&&(i=yr(s,e,n,t)||i),i}function uE(e,n,t){var i=Xn();i&&(Ia(i,e,n,t),Ia(i.body,e,n,t));var o=vi();o&&Ia(o,e,n,t)}function Yf(e,n,t,i){var o=!1;return n&&e&&e[Me]>0&&fe(e,function(s){s&&(!t||wi(t,s)===-1)&&(o=cE(s,n,i)||o)}),o}function dE(e,n,t,i){var o=!1;return n&&e&&st(e)&&(o=Yf(e,n,t,i),!o&&t&&t[Me]>0&&(o=Yf(e,n,null,i))),o}function Bf(e,n,t){e&&st(e)&&fe(e,function(i){i&&uE(i,n,t)})}function Rg(e,n,t){return dE([oE,rE,zf],e,n,t)}function Fg(e,n){Bf([oE,rE,zf],e,n)}function xd(e,n,t){function i(l){var u=vi();e&&u&&u.visibilityState==="hidden"&&e(l)}var o=Jn(aE,t),s=Yf([zf],e,n,o);return(!n||wi(n,Mg)===-1)&&(s=Yf([Mg],i,n,o)||s),!s&&n&&(s=xd(e,null,t)),s}function Yg(e,n){var t=Jn(aE,n);Bf([zf],e,t),Bf([Mg],null,t)}function Mn(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=je,t,i=0;i<4;i++)t=$s(),n+=e[t&15]+e[t>>4&15]+e[t>>8&15]+e[t>>12&15]+e[t>>16&15]+e[t>>20&15]+e[t>>24&15]+e[t>>28&15];var o=e[8+($s()&3)|0];return n[Ta](0,8)+n[Ta](9,4)+"4"+n[Ta](13,3)+o+n[Ta](16,3)+n[Ta](19,12)}var Bg="00",AI="ff",pE="00000000000000000000000000000000",fE="0000000000000000";function Dd(e,n,t){return e&&e[Me]===n&&e!==t?!!e.match(/^[\da-f]*$/i):!1}function hE(e,n,t){return Dd(e,n)?e:t}function OI(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var n=e.toString(16);n[Me]<2;)n="0"+n;return n}function wd(e,n,t,i){var o;return o={},o[jv]=Dd(i,2,AI)?i:Bg,o[fd]=Js(e)?e:Mn(),o.spanId=Ks(n)?n:Mn()[Ta](0,16),o.traceFlags=t>=0&&t<=255?t:1,o}function Js(e){return Dd(e,32,pE)}function Ks(e){return Dd(e,16,fE)}function Nd(e){if(e){var n=OI(e[md]);Dd(n,2)||(n="01");var t=e[jv]||Bg;return t!=="00"&&t!=="ff"&&(t=Bg),"".concat(t.toLowerCase(),"-").concat(hE(e.traceId,32,pE).toLowerCase(),"-").concat(hE(e.spanId,16,fE).toLowerCase(),"-").concat(n.toLowerCase())}return""}var MI=Of("plugin");function Go(e){return MI.get(e,"state",{},!0)}function Uf(e,n){for(var t=[],i=null,o=e[jn](),s;o;){var l=o[Fs]();if(l){i&&Le(i[Ea])&&Le(l[Ln])&&i[Ea](l);var u=!1;Le(l[Wn])?u=l[Wn]():(s=Go(l),u=s[Wn]),u||t[nt](l),i=l,o=o[jn]()}}fe(t,function(d){var f=e[ti]();d[Mr](e.getCfg(),f,n,e[jn]()),s=Go(d),!d[ti]&&!s[ti]&&(s[ti]=f),s[Wn]=!0,delete s[Zn]})}function Hf(e){return e.sort(function(n,t){var i=0;if(t){var o=Le(t[Ln]);Le(n[Ln])?i=o?n[mr]-t[mr]:1:o&&(i=-1)}else i=n?1:-1;return i})}function mE(e){var n={};return{getName:function(){return n[dn]},setName:function(t){e&&e.setName(t),n[dn]=t},getTraceId:function(){return n[fd]},setTraceId:function(t){e&&e.setTraceId(t),Js(t)&&(n[fd]=t)},getSpanId:function(){return n[Sf]},setSpanId:function(t){e&&e.setSpanId(t),Ks(t)&&(n[Sf]=t)},getTraceFlags:function(){return n[md]},setTraceFlags:function(t){e&&e.setTraceFlags(t),n[md]=t}}}var kI="TelemetryPluginChain",_E="_hasRun",vE="_getTelCtx",gE=0;function RI(e,n,t){for(;e;){if(e[Fs]()===t)return e;e=e[jn]()}return yo([t],n[mo]||{},n)}function zg(e,n,t,i){var o=null,s=[];i!==null&&(o=i?RI(e,t,i):e);var l={_next:d,ctx:{core:function(){return t},diagLog:function(){return Ur(t,n)},getCfg:function(){return n},getExtCfg:f,getConfig:p,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(g){o=g},iterate:m,onComplete:u}};function u(g,v){for(var C=[],T=2;T<arguments.length;T++)C[T-2]=arguments[T];g&&s[nt]({func:g,self:Xt(v)?l.ctx:v,args:C})}function d(){var g=o;if(o=g?g[jn]():null,!g){var v=s;v&&v[Me]>0&&(fe(v,function(C){try{C.func[Mi](C.self,C.args)}catch(T){ae(t[qi],2,73,"Unexpected Exception during onComplete - "+ye(T))}}),s=[])}return g}function f(g,v,C){v===void 0&&(v={}),C===void 0&&(C=0);var T;if(n){var b=n[gc];b&&g&&(T=b[g])}if(!T)T=v;else if(hn(v)&&C!==0){var S=bc(!0,v,T);n&&C===2&&lt(v,function(I){if(ee(S[I])){var U=n[I];ee(U)||(S[I]=U)}}),T=S}return T}function p(g,v,C){C===void 0&&(C=!1);var T,b=f(g,null);return b&&!ee(b[v])?T=b[v]:n&&!ee(n[v])&&(T=n[v]),ee(T)?C:T}function m(g){for(var v;v=l._next();){var C=v[Fs]();C&&g(C)}}return l}function on(e,n,t,i){var o=zg(e,n,t,i),s=o.ctx;function l(d){var f=o._next();return f&&f[Ln](d,s),!f}function u(d,f){return d===void 0&&(d=null),st(d)&&(d=yo(d,n,t,f)),on(d||s[jn](),n,t,f)}return s[Ht]=l,s[Fo]=u,s}function Ic(e,n,t){var i=n[mo]||{},o=zg(e,i,n,t),s=o.ctx;function l(d){var f=o._next();return f&&f.unload(s,d),!f}function u(d,f){return d===void 0&&(d=null),st(d)&&(d=yo(d,i,n,f)),Ic(d||s[jn](),n,f)}return s[Ht]=l,s[Fo]=u,s}function Id(e,n,t){var i=n[mo]||{},o=zg(e,i,n,t),s=o.ctx;function l(d){return s.iterate(function(f){Le(f[Ys])&&f[Ys](s,d)})}function u(d,f){return d===void 0&&(d=null),st(d)&&(d=yo(d,i,n,f)),Id(d||s[jn](),n,f)}return s[Ht]=l,s[Fo]=u,s}function yo(e,n,t,i){var o=null,s=!i;if(st(e)&&e[Me]>0){var l=null;fe(e,function(u){if(!s&&i===u&&(s=!0),s&&u&&Le(u[Ln])){var d=FI(u,n,t);o||(o=d),l&&l._setNext(d),l=d}})}return i&&!o?yo([i],n,t):o}function FI(e,n,t){var i=null,o=Le(e[Ln]),s=Le(e[Ea]),l;e?l=e[kr]+"-"+e[mr]+"-"+gE++:l="Unknown-0-"+gE++;var u={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:p,unload:m,update:g,_id:l,_setNext:function(v){i=v}};function d(){var v;return e&&Le(e[vE])&&(v=e[vE]()),v||(v=on(u,n,t)),v}function f(v,C,T,b,S){var I=!1,U=e?e[kr]:kI,j=v[_E];return j||(j=v[_E]={}),v.setNext(i),e&&wa(v[ti](),function(){return U+":"+T},function(){j[l]=!0;try{var k=i?i._id:je;k&&(j[k]=!1),I=C(v)}catch($){var De=i?j[i._id]:!0;De&&(I=!0),(!i||!De)&&ae(v[fr](),1,73,"Plugin ["+U+"] failed during "+T+" - "+ye($)+", run flags: "+ye(j))}},b,S),I}function p(v,C){C=C||d();function T(b){if(!e||!o)return!1;var S=Go(e);return S[Zn]||S[_d]?!1:(s&&e[Ea](i),e[Ln](v,b),!0)}f(C,T,"processTelemetry",function(){return{item:v}},!v.sync)||C[Ht](v)}function m(v,C){function T(){var b=!1;if(e){var S=Go(e),I=e[ti]||S[ti];e&&(!I||I===v.core())&&!S[Zn]&&(S[ti]=null,S[Zn]=!0,S[Wn]=!1,e[Zn]&&e[Zn](v,C)===!0&&(b=!0))}return b}f(v,T,"unload",function(){},C[Fr])||v[Ht](C)}function g(v,C){function T(){var b=!1;if(e){var S=Go(e),I=e[ti]||S[ti];e&&(!I||I===v.core())&&!S[Zn]&&e[Ys]&&e[Ys](v,C)===!0&&(b=!0)}return b}f(v,T,"update",function(){},!1)||v[Ht](C)}return go(u)}var Pd=500,YI="Channel has invalid priority - ";function yE(e,n,t){n&&st(n)&&n[Me]>0&&(n=n.sort(function(i,o){return i[mr]-o[mr]}),fe(n,function(i){i[mr]<Pd&&ii(YI+i[kr])}),e[nt]({queue:go(n),chain:yo(n,t[mo],t)}))}function SE(e,n){function t(){return on(null,n[mo],n,null)}function i(f,p,m,g){var v=f?f[Me]+1:1;function C(){v--,v===0&&(g&&g(),g=null)}v>0&&fe(f,function(T){if(T&&T.queue[Me]>0){var b=T.chain,S=p[Fo](b);S[Rs](C),m(S)}else v--}),C()}function o(f,p){var m=p||{reason:0};return i(e,f,function(g){g[Ht](m)},function(){f[Ht](m)}),!0}function s(f,p){var m=p||{reason:0,isAsync:!1};return i(e,f,function(g){g[Ht](m)},function(){f[Ht](m),u=!1}),!0}function l(f){var p=null;return e&&e[Me]>0&&fe(e,function(m){if(m&&m.queue[Me]>0&&(fe(m.queue,function(g){if(g[kr]===f)return p=g,-1}),p))return-1}),p}var u=!1,d={identifier:"ChannelControllerPlugin",priority:Pd,initialize:function(f,p,m,g){u=!0,fe(e,function(v){v&&v.queue[Me]>0&&Uf(on(v.chain,f,p),m)})},isInitialized:function(){return u},processTelemetry:function(f,p){i(e,p||t(),function(m){m[Ht](f)},function(){p[Ht](f)})},update:o,pause:function(){i(e,t(),function(f){f.iterate(function(p){p.pause&&p.pause()})},null)},resume:function(){i(e,t(),function(f){f.iterate(function(p){p.resume&&p.resume()})},null)},teardown:s,getChannel:l,flush:function(f,p,m,g){var v=1,C=!1,T=null;g=g||5e3;function b(){v--,C&&v===0&&(T&&(clearTimeout(T),T=null),p&&p(C),p=null)}return i(e,t(),function(S){S.iterate(function(I){if(I[pc]){v++;var U=!1;I[pc](f,function(){U=!0,b()},m)||U||(f&&T==null?T=setTimeout(function(){T=null,b()},g):b())}})},function(){C=!0,b()}),!0},_setQueue:function(f){e=f}};return d}function CE(e,n,t){var i=[];if(e&&fe(e,function(s){return yE(i,s,t)}),n){var o=[];fe(n,function(s){s[mr]>Pd&&o[nt](s)}),yE(i,o,t)}return i}function Vf(){var e=[];function n(i){i&&e[nt](i)}function t(i,o){fe(e,function(s){try{s(i,o)}catch(l){ae(i[fr](),2,73,"Unexpected error calling unload handler - "+ye(l))}}),e=[]}return{add:n,run:t}}var Pa="getPlugin",Hr=function(){function e(){var n=this,t,i,o,s,l;f(),Be(e,n,function(p){p[Mr]=function(m,g,v,C){d(m,g,C),t=!0},p[Zn]=function(m,g){var v,C=p[ti];if(!C||m&&C!==m[ti]())return;var T,b=!1,S=m||Ic(null,C,o&&o[Pa]?o[Pa]():o),I=g||(v={reason:0},v[Fr]=!1,v);function U(){if(!b){b=!0,s.run(S,g);var j=l;l=[],fe(j,function(k){k.rm()}),T===!0&&S[Ht](I),f()}}return!p[mc]||p[mc](S,I,U)!==!0?U():T=!0,T},p[Ys]=function(m,g){var v=p[ti];if(!v||m&&v!==m[ti]())return;var C,T=!1,b=m||Id(null,v,o&&o[Pa]?o[Pa]():o),S=g||{reason:0};function I(){T||(T=!0,d(b.getCfg(),b.core(),b[jn]()))}return!p._doUpdate||p._doUpdate(b,S,I)!==!0?I():C=!0,C},p._addHook=function(m){m&&(st(m)?l=l.concat(m):l[nt](m))},Tc(p,"_addUnloadCb",function(){return s},"add")}),n[fr]=function(p){return u(p)[fr]()},n[Wn]=function(){return t},n.setInitialized=function(p){t=p},n[Ea]=function(p){o=p},n[Ht]=function(p,m){m?m[Ht](p):o&&Le(o[Ln])&&o[Ln](p,null)},n._getTelCtx=u;function u(p){p===void 0&&(p=null);var m=p;if(!m){var g=i||on(null,{},n[ti]);o&&o[Pa]?m=g[Fo](null,o[Pa]):m=g[Fo](null,o)}return m}function d(p,m,g){p&&_t(p,gc,[],null,ee),!g&&m&&(g=m[mf]()[jn]());var v=o;o&&o[Pa]&&(v=o[Pa]()),n[ti]=m,i=on(g,p,m,v)}function f(){t=!1,n[ti]=null,i=null,o=null,l=[],s=Vf()}}return e.__ieDyn=1,e}();var EE=function(e){$i(n,e);function n(){var t=e.call(this)||this;t.identifier="TelemetryInitializerPlugin",t.priority=199;var i,o;s(),Be(n,t,function(l,u){l.addTelemetryInitializer=function(d){var f={id:i++,fn:d};o[nt](f);var p={remove:function(){fe(o,function(m,g){if(m.id===f.id)return o[Rr](g,1),-1})}};return p},l[Ln]=function(d,f){for(var p=!1,m=o[Me],g=0;g<m;++g){var v=o[g];if(v)try{if(v.fn[_o](null,[d])===!1){p=!0;break}}catch(C){ae(f[fr](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Qe(C),{exception:ye(C)},!0)}}p||l[Ht](d,f)},l[mc]=function(){s()}});function s(){i=0,o=[]}return t}return n.__ieDyn=1,n}(Hr);var DE="Plugins must provide initialize method",TE="_notificationManager",bE="SDK is still unloading...",BI="SDK is not initialized",zI={loggingLevelConsole:1};function UI(e,n){return new bg(n)}function HI(e,n,t){var i,o=[],s={};return fe(t,function(l){(ee(l)||ee(l[Mr]))&&ii(DE);var u=l[mr],d=l[kr];l&&u&&(ee(s[u])?s[u]=d:gr(e,"Two extensions have same priority #"+u+" - "+s[u]+", "+d)),(!u||u<n)&&o[nt](l)}),i={all:t},i[ti]=o,i}function xE(e,n){var t=!1;return fe(n,function(i){if(i===e)return t=!0,-1}),t}function VI(){var e;return hc((e={},e[Ms]=function(n){},e[ks]=function(n){},e[yc]=function(n){},e[ba]=function(n,t){},e[Sc]=function(n,t){},e))}var wE=function(){function e(){var n,t,i,o,s,l,u,d,f,p,m,g,v,C,T,b,S,I,U,j,k=0,De=!1;Be(e,this,function($){He(),$[Wn]=function(){return t},$[Mr]=function(A,H,G,de){C&&ii(bE),$[Wn]()&&ii("Core should not be initialized more than once"),n=A||{},$[mo]=n,ee(A[ff])&&ii("Please provide instrumentation key"),o=de,$[TE]=de,Gi(),ge(),qe(),G&&($[qi]=G);var N=li(n,f1,[]);f=[],f[nt].apply(f,pf(pf([],H,!1),N,!1)),g=li(n,$v,[]),Ce(null),(!v||v[Me]===0)&&ii("No "+$v+" available"),t=!0,$.releaseQueue()},$.getTransmissionControls=function(){var A=[];return v&&fe(v,function(H){A[nt](H.queue)}),go(A)},$.track=function(A){A.iKey=A.iKey||n[ff],A[Os]=A[Os]||$n(new Date),A.ver=A.ver||"4.0",!C&&$[Wn]()?ct()[Ht](A):i[nt](A)},$[mf]=ct,$[cd]=function(){return o||(o=VI(),$[TE]=o),o},$[Ms]=function(A){o&&o[Ms](A)},$[ks]=function(A){o&&o[ks](A)},$.getCookieMgr=function(){return u||(u=qs(n,$[qi])),u},$.setCookieMgr=function(A){u=A},$[Us]=function(){if(!s&&!l&&qn(n.enablePerfMgr)){var A=qn(n[qv]);Le(A)&&(l=A($,$[cd]()))}return s||l||xg()},$.setPerfMgr=function(A){s=A},$.eventCnt=function(){return i[Me]},$.releaseQueue=function(){if(t&&i[Me]>0){var A=i;i=[],fe(A,function(H){ct()[Ht](H)})}},$.pollInternalLogs=function(A){return b=A||null,De=!1,k&&(clearInterval(k),k=null),yt(!0)};function yt(A){if(!k&&!De){var H=A||$[qi]&&$[qi].queue[Me]>0;if(H){var G=qn(n.diagnosticLogInterval);(!G||!(G>0))&&(G=1e4),k=setInterval(function(){clearInterval(k),k=0,Vi()},G)}}return k}$[Gv]=function(){De=!0,k&&(clearInterval(k),k=0,Vi())},zo($,function(){return T},["addTelemetryInitializer"]),$.unload=function(A,H,G){var de;A===void 0&&(A=!0),t||ii(BI),C&&ii(bE);var N=(de={reason:50},de[Fr]=A,de.flushComplete=!1,de),V=Ic(Hi(),$);V[Rs](function(){He(),H&&H(N)},$);function q(ue){N.flushComplete=ue,C=!0,I.run(V,N),$[Gv](),V[Ht](N)}Vi(),Pe(A,q,6,G)||q(!1)},$[Fs]=Wt,$.addPlugin=function(A,H,G,de){if(!A){de&&de(!1),Q(DE);return}var N=Wt(A[kr]);if(N&&!H){de&&de(!1),Q("Plugin ["+A[kr]+"] is already loaded!");return}var V={reason:16};function q(Ve){f[nt](A),V.added=[A],Ce(V),de&&de(!0)}if(N){var ue=[N.plugin],we={reason:2,isAsync:!!G};Pt(ue,we,function(Ve){Ve?(V.removed=ue,V.reason|=32,q(!0)):de&&de(!1)})}else q(!1)},$.evtNamespace=function(){return S},$[pc]=Pe,$.getTraceCtx=function(A){return j||(j=mE()),j},$.setTraceCtx=function(A){j=A||null},Tc($,"addUnloadCb",function(){return I},"add");function He(){t=!1,n=bc(!0,{},zI),$[mo]=n,$[qi]=new Zs(n),$[ud]=[],T=new EE,i=[],o=null,s=null,l=null,u=null,d=null,p=null,f=[],m=null,g=null,v=null,C=!1,b=null,S=Ji("AIBaseCore",!0),I=Vf(),j=null}function ct(){var A=on(Hi(),n,$);return A[Rs](yt),A}function Ce(A){var H=HI($[qi],Pd,f);p=H[ti],d=null;var G=H.all;if(v=go(CE(g,G,$)),m){var de=wi(G,m);de!==-1&&G[Rr](de,1),de=wi(p,m),de!==-1&&p[Rr](de,1),m._setQueue(v)}else m=SE(v,$);G[nt](m),p[nt](m),$[ud]=Hf(G),m[Mr](n,$,G);var N=ct();Uf(N,G),$[ud]=go(Hf(p||[])).slice(),A&&F(A)}function Wt(A){var H,G=null,de=null;return fe($[ud],function(N){if(N[kr]===A&&N!==m&&N!==T)return de=N,-1}),!de&&m&&(de=m.getChannel(A)),de&&(G=(H={plugin:de},H[dd]=function(N){Go(de)[_d]=!N},H.isEnabled=function(){var N=Go(de);return!N[Zn]&&!N[_d]},H.remove=function(N,V){var q;N===void 0&&(N=!0);var ue=[de],we=(q={reason:1},q[Fr]=N,q);Pt(ue,we,function(Ve){Ve&&Ce({reason:32,removed:ue}),V&&V(Ve)})},H)),G}function Hi(){if(!d){var A=(p||[]).slice();wi(A,T)===-1&&A[nt](T),d=yo(Hf(A),n,$)}return d}function Pt(A,H,G){if(A&&A[Me]>0){var de=yo(A,n,$),N=Ic(de,$);N[Rs](function(){var V=!1,q=[];fe(f,function(we,Ve){xE(we,A)?V=!0:q[nt](we)}),f=q;var ue=[];g&&(fe(g,function(we,Ve){var ut=[];fe(we,function(Ft){xE(Ft,A)?V=!0:ut[nt](Ft)}),ue[nt](ut)}),g=ue),G&&G(V),yt()}),N[Ht](H)}else G(!1)}function Vi(){if($[qi]&&$[qi].queue){var A=$[qi].queue.slice(0);$[qi].queue[Me]=0,fe(A,function(H){var G,de=(G={},G[dn]=b||"InternalMessageId: "+H[fc],G.iKey=qn(n[ff]),G.time=$n(new Date),G.baseType=Ho.dataType,G.baseData={message:H[Ca]},G);$.track(de)})}}function Pe(A,H,G,de){return m?m[pc](A,H,G||6,de):(H&&H(!1),!0)}function Gi(){var A=qn(n.disableDbgExt);A===!0&&U&&(o[ks](U),U=null),o&&!U&&A!==!0&&(U=A1(n),o[Ms](U))}function ge(){var A=qn(n.enablePerfMgr);!A&&l&&(l=null),A&&li(n,qv,UI)}function qe(){var A=li(n,gc,{});A.NotificationManager=o}function F(A){var H=Id(Hi(),$);H[Rs](yt),(!$._updateHook||$._updateHook(H,A)!==!0)&&H[Ht](A)}function Q(A){var H=$[qi];H?(ae(H,2,73,A),yt()):ii(A)}})}return e.__ieDyn=1,e}();function Gf(e,n,t,i){fe(e,function(o){if(o&&o[n])if(t)setTimeout(function(){return i(o)},0);else try{i(o)}catch{}})}var NE=function(){function e(n){this.listeners=[];var t=!!(n||{}).perfEvtsSendAll;Be(e,this,function(i){i[Ms]=function(o){i.listeners[nt](o)},i[ks]=function(o){for(var s=wi(i[Bs],o);s>-1;)i.listeners[Rr](s,1),s=wi(i[Bs],o)},i[yc]=function(o){Gf(i[Bs],yc,!0,function(s){s[yc](o)})},i[ba]=function(o,s){Gf(i[Bs],ba,!0,function(l){l[ba](o,s)})},i[Sc]=function(o,s){Gf(i[Bs],Sc,s,function(l){l[Sc](o,s)})},i[xa]=function(o){o&&(t||!o[pd]())&&Gf(i[Bs],xa,!1,function(s){o[Fr]?setTimeout(function(){return s[xa](o)},0):s[xa](o)})}})}return e.__ieDyn=1,e}();var Ug=function(e){$i(n,e);function n(){var t=e.call(this)||this;return Be(n,t,function(i,o){i[Mr]=function(u,d,f,p){o[Mr](u,d,f||new Zs(u),p||new NE(u))},i.track=function(u){wa(i[Us](),function(){return"AppInsightsCore:track"},function(){u===null&&(l(u),ii("Invalid telemetry item")),s(u),o.track(u)},function(){return{item:u}},!u.sync)};function s(u){ee(u[dn])&&(l(u),ii("telemetry name required"))}function l(u){var d=i[cd]();d&&d[ba]([u],2)}}),t}return n.__ieDyn=1,n}(wE);var IE="_aiHooks",PE=["req","rsp","hkErr","fnErr"];function Vg(e,n){if(e)for(var t=0;t<e[Me]&&!n(e[t],t);t++);}function Hg(e,n,t,i,o){o>=0&&o<=2&&Vg(e,function(s,l){var u=s.cbks,d=u[PE[o]];if(d){n.ctx=function(){var m=i[l]=i[l]||{};return m};try{d[_o](n.inst,t)}catch(m){var f=n.err;try{var p=u[PE[2]];p&&(n.err=m,p[_o](n.inst,t))}catch{}finally{n.err=f}}}})}function GI(e){return function(){var n,t=this,i=arguments,o=e.h,s=(n={},n[dn]=e.n,n.inst=t,n.ctx=null,n.set=f,n),l=[],u=d([s],i);s.evt=ni("event");function d(m,g){return Vg(g,function(v){m[nt](v)}),m}function f(m,g){i=d([],i),i[m]=g,u=d([s],i)}Hg(o,s,u,l,0);var p=e.f;if(p)try{s.rslt=p[_o](t,i)}catch(m){throw s.err=m,Hg(o,s,u,l,3),m}return Hg(o,s,u,l,1),s.rslt}}function Gg(e,n,t,i){var o=null;return e&&(bf(e,n)?o=e:t&&(o=Gg(tg(e),n,i,!1))),o}function Wg(e,n,t){return e?Ld(e[ei],n,t,!1):null}function LE(e,n,t,i){var o=t&&t[IE];if(!o){o={i:0,n,f:t,h:[]};var s=GI(o);s[IE]=o,e[n]=s}var l={id:o.i,cbks:i,rm:function(){var u=this.id;Vg(o.h,function(d,f){if(d.id===u)return o.h[Rr](f,1),1})}};return o.i++,o.h[nt](l),l}function Ld(e,n,t,i,o){if(i===void 0&&(i=!0),e&&n&&t){var s=Gg(e,n,i,o);if(s){var l=s[n];if(typeof l===hr)return LE(s,n,l,t)}}return null}function Pc(e,n,t,i,o){if(e&&n&&t){var s=Gg(e,n,i,o)||e;if(s)return LE(s,n,s[n],t)}return null}var Vr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Lc="sampleRate",Ac="ProcessLegacy",Ad="http.method",La="https://dc.services.visualstudio.com",Wo="/v2/track",gi="not_specified",Wf="iKey";function Qs(e){var n=null;if(Le(Event))n=new Event(e);else{var t=vi();t&&t.createEvent&&(n=t.createEvent("Event"),n.initEvent(e,!0,!0))}return n}var Zo="split",ze="length",So="toLowerCase",Aa="ingestionendpoint",Gr="toString",Zf="removeItem",Ni="name",jo="message",AE="count";var Od="stringify",Md="pathname",Zg="correlationHeaderExcludePatterns",Oc="indexOf";var el="exceptions",Sr="parsedStack",pn="properties",fn="measurements",tl="sizeInBytes",Co="typeName",il="severityLevel",jf="problemGroup",$f="isManual",jg="CreateFromInterface",nl="assembly",Oa="fileName",kd="hasFullStack",Rd="level",rl="method",Mc="line",ol="duration",$g="receivedResponse",al="substring",OE="sanitizeKeyAndAddUniqueness",ME="sanitizeException",kE="sanitizeProperties",RE="sanitizeMeasurements";var Fd="";function Cr(e,n){return n===void 0&&(n=!1),e==null?n:e.toString()[So]()==="true"}function Kn(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var n=Fd+e%1e3,t=Fd+Math.floor(e/1e3)%60,i=Fd+Math.floor(e/(1e3*60))%60,o=Fd+Math.floor(e/(1e3*60*60))%24,s=Math.floor(e/(1e3*60*60*24));return n=n[ze]===1?"00"+n:n[ze]===2?"0"+n:n,t=t[ze]<2?"0"+t:t,i=i[ze]<2?"0"+i:i,o=o[ze]<2?"0"+o:o,(s>0?s+".":Fd)+o+":"+i+":"+t+"."+n}function qg(e,n,t,i,o){return!o&&xe(e)&&(e==="Script error."||e==="Script error")}var vt=ag({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]});var kc=Df({LocalStorage:0,SessionStorage:1}),iP=Df({AI:0,AI_AND_W3C:1,W3C:2});var Ma=void 0,ka=void 0,FE="";function Xg(){return Yd()?qf(kc.LocalStorage):null}function qf(e){try{if(ee(pr()))return null;var n=new Date()[Gr](),t=ni(e===kc.LocalStorage?"localStorage":"sessionStorage"),i=FE+n;t.setItem(i,n);var o=t.getItem(i)!==n;if(t[Zf](i),!o)return t}catch{}return null}function Jg(){return Ra()?qf(kc.SessionStorage):null}function Kg(){Ma=!1,ka=!1}function sl(e){FE=e||""}function Qg(){Ma=Yd(!0),ka=Ra(!0)}function Yd(e){return(e||Ma===void 0)&&(Ma=!!qf(kc.LocalStorage)),Ma}function e0(e,n){var t=Xg();if(t!==null)try{return t.getItem(n)}catch(i){Ma=!1,ae(e,2,1,"Browser failed read of local storage. "+Qe(i),{exception:ye(i)})}return null}function t0(e,n,t){var i=Xg();if(i!==null)try{return i.setItem(n,t),!0}catch(o){Ma=!1,ae(e,2,3,"Browser failed write to local storage. "+Qe(o),{exception:ye(o)})}return!1}function i0(e,n){var t=Xg();if(t!==null)try{return t[Zf](n),!0}catch(i){Ma=!1,ae(e,2,5,"Browser failed removal of local storage item. "+Qe(i),{exception:ye(i)})}return!1}function Ra(e){return(e||ka===void 0)&&(ka=!!qf(kc.SessionStorage)),ka}function Rc(e,n){var t=Jg();if(t!==null)try{return t.getItem(n)}catch(i){ka=!1,ae(e,2,2,"Browser failed read of session storage. "+Qe(i),{exception:ye(i)})}return null}function Bd(e,n,t){var i=Jg();if(i!==null)try{return i.setItem(n,t),!0}catch(o){ka=!1,ae(e,2,4,"Browser failed write to session storage. "+Qe(o),{exception:ye(o)})}return!1}function n0(e,n){var t=Jg();if(t!==null)try{return t[Zf](n),!0}catch(i){ka=!1,ae(e,2,6,"Browser failed removal of session storage item. "+Qe(i),{exception:ye(i)})}return!1}var kn;function Xf(e,n,t){var i=n[ze],o=r0(e,n);if(o[ze]!==i){for(var s=0,l=o;t[l]!==void 0;)s++,l=o[al](0,147)+o0(s);o=l}return o}function r0(e,n){var t;return n&&(n=_i(n[Gr]()),n[ze]>150&&(t=n[al](0,150),ae(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:n},!0))),t||n}function gt(e,n,t){t===void 0&&(t=1024);var i;return n&&(t=t||1024,n=_i(n),n.toString()[ze]>t&&(i=n[Gr]()[al](0,t),ae(e,2,61,"string value is too long. It has been truncated to "+t+" characters.",{value:n},!0))),i||n}function Eo(e,n){return Qf(e,n,2048,66)}function Fc(e,n){var t;return n&&n[ze]>32768&&(t=n[al](0,32768),ae(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:n},!0)),t||n}function Jf(e,n){var t;if(n){var i=""+n;i[ze]>32768&&(t=i[al](0,32768),ae(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:n},!0))}return t||n}function mn(e,n){if(n){var t={};lt(n,function(i,o){if(hn(o)&&zr())try{o=Ri()[Od](o)}catch(s){ae(e,2,49,"custom property is not valid",{exception:s},!0)}o=gt(e,o,8192),i=Xf(e,i,t),t[i]=o}),n=t}return n}function _n(e,n){if(n){var t={};lt(n,function(i,o){i=Xf(e,i,t),t[i]=o}),n=t}return n}function Kf(e,n){return n&&Qf(e,n,128,69)[Gr]()}function Qf(e,n,t,i){var o;return n&&(n=_i(n),n[ze]>t&&(o=n[al](0,t),ae(e,2,i,"input is too long, it has been truncated to "+t+" characters.",{data:n},!0))),o||n}function o0(e){var n="00"+e;return n.substr(n[ze]-3)}var YE=(kn={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},kn[OE]=Xf,kn.sanitizeKey=r0,kn.sanitizeString=gt,kn.sanitizeUrl=Eo,kn.sanitizeMessage=Fc,kn[ME]=Jf,kn[kE]=mn,kn[RE]=_n,kn.sanitizeId=Kf,kn.sanitizeInput=Qf,kn.padNumber=o0,kn.trim=_i,kn);var BE=vi()||{},zE=0,nP=[null,null,null,null,null];function zd(e){var n=zE,t=nP,i=t[n];return BE.createElement?t[n]||(i=t[n]=BE.createElement("a")):i={host:a0(e,!0)},i.href=e,n++,n>=t[ze]&&(n=0),zE=n,i}function em(e){var n,t=zd(e);return t&&(n=t.href),n}function tm(e,n){return e?e.toUpperCase()+" "+n:n}function a0(e,n){var t=im(e,n)||"";if(t){var i=t.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(i!=null&&i[ze]>3&&xe(i[2])&&i[2][ze]>0)return i[2]+(i[3]||"")}return t}function im(e,n){var t=null;if(e){var i=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(i!=null&&i[ze]>2&&xe(i[2])&&i[2][ze]>0&&(t=i[2]||"",n&&i[ze]>2)){var o=(i[1]||"")[So](),s=i[3]||"";(o==="http"&&s===":80"||o==="https"&&s===":443")&&(s=""),t+=s}}return t}var oP=[La+Wo,"https://breeze.aimon.applicationinsights.io"+Wo,"https://dc-int.services.visualstudio.com"+Wo];function ll(e){return wi(oP,e[So]())!==-1}var $o={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,n,t){if(!n||e&&e.disableCorrelationHeaders)return!1;if(e&&e[Zg]){for(var i=0;i<e.correlationHeaderExcludePatterns[ze];i++)if(e[Zg][i].test(n))return!1}var o=zd(n).host[So]();if(o&&(o[Oc](":443")!==-1||o[Oc](":80")!==-1)&&(o=(im(n,!0)||"")[So]()),(!e||!e.enableCorsCorrelation)&&o&&o!==t)return!1;var s=e&&e.correlationHeaderDomains;if(s){var l;if(fe(s,function(f){var p=new RegExp(f.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));l=l||p.test(o)}),!l)return!1}var u=e&&e.correlationHeaderExcludedDomains;if(!u||u[ze]===0)return!0;for(var i=0;i<u[ze];i++){var d=new RegExp(u[i].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(d.test(o))return!1}return o&&o[ze]>0},getCorrelationContext:function(e){if(e){var n=$o.getCorrelationContextValue(e,vt[1]);if(n&&n!==$o.correlationIdPrefix)return n}},getCorrelationContextValue:function(e,n){if(e)for(var t=e[Zo](","),i=0;i<t[ze];++i){var o=t[i][Zo]("=");if(o[ze]===2&&o[0]===n)return o[1]}}};function UE(e,n,t,i){var o,s=i,l=i;if(n&&n[ze]>0){var u=zd(n);if(o=u.host,!s)if(u[Md]!=null){var d=u.pathname[ze]===0?"/":u[Md];d.charAt(0)!=="/"&&(d="/"+d),l=u[Md],s=gt(e,t?t+" "+d:d)}else s=gt(e,n)}else o=i,s=i;return{target:o,name:s,data:l}}function Yc(){var e=vr();if(e&&e.now&&e.timing){var n=e.now()+e.timing.navigationStart;if(n>0)return n}return Xi()}function Fi(e,n){var t=null;return e!==0&&n!==0&&!ee(e)&&!ee(n)&&(t=n-e),t}function cl(e,n){var t=e||{};return{getName:function(){return t[Ni]},setName:function(i){n&&n.setName(i),t[Ni]=i},getTraceId:function(){return t.traceID},setTraceId:function(i){n&&n.setTraceId(i),Js(i)&&(t.traceID=i)},getSpanId:function(){return t.parentID},setSpanId:function(i){n&&n.setSpanId(i),Ks(i)&&(t.parentID=i)},getTraceFlags:function(){return t.traceFlags},setTraceFlags:function(i){n&&n.setTraceFlags(i),t.traceFlags=i}}}var aP=";",sP="=";function s0(e){if(!e)return{};var n=e[Zo](aP),t=ng(n,function(o,s){var l=s[Zo](sP);if(l[ze]===2){var u=l[0][So](),d=l[1];o[u]=d}return o},{});if(An(t)[ze]>0){if(t.endpointsuffix){var i=t.location?t.location+".":"";t[Aa]=t[Aa]||"https://"+i+"dc."+t.endpointsuffix,gd(t[Aa],"/")&&(t[Aa]=t[Aa].slice(0,-1))}t[Aa]=t[Aa]||La}return t}var nm=function(){function e(n,t,i){var o=this,s=this;s.ver=1,s.sampleRate=100,s.tags={},s[Ni]=gt(n,i)||gi,s.data=t,s.time=$n(new Date),s.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1}}return e}();var Qn=function(){function e(n,t,i,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var s=this;s.ver=2,s[Ni]=gt(n,t)||gi,s[pn]=mn(n,i),s[fn]=_n(n,o)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}();var lP="<no_method>",Bc="error",Rn="stack",c0="stackDetails",HE="errorSrc",u0="message",WE="description";function d0(e,n){var t=e;return t&&!xe(t)&&(JSON&&JSON[Od]?(t=JSON[Od](e),n&&(!t||t==="{}")&&(Le(e[Gr])?t=e[Gr]():t=""+e)):t=""+e+" - (Missing JSON.stringify)"),t||""}function ZE(e,n){var t=e;return e&&(t&&!xe(t)&&(t=e[u0]||e[WE]||t),t&&!xe(t)&&(t=d0(t,!0)),e.filename&&(t=t+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),n&&n!=="String"&&n!=="Object"&&n!=="Error"&&(t||"")[Oc](n)===-1&&(t=n+": "+t),t||""}function cP(e){try{if(hn(e))return"hasFullStack"in e&&"typeName"in e}catch{}return!1}function uP(e){try{if(hn(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch{}return!1}function VE(e){return e&&e.src&&xe(e.src)&&e.obj&&st(e.obj)}function ul(e){var n=e||"";xe(n)||(xe(n[Rn])?n=n[Rn]:n=""+n);var t=n[Zo](`
`);return{src:n,obj:t}}function dP(e){for(var n=[],t=e[Zo](`
`),i=0;i<t[ze];i++){var o=t[i];t[i+1]&&(o+="@"+t[i+1],i++),n.push(o)}return{src:e,obj:n}}function jE(e){var n=null;if(e)try{if(e[Rn])n=ul(e[Rn]);else if(e[Bc]&&e[Bc][Rn])n=ul(e[Bc][Rn]);else if(e.exception&&e.exception[Rn])n=ul(e.exception[Rn]);else if(VE(e))n=e;else if(VE(e[c0]))n=e[c0];else if(window&&window.opera&&e[u0])n=dP(e[jo]);else if(e.reason&&e.reason[Rn])n=ul(e.reason[Rn]);else if(xe(e))n=ul(e);else{var t=e[u0]||e[WE]||"";xe(e[HE])&&(t&&(t+=`
`),t+=" from "+e[HE]),t&&(n=ul(t))}}catch(i){n=ul(i)}return n||{src:"",obj:null}}function hP(e){var n="";return e&&(e.obj?fe(e.obj,function(t){n+=t+`
`}):n=e.src||""),n}function pP(e){var n,t=e.obj;if(t&&t[ze]>0){n=[];var i=0,o=0;fe(t,function(C){var T=C[Gr]();if(h0.regex.test(T)){var b=new h0(T,i++);o+=b[tl],n.push(b)}});var s=32*1024;if(o>s)for(var l=0,u=n[ze]-1,d=0,f=l,p=u;l<u;){var m=n[l][tl],g=n[u][tl];if(d+=m+g,d>s){var v=p-f+1;n.splice(f,v);break}f=l,p=u,l++,u--}}return n}function rm(e){var n="";if(e&&(n=e.typeName||e[Ni]||"",!n))try{var t=/function (.{1,200})\(/,i=t.exec(e.constructor[Gr]());n=i&&i[ze]>1?i[1]:""}catch{}return n}function l0(e){if(e)try{if(!xe(e)){var n=rm(e),t=d0(e,!1);return(!t||t==="{}")&&(e[Bc]&&(e=e[Bc],n=rm(e)),t=d0(e,!0)),t[Oc](n)!==0&&n!=="String"?n+":"+t:t}}catch{}return""+(e||"")}var an=function(){function e(n,t,i,o,s,l){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var u=this;u.ver=2,uP(t)?(u[el]=t[el]||[],u[pn]=t[pn],u[fn]=t[fn],t[il]&&(u[il]=t[il]),t.id&&(u.id=t.id),t[jf]&&(u[jf]=t[jf]),ee(t[$f])||(u[$f]=t[$f])):(i||(i={}),u[el]=[new GE(n,t,i)],u[pn]=mn(n,i),u[fn]=_n(n,o),s&&(u[il]=s),l&&(u.id=l))}return e.CreateAutoException=function(n,t,i,o,s,l,u,d){var f,p=rm(s||l||n);return f={},f[jo]=ZE(n,p),f.url=t,f.lineNumber=i,f.columnNumber=o,f.error=l0(s||l||n),f.evt=l0(l||n),f[Co]=p,f.stackDetails=jE(u||s||l),f.errorSrc=d,f},e.CreateFromInterface=function(n,t,i,o){var s=t[el]&&Gs(t[el],function(u){return GE[jg](n,u)}),l=new e(n,mi(mi({},t),{exceptions:s}),i,o);return l},e.prototype.toInterface=function(){var n,t=this,i=t.exceptions,o=t.properties,s=t.measurements,l=t.severityLevel,u=t.problemGroup,d=t.id,f=t.isManual,p=i instanceof Array&&Gs(i,function(m){return m.toInterface()})||void 0;return n={ver:"4.0"},n[el]=p,n.severityLevel=l,n.properties=o,n.measurements=s,n.problemGroup=u,n.id=d,n.isManual=f,n},e.CreateSimpleException=function(n,t,i,o,s,l){var u;return{exceptions:[(u={},u[kd]=!0,u.message=n,u.stack=s,u.typeName=t,u)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=l0,e}();var GE=function(){function e(n,t,i){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var o=this;if(cP(t))o[Co]=t[Co],o[jo]=t[jo],o[Rn]=t[Rn],o[Sr]=t[Sr]||[],o[kd]=t[kd];else{var s=t,l=s&&s.evt;Vs(s)||(s=s[Bc]||l||s),o[Co]=gt(n,rm(s))||gi,o[jo]=Fc(n,ZE(t||s,o[Co]))||gi;var u=t[c0]||jE(t);o[Sr]=pP(u),st(o[Sr])&&Gs(o[Sr],function(d){d[nl]=gt(n,d[nl]),d[Oa]=gt(n,d[Oa])}),o[Rn]=Jf(n,hP(u)),o.hasFullStack=st(o.parsedStack)&&o.parsedStack[ze]>0,i&&(i[Co]=i[Co]||o[Co])}}return e.prototype.toInterface=function(){var n,t=this,i=t[Sr]instanceof Array&&Gs(t[Sr],function(s){return s.toInterface()}),o=(n={id:t.id,outerId:t.outerId,typeName:t[Co],message:t[jo],hasFullStack:t[kd],stack:t[Rn]},n[Sr]=i||void 0,n);return o},e.CreateFromInterface=function(n,t){var i=t[Sr]instanceof Array&&Gs(t[Sr],function(s){return h0[jg](s)})||t[Sr],o=new e(n,mi(mi({},t),{parsedStack:i}));return o},e}();var h0=function(){function e(n,t){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var i=this;if(i[tl]=0,typeof n=="string"){var o=n;i[Rd]=t,i[rl]=lP,i[nl]=_i(o),i[Oa]="",i[Mc]=0;var s=o.match(e.regex);s&&s[ze]>=5&&(i[rl]=_i(s[2])||i[rl],i[Oa]=_i(s[4]),i[Mc]=parseInt(s[5])||0)}else i[Rd]=n[Rd],i[rl]=n[rl],i[nl]=n[nl],i[Oa]=n[Oa],i[Mc]=n[Mc],i[tl]=0;i.sizeInBytes+=i.method[ze],i.sizeInBytes+=i.fileName[ze],i.sizeInBytes+=i.assembly[ze],i[tl]+=e.baseSize,i.sizeInBytes+=i.level.toString()[ze],i.sizeInBytes+=i.line.toString()[ze]}return e.CreateFromInterface=function(n){return new e(n,null)},e.prototype.toInterface=function(){var n=this;return{level:n[Rd],method:n[rl],assembly:n[nl],fileName:n[Oa],line:n[Mc]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}();var $E=function(){function e(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return e}();var er=function(){function e(n,t,i,o,s,l,u,d,f){this.aiDataContract={ver:1,metrics:1,properties:0};var p=this;p.ver=2;var m=new $E;m[AE]=o>0?o:void 0,m.max=isNaN(l)||l===null?void 0:l,m.min=isNaN(s)||s===null?void 0:s,m[Ni]=gt(n,t)||gi,m.value=i,m.stdDev=isNaN(u)||u===null?void 0:u,p.metrics=[m],p[pn]=mn(n,d),p[fn]=_n(n,f)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}();var Tn=function(){function e(n,t,i,o,s,l,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var d=this;d.ver=2,d.id=Kf(n,u),d.url=Eo(n,i),d[Ni]=gt(n,t)||gi,isNaN(o)||(d[ol]=Kn(o)),d[pn]=mn(n,s),d[fn]=_n(n,l)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}();var tr=function(){function e(n,t,i,o,s,l,u,d,f,p,m,g){f===void 0&&(f="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var v=this;v.ver=2,v.id=t,v[ol]=Kn(s),v.success=l,v.resultCode=u+"",v.type=gt(n,f);var C=UE(n,i,d,o);v.data=Eo(n,o)||C.data,v.target=gt(n,C.target),p&&(v.target="".concat(v.target," | ").concat(p)),v[Ni]=gt(n,C[Ni]),v[pn]=mn(n,m),v[fn]=_n(n,g)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}();var Wr=function(){function e(n,t,i,o,s){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var l=this;l.ver=2,t=t||gi,l[jo]=Fc(n,t),l[pn]=mn(n,o),l[fn]=_n(n,s),i&&(l[il]=i)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}();var Zr=function(){function e(n,t,i,o,s,l,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var d=this;d.ver=2,d.url=Eo(n,i),d[Ni]=gt(n,t)||gi,d[pn]=mn(n,s),d[fn]=_n(n,l),u&&(d.domProcessing=u.domProcessing,d[ol]=u[ol],d.networkConnect=u.networkConnect,d.perfTotal=u.perfTotal,d[$g]=u[$g],d.sentRequest=u.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}();var To=function(){function e(n,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=n,this.baseData=t}return e}();function Ya(e){var n="ai."+e+".";return function(t){return n+t}}var Ud=Ya("application"),Yi=Ya("device"),om=Ya("location"),zc=Ya("operation"),p0=Ya("session"),Fa=Ya("user"),dl=Ya("cloud"),Hd=Ya("internal"),Uc=function(e){$i(n,e);function n(){return e.call(this)||this}return n}(og({applicationVersion:Ud("ver"),applicationBuild:Ud("build"),applicationTypeId:Ud("typeId"),applicationId:Ud("applicationId"),applicationLayer:Ud("layer"),deviceId:Yi("id"),deviceIp:Yi("ip"),deviceLanguage:Yi("language"),deviceLocale:Yi("locale"),deviceModel:Yi("model"),deviceFriendlyName:Yi("friendlyName"),deviceNetwork:Yi("network"),deviceNetworkName:Yi("networkName"),deviceOEMName:Yi("oemName"),deviceOS:Yi("os"),deviceOSVersion:Yi("osVersion"),deviceRoleInstance:Yi("roleInstance"),deviceRoleName:Yi("roleName"),deviceScreenResolution:Yi("screenResolution"),deviceType:Yi("type"),deviceMachineName:Yi("machineName"),deviceVMName:Yi("vmName"),deviceBrowser:Yi("browser"),deviceBrowserVersion:Yi("browserVersion"),locationIp:om("ip"),locationCountry:om("country"),locationProvince:om("province"),locationCity:om("city"),operationId:zc("id"),operationName:zc("name"),operationParentId:zc("parentId"),operationRootId:zc("rootId"),operationSyntheticSource:zc("syntheticSource"),operationCorrelationVector:zc("correlationVector"),sessionId:p0("id"),sessionIsFirst:p0("isFirst"),sessionIsNew:p0("isNew"),userAccountAcquisitionDate:Fa("accountAcquisitionDate"),userAccountId:Fa("accountId"),userAgent:Fa("userAgent"),userId:Fa("id"),userStoreRegion:Fa("storeRegion"),userAuthUserId:Fa("authUserId"),userAnonymousUserAcquisitionDate:Fa("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Fa("authUserAcquisitionDate"),cloudName:dl("name"),cloudRole:dl("role"),cloudRoleVer:dl("roleVer"),cloudRoleInstance:dl("roleInstance"),cloudEnvironment:dl("environment"),cloudLocation:dl("location"),cloudDeploymentUnit:dl("deploymentUnit"),internalNodeName:Hd("nodeName"),internalSdkVersion:Hd("sdkVersion"),internalAgentVersion:Hd("agentVersion"),internalSnippet:Hd("snippet"),internalSdkSrc:Hd("sdkSrc")}));function Er(e,n,t,i,o,s){var l;t=gt(i,t)||gi,(ee(e)||ee(n)||ee(t))&&ii("Input doesn't contain all required fields");var u="";e[Wf]&&(u=e[Wf],delete e[Wf]);var d=(l={},l[Ni]=t,l.time=$n(new Date),l.iKey=u,l.ext=s||{},l.tags=[],l.data={},l.baseType=n,l.baseData=e,l);return ee(o)||lt(o,function(f,p){d.data[f]=p}),d}var qE=function(){function e(){}return e.create=Er,e}();var sn={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},At=new Uc;var Ba="AppInsightsPropertiesPlugin",Vd="AppInsightsChannelPlugin",f0="ApplicationInsightsAnalytics";var Gd="toString",am="disableExceptionTracking",Wd="autoTrackPageVisitTime",sm="overridePageViewDuration",lm="enableUnhandledPromiseRejectionTracking",Zd="samplingPercentage",jd="isStorageUseDisabled",$d="isBrowserLinkTrackingEnabled",cm="enableAutoRouteTracking",um="namePrefix",dm="disableFlushOnBeforeUnload";var Ki="core",qo="dataType",za="envelopeType",Fn="diagLog",Ua="track",Hc="trackPageView",qd="trackPreviousPageVisit",Xo="sendPageViewInternal",Xd="sendPageViewPerformanceInternal",Vc="populatePageViewPerformanceEvent",Ha="href",m0="sendExceptionInternal",hm="exception",Gc="error",pm="_onerror",fm="errorSrc",mm="lineNumber",_m="columnNumber",_0="message",vm="CreateAutoException",Jd="addTelemetryInitializer",bo="duration",Va="length",gm="isPerformanceTimingSupported",ym="getPerformanceTiming",Wc="navigationStart",Kd="shouldCollectDuration",Sm="isPerformanceTimingDataReady",XE="getEntriesByType",Zc="responseStart",JE="requestStart",Qd="loadEventEnd",Cm="responseEnd",eh="connectEnd",v0="pageVisitStartTime";var Em=null;function gP(){if(Em==null)try{Em=!!(self&&self instanceof WorkerGlobalScope)}catch{Em=!1}return Em}var KE=function(){function e(n,t,i,o){Be(e,this,function(s){var l=null,u=[],d=!1,f;i&&(f=i.logger);function p(v){i&&i.flush(v)}function m(){l||(l=setTimeout(function(){l=null;var v=u.slice(0),C=!1;u=[],fe(v,function(T){T()?C=!0:u.push(T)}),u[Va]>0&&m(),C&&p(!0)},100))}function g(v){u.push(v),m()}s[Hc]=function(v,C){var T=v.name;if(ee(T)||typeof T!="string"){var b=vi();T=v.name=b&&b.title||""}var S=v.uri;if(ee(S)||typeof S!="string"){var I=On();S=v.uri=I&&I[Ha]||""}if(!o[gm]()){n[Xo](v,C),p(!0),gP()||ae(f,2,25,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");return}var U=!1,j,k=o[ym]()[Wc];k>0&&(j=Fi(k,+new Date),o[Kd](j)||(j=void 0));var De;!ee(C)&&!ee(C[bo])&&(De=C[bo]),(t||!isNaN(De))&&(isNaN(De)&&(C||(C={}),C[bo]=j),n[Xo](v,C),p(!0),U=!0);var $=6e4;C||(C={}),g(function(){var yt=!1;try{if(o[Sm]()){yt=!0;var He={name:T,uri:S};o[Vc](He),!He.isValid&&!U?(C[bo]=j,n[Xo](v,C)):(U||(C[bo]=He.durationMs,n[Xo](v,C)),d||(n[Xd](He,C),d=!0))}else k>0&&Fi(k,+new Date)>$&&(yt=!0,U||(C[bo]=$,n[Xo](v,C)))}catch(ct){ae(f,1,38,"trackPageView failed on page load calculation: "+Qe(ct),{exception:ye(ct)})}return yt})},s.teardown=function(v,C){if(l){clearTimeout(l),l=null;var T=u.slice(0),b=!1;u=[],fe(T,function(S){S()&&(b=!0)})}}})}return e.__ieDyn=1,e}();var yP=36e5,QE=["googlebot","adsbot-google","apis-google","mediapartners-google"];function tT(){var e=vr();return e&&!!e.timing}function SP(){var e=vr();return e&&e.getEntriesByType&&e.getEntriesByType("navigation")[Va]>0}function CP(){var e=vr(),n=e?e.timing:0;return n&&n.domainLookupStart>0&&n[Wc]>0&&n[Zc]>0&&n[JE]>0&&n[Qd]>0&&n[Cm]>0&&n[eh]>0&&n.domLoading>0}function eT(){return tT()?vr().timing:null}function EP(){return SP()?vr()[XE]("navigation")[0]:null}function TP(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=En()||{},i=t.userAgent,o=!1;if(i)for(var s=0;s<QE[Va];s++)o=o||i.toLowerCase().indexOf(QE[s])!==-1;if(o)return!1;for(var s=0;s<e[Va];s++)if(e[s]<0||e[s]>=yP)return!1;return!0}var iT=function(){function e(n){var t=Ur(n);Be(e,this,function(i){i[Vc]=function(o){o.isValid=!1;var s=EP(),l=eT(),u=0,d=0,f=0,p=0,m=0;(s||l)&&(s?(u=s[bo],d=s.startTime===0?s[eh]:Fi(s.startTime,s[eh]),f=Fi(s.requestStart,s[Zc]),p=Fi(s[Zc],s[Cm]),m=Fi(s.responseEnd,s[Qd])):(u=Fi(l[Wc],l[Qd]),d=Fi(l[Wc],l[eh]),f=Fi(l.requestStart,l[Zc]),p=Fi(l[Zc],l[Cm]),m=Fi(l.responseEnd,l[Qd])),u===0?ae(t,2,10,"error calculating page view performance.",{total:u,network:d,request:f,response:p,dom:m}):i[Kd](u,d,f,p,m)?u<Math.floor(d)+Math.floor(f)+Math.floor(p)+Math.floor(m)?ae(t,2,8,"client performance math error.",{total:u,network:d,request:f,response:p,dom:m}):(o.durationMs=u,o.perfTotal=o[bo]=Kn(u),o.networkConnect=Kn(d),o.sentRequest=Kn(f),o.receivedResponse=Kn(p),o.domProcessing=Kn(m),o.isValid=!0):ae(t,2,45,"Invalid page load duration value. Browser perf data won't be sent.",{total:u,network:d,request:f,response:p,dom:m}))},i[ym]=eT,i[gm]=tT,i[Sm]=CP,i[Kd]=TP})}return e.__ieDyn=1,e}();var nT=function(){function e(n,t){var i="prevPageVisitData";Be(e,this,function(o){o[qd]=function(d,f){try{var p=s(d,f);p&&t(p.pageName,p.pageUrl,p.pageVisitTime)}catch(m){gr(n,"Auto track page visit time failed, metric will not be collected: "+ye(m))}};function s(d,f){var p=null;try{p=u(),l(d,f)}catch(m){gr(n,"Call to restart failed: "+ye(m)),p=null}return p}function l(d,f){try{if(Ra()){Rc(n,i)!=null&&ii("Cannot call startPageVisit consecutively without first calling stopPageVisit");var p=new bP(d,f),m=Ri().stringify(p);Bd(n,i,m)}}catch(g){gr(n,"Call to start failed: "+ye(g))}}function u(){var d=null;try{if(Ra()){var f=Xi(),p=Rc(n,i);p&&zr()&&(d=Ri().parse(p),d.pageVisitTime=f-d[v0],n0(n,i))}}catch(m){gr(n,"Stop page visit timer failed: "+ye(m)),d=null}return d}_r(o,"_logger",function(){return n}),_r(o,"pageVisitTimeTrackingHandler",function(){return t})})}return e.__ieDyn=1,e}();var bP=function(){function e(n,t){this[v0]=Xi(),this.pageName=n,this.pageUrl=t}return e}();var g0=function(){function e(n,t){var i=this,o={};i.start=function(s){typeof o[s]<"u"&&ae(n,2,62,"start was called more than once for this event without calling stop.",{name:s,key:s},!0),o[s]=+new Date},i.stop=function(s,l,u,d){var f=o[s];if(isNaN(f))ae(n,2,63,"stop was called without a corresponding start.",{name:s,key:s},!0);else{var p=+new Date,m=Fi(f,p);i.action(s,l,m,u,d)}delete o[s],o[s]=void 0}}return e}();var xP="event";function th(e,n){e&&e.dispatchEvent&&n&&e.dispatchEvent(n)}function DP(e){if(e&&e.reason){var n=e.reason;return!xe(n)&&Le(n[Gd])?n[Gd]():ye(n)}return e||""}var rT=6e4;function oT(e,n){return e=e||n,e<rT&&(e=rT),e}function aT(e){return e||(e={}),e.sessionRenewalMs=oT(e.sessionRenewalMs,30*60*1e3),e.sessionExpirationMs=oT(e.sessionExpirationMs,24*60*60*1e3),e[am]=Cr(e[am]),e[Wd]=Cr(e[Wd]),e[sm]=Cr(e[sm]),e[lm]=Cr(e[lm]),(isNaN(e[Zd])||e[Zd]<=0||e[Zd]>=100)&&(e[Zd]=100),e[jd]=Cr(e[jd]),e[$d]=Cr(e[$d]),e[cm]=Cr(e[cm]),e[um]=e[um]||"",e.enableDebug=Cr(e.enableDebug),e[dm]=Cr(e[dm]),e.disableFlushOnUnload=Cr(e.disableFlushOnUnload,e[dm]),e}function wP(e){Xt(e[jd])||(e[jd]?Kg():Qg())}var Tm=function(e){$i(n,e);function n(){var t=e.call(this)||this;t.identifier=f0,t.priority=180,t.autoRoutePVDelay=500;var i,o,s,l,u,d,f,p,m,g,v,C,T,b,S=0,I,U,j;return Be(n,t,function(k,De){var $=De._addHook;qe(),k.getCookieMgr=function(){return Xs(k[Ki])},k.processTelemetry=function(F,Q){k.processNext(F,Q)},k.trackEvent=function(F,Q){try{var A=Er(F,Qn[qo],Qn[za],k[Fn](),Q);k[Ki][Ua](A)}catch(H){ge(2,39,"trackTrace failed, trace will not be collected: "+Qe(H),{exception:ye(H)})}},k.startTrackEvent=function(F){try{i.start(F)}catch(Q){ge(1,29,"startTrackEvent failed, event will not be collected: "+Qe(Q),{exception:ye(Q)})}},k.stopTrackEvent=function(F,Q,A){try{i.stop(F,void 0,Q,A)}catch(H){ge(1,30,"stopTrackEvent failed, event will not be collected: "+Qe(H),{exception:ye(H)})}},k.trackTrace=function(F,Q){try{var A=Er(F,Wr[qo],Wr[za],k[Fn](),Q);k[Ki][Ua](A)}catch(H){ge(2,39,"trackTrace failed, trace will not be collected: "+Qe(H),{exception:ye(H)})}},k.trackMetric=function(F,Q){try{var A=Er(F,er[qo],er[za],k[Fn](),Q);k[Ki][Ua](A)}catch(H){ge(1,36,"trackMetric failed, metric will not be collected: "+Qe(H),{exception:ye(H)})}},k[Hc]=function(F,Q){try{var A=F||{};s[Hc](A,mi(mi(mi({},A.properties),A.measurements),Q)),k.config[Wd]&&u[qd](A.name,A.uri)}catch(H){ge(1,37,"trackPageView failed, page view will not be collected: "+Qe(H),{exception:ye(H)})}},k[Xo]=function(F,Q,A){var H=vi();H&&(F.refUri=F.refUri===void 0?H.referrer:F.refUri);var G=Er(F,Tn[qo],Tn[za],k[Fn](),Q,A);k[Ki][Ua](G),S=0},k[Xd]=function(F,Q,A){var H=Er(F,Zr[qo],Zr[za],k[Fn](),Q,A);k[Ki][Ua](H)},k.trackPageViewPerformance=function(F,Q){var A=F||{};try{l[Vc](A),k[Xd](A,Q)}catch(H){ge(1,37,"trackPageViewPerformance failed, page view will not be collected: "+Qe(H),{exception:ye(H)})}},k.startTrackPage=function(F){try{if(typeof F!="string"){var Q=vi();F=Q&&Q.title||""}o.start(F)}catch(A){ge(1,31,"startTrackPage failed, page view may not be collected: "+Qe(A),{exception:ye(A)})}},k.stopTrackPage=function(F,Q,A,H){try{if(typeof F!="string"){var G=vi();F=G&&G.title||""}if(typeof Q!="string"){var de=On();Q=de&&de[Ha]||""}o.stop(F,Q,A,H),k.config[Wd]&&u[qd](F,Q)}catch(N){ge(1,32,"stopTrackPage failed, page view will not be collected: "+Qe(N),{exception:ye(N)})}},k[m0]=function(F,Q,A){var H=F&&(F[hm]||F[Gc])||Vs(F)&&F||{name:F&&typeof F,message:F||gi};F=F||{};var G=new an(k[Fn](),H,F.properties||Q,F.measurements,F.severityLevel,F.id).toInterface(),de=Er(G,an[qo],an[za],k[Fn](),Q,A);k[Ki][Ua](de)},k.trackException=function(F,Q){F&&!F[hm]&&F[Gc]&&(F[hm]=F[Gc]);try{k[m0](F,Q)}catch(A){ge(1,35,"trackException failed, exception will not be collected: "+Qe(A),{exception:ye(A)})}},k[pm]=function(F){var Q=F&&F[Gc],A=F&&F.evt;try{if(!A){var H=Xn();H&&(A=H[xP])}var G=F&&F.url||(vi()||{}).URL,de=F[fm]||"window.onerror@"+G+":"+(F[mm]||0)+":"+(F[_m]||0),N={errorSrc:de,url:G,lineNumber:F[mm]||0,columnNumber:F[_m]||0,message:F[_0]};qg(F.message,F.url,F.lineNumber,F.columnNumber,F[Gc])?Wt(an[vm]("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",G,F[mm]||0,F[_m]||0,Q,A,null,de),N):(F[fm]||(F[fm]=de),k.trackException({exception:F,severityLevel:3},N))}catch(q){var V=Q?Q.name+", "+Q[_0]:"null";ge(1,11,"_onError threw exception while logging error, error will not be collected: "+Qe(q),{exception:ye(q),errorString:V})}},k[Jd]=function(F){if(k[Ki])return k[Ki][Jd](F);d||(d=[]),d.push(F)},k.initialize=function(F,Q,A,H){if(!k.isInitialized()){ee(Q)&&ii("Error initializing"),De.initialize(F,Q,A,H),F.storagePrefix&&sl(F.storagePrefix);try{j=Jn(Ji(k.identifier),Q.evtNamespace&&Q.evtNamespace()),d&&(fe(d,function(de){Q[Jd](de)}),d=null);var G=yt(F);wP(G),l=new iT(k[Ki]),s=new KE(k,G[sm],k[Ki],l),u=new nT(k[Fn](),function(de,N,V){return ct(de,N,V)}),He(G,F),i=new g0(k[Fn](),"trackEvent"),i.action=function(de,N,V,q,ue){q||(q={}),ue||(ue={}),q.duration=V[Gd](),k.trackEvent({name:de,properties:q,measurements:ue})},o=new g0(k[Fn](),"trackPageView"),o.action=function(de,N,V,q,ue){ee(q)&&(q={}),q.duration=V[Gd]();var we={name:de,uri:N,properties:q,measurements:ue};k[Xo](we,q)},Uo()&&(Hi(G),Pt(G))}catch(de){throw k.setInitialized(!1),de}}},k._doTeardown=function(F,Q){s&&s.teardown(F,Q),Ia(window,null,null,j),qe()};function yt(F){var Q=on(null,F,k[Ki]),A=k.identifier,H=aT(F),G=k.config=Q.getExtCfg(A);return H!==void 0&&lt(H,function(de,N){G[de]=Q.getConfig(A,de,N),G[de]===void 0&&(G=N)}),G}function He(F,Q){f=F[$d]||Q[$d],Ce()}function ct(F,Q,A){var H={PageName:F,PageUrl:Q};k.trackMetric({name:"PageVisitTime",average:A,max:A,min:A,sampleCount:1},H)}function Ce(){if(!p&&f){var F=["/browserLinkSignalR/","/__browserLink/"],Q=function(A){if(f&&A.baseType===tr[qo]){var H=A.baseData;if(H){for(var G=0;G<F[Va];G++)if(H.target&&H.target.indexOf(F[G])>=0)return!1}}return!0};k[Jd](Q),p=!0}}function Wt(F,Q){var A=Er(F,an[qo],an[za],k[Fn](),Q);k[Ki][Ua](A)}function Hi(F){var Q=Xn(),A=On(!0);v=F[am],!v&&!C&&!F.autoExceptionInstrumented&&($(Pc(Q,"onerror",{ns:j,rsp:function(H,G,de,N,V,q){!v&&H.rslt!==!0&&k[pm](an[vm](G,de,N,V,q,H.evt))}},!1)),C=!0),Gi(F,Q,A)}function Pt(F){var Q=Xn(),A=On(!0);if(m=F[cm]===!0,Q&&m&&Nf()){var H=pg();Le(H.pushState)&&Le(H.replaceState)&&typeof Event!==Pn&&Pe(F,Q,H,A)}}function Vi(){var F=null;if(k[Ki]&&k[Ki].getTraceCtx&&(F=k[Ki].getTraceCtx(!1)),!F){var Q=k[Ki].getPlugin(Ba);if(Q){var A=Q.plugin.context;A&&(F=cl(A.telemetryTrace))}}return F}function Pe(F,Q,A,H){var G=F[um]||"";function de(){m&&th(Q,Qs(G+"locationchange"))}function N(){if(U?(I=U,U=H&&H[Ha]||""):U=H&&H[Ha]||"",m){var V=Vi();if(V){V.setTraceId(Mn());var q="_unknown_";H&&H.pathname&&(q=H.pathname+(H.hash||"")),V.setName(gt(k[Fn](),q))}setTimeout(function(ue){k[Hc]({refUri:ue,properties:{duration:0}})}.bind(k,I),k.autoRoutePVDelay)}}g||($(Pc(A,"pushState",{ns:j,rsp:function(){m&&(th(Q,Qs(G+"pushState")),th(Q,Qs(G+"locationchange")))}},!0)),$(Pc(A,"replaceState",{ns:j,rsp:function(){m&&(th(Q,Qs(G+"replaceState")),th(Q,Qs(G+"locationchange")))}},!0)),yr(Q,G+"popstate",de,j),yr(Q,G+"locationchange",N,j),g=!0)}function Gi(F,Q,A){T=F[lm]===!0,T&&!b&&($(Pc(Q,"onunhandledrejection",{ns:j,rsp:function(H,G){T&&H.rslt!==!0&&k[pm](an[vm](DP(G),A?A[Ha]:"",0,0,G,H.evt))}},!1)),b=!0,F.autoUnhandledPromiseInstrumented=b)}function ge(F,Q,A,H,G){k[Fn]().throwInternal(F,Q,A,H,G)}function qe(){i=null,o=null,s=null,l=null,u=null,d=null,f=!1,p=!1,m=!1,g=!1,v=!1,C=!1,T=!1,b=!1,S=0;var F=On(!0);I=F&&F[Ha]||"",U=null,j=null}_r(k,"_pageViewManager",function(){return s}),_r(k,"_pageViewPerformanceManager",function(){return l}),_r(k,"_pageVisitTimeManager",function(){return u}),_r(k,"_evtNamespace",function(){return"."+j})}),t}return n.Version="2.8.18",n.getDefaultConfig=aT,n}(Hr);var Ga="duration";var Ii="tags",bm="deviceType",Yn="data",xo="name",hl="traceID",et="length",Wa="stringify",Za="measurements",Tr="dataType",ja="envelopeType",Jo="toString",ih="onLine",nh="isOnline",pl="enqueue",$a="count",xm="eventsLimitInMem",Ko="push",rh="emitLineDelimitedJson",qa="clear",fl="batchPayloads",Xa="markAsSent",ml="clearSent",oh="bufferOverride",jc="BUFFER_KEY",Ja="SENT_BUFFER_KEY",$c="MAX_BUFFER_SIZE",Qo="namePrefix",Dm="maxBatchSizeInBytes",_l="triggerSend",vn="diagLog",y0="onunloadDisableBeacon",wm="isBeaconApiDisabled",qc="_sender",Rt="_senderConfig",S0="enableSessionStorageBuffer",Ka="_buffer",C0="samplingPercentage",ah="instrumentationKey",Qa="endpointUrl",E0="customHeaders",Xc="disableXhr",T0="onunloadDisableFetch",Nm="disableTelemetry",Im="baseType",Jc="sampleRate",b0="convertUndefined",sT="_xhrReadyStateChange",br="_onError",Pm="_onPartialSuccess",sh="_onSuccess",lh="itemsAccepted",lT="itemsReceived",Kc="isRetryDisabled",Lm="setRequestHeader",x0="maxBatchInterval",D0="eventsSendRequest",w0="disableInstrumentationKeyValidation",Am="getSamplingScore",cT="getHashCodeScore";var N0="baseType",Jt="baseData",Qi="properties",uT="true";function Pi(e,n,t){return _t(e,n,t,Ec)}function NP(e,n,t){var i=t[Ii]=t[Ii]||{},o=n.ext=n.ext||{},s=n[Ii]=n[Ii]||[],l=o.user;l&&(Pi(i,At.userAuthUserId,l.authId),Pi(i,At.userId,l.id||l.localId));var u=o.app;u&&Pi(i,At.sessionId,u.sesId);var d=o.device;d&&(Pi(i,At.deviceId,d.id||d.localId),Pi(i,At[bm],d.deviceClass),Pi(i,At.deviceIp,d.ip),Pi(i,At.deviceModel,d.model),Pi(i,At[bm],d[bm]));var f=n.ext.web;if(f){Pi(i,At.deviceLanguage,f.browserLang),Pi(i,At.deviceBrowserVersion,f.browserVer),Pi(i,At.deviceBrowser,f.browser);var p=t[Yn]=t[Yn]||{},m=p[Jt]=p[Jt]||{},g=m[Qi]=m[Qi]||{};Pi(g,"domain",f.domain),Pi(g,"isManual",f.isManual?uT:null),Pi(g,"screenRes",f.screenRes),Pi(g,"userConsent",f.userConsent?uT:null)}var v=o.os;v&&Pi(i,At.deviceOS,v[xo]);var C=o.trace;C&&(Pi(i,At.operationParentId,C.parentID),Pi(i,At.operationName,gt(e,C[xo])),Pi(i,At.operationId,C[hl]));for(var T={},b=s[et]-1;b>=0;b--){var S=s[b];lt(S,function(U,j){T[U]=j}),s.splice(b,1)}lt(s,function(U,j){T[U]=j});var I=mi(mi({},i),T);I[At.internalSdkVersion]||(I[At.internalSdkVersion]=gt(e,"javascript:".concat(IP.Version),64)),t[Ii]=xf(I)}function es(e,n,t){ee(e)||lt(e,function(i,o){yd(o)?t[i]=o:xe(o)?n[i]=o:zr()&&(n[i]=Ri()[Wa](o))})}function vl(e,n){ee(e)||lt(e,function(t,i){e[t]=i||n})}function gl(e,n,t,i){var o=new nm(e,i,n);Pi(o,"sampleRate",t[Lc]),(t[Jt]||{}).startTime&&(o.time=$n(t[Jt].startTime)),o.iKey=t.iKey;var s=t.iKey.replace(/-/g,"");return o[xo]=o[xo].replace("{0}",s),NP(e,t,o),t[Ii]=t[Ii]||[],xf(o)}function yl(e,n){ee(n[Jt])&&ae(e,1,46,"telemetryItem.baseData cannot be null.")}var IP={Version:"2.8.18"};function dT(e,n,t){yl(e,n);var i=n[Jt][Za]||{},o=n[Jt][Qi]||{};es(n[Yn],o,i),ee(t)||vl(o,t);var s=n[Jt];if(ee(s))return gr(e,"Invalid input for dependency data"),null;var l=s[Qi]&&s[Qi][Ad]?s[Qi][Ad]:"GET",u=new tr(e,s.id,s.target,s[xo],s[Ga],s.success,s.responseCode,l,s.type,s.correlationContext,o,i),d=new To(tr[Tr],u);return gl(e,tr[ja],n,d)}function I0(e,n,t){yl(e,n);var i={},o={};n[N0]!==Qn[Tr]&&(i.baseTypeSource=n[N0]),n[N0]===Qn[Tr]?(i=n[Jt][Qi]||{},o=n[Jt][Za]||{}):n[Jt]&&es(n[Jt],i,o),es(n[Yn],i,o),ee(t)||vl(i,t);var s=n[Jt][xo],l=new Qn(e,s,i,o),u=new To(Qn[Tr],l);return gl(e,Qn[ja],n,u)}function hT(e,n,t){yl(e,n);var i=n[Jt][Za]||{},o=n[Jt][Qi]||{};es(n[Yn],o,i),ee(t)||vl(o,t);var s=n[Jt],l=an.CreateFromInterface(e,s,o,i),u=new To(an[Tr],l);return gl(e,an[ja],n,u)}function pT(e,n,t){yl(e,n);var i=n[Jt],o=i[Qi]||{},s=i[Za]||{};es(n[Yn],o,s),ee(t)||vl(o,t);var l=new er(e,i[xo],i.average,i.sampleCount,i.min,i.max,i.stdDev,o,s),u=new To(er[Tr],l);return gl(e,er[ja],n,u)}function fT(e,n,t){yl(e,n);var i,o=n[Jt];!ee(o)&&!ee(o[Qi])&&!ee(o[Qi][Ga])?(i=o[Qi][Ga],delete o[Qi][Ga]):!ee(n[Yn])&&!ee(n[Yn][Ga])&&(i=n[Yn][Ga],delete n[Yn][Ga]);var s=n[Jt],l;((n.ext||{}).trace||{})[hl]&&(l=n.ext.trace[hl]);var u=s.id||l,d=s[xo],f=s.uri,p=s[Qi]||{},m=s[Za]||{};if(ee(s.refUri)||(p.refUri=s.refUri),ee(s.pageType)||(p.pageType=s.pageType),ee(s.isLoggedIn)||(p.isLoggedIn=s.isLoggedIn[Jo]()),!ee(s[Qi])){var g=s[Qi];lt(g,function(T,b){p[T]=b})}es(n[Yn],p,m),ee(t)||vl(p,t);var v=new Tn(e,d,f,i,p,m,u),C=new To(Tn[Tr],v);return gl(e,Tn[ja],n,C)}function mT(e,n,t){yl(e,n);var i=n[Jt],o=i[xo],s=i.uri||i.url,l=i[Qi]||{},u=i[Za]||{};es(n[Yn],l,u),ee(t)||vl(l,t);var d=new Zr(e,o,s,void 0,l,u,i),f=new To(Zr[Tr],d);return gl(e,Zr[ja],n,f)}function _T(e,n,t){yl(e,n);var i=n[Jt].message,o=n[Jt].severityLevel,s=n[Jt][Qi]||{},l=n[Jt][Za]||{};es(n[Yn],s,l),ee(t)||vl(s,t);var u=new Wr(e,i,o,s,l),d=new To(Wr[Tr],u);return gl(e,Wr[ja],n,d)}function vT(e,n){Ia(e,null,null,n)}function gT(e){var n,t=vi(),i=En(),o=!1,s=!0,l=Jn(Ji("OfflineListener"),e);try{if(d(Xn())&&(o=!0),t){var u=t.body||t;u.ononline&&d(u)&&(o=!0)}o&&i&&!ee(i[ih])&&(s=i[ih])}catch{o=!1}function d(v){var C=!1;return v&&(C=yr(v,"online",f,l),C&&yr(v,"offline",p,l)),C}function f(){s=!0}function p(){s=!1}function m(){var v=!0;return o?v=s:i&&!ee(i[ih])&&(v=i[ih]),v}function g(){var v=Xn();if(v&&o){if(vT(v,l),t){var C=t.body||t;Xt(C.ononline)||vT(C,l)}o=!1}}return n={},n[nh]=m,n.isListening=function(){return o},n.unload=g,n}var yT=function(){function e(n,t){var i=[],o=!1;this._get=function(){return i},this._set=function(s){return i=s,i},Be(e,this,function(s){s[pl]=function(l){if(s[$a]()>=t[xm]()){o||(ae(n,2,105,"Maximum in-memory buffer size reached: "+s[$a](),!0),o=!0);return}i[Ko](l)},s[$a]=function(){return i[et]},s.size=function(){for(var l=i[et],u=0;u<i[et];u++)l+=i[u][et];return t[rh]()||(l+=2),l},s[qa]=function(){i=[],o=!1},s.getItems=function(){return i.slice(0)},s[fl]=function(l){if(l&&l[et]>0){var u=t[rh]()?l.join(`
`):"["+l.join(",")+"]";return u}return null}})}return e.__ieDyn=1,e}(),ST=function(e){$i(n,e);function n(t,i){var o=e.call(this,t,i)||this;return Be(n,o,function(s,l){s[Xa]=function(u){l[qa]()},s[ml]=function(u){}}),o}return n.__ieDyn=1,n}(yT);var CT=function(e){$i(n,e);function n(t,i){var o=e.call(this,t,i)||this,s=!1,l=i[oh]()||{getItem:Rc,setItem:Bd},u=l.getItem,d=l.setItem;return Be(n,o,function(f,p){var m=T(n[jc]),g=T(n[Ja]),v=f._set(m.concat(g));v[et]>n[$c]&&(v[et]=n[$c]),b(n[Ja],[]),b(n[jc],v),f[pl]=function(S){if(f[$a]()>=n[$c]){s||(ae(t,2,67,"Maximum buffer size reached: "+f[$a](),!0),s=!0);return}p[pl](S),b(n[jc],f._get())},f[qa]=function(){p[qa](),b(n[jc],f._get()),b(n[Ja],[]),s=!1},f[Xa]=function(S){b(n[jc],f._set(C(S,f._get())));var I=T(n[Ja]);I instanceof Array&&S instanceof Array&&(I=I.concat(S),I[et]>n[$c]&&(ae(t,1,67,"Sent buffer reached its maximum size: "+I[et],!0),I[et]=n[$c]),b(n[Ja],I))},f[ml]=function(S){var I=T(n[Ja]);I=C(S,I),b(n[Ja],I)};function C(S,I){var U=[];return fe(I,function(j){!Le(j)&&wi(S,j)===-1&&U[Ko](j)}),U}function T(S){var I=S;try{I=i[Qo]&&i[Qo]()?i[Qo]()+"_"+I:I;var U=u(t,I);if(U){var j=Ri().parse(U);if(xe(j)&&(j=Ri().parse(j)),j&&st(j))return j}}catch(k){ae(t,1,42," storage key: "+I+", "+Qe(k),{exception:ye(k)})}return[]}function b(S,I){var U=S;try{U=i[Qo]&&i[Qo]()?i[Qo]()+"_"+U:U;var j=JSON[Wa](I);d(t,U,j)}catch(k){d(t,U,JSON[Wa]([])),ae(t,2,41," storage key: "+U+", "+Qe(k)+". Buffer cleared",{exception:ye(k)})}}}),o}return n.BUFFER_KEY="AI_buffer",n.SENT_BUFFER_KEY="AI_sentBuffer",n.MAX_BUFFER_SIZE=2e3,n}(yT);var ET=function(){function e(n){Be(e,this,function(t){t.serialize=function(l){var u=i(l,"root");try{return Ri()[Wa](u)}catch(d){ae(n,1,48,d&&Le(d[Jo])?d[Jo]():"Error serializing object",null,!0)}};function i(l,u){var d="__aiCircularRefCheck",f={};if(!l)return ae(n,1,48,"cannot serialize object because it is null or undefined",{name:u},!0),f;if(l[d])return ae(n,2,50,"Circular reference detected while serializing object",{name:u},!0),f;if(!l.aiDataContract){if(u==="measurements")f=s(l,"number",u);else if(u==="properties")f=s(l,"string",u);else if(u==="tags")f=s(l,"string",u);else if(st(l))f=o(l,u);else{ae(n,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:u},!0);try{Ri()[Wa](l),f=l}catch(p){ae(n,1,48,p&&Le(p[Jo])?p[Jo]():"Error serializing object",null,!0)}}return f}return l[d]=!0,lt(l.aiDataContract,function(p,m){var g=Le(m)?m()&1:m&1,v=Le(m)?m()&4:m&4,C=m&2,T=l[p]!==void 0,b=hn(l[p])&&l[p]!==null;if(g&&!T&&!C)ae(n,1,24,"Missing required field specification. The field is required but not present on source",{field:p,name:u});else if(!v){var S=void 0;b?C?S=o(l[p],p):S=i(l[p],p):S=l[p],S!==void 0&&(f[p]=S)}}),delete l[d],f}function o(l,u){var d;if(l)if(!st(l))ae(n,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:u},!0);else{d=[];for(var f=0;f<l[et];f++){var p=l[f],m=i(p,u+"["+f+"]");d[Ko](m)}}return d}function s(l,u,d){var f;return l&&(f={},lt(l,function(p,m){if(u==="string")m===void 0?f[p]="undefined":m===null?f[p]="null":m[Jo]?f[p]=m[Jo]():f[p]="invalid field: toString() is not defined.";else if(u==="number")if(m===void 0)f[p]="undefined";else if(m===null)f[p]="null";else{var g=parseFloat(m);isNaN(g)?f[p]="NaN":f[p]=g}else f[p]="invalid field: "+d+" is of unknown type.",ae(n,1,f[p],null,!0)})),f}})}return e.__ieDyn=1,e}();var PP=8,TT=function(){function e(){}return e.prototype.getHashCodeScore=function(n){var t=this.getHashCode(n)/e.INT_MAX_VALUE;return t*100},e.prototype.getHashCode=function(n){if(n==="")return 0;for(;n[et]<PP;)n=n.concat(n);for(var t=5381,i=0;i<n[et];++i)t=(t<<5)+t+n.charCodeAt(i),t=t&t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}();var bT=function(){function e(){var n=this,t=new TT,i=new Uc;n[Am]=function(o){var s=0;return o[Ii]&&o[Ii][i.userId]?s=t.getHashCodeScore(o[Ii][i.userId]):o.ext&&o.ext.user&&o.ext.user.id?s=t[cT](o.ext.user.id):o[Ii]&&o[Ii][i.operationId]?s=t.getHashCodeScore(o[Ii][i.operationId]):o.ext&&o.ext.telemetryTrace&&o.ext.telemetryTrace[hl]?s=t.getHashCodeScore(o.ext.telemetryTrace[hl]):s=Math.random()*100,s}}return e}();var xT=function(){function e(n,t){this.INT_MAX_VALUE=2147483647;var i=t||Ur(null);(n>100||n<0)&&(i.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:n},!0),n=100),this[Jc]=n,this.samplingScoreGenerator=new bT}return e.prototype.isSampledIn=function(n){var t=this[Jc],i=!1;return t==null||t>=100||n.baseType===er[Tr]?!0:(i=this.samplingScoreGenerator[Am](n)<t,i)},e}();var ea,LP=65e3;function Om(e){try{return e.responseText}catch{}return null}function DT(){var e,n,t;return e={endpointUrl:function(){return La+Wo}},e[rh]=function(){return!1},e[x0]=function(){return 15e3},e[Dm]=function(){return 102400},e[Nm]=function(){return!1},e[S0]=function(){return!0},e[oh]=function(){return!1},e[Kc]=function(){return!1},e[wm]=function(){return!0},e[Xc]=function(){return!1},e[T0]=function(){return!1},e[y0]=function(){return!1},e[ah]=function(){return n},e[Qo]=function(){return n},e[C0]=function(){return 100},e[E0]=function(){return t},e[b0]=function(){return n},e[xm]=function(){return 1e4},e.retryCodes=function(){return null},e}var AP=(ea={},ea[Qn.dataType]=I0,ea[Wr.dataType]=_T,ea[Tn.dataType]=fT,ea[Zr.dataType]=mT,ea[an.dataType]=hT,ea[er.dataType]=pT,ea[tr.dataType]=dT,ea),P0=function(e){$i(n,e);function n(){var t=e.call(this)||this;t.priority=1001,t.identifier=Vd,t._senderConfig=DT();var i,o,s,l,u,d,f,p,m=0,g,v,C,T,b;return Be(n,t,function(S,I){de(),S.pause=function(){Gi(),l=!0},S.resume=function(){l&&(l=!1,o=null,S._buffer.size()>S._senderConfig[Dm]()&&S[_l](!0,null,10),Pe())},S.flush=function(N,V,q){if(N===void 0&&(N=!0),!l){Gi();try{S[_l](N,null,q||1)}catch(ue){ae(S[vn](),1,22,"flush failed, telemetry will not be collected: "+Qe(ue),{exception:ye(ue)})}}},S.onunloadFlush=function(){if(!l)if((S._senderConfig[y0]()===!1||S[Rt][wm]()===!1)&&Da())try{S[_l](!0,De,2)}catch(N){ae(S[vn](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Qe(N),{exception:ye(N)})}else S.flush()},S.addHeader=function(N,V){p[N]=V},S.initialize=function(N,V,q,ue){S.isInitialized()&&ae(S[vn](),1,28,"Sender is already initialized"),I.initialize(N,V,q,ue);var we=S._getTelCtx(),Ve=S.identifier;d=new ET(V.logger),i=0,o=null,s=0,S[qc]=null,f=0;var ut=S[vn]();T=Jn(Ji("Sender"),V.evtNamespace&&V.evtNamespace()),C=gT(T);var Ft=DT();lt(Ft,function(J,te){S[Rt][J]=function(){var ie=we.getConfig(Ve,J,te());return!ie&&J==="endpointUrl"&&(ie=te()),ie}}),b=S[Rt].retryCodes(),N.storagePrefix&&sl(N.storagePrefix);var tn=S[Rt][S0]()&&!!(S._senderConfig[oh]()||Ra());S[Ka]=tn?new CT(ut,S[Rt]):new ST(ut,S[Rt]),S._sample=new xT(S[Rt][C0](),ut),G(N)||ae(ut,1,100,"Invalid Instrumentation key "+N[ah]),!ll(S._senderConfig.endpointUrl())&&S._senderConfig.customHeaders()&&S._senderConfig.customHeaders()[et]>0&&fe(S[Rt][E0](),function(J){t.addHeader(J.header,J.value)});var jt=S[Rt],R=null;!jt[Xc]()&&Pf()?R=F:!jt[Xc]()&&Ws()&&(R=He),!R&&If()&&(R=Ce),g=R||He,!jt[wm]()&&Da()&&(R=yt),S[qc]=R||He,!jt[T0]()&&If(!0)?v=ct:Da()?v=yt:!jt[Xc]()&&Pf()?v=F:!jt[Xc]()&&Ws()?v=He:v=g},S.processTelemetry=function(N,V){V=S._getTelCtx(V);var q=V[vn]();try{if(S[Rt][Nm]())return;if(!N){ae(q,1,7,"Cannot send empty telemetry");return}if(N.baseData&&!N[Im]){ae(q,1,70,"Cannot send telemetry without baseData and baseType");return}if(N[Im]||(N[Im]="EventData"),!S[qc]){ae(q,1,28,"Sender was not initialized");return}if(U(N))N[Lc]=S._sample[Jc];else{ae(q,2,33,"Telemetry item was sampled out and not sent",{SampleRate:S._sample[Jc]});return}var ue=S[Rt][b0]()||void 0,we=N.iKey||S[Rt][ah](),Ve=n.constructEnvelope(N,we,q,ue);if(!Ve){ae(q,1,47,"Unable to create an AppInsights envelope");return}var ut=!1;if(N[Ii]&&N[Ii][Ac]&&(fe(N[Ii][Ac],function(R){try{R&&R(Ve)===!1&&(ut=!0,gr(q,"Telemetry processor check returns false"))}catch(J){ae(q,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Qe(J),{exception:ye(J)},!0)}}),delete N[Ii][Ac]),ut)return;var Ft=d.serialize(Ve),tn=S[Ka],jt=tn.size();jt+Ft[et]>S[Rt][Dm]()&&(!C||C[nh]())&&S[_l](!0,null,10),tn[pl](Ft),Pe()}catch(R){ae(q,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Qe(R),{exception:ye(R)})}S.processNext(N,V)},S[sT]=function(N,V,q){N.readyState===4&&j(N.status,V,N.responseURL,q,qe(N),Om(N)||N.response)},S[_l]=function(N,V,q){if(N===void 0&&(N=!0),!l)try{var ue=S[Ka];if(S[Rt][Nm]())ue[qa]();else{if(ue[$a]()>0){var we=ue.getItems();H(q||0,N),V?V.call(S,we,N):S[qc](we,N)}s=+new Date}Gi()}catch(ut){var Ve=wc();(!Ve||Ve>9)&&ae(S[vn](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Qe(ut),{exception:ye(ut)})}},S._doTeardown=function(N,V){S.onunloadFlush(),C.unload(),de()},S[br]=function(N,V,q){ae(S[vn](),2,26,"Failed to send telemetry.",{message:V}),S._buffer&&S._buffer[ml](N)},S[Pm]=function(N,V){for(var q=[],ue=[],we=V.errors.reverse(),Ve=0,ut=we;Ve<ut.length;Ve++){var Ft=ut[Ve],tn=N.splice(Ft.index,1)[0];ge(Ft.statusCode)?ue[Ko](tn):q[Ko](tn)}N[et]>0&&S[sh](N,V[lh]),q[et]>0&&S[br](q,qe(null,["partial success",V[lh],"of",V.itemsReceived].join(" "))),ue[et]>0&&(Pt(ue),ae(S[vn](),2,40,"Partial success. Delivered: "+N[et]+", Failed: "+q[et]+". Will retry to send "+ue[et]+" our of "+V[lT]+" items"))},S[sh]=function(N,V){S._buffer&&S._buffer[ml](N)},S._xdrOnLoad=function(N,V){var q=Om(N);if(N&&(q+""=="200"||q===""))i=0,S[sh](V,0);else{var ue=Hi(q);ue&&ue.itemsReceived&&ue.itemsReceived>ue[lh]&&!S[Rt][Kc]()?S[Pm](V,ue):S[br](V,Q(N))}};function U(N){return S._sample.isSampledIn(N)}function j(N,V,q,ue,we,Ve){var ut=null;if(S._appId||(ut=Hi(Ve),ut&&ut.appId&&(S._appId=ut.appId)),(N<200||N>=300)&&N!==0){if((N===301||N===307||N===308)&&!k(q)){S[br](V,we);return}!S[Rt][Kc]()&&ge(N)?(Pt(V),ae(S[vn](),2,40,". Response code "+N+". Will retry to send "+V[et]+" items.")):S[br](V,we)}else if(C&&!C[nh]()){if(!S[Rt][Kc]()){var Ft=10;Pt(V,Ft),ae(S[vn](),2,40,". Offline - Response Code: ".concat(N,". Offline status: ").concat(!C.isOnline(),". Will retry to send ").concat(V.length," items."))}}else k(q),N===206?(ut||(ut=Hi(Ve)),ut&&!S[Rt][Kc]()?S[Pm](V,ut):S[br](V,we)):(i=0,S[sh](V,ue))}function k(N){return f>=10?!1:!ee(N)&&N!==""&&N!==S[Rt][Qa]()?(S[Rt][Qa]=function(){return N},++f,!0):!1}function De(N,V){v?v(N,!1):yt(N,V)}function $(N){var V=En(),q=S[Ka],ue=S[Rt][Qa](),we=S._buffer[fl](N),Ve=new Blob([we],{type:"text/plain;charset=UTF-8"}),ut=V.sendBeacon(ue,Ve);return ut&&(q[Xa](N),S._onSuccess(N,N[et])),ut}function yt(N,V){if(st(N)&&N[et]>0&&!$(N)){for(var q=[],ue=0;ue<N[et];ue++){var we=N[ue];$([we])||q[Ko](we)}q[et]>0&&(g&&g(q,!0),ae(S[vn](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function He(N,V){var q=new XMLHttpRequest,ue=S[Rt][Qa]();try{q[Vr]=!0}catch{}q.open("POST",ue,V),q[Lm]("Content-type","application/json"),ll(ue)&&q[Lm](vt[6],vt[7]),fe(An(p),function(Ve){q[Lm](Ve,p[Ve])}),q.onreadystatechange=function(){return S._xhrReadyStateChange(q,N,N[et])},q.onerror=function(Ve){return S[br](N,qe(q),Ve)};var we=S._buffer[fl](N);q.send(we),S._buffer[Xa](N)}function ct(N,V){if(st(N)){for(var q=N[et],ue=0;ue<N[et];ue++)q+=N[ue][et];m+q<=LP?Wt(N,!1):Da()?yt(N,V):(g&&g(N,!0),ae(S[vn](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function Ce(N,V){Wt(N,!0)}function Wt(N,V){var q,ue=S[Rt][Qa](),we=S._buffer[fl](N),Ve=new Blob([we],{type:"application/json"}),ut=new Headers,Ft=we[et],tn=!1,jt=!1;ll(ue)&&ut.append(vt[6],vt[7]),fe(An(p),function(te){ut.append(te,p[te])});var R=(q={method:"POST",headers:ut,body:Ve},q[Vr]=!0,q);V||(R.keepalive=!0,tn=!0,m+=Ft);var J=new Request(ue,R);try{J[Vr]=!0}catch{}S._buffer[Xa](N);try{fetch(J).then(function(te){V||(m-=Ft,Ft=0),jt||(jt=!0,te.ok?te.text().then(function(ie){j(te.status,N,te.url,N[et],te.statusText,ie)}):S[br](N,te.statusText))}).catch(function(te){V||(m-=Ft,Ft=0),jt||(jt=!0,S[br](N,te.message))})}catch(te){jt||S[br](N,ye(te))}tn&&!jt&&(jt=!0,S._onSuccess(N,N[et]))}function Hi(N){try{if(N&&N!==""){var V=Ri().parse(N);if(V&&V.itemsReceived&&V.itemsReceived>=V[lh]&&V.itemsReceived-V.itemsAccepted===V.errors[et])return V}}catch(q){ae(S[vn](),1,43,"Cannot parse the response. "+Qe(q),{response:N})}return null}function Pt(N,V){if(V===void 0&&(V=1),!(!N||N[et]===0)){var q=S[Ka];q[ml](N),i++;for(var ue=0,we=N;ue<we.length;ue++){var Ve=we[ue];q[pl](Ve)}Vi(V),Pe()}}function Vi(N){var V=10,q;if(i<=1)q=V;else{var ue=(Math.pow(2,i)-1)/2,we=Math.floor(Math.random()*ue*V)+1;we=N*we,q=Math.max(Math.min(we,3600),V)}var Ve=Xi()+q*1e3;o=Ve}function Pe(){if(!u&&!l){var N=o?Math.max(0,o-Xi()):0,V=Math.max(S[Rt][x0](),N);u=setTimeout(function(){u=null,S[_l](!0,null,1)},V)}}function Gi(){clearTimeout(u),u=null,o=null}function ge(N){return ee(b)?N===401||N===408||N===429||N===500||N===502||N===503||N===504:b[et]&&wi(b,N)>-1}function qe(N,V){return N?"XMLHttpRequest,Status:"+N.status+",Response:"+Om(N)||N.response||"":V}function F(N,V){var q=S[Ka],ue=Xn(),we=new XDomainRequest;we.onload=function(){return S._xdrOnLoad(we,N)},we.onerror=function(tn){return S[br](N,Q(we),tn)};var Ve=ue&&ue.location&&ue.location.protocol||"";if(S[Rt][Qa]().lastIndexOf(Ve,0)!==0){ae(S[vn](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),q[qa]();return}var ut=S[Rt][Qa]().replace(/^(https?:)/,"");we.open("POST",ut);var Ft=q[fl](N);we.send(Ft),q[Xa](N)}function Q(N,V){return N?"XDomainRequest,Response:"+Om(N)||"":V}function A(){var N="getNotifyMgr";return S.core[N]?S.core[N]():S.core._notificationManager}function H(N,V){var q=A();if(q&&q[D0])try{q[D0](N,V)}catch(ue){ae(S[vn](),1,74,"send request notification failed: "+Qe(ue),{exception:ye(ue)})}}function G(N){var V=ee(N[w0])?!1:N[w0];if(V)return!0;var q="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",ue=new RegExp(q);return ue.test(N[ah])}function de(){S[qc]=null,S[Ka]=null,S._appId=null,S._sample=null,p={},C=null,i=0,o=null,s=null,l=!1,u=null,d=null,f=0,m=0,g=null,v=null,T=null}}),t}return n.constructEnvelope=function(t,i,o,s){var l;i!==t.iKey&&!ee(i)?l=mi(mi({},t),{iKey:i}):l=t;var u=AP[l.baseType]||I0;return u(o,l,s)},n}(Hr);var L0="duration",ts="properties";var Bn="requestUrl",Qc="inst",jr="length",$r="traceID",Do="spanID",zn="traceFlags",eu="context",is="aborted",tu="traceId",iu="spanId",qr="core",Mm="includeCorrelationHeaders",A0="canIncludeCorrelationHeader",ch="getAbsoluteUrl",ns="headers",Un="requestHeaders",uh="appId",km="setRequestHeader",O0="trackDependencyDataInternal",Rm="distributedTracingMode",ta="startTime",Sl="toLowerCase",wT="enableRequestHeaderTracking",NT="enableAjaxErrorStatusText",IT="enableAjaxPerfTracking",PT="maxAjaxCallsPerView",LT="enableResponseHeaderTracking",AT="excludeRequestFromAutoTrackingPatterns",OT="addRequestContext",MT="disableAjaxTracking",kT="disableFetchTracking",ir="status",ia="statusText",nu="headerMap",dh="openDone",hh="sendDone",na="requestSentTime",ph="abortDone",fh="getTraceId",mh="getTraceFlags",wo="method",_h="errorStatusText",Fm="stateChangeAttached",RT="responseText",Cl="responseFinishedTime",vh="CreateTrackItem",Ym="response",M0="getAllResponseHeaders",gh="getPartAProps",k0="getCorrelationContext",ru="perfMark",FT="ajaxPerfLookupDelay",rs="name",yh="perfTiming";var YT="correlationContext",Bm="ajaxTotalDuration",zm="eventTraceCtx";function BT(e,n,t){var i=0,o=e[n],s=e[t];return o&&s&&(i=Fi(o,s)),i}function El(e,n,t,i,o){var s=0,l=BT(t,i,o);return l&&(s=os(e,n,Kn(l))),s}function os(e,n,t){var i="ajaxPerf",o=0;if(e&&n&&t){var s=e[i]=e[i]||{};s[n]=t,o=1}return o}function OP(e,n){var t=e[yh],i=n[ts]||{},o=0,s="name",l="Start",u="End",d="domainLookup",f="connect",p="redirect",m="request",g="response",v="startTime",C=d+l,T=d+u,b=f+l,S=f+u,I=m+l,U=m+u,j=g+l,k=g+u,De=p+l,$=p=u,yt="transferSize",He="encodedBodySize",ct="decodedBodySize",Ce="serverTiming";if(t){o|=El(i,p,t,De,$),o|=El(i,d,t,C,T),o|=El(i,f,t,b,S),o|=El(i,m,t,I,U),o|=El(i,g,t,j,k),o|=El(i,"networkConnect",t,v,S),o|=El(i,"sentRequest",t,I,k);var Wt=t[L0];Wt||(Wt=BT(t,v,k)||0),o|=os(i,L0,Wt),o|=os(i,"perfTotal",Wt);var Hi=t[Ce];if(Hi){var Pt={};fe(Hi,function(Vi,Pe){var Gi=Hs(Vi[s]||""+Pe),ge=Pt[Gi]||{};lt(Vi,function(qe,F){(qe!==s&&xe(F)||yd(F))&&(ge[qe]&&(F=ge[qe]+";"+F),(F||!xe(F))&&(ge[qe]=F))}),Pt[Gi]=ge}),o|=os(i,Ce,Pt)}o|=os(i,yt,t[yt]),o|=os(i,He,t[He]),o|=os(i,ct,t[ct])}else e[ru]&&(o|=os(i,"missing",e.perfAttempts));o&&(n[ts]=i)}var MP=function(){function e(){var n=this;n[dh]=!1,n.setRequestHeaderDone=!1,n[hh]=!1,n[ph]=!1,n[Fm]=!1}return e}();var R0=function(){function e(n,t,i,o){var s,l=this,u=i,d="responseText";l[ru]=null,l.completed=!1,l.requestHeadersSize=null,l[Un]=null,l.responseReceivingDuration=null,l.callbackDuration=null,l[Bm]=null,l[is]=0,l.pageUrl=null,l[Bn]=null,l.requestSize=0,l[wo]=null,l[ir]=null,l[na]=null,l.responseStartedTime=null,l[Cl]=null,l.callbackFinishedTime=null,l.endTime=null,l.xhrMonitoringState=new MP,l.clientFailure=0,l[$r]=n,l[Do]=t,l[zn]=o?.getTraceFlags(),o?l[zm]=(s={},s[tu]=o[fh](),s[iu]=o.getSpanId(),s[zn]=o[mh](),s):l[zm]=null,Be(e,l,function(f){f.getAbsoluteUrl=function(){return f[Bn]?em(f[Bn]):null},f.getPathName=function(){return f[Bn]?Eo(u,tm(f[wo],f[Bn])):null},f[vh]=function(p,m,g){var v;if(f.ajaxTotalDuration=Math.round(Fi(f.requestSentTime,f.responseFinishedTime)*1e3)/1e3,f[Bm]<0)return null;var C=(v={id:"|"+f[$r]+"."+f[Do],target:f[ch]()},v[rs]=f.getPathName(),v.type=p,v[ta]=null,v.duration=f[Bm],v.success=+f[ir]>=200&&+f[ir]<400,v.responseCode=+f[ir],v[ts]={HttpMethod:f[wo]},v),T=C[ts];if(f[is]&&(T[is]=!0),f[na]&&(C[ta]=new Date,C[ta].setTime(f[na])),OP(f,C),m&&An(f.requestHeaders)[jr]>0&&(T[Un]=f[Un]),g){var b=g();if(b){var S=b[YT];if(S&&(C.correlationContext=S),b[nu]&&An(b.headerMap)[jr]>0&&(T.responseHeaders=b[nu]),f[_h])if(f[ir]>=400){var I=b.type;(I===""||I==="text")&&(T.responseText=b.responseText?b[ia]+" - "+b[d]:b[ia]),I==="json"&&(T.responseText=b.response?b[ia]+" - "+JSON.stringify(b[Ym]):b[ia])}else f[ir]===0&&(T.responseText=b[ia]||"")}}return C},f[gh]=function(){var p,m=null,g=f[zm];if(g&&(g[tu]||g[iu])){m={};var v=m[sn.TraceExt]=(p={},p[$r]=g[tu],p.parentID=g[iu],p);ee(g[zn])||(v[zn]=g[zn])}return m}})}return e.__ieDyn=1,e}();var zT="ai.ajxmn.",Eh="diagLog",as="_ajaxData",Tl="fetch",Sh="Failed to monitor XMLHttpRequest",$T=", monitoring data for this ajax call ",ou=$T+"may be incorrect.",UT=$T+"won't be sent.",HT="Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",VT="Failed to add custom defined request context as configured call back may missing a null check.",GT="Failed to calculate the duration of the ",WT=0;function kP(){var e=pr();return!e||ee(e.Request)||ee(e.Request[ei])||ee(e[Tl])?null:e[Tl]}var Um=null;function RP(){if(Um==null)try{Um=!!(self&&self instanceof WorkerGlobalScope)}catch{Um=!1}return Um}function FP(e,n){var t,i=!1;if(Ws()){var o=XMLHttpRequest[ei];i=!ee(o)&&!ee(o.open)&&!ee(o.send)&&!ee(o.abort)}var s=wc();if(s&&s<9&&(i=!1),i)try{var l=new XMLHttpRequest,u={xh:[],i:(t={},t[n]={},t)};l[as]=u;var d=XMLHttpRequest[ei].open;XMLHttpRequest[ei].open=d}catch(f){i=!1,Th(e,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:ye(f)})}return i}var su=function(e,n){return e&&n&&e[as]?(e[as].i||{})[n]:null},YP=function(e,n,t){if(e){var i=(e[as]||{}).xh;i&&i.push({n,v:t})}},F0=function(e,n){var t=!1;if(e){var i=(e[as]||{}).xh;i&&fe(i,function(o){if(o.n===n)return t=!0,-1})}return t};function Vm(e,n){var t="";try{var i=su(e,n);i&&i[Bn]&&(t+="(url: '"+i[Bn]+"')")}catch{}return t}function Th(e,n,t,i,o){ae(e[Eh](),1,n,t,i,o)}function ra(e,n,t,i,o){ae(e[Eh](),2,n,t,i,o)}function Ch(e,n,t){return function(i){Th(e,n,t,{ajaxDiagnosticsMessage:Vm(i[Qc],e._ajaxDataId),exception:ye(i.err)})}}function au(e,n){return e&&n?e.indexOf(n):-1}function ZT(e,n,t){var i={id:n,fn:t};return e.push(i),{remove:function(){fe(e,function(o,s){if(o.id===i.id)return e.splice(s,1),-1})}}}function qT(e,n,t,i){var o=!0;return fe(n,function(s,l){try{s.fn.call(null,t)===!1&&(o=!1)}catch(u){ae(e&&e.logger,1,64,"Dependency "+i+" [#"+l+"] failed: "+Qe(u),{exception:ye(u)},!0)}}),o}function BP(e,n,t,i,o,s){var l=e[jr];if(l>0){var u={core:n,xhr:i,input:o,init:s,traceId:t[$r],spanId:t[Do],traceFlags:t[zn],context:t[eu]||{},aborted:!!t[is]};qT(n,e,u,"listener"),t[$r]=u[tu],t[Do]=u[iu],t[zn]=u[zn],t[eu]=u[eu]}}var Hm="*.blob.core.",XT=Cc([Hm+"windows.net",Hm+"chinacloudapi.cn",Hm+"cloudapi.de",Hm+"usgovcloudapi.net"]),zP=[/https:\/\/[^\/]*(\.pipe\.aria|aria\.pipe|events\.data|collector\.azure)\.[^\/]+\/(OneCollector\/1|Collector\/3)\.0/i];function Y0(){var e={maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!1,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:1,correlationHeaderExcludedDomains:XT,correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"],addRequestContext:void 0,addIntEndpoints:!0};return e}function jT(){var e=Y0();return lt(e,function(n){e[n]=void 0}),e}var B0=function(e){$i(n,e);function n(){var t=e.call(this)||this;t.identifier=n.identifier,t.priority=120;var i,o,s,l,u,d,f,p,m,g,v,C,T,b,S,I,U,j,k,De,$,yt,He,ct;return Be(n,t,function(Ce,Wt){var Hi=Wt._addHook;Pt(),Ce.initialize=function(R,J,te,ie){Ce.isInitialized()||(Wt.initialize(R,J,te,ie),De=Jn(Ji("ajax"),J&&J.evtNamespace&&J.evtNamespace()),Vi(R),F(),ge(),Pe())},Ce._doTeardown=function(){Pt()},Ce.trackDependencyData=function(R,J){jt(ct,Ce[qr],null,R,J)},Ce[Mm]=function(R,J,te,ie){var le=Ce._currentWindowHost||s;if(BP(He,Ce[qr],R,ie,J,te),J||J===""){if($o[A0](l,R[ch](),le)){te||(te={});var Ne=new Headers(te[ns]||(J instanceof Request?J[ns]||{}:{}));if(g){var ke="|"+R[$r]+"."+R[Do];Ne.set(vt[3],ke),u&&(R[Un][vt[3]]=ke)}var St=l[uh]||p&&p[uh]();if(St&&(Ne.set(vt[0],vt[2]+St),u&&(R[Un][vt[0]]=vt[2]+St)),m){var Ge=R[zn];ee(Ge)&&(Ge=1);var Lt=Nd(wd(R[$r],R[Do],Ge));Ne.set(vt[4],Lt),u&&(R[Un][vt[4]]=Lt)}te[ns]=Ne}return te}else if(ie){if($o[A0](l,R[ch](),le)){if(g)if(F0(ie,vt[3]))ra(Ce,71,"Unable to set ["+vt[3]+"] as it has already been set by another instance");else{var ke="|"+R[$r]+"."+R[Do];ie[km](vt[3],ke),u&&(R[Un][vt[3]]=ke)}var St=l[uh]||p&&p[uh]();if(St&&(F0(ie,vt[0])?ra(Ce,71,"Unable to set ["+vt[0]+"] as it has already been set by another instance"):(ie[km](vt[0],vt[2]+St),u&&(R[Un][vt[0]]=vt[2]+St))),m){var Ge=R[zn];if(ee(Ge)&&(Ge=1),F0(ie,vt[4]))ra(Ce,71,"Unable to set ["+vt[4]+"] as it has already been set by another instance");else{var Lt=Nd(wd(R[$r],R[Do],Ge));ie[km](vt[4],Lt),u&&(R[Un][vt[4]]=Lt)}}}return ie}},Ce[O0]=function(R,J,te){if(T===-1||f<T){(l[Rm]===2||l[Rm]===1)&&typeof R.id=="string"&&R.id[R.id[jr]-1]!=="."&&(R.id+="."),ee(R[ta])&&(R[ta]=new Date);var ie=Er(R,tr.dataType,tr.envelopeType,Ce[Eh](),J,te);Ce[qr].track(ie)}else f===T&&Th(Ce,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++f},Ce.addDependencyListener=function(R){return ZT(He,yt++,R)},Ce.addDependencyInitializer=function(R){return ZT(ct,yt++,R)};function Pt(){var R=On();i=!1,o=!1,s=R&&R.host&&R.host[Sl](),l=n.getEmptyConfig(),u=!1,d=!1,f=0,p=null,m=!1,g=!1,v=null,C=!1,T=0,b=!1,S={},I=!1,U=!1,j=null,k=null,De=null,yt=0,He=[],ct=[],$=Ji("ajaxData"),Ce._ajaxDataId=$}function Vi(R){var J=on(null,R,Ce[qr]);l=jT();var te=Y0();lt(te,function(Ne,ke){l[Ne]=J.getConfig(n.identifier,Ne,ke)});var ie=l[Rm];if(u=l[wT],d=l[NT],C=l[IT],T=l[PT],b=l[LT],j=[].concat(l[AT]||[],l.addIntEndpoints!==!1?zP:[]),k=l[OT],g=ie===0||ie===1,m=ie===1||ie===2,C){var le=R.instrumentationKey||"unkwn";le[jr]>5?v=zT+le.substring(le[jr]-5)+".":v=zT+le+"."}I=!!l[MT],U=!!l[kT]}function Pe(){var R=Ce[qr].getPlugin(Ba);R&&(p=R.plugin[eu])}function Gi(R){var J=!0;return(R||l.ignoreHeaders)&&fe(l.ignoreHeaders,function(te){if(te[Sl]()===R[Sl]())return J=!1,-1}),J}function ge(){var R=kP();if(R){var J=pr(),te=R.polyfill;!U&&!i?(Hi(Ld(J,Tl,{ns:De,req:function(ie,le,Ne){var ke;if(!U&&i&&!Q(null,le,Ne)&&!(te&&o)){var St=ie.ctx();ke=Ve(le,Ne);var Ge=Ce[Mm](ke,le,Ne);Ge!==Ne&&ie.set(1,Ge),St.data=ke}},rsp:function(ie,le){if(!U){var Ne=ie.ctx().data;Ne&&(ie.rslt=ie.rslt.then(function(ke){return Ft(ie,(ke||{})[ir],le,ke,Ne,function(){var St={statusText:(ke||{})[ia],headerMap:null,correlationContext:tn(ke)};if(b&&ke){var Ge={};ke.headers.forEach(function(Lt,$t){Gi($t)&&(Ge[$t]=Lt)}),St[nu]=Ge}return St}),ke}).catch(function(ke){throw Ft(ie,0,le,null,Ne,null,{error:ke.message||ye(ke)}),ke}))}},hkErr:Ch(Ce,15,"Failed to monitor Window.fetch"+ou)},!0,RP())),i=!0):te&&Hi(Ld(J,Tl,{ns:De,req:function(ie,le,Ne){Q(null,le,Ne)}})),te&&(J[Tl].polyfill=te)}}function qe(R,J,te){Hi(Wg(R,J,te))}function F(){FP(Ce,$)&&!I&&!o&&(qe(XMLHttpRequest,"open",{ns:De,req:function(R,J,te,ie){if(!I){var le=R[Qc],Ne=su(le,$);!Q(le,te)&&A(le,Ne,!0)&&((!Ne||!Ne.xhrMonitoringState[dh])&&(Ne=G(le,J,te,ie)),de(le,Ne))}},hkErr:Ch(Ce,15,Sh+".open"+ou)}),qe(XMLHttpRequest,"send",{ns:De,req:function(R,J){if(!I){var te=R[Qc],ie=su(te,$);A(te,ie)&&!ie.xhrMonitoringState[hh]&&(ue("xhr",ie),ie[na]=Yc(),Ce[Mm](ie,void 0,void 0,te),ie.xhrMonitoringState[hh]=!0)}},hkErr:Ch(Ce,17,Sh+ou)}),qe(XMLHttpRequest,"abort",{ns:De,req:function(R){if(!I){var J=R[Qc],te=su(J,$);A(J,te)&&!te.xhrMonitoringState[ph]&&(te[is]=1,te.xhrMonitoringState[ph]=!0)}},hkErr:Ch(Ce,13,Sh+".abort"+ou)}),qe(XMLHttpRequest,"setRequestHeader",{ns:De,req:function(R,J,te){if(!I){var ie=R[Qc],le=su(ie,$);le&&A(ie,le)&&(YP(ie,J,te),u&&Gi(J)&&le&&(le[Un][J]=te))}},hkErr:Ch(Ce,71,Sh+".setRequestHeader"+ou)}),o=!0)}function Q(R,J,te){var ie=!1,le=((xe(J)?J:(J||{}).url||"")||"")[Sl]();if(fe(j,function(St){var Ge=St;xe(St)&&(Ge=new RegExp(St)),ie||(ie=Ge.test(le))}),ie)return ie;var Ne=au(le,"?"),ke=au(le,"#");return(Ne===-1||ke!==-1&&ke<Ne)&&(Ne=ke),Ne!==-1&&(le=le.substring(0,Ne)),ee(R)?ee(J)||(ie=(typeof J=="object"?J[Vr]===!0:!1)||(te?te[Vr]===!0:!1)):ie=R[Vr]===!0||le[Vr]===!0,!ie&&le&&ll(le)&&(ie=!0),ie?S[le]||(S[le]=1):S[le]&&(ie=!0),ie}function A(R,J,te){var ie=!0,le=o;return ee(R)||(ie=te===!0||!ee(J)),le&&ie}function H(){var R=null;return Ce[qr]&&Ce[qr].getTraceCtx&&(R=Ce[qr].getTraceCtx(!1)),!R&&p&&p.telemetryTrace&&(R=cl(p.telemetryTrace)),R}function G(R,J,te,ie){var le,Ne=H(),ke=Ne&&Ne[fh]()||Mn(),St=Mn().substr(0,16),Ge=R[as]=R[as]||{xh:[],i:{}},Lt=Ge.i=Ge.i||{},$t=Lt[$]=Lt[$]||new R0(ke,St,Ce[Eh](),(le=Ce.core)===null||le===void 0?void 0:le.getTraceCtx());return $t[zn]=Ne&&Ne[mh](),$t[wo]=J,$t[Bn]=te,$t.xhrMonitoringState[dh]=!0,$t[Un]={},$t.async=ie,$t[_h]=d,$t}function de(R,J){J.xhrMonitoringState[Fm]=yr(R,"readystatechange",function(){try{R&&R.readyState===4&&A(R,J)&&V(R)}catch(ie){var te=ye(ie);(!te||au(te[Sl](),"c00c023f")===-1)&&Th(Ce,16,Sh+" 'readystatechange' event handler"+ou,{ajaxDiagnosticsMessage:Vm(R,$),exception:te})}},De)}function N(R){try{var J=R.responseType;if(J===""||J==="text")return R[RT]}catch{}return null}function V(R){var J=su(R,$);J[Cl]=Yc(),J[ir]=R[ir];function te(ie,le){var Ne=le||{};Ne.ajaxDiagnosticsMessage=Vm(R,$),ie&&(Ne.exception=ye(ie)),ra(Ce,14,GT+"ajax call"+UT,Ne)}we("xmlhttprequest",J,function(){try{var ie=J[vh]("Ajax",u,function(){var Ge={statusText:R[ia],headerMap:null,correlationContext:q(R),type:R.responseType,responseText:N(R),response:R[Ym]};if(b){var Lt=R[M0]();if(Lt){var $t=_i(Lt).split(/[\r\n]+/),Sn={};fe($t,function(Ds){var Lo=Ds.split(": "),Dn=Lo.shift(),Rl=Lo.join(": ");Gi(Dn)&&(Sn[Dn]=Rl)}),Ge[nu]=Sn}}return Ge}),le=void 0;try{k&&(le=k({status:R[ir],xhr:R}))}catch{ra(Ce,104,VT)}if(ie){le!==void 0&&(ie[ts]=mi(mi({},ie.properties),le));var Ne=J[gh]();jt(ct,Ce[qr],J,ie,null,Ne)}else te(null,{requestSentTime:J[na],responseFinishedTime:J[Cl]})}finally{try{var ke=R[as]||{i:{}},St=ke.i||{};St[$]&&(St[$]=null)}catch{}}},function(ie){te(ie,null)})}function q(R){try{var J=R[M0]();if(J!==null){var te=au(J[Sl](),vt[8]);if(te!==-1){var ie=R.getResponseHeader(vt[0]);return $o[k0](ie)}}}catch(le){ra(Ce,18,HT,{ajaxDiagnosticsMessage:Vm(R,$),exception:ye(le)})}}function ue(R,J){if(J[Bn]&&v&&C){var te=vr();if(te&&Le(te.mark)){WT++;var ie=v+R+"#"+WT;te.mark(ie);var le=te.getEntriesByName(ie);le&&le[jr]===1&&(J[ru]=le[0])}}}function we(R,J,te,ie){var le=J[ru],Ne=vr(),ke=l.maxAjaxPerfLookupAttempts,St=l[FT],Ge=J[Bn],Lt=0;(function $t(){try{if(Ne&&le){Lt++;for(var Sn=null,Ds=Ne.getEntries(),Lo=Ds[jr]-1;Lo>=0;Lo--){var Dn=Ds[Lo];if(Dn){if(Dn.entryType==="resource")Dn.initiatorType===R&&(au(Dn[rs],Ge)!==-1||au(Ge,Dn[rs])!==-1)&&(Sn=Dn);else if(Dn.entryType==="mark"&&Dn[rs]===le[rs]){J[yh]=Sn;break}if(Dn[ta]<le[ta]-1e3)break}}}!le||J[yh]||Lt>=ke||J.async===!1?(le&&Le(Ne.clearMarks)&&Ne.clearMarks(le[rs]),J.perfAttempts=Lt,te()):setTimeout($t,St)}catch(Rl){ie(Rl)}})()}function Ve(R,J){var te,ie=H(),le=ie&&ie[fh]()||Mn(),Ne=Mn().substr(0,16),ke=new R0(le,Ne,Ce[Eh](),(te=Ce.core)===null||te===void 0?void 0:te.getTraceCtx());ke[zn]=ie&&ie[mh](),ke[na]=Yc(),ke[_h]=d,R instanceof Request?ke[Bn]=R?R.url:"":ke[Bn]=R;var St="GET";J&&J[wo]?St=J[wo]:R&&R instanceof Request&&(St=R[wo]),ke[wo]=St;var Ge={};if(u){var Lt=new Headers((J?J[ns]:0)||(R instanceof Request?R[ns]||{}:{}));Lt.forEach(function($t,Sn){Gi(Sn)&&(Ge[Sn]=$t)})}return ke[Un]=Ge,ue(Tl,ke),ke}function ut(R){var J="";try{ee(R)||(xe(R)?J+="(url: '".concat(R,"')"):J+="(url: '".concat(R.url,"')"))}catch(te){Th(Ce,15,"Failed to grab failed fetch diagnostics message",{exception:ye(te)})}return J}function Ft(R,J,te,ie,le,Ne,ke){if(!le)return;function St(Ge,Lt,$t){var Sn=$t||{};Sn.fetchDiagnosticsMessage=ut(te),Lt&&(Sn.exception=ye(Lt)),ra(Ce,Ge,GT+"fetch call"+UT,Sn)}le[Cl]=Yc(),le[ir]=J,we(Tl,le,function(){var Ge=le[vh]("Fetch",u,Ne),Lt;try{k&&(Lt=k({status:J,request:te,response:ie}))}catch{ra(Ce,104,VT)}if(Ge){Lt!==void 0&&(Ge[ts]=mi(mi({},Ge.properties),Lt));var $t=le[gh]();jt(ct,Ce[qr],le,Ge,null,$t)}else St(14,null,{requestSentTime:le[na],responseFinishedTime:le[Cl]})},function(Ge){St(18,Ge,null)})}function tn(R){if(R&&R[ns])try{var J=R[ns].get(vt[0]);return $o[k0](J)}catch(te){ra(Ce,18,HT,{fetchDiagnosticsMessage:ut(R),exception:ye(te)})}}function jt(R,J,te,ie,le,Ne){var ke=!0,St=R[jr];if(St>0){var Ge={item:ie,properties:le,sysProperties:Ne,context:te?te[eu]:null,aborted:te?!!te[is]:!1};ke=qT(J,R,Ge,"initializer")}ke&&Ce[O0](ie,le,Ne)}}),t}return n.prototype.processTelemetry=function(t,i){this.processNext(t,i)},n.prototype.addDependencyInitializer=function(t){return null},n.identifier="AjaxDependencyPlugin",n.getDefaultConfig=Y0,n.getEmptyConfig=jT,n}(Hr);var JT=function(){function e(){}return e}();var KT=function(){function e(){this.id="browser",this.deviceClass="Browser"}return e}();var lu="sessionManager",bl="update",cu="isUserCookieSet",uu="isNewUser",Gm="getTraceCtx",bh="telemetryTrace",Wm="applySessionContext",Zm="applyApplicationContext",jm="applyDeviceContext",$m="applyOperationContext",qm="applyUserContext",Xm="applyOperatingSystemContxt",Jm="applyLocationContext",Km="applyInternalContext",Xr="accountId",du="sdkExtension",hu="getSessionId",No="namePrefix",pu="sessionCookiePostfix",fu="userCookiePostfix",ss="idLength",ls="getNewId",xl="length",cs="automaticSession",us="authenticatedId",mu="sessionExpirationMs",xh="sessionRenewalMs",Jr="config",_u="acquisitionDate",Dh="renewalDate",wh="cookieDomain",vu="join",gu="cookieSeparator",Qm="authUserCookieName";var UP="2.8.18",QT=function(){function e(n){this.sdkVersion=(n[du]&&n[du]()?n[du]()+"_":"")+"javascript:"+UP}return e}();var eb=function(){function e(){}return e}();var HP="ai_session",z0=function(){function e(){}return e}();var tb=function(){function e(n,t){var i=this,o,s,l=Ur(t),u=Xs(t);Be(e,i,function(d){n||(n={}),Le(n[mu])||(n[mu]=function(){return e.acquisitionSpan}),Le(n[xh])||(n[xh]=function(){return e.renewalSpan}),d[Jr]=n;var f=d.config[pu]&&d[Jr][pu]()?d.config[pu]():d.config[No]&&d[Jr][No]()?d[Jr][No]():"";o=function(){return HP+f},d[cs]=new z0,d[bl]=function(){var T=Xi(),b=!1,S=d[cs];S.id||(b=!p(S,T));var I=d.config[mu]();if(!b&&I>0){var U=d.config[xh](),j=T-S[_u],k=T-S[Dh];b=j<0||k<0,b=b||j>I,b=b||k>U}b?g(T):(!s||T-s>e.cookieUpdateInterval)&&v(S,T)},d.backup=function(){var T=d[cs];C(T.id,T[_u],T[Dh])};function p(T,b){var S=!1,I=u.get(o());if(I&&Le(I.split))S=m(T,I);else{var U=e0(l,o());U&&(S=m(T,U))}return S||!!T.id}function m(T,b){var S=!1,I=", session will be reset",U=b.split("|");if(U[xl]>=2)try{var j=+U[1]||0,k=+U[2]||0;isNaN(j)||j<=0?ae(l,2,27,"AI session acquisition date is 0"+I):isNaN(k)||k<=0?ae(l,2,27,"AI session renewal date is 0"+I):U[0]&&(T.id=U[0],T[_u]=j,T[Dh]=k,S=!0)}catch(De){ae(l,1,9,"Error parsing ai_session value ["+(b||"")+"]"+I+" - "+Qe(De),{exception:ye(De)})}return S}function g(T){var b=d[Jr]||{},S=(b[ls]?b[ls]():null)||Vo;d.automaticSession.id=S(b[ss]?b[ss]():22),d[cs][_u]=T,v(d[cs],T),Yd()||ae(l,2,0,"Browser does not support local storage. Session durations will be inaccurate.")}function v(T,b){var S=T[_u];T[Dh]=b;var I=d[Jr],U=I[xh](),j=S+I[mu]()-b,k=[T.id,S,b],De=0;j<U?De=j/1e3:De=U/1e3;var $=I[wh]?I[wh]():null;u.set(o(),k.join("|"),I[mu]()>0?De:null,$),s=b}function C(T,b,S){t0(l,o(),[T,b,S][vu]("|"))}})}return e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}();var ib=function(){function e(n,t,i,o){var s=this;s.traceID=n||Mn(),s.parentID=t;var l=On();!i&&l&&l.pathname&&(i=l.pathname),s.name=gt(o,i)}return e}();function nb(e){return!(typeof e!="string"||!e||e.match(/,|;|=| |\|/))}var rb=function(){function e(n,t){this.isNewUser=!1,this.isUserCookieSet=!1;var i=Ur(t),o=Xs(t),s;Be(e,this,function(l){l[Jr]=n;var u=l.config[fu]&&l[Jr][fu]()?l[Jr][fu]():"";s=function(){return e.userCookieName+u};var d=o.get(s());if(d){l[uu]=!1;var f=d.split(e[gu]);f[xl]>0&&(l.id=f[0],l[cu]=!!l.id)}function p(){var S=n||{},I=(S[ls]?S[ls]():null)||Vo,U=I(S[ss]?n[ss]():22);return U}function m(S){var I=$n(new Date);l.accountAcquisitionDate=I,l[uu]=!0;var U=[S,I];return U}function g(S){var I=31536e3;l[cu]=o.set(s(),S,I)}if(!l.id){l.id=p();var v=m(l.id);g(v[vu](e[gu]));var C=n[No]&&n[No]()?n[No]()+"ai_session":"ai_session";i0(i,C)}l[Xr]=n[Xr]?n[Xr]():void 0;var T=o.get(e[Qm]);if(T){T=decodeURI(T);var b=T.split(e[gu]);b[0]&&(l[us]=b[0]),b[xl]>1&&b[1]&&(l[Xr]=b[1])}l.setAuthenticatedUserContext=function(S,I,U){U===void 0&&(U=!1);var j=!nb(S)||I&&!nb(I);if(j){ae(i,2,60,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);return}l[us]=S;var k=l[us];I&&(l[Xr]=I,k=[l[us],l.accountId][vu](e[gu])),U&&o.set(e[Qm],encodeURI(k))},l.clearAuthenticatedUserContext=function(){l[us]=null,l[Xr]=null,o.del(e[Qm])},l[bl]=function(S){if(l.id!==S||!l[cu]){var I=S||p(),U=m(I);g(U[vu](e[gu]))}}})}return e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}();var e_="ext",t_="tags";function yu(e,n){e&&e[n]&&An(e[n])[xl]===0&&delete e[n]}var ob=function(){function e(n,t,i){var o=this,s=n.logger;this.appId=function(){return null},this[hu]=function(){return null},Be(e,this,function(l){if(l.application=new JT,l.internal=new QT(t),Uo()){l[lu]=new tb(t,n),l.device=new KT,l.location=new eb,l.user=new rb(t,n);var u=void 0,d=void 0,f;i&&(u=i.getTraceId(),d=i.getSpanId(),f=i.getName()),l[bh]=new ib(u,d,f,s),l.session=new z0}l[hu]=function(){var p=l.session,m=null;if(p&&xe(p.id))m=p.id;else{var g=(l[lu]||{})[cs];m=g&&xe(g.id)?g.id:null}return m},l[Wm]=function(p,m){_t(li(p.ext,sn.AppExt),"sesId",l[hu](),xe)},l[Xm]=function(p,m){_t(p.ext,sn.OSExt,l.os)},l[Zm]=function(p,m){var g=l.application;if(g){var v=li(p,t_);_t(v,At.applicationVersion,g.ver,xe),_t(v,At.applicationBuild,g.build,xe)}},l[jm]=function(p,m){var g=l.device;if(g){var v=li(li(p,e_),sn.DeviceExt);_t(v,"localId",g.id,xe),_t(v,"ip",g.ip,xe),_t(v,"model",g.model,xe),_t(v,"deviceClass",g.deviceClass,xe)}},l[Km]=function(p,m){var g=l.internal;if(g){var v=li(p,t_);_t(v,At.internalAgentVersion,g.agentVersion,xe),_t(v,At.internalSdkVersion,gt(s,g.sdkVersion,64),xe),(p.baseType===Ho.dataType||p.baseType===Tn.dataType)&&(_t(v,At.internalSnippet,g.snippetVer,xe),_t(v,At.internalSdkSrc,g.sdkSrc,xe))}},l[Jm]=function(p,m){var g=o.location;g&&_t(li(p,t_,[]),At.locationIp,g.ip,xe)},l[$m]=function(p,m){var g=l[bh];if(g){var v=li(li(p,e_),sn.TraceExt,{traceID:void 0,parentID:void 0});_t(v,"traceID",g.traceID,xe,ee),_t(v,"name",g.name,xe,ee),_t(v,"parentID",g.parentID,xe,ee)}},l.applyWebContext=function(p,m){var g=o.web;g&&_t(li(p,e_),sn.WebExt,g)},l[qm]=function(p,m){var g=l.user;if(g){var v=li(p,t_,[]);_t(v,At.userAccountId,g[Xr],xe);var C=li(li(p,e_),sn.UserExt);_t(C,"id",g.id,xe),_t(C,"authId",g[us],xe)}},l.cleanUp=function(p,m){var g=p.ext;g&&(yu(g,sn.DeviceExt),yu(g,sn.UserExt),yu(g,sn.WebExt),yu(g,sn.OSExt),yu(g,sn.AppExt),yu(g,sn.TraceExt))}})}return e.__ieDyn=1,e}();var VP=function(e){$i(n,e);function n(){var t=e.call(this)||this;t.priority=110,t.identifier=Ba;var i,o,s;return Be(n,t,function(l,u){d(),l.initialize=function(m,g,v,C){u.initialize(m,g,v,C),f(m)},l.processTelemetry=function(m,g){if(!ee(m)){g=l._getTelCtx(g),m.name===Tn.envelopeType&&g.diagLog().resetInternalMessageCount();var v=l.context||{};v.session&&typeof l.context.session.id!="string"&&v[lu]&&v[lu][bl]();var C=v.user;if(C&&!C[cu]&&C[bl](v.user.id),p(m,g),C&&C[uu]){C[uu]=!1;var T=new Ho(72,(En()||{}).userAgent||"");Cg(g.diagLog(),1,T)}l.processNext(m,g)}},l._doTeardown=function(m,g){var v=(m||{}).core();if(v&&v[Gm]){var C=v[Gm](!1);C===o&&v.setTraceCtx(s)}d()};function d(){i=null,o=null,s=null}function f(m){var g=l.identifier,v=l.core,C=on(null,m,v),T=n.getDefaultConfig();i=i||{},lt(T,function(b,S){i[b]=function(){return C.getConfig(g,b,S())}}),m.storagePrefix&&sl(m.storagePrefix),s=v[Gm](!1),l.context=new ob(v,i,s),o=cl(l.context[bh],s),v.setTraceCtx(o),l.context.appId=function(){var b=v.getPlugin(Vd);return b?b.plugin._appId:null},l._extConfig=i}function p(m,g){li(m,"tags",[]),li(m,"ext",{});var v=l.context;v[Wm](m,g),v[Zm](m,g),v[jm](m,g),v[$m](m,g),v[qm](m,g),v[Xm](m,g),v.applyWebContext(m,g),v[Jm](m,g),v[Km](m,g),v.cleanUp(m,g)}}),t}return n.getDefaultConfig=function(){var t,i,o=null,s=(t={instrumentationKey:function(){return i}},t[Xr]=function(){return o},t.sessionRenewalMs=function(){return 30*60*1e3},t.samplingPercentage=function(){return 100},t.sessionExpirationMs=function(){return 24*60*60*1e3},t[wh]=function(){return o},t[du]=function(){return o},t.isBrowserLinkTrackingEnabled=function(){return!1},t.appId=function(){return o},t[hu]=function(){return o},t[No]=function(){return i},t[pu]=function(){return i},t[fu]=function(){return i},t[ss]=function(){return 22},t[ls]=function(){return o},t);return s},n}(Hr),U0=VP;var ab="AuthenticatedUserContext",Su="track";var i_="snippet",sb="getCookieMgr",lb="startTrackPage",cb="stopTrackPage",n_="flush",ub="startTrackEvent",db="stopTrackEvent",H0="addTelemetryInitializer",jU=H0+"s",V0="pollInternalLogs",r_="getPlugin",o_="evtNamespace",hb=Su+"Event",pb=Su+"Trace",fb=Su+"Metric",mb=Su+"PageView",_b=Su+"Exception",vb=Su+"DependencyData",gb="set"+ab,yb="clear"+ab;var Sb="updateSnippetDefinitions",Cb="loadAppInsights",G0="endpointUrl";var Nh="diagnosticLogInterval";var Eb="disableFlushOnBeforeUnload",Tb="disableFlushOnUnload";var oa="config",xr="context",Ih="push",a_="version",ds="queue",s_="connectionString",W0="instrumentationKey",Ph="appInsights",Z0="disableIkeyDeprecationMessage",j0="getTransmissionControls",Cu="onunloadFlush",$0="addHousekeepingBeforeUnload",Lh="indexOf";var q0,bb=[i_,"dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"];var X0=function(){function e(n){var t=this,i,o,s,l,u,d,f;Be(e,this,function(p){S(),l=""+(n.sv||n[a_]||""),n[ds]=n[ds]||[],n[a_]=n[a_]||2;var m=n[oa]||{};if(m[s_]){var g=s0(m[s_]),v=g.ingestionendpoint;m[G0]=v?v+Wo:m[G0],m[W0]=g.instrumentationkey||m[W0]}p[Ph]=new Tm,o=new U0,i=new B0,s=new P0,f=new Ug,p.core=f;var C=ee(m[Z0])?!0:m[Z0];!m[s_]&&!C&&ae(f.logger,1,106,"Instrumentation key support will end soon, see aka.ms/IkeyMigrate"),p[i_]=n,p[oa]=m,T(),p[n_]=function(I){I===void 0&&(I=!0),wa(f,function(){return"AISKU.flush"},function(){fe(f[j0](),function(U){fe(U,function(j){j[n_](I)})})},null,I)},p[Cu]=function(I){I===void 0&&(I=!0),fe(f[j0](),function(U){fe(U,function(j){j[Cu]?j[Cu]():j[n_](I)})})},p[Cb]=function(I,U,j){I===void 0&&(I=!1);function k(De){if(De){var $="";ee(l)||($+=l),I&&($+=".lg"),p[xr]&&p[xr].internal&&(p[xr].internal.snippetVer=$||"-"),lt(p,function(yt,He){xe(yt)&&!Le(He)&&yt&&yt[0]!=="_"&&wi(bb,yt)===-1&&(De[yt]=He)})}}return I&&p[oa].extensions&&p[oa].extensions.length>0&&ii("Extensions not allowed in legacy mode"),wa(p.core,function(){return"AISKU.loadAppInsights"},function(){var De=[];De[Ih](s),De[Ih](o),De[Ih](i),De[Ih](p[Ph]),f.initialize(p[oa],De,U,j),p[xr]=o[xr],q0&&p[xr]&&(p[xr].internal.sdkSrc=q0),k(p[i_]),p.emptyQueue(),p[V0](),p[$0](p)}),p},p[Sb]=function(I){rg(I,p,function(U){return U&&wi(bb,U)===-1})},p.emptyQueue=function(){try{if(st(p.snippet[ds])){for(var I=p.snippet[ds].length,U=0;U<I;U++){var j=p.snippet[ds][U];j()}p.snippet[ds]=void 0,delete p.snippet[ds]}}catch(De){var k={};De&&Le(De.toString)&&(k.exception=De.toString())}},p[$0]=function(I){if(Uo()||wf()){var U=function(){if(I[Cu](!1),Le(t.core[r_])){var De=t.core[r_](Ba);if(De){var $=De.plugin;$&&$[xr]&&$[xr]._sessionManager&&$[xr]._sessionManager.backup()}}},j=!1,k=I.appInsights[oa].disablePageUnloadEvents;d||(d=Jn(u,f[o_]&&f[o_]())),I.appInsights.config[Eb]||(Rg(U,k,d)&&(j=!0),xd(U,k,d)&&(j=!0),!j&&!vg()&&ae(I[Ph].core.logger,1,19,"Could not add handler for beforeunload and pagehide")),!j&&!I.appInsights.config[Tb]&&xd(U,k,d)}},p.getSender=function(){return s},p.unload=function(I,U,j){p[Cu](I),d&&(Fg(null,d),Yg(null,d)),f.unload&&f.unload(I,U,j)},zo(p,p[Ph],[sb,hb,mb,"trackPageViewPerformance",_b,"_onerror",pb,fb,lb,cb,ub,db]),zo(p,b,[vb,"addDependencyListener","addDependencyInitializer"]),zo(p,f,[H0,V0,"stopPollingInternalLogs",r_,"addPlugin",o_,"addUnloadCb","getTraceCtx"]),zo(p,function(){var I=o[xr];return I?I.user:null},[gb,yb]);function T(){p.config[Nh]=p.config[Nh]&&p[oa][Nh]>0?p[oa][Nh]:1e4}function b(){return i}function S(){u=Ji("AISKU"),d=null,i=null,o=null,s=null,l=null}})}return e.prototype.addDependencyInitializer=function(n){return null},e}();(function(){var e=null,n=!1,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var i=(document||{}).currentScript;i&&(e=i.src)}catch{}if(e)try{var o=e.toLowerCase();if(o){for(var s="",l=0;l<t.length;l++)if(o[Lh](t[l])!==-1){s="cdn"+(l+1),o[Lh]("/scripts/")===-1&&(o[Lh]("/next/")!==-1?s+="-next":o[Lh]("/beta/")!==-1&&(s+="-beta")),q0=s+(n?".mod":"");break}}}catch{}})();var Dl=function(e){return e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical",e}(Dl||{});var $e=(()=>{class e{constructor(t,i,o){this.apiService=t,this.authService=i,this.activatedRoute=o,this.countrySubject=new Zt(null),this.countries=[],this.onUserChange=s=>{s&&this.getCountriesByUser(s)},this.getCountrySubscription=()=>this.countrySubject.asObservable(),this.onCountriesByUser=s=>l=>{this.countries=l,this.filterCountriesByUser(s)},this.filterCountryByCountryCodeISO3=s=>l=>l.countryCodeISO3===s,this.filterCountryByUser=s=>l=>s.countries.includes(l.countryCodeISO3),this.selectCountry=s=>{this.countrySubject.next(this.countries.find(this.filterCountryByCountryCodeISO3(s)))},this.activatedRoute.queryParams.subscribe(s=>{s?.countryCodeISO3?this.apiService.getCountries(null,!0).subscribe(l=>{this.countries=l,this.selectCountry(s?.countryCodeISO3)}):this.authService.getAuthSubscription().subscribe(this.onUserChange)})}getCountriesByUser(t){this.apiService.getCountries(t.countries.join(",")).subscribe(this.onCountriesByUser(t))}getAllCountries(){return this.apiService.getCountries(null,!0)}filterCountriesByUser(t){t?.countries?(this.countries=this.countries.filter(this.filterCountryByUser(t)).sort((i,o)=>i.countryName>o.countryName?1:-1),this.countries.length>0&&this.selectCountry(this.countries[0].countryCodeISO3)):this.countries=[]}static{this.\u0275fac=function(i){return new(i||e)(Se(Di),Se(Nn),Se(IC))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Kt=(()=>{class e{constructor(t){this.countryService=t,this.log=VC?console.log:()=>{},this.onCountryChange=i=>{this.country=i},this.telemetryInitializer=i=>{Object.assign(i.data,{configuration:Ut.configuration,version:Ut.ibfSystemVersion,apiUrl:Ut.apiUrl,referrer:document.referrer,country:this.country?this.country.countryCodeISO3:null})},this.countryService.getCountrySubscription().subscribe(this.onCountryChange),!(!Ut.applicationInsightsInstrumentationKey||!Ut.applicationInsightsUrl)&&(this.applicationInsights=new X0({config:{connectionString:`InstrumentationKey=${Ut.applicationInsightsInstrumentationKey};IngestionEndpoint=${Ut.applicationInsightsUrl}`,instrumentationKey:Ut.applicationInsightsInstrumentationKey,enableAutoRouteTracking:!0}}),this.isApplicationInsightsEnabled=!0,this.applicationInsights.loadAppInsights(),this.applicationInsights.addTelemetryInitializer(this.telemetryInitializer))}logPageView(t){this.isApplicationInsightsEnabled?this.applicationInsights.trackPageView({name:t}):this.log("analyticsService logPageView",t)}logError(t,i){this.displayOnConsole(t,i)}logEvent(t,i){this.isApplicationInsightsEnabled?this.applicationInsights.trackEvent({name:t},i):this.log("analyticsService logEvent",t,i)}logException(t,i){this.isApplicationInsightsEnabled?this.applicationInsights.trackException({exception:t,severityLevel:i}):this.displayOnConsole(t,i)}logTrace(t,i){this.isApplicationInsightsEnabled?this.applicationInsights.trackTrace({message:t},i):this.log("analyticsService logTrace",t,i)}displayOnConsole(t,i=Dl.Error){switch(i){case Dl.Critical:case Dl.Error:console.error(t);break;case Dl.Warning:console.warn(t);break;case Dl.Information:console.log(t);break}}static{this.\u0275fac=function(i){return new(i||e)(Se($e))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var WP=Math.pow(10,8)*24*60*60*1e3,vH=-WP,l_=6048e5,xb=864e5,J0=6e4,Ah=36e5;var ZP=3600;var Db=ZP*24,gH=Db*7,jP=Db*365.2425,$P=jP/12,yH=$P*3,K0=Symbol.for("constructDateFrom");function Bi(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&K0 in e?e[K0](n):e instanceof Date?new e.constructor(n):new Date(n)}function We(e,n){return Bi(n||e,e)}var qP={};function hs(){return qP}function sa(e,n){let t=hs(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,o=We(e,n?.in),s=o.getDay(),l=(s<i?7:0)+s-i;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function wl(e,n){return sa(e,Ei(Te({},n),{weekStartsOn:1}))}function c_(e,n){let t=We(e,n?.in),i=t.getFullYear(),o=Bi(t,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);let s=wl(o),l=Bi(t,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);let u=wl(l);return t.getTime()>=s.getTime()?i+1:t.getTime()>=u.getTime()?i:i-1}function Q0(e){let n=We(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function Io(e,...n){let t=Bi.bind(null,e||n.find(i=>typeof i=="object"));return n.map(t)}function ey(e,n){let t=We(e,n?.in);return t.setHours(0,0,0,0),t}function u_(e,n,t){let[i,o]=Io(t?.in,e,n),s=ey(i),l=ey(o),u=+s-Q0(s),d=+l-Q0(l);return Math.round((u-d)/xb)}function wb(e,n){let t=c_(e,n),i=Bi(n?.in||e,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),wl(i)}function Nb(e,n){let t,i=n?.in;return e.forEach(o=>{!i&&typeof o=="object"&&(i=Bi.bind(null,o));let s=We(o,i);(!t||t<s||isNaN(+s))&&(t=s)}),Bi(i,t||NaN)}function d_(e,n){let t=+We(e)-+We(n);return t<0?-1:t>0?1:t}function Ib(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Pb(e){return!(!Ib(e)&&typeof e!="number"||isNaN(+We(e)))}function Lb(e,n,t){let[i,o]=Io(t?.in,e,n),s=i.getFullYear()-o.getFullYear(),l=i.getMonth()-o.getMonth();return s*12+l}function Ob(e,n,t){let[i,o]=Io(t?.in,e,n),s=Ab(i,o),l=Math.abs(u_(i,o));i.setDate(i.getDate()-s*l);let u=+(Ab(i,o)===-s),d=s*(l-u);return d===0?0:d}function Ab(e,n){let t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function Mb(e){return n=>{let i=(e?Math[e]:Math.trunc)(n);return i===0?0:i}}function kb(e,n,t){let[i,o]=Io(t?.in,e,n),s=(+i-+o)/Ah;return Mb(t?.roundingMethod)(s)}function Rb(e,n){let t=We(e,n?.in);return t.setHours(23,59,59,999),t}function Fb(e,n){let t=We(e,n?.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function Yb(e,n){let t=We(e,n?.in);return+Rb(t,n)==+Fb(t,n)}function Bb(e,n,t){let[i,o,s]=Io(t?.in,e,e,n),l=d_(o,s),u=Math.abs(Lb(o,s));if(u<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*u);let d=d_(o,s)===-l;Yb(i)&&u===1&&d_(i,s)===1&&(d=!1);let f=l*(u-+d);return f===0?0:f}function zb(e,n){let t=We(e,n?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}var XP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ub=(e,n,t)=>{let i,o=XP[e];return typeof o=="string"?i=o:n===1?i=o.one:i=o.other.replace("{{count}}",n.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function h_(e){return(n={})=>{let t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}var JP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},QP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hb={date:h_({formats:JP,defaultWidth:"full"}),time:h_({formats:KP,defaultWidth:"full"}),dateTime:h_({formats:QP,defaultWidth:"full"})};var eL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vb=(e,n,t,i)=>eL[e];function Eu(e){return(n,t)=>{let i=t?.context?String(t.context):"standalone",o;if(i==="formatting"&&e.formattingValues){let l=e.defaultFormattingWidth||e.defaultWidth,u=t?.width?String(t.width):l;o=e.formattingValues[u]||e.formattingValues[l]}else{let l=e.defaultWidth,u=t?.width?String(t.width):e.defaultWidth;o=e.values[u]||e.values[l]}let s=e.argumentCallback?e.argumentCallback(n):n;return o[s]}}var tL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sL=(e,n)=>{let t=Number(e),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Gb={ordinalNumber:sL,era:Eu({values:tL,defaultWidth:"wide"}),quarter:Eu({values:iL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Eu({values:nL,defaultWidth:"wide"}),day:Eu({values:rL,defaultWidth:"wide"}),dayPeriod:Eu({values:oL,defaultWidth:"wide",formattingValues:aL,defaultFormattingWidth:"wide"})};function Tu(e){return(n,t={})=>{let i=t.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=n.match(o);if(!s)return null;let l=s[0],u=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?cL(u,m=>m.test(l)):lL(u,m=>m.test(l)),f;f=e.valueCallback?e.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;let p=n.slice(l.length);return{value:f,rest:p}}}function lL(e,n){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function cL(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function Wb(e){return(n,t={})=>{let i=n.match(e.matchPattern);if(!i)return null;let o=i[0],s=n.match(e.parsePattern);if(!s)return null;let l=e.valueCallback?e.valueCallback(s[0]):s[0];l=t.valueCallback?t.valueCallback(l):l;let u=n.slice(o.length);return{value:l,rest:u}}}var uL=/^(\d+)(th|st|nd|rd)?/i,dL=/\d+/i,hL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pL={any:[/^b/i,/^(a|c)/i]},fL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mL={any:[/1/i,/2/i,/3/i,/4/i]},_L={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zb={ordinalNumber:Wb({matchPattern:uL,parsePattern:dL,valueCallback:e=>parseInt(e,10)}),era:Tu({matchPatterns:hL,defaultMatchWidth:"wide",parsePatterns:pL,defaultParseWidth:"any"}),quarter:Tu({matchPatterns:fL,defaultMatchWidth:"wide",parsePatterns:mL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Tu({matchPatterns:_L,defaultMatchWidth:"wide",parsePatterns:vL,defaultParseWidth:"any"}),day:Tu({matchPatterns:gL,defaultMatchWidth:"wide",parsePatterns:yL,defaultParseWidth:"any"}),dayPeriod:Tu({matchPatterns:SL,defaultMatchWidth:"any",parsePatterns:CL,defaultParseWidth:"any"})};var ty={code:"en-US",formatDistance:Ub,formatLong:Hb,formatRelative:Vb,localize:Gb,match:Zb,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jb(e,n){let t=We(e,n?.in);return u_(t,zb(t))+1}function $b(e,n){let t=We(e,n?.in),i=+wl(t)-+wb(t);return Math.round(i/l_)+1}function p_(e,n){let t=We(e,n?.in),i=t.getFullYear(),o=hs(),s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=Bi(n?.in||e,0);l.setFullYear(i+1,0,s),l.setHours(0,0,0,0);let u=sa(l,n),d=Bi(n?.in||e,0);d.setFullYear(i,0,s),d.setHours(0,0,0,0);let f=sa(d,n);return+t>=+u?i+1:+t>=+f?i:i-1}function qb(e,n){let t=hs(),i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,o=p_(e,n),s=Bi(n?.in||e,0);return s.setFullYear(o,0,i),s.setHours(0,0,0,0),sa(s,n)}function Xb(e,n){let t=We(e,n?.in),i=+sa(t,n)-+qb(t,n);return Math.round(i/l_)+1}function bt(e,n){let t=e<0?"-":"",i=Math.abs(e).toString().padStart(n,"0");return t+i}var la={y(e,n){let t=e.getFullYear(),i=t>0?t:1-t;return bt(n==="yy"?i%100:i,n.length)},M(e,n){let t=e.getMonth();return n==="M"?String(t+1):bt(t+1,2)},d(e,n){return bt(e.getDate(),n.length)},a(e,n){let t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return bt(e.getHours()%12||12,n.length)},H(e,n){return bt(e.getHours(),n.length)},m(e,n){return bt(e.getMinutes(),n.length)},s(e,n){return bt(e.getSeconds(),n.length)},S(e,n){let t=n.length,i=e.getMilliseconds(),o=Math.trunc(i*Math.pow(10,t-3));return bt(o,n.length)}};var bu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iy={G:function(e,n,t){let i=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){let i=e.getFullYear(),o=i>0?i:1-i;return t.ordinalNumber(o,{unit:"year"})}return la.y(e,n)},Y:function(e,n,t,i){let o=p_(e,i),s=o>0?o:1-o;if(n==="YY"){let l=s%100;return bt(l,2)}return n==="Yo"?t.ordinalNumber(s,{unit:"year"}):bt(s,n.length)},R:function(e,n){let t=c_(e);return bt(t,n.length)},u:function(e,n){let t=e.getFullYear();return bt(t,n.length)},Q:function(e,n,t){let i=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return bt(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,t){let i=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return bt(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,t){let i=e.getMonth();switch(n){case"M":case"MM":return la.M(e,n);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,t){let i=e.getMonth();switch(n){case"L":return String(i+1);case"LL":return bt(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,t,i){let o=Xb(e,i);return n==="wo"?t.ordinalNumber(o,{unit:"week"}):bt(o,n.length)},I:function(e,n,t){let i=$b(e);return n==="Io"?t.ordinalNumber(i,{unit:"week"}):bt(i,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):la.d(e,n)},D:function(e,n,t){let i=jb(e);return n==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):bt(i,n.length)},E:function(e,n,t){let i=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,t,i){let o=e.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(s);case"ee":return bt(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,t,i){let o=e.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(s);case"cc":return bt(s,n.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,t){let i=e.getDay(),o=i===0?7:i;switch(n){case"i":return String(o);case"ii":return bt(o,n.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,t){let o=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,t){let i=e.getHours(),o;switch(i===12?o=bu.noon:i===0?o=bu.midnight:o=i/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,t){let i=e.getHours(),o;switch(i>=17?o=bu.evening:i>=12?o=bu.afternoon:i>=4?o=bu.morning:o=bu.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let i=e.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return la.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):la.H(e,n)},K:function(e,n,t){let i=e.getHours()%12;return n==="Ko"?t.ordinalNumber(i,{unit:"hour"}):bt(i,n.length)},k:function(e,n,t){let i=e.getHours();return i===0&&(i=24),n==="ko"?t.ordinalNumber(i,{unit:"hour"}):bt(i,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):la.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):la.s(e,n)},S:function(e,n){return la.S(e,n)},X:function(e,n,t){let i=e.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return Kb(i);case"XXXX":case"XX":return Nl(i);case"XXXXX":case"XXX":default:return Nl(i,":")}},x:function(e,n,t){let i=e.getTimezoneOffset();switch(n){case"x":return Kb(i);case"xxxx":case"xx":return Nl(i);case"xxxxx":case"xxx":default:return Nl(i,":")}},O:function(e,n,t){let i=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Jb(i,":");case"OOOO":default:return"GMT"+Nl(i,":")}},z:function(e,n,t){let i=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Jb(i,":");case"zzzz":default:return"GMT"+Nl(i,":")}},t:function(e,n,t){let i=Math.trunc(+e/1e3);return bt(i,n.length)},T:function(e,n,t){return bt(+e,n.length)}};function Jb(e,n=""){let t=e>0?"-":"+",i=Math.abs(e),o=Math.trunc(i/60),s=i%60;return s===0?t+String(o):t+String(o)+n+bt(s,2)}function Kb(e,n){return e%60===0?(e>0?"-":"+")+bt(Math.abs(e)/60,2):Nl(e,n)}function Nl(e,n=""){let t=e>0?"-":"+",i=Math.abs(e),o=bt(Math.trunc(i/60),2),s=bt(i%60,2);return t+o+n+s}var Qb=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},ex=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},EL=(e,n)=>{let t=e.match(/(P+)(p+)?/)||[],i=t[1],o=t[2];if(!o)return Qb(e,n);let s;switch(i){case"P":s=n.dateTime({width:"short"});break;case"PP":s=n.dateTime({width:"medium"});break;case"PPP":s=n.dateTime({width:"long"});break;case"PPPP":default:s=n.dateTime({width:"full"});break}return s.replace("{{date}}",Qb(i,n)).replace("{{time}}",ex(o,n))},tx={p:ex,P:EL};var TL=/^D+$/,bL=/^Y+$/,xL=["D","DD","YY","YYYY"];function ix(e){return TL.test(e)}function nx(e){return bL.test(e)}function rx(e,n,t){let i=DL(e,n,t);if(console.warn(i),xL.includes(e))throw new RangeError(i)}function DL(e,n,t){let i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var wL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,IL=/^'([^]*?)'?$/,PL=/''/g,LL=/[a-zA-Z]/;function ox(e,n,t){let i=hs(),o=t?.locale??i.locale??ty,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,u=We(e,t?.in);if(!Pb(u))throw new RangeError("Invalid time value");let d=n.match(NL).map(p=>{let m=p[0];if(m==="p"||m==="P"){let g=tx[m];return g(p,o.formatLong)}return p}).join("").match(wL).map(p=>{if(p==="''")return{isToken:!1,value:"'"};let m=p[0];if(m==="'")return{isToken:!1,value:AL(p)};if(iy[m])return{isToken:!0,value:p};if(m.match(LL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});o.localize.preprocessor&&(d=o.localize.preprocessor(u,d));let f={firstWeekContainsDate:s,weekStartsOn:l,locale:o};return d.map(p=>{if(!p.isToken)return p.value;let m=p.value;(!t?.useAdditionalWeekYearTokens&&nx(m)||!t?.useAdditionalDayOfYearTokens&&ix(m))&&rx(m,n,String(e));let g=iy[m[0]];return g(u,m,o.localize,f)}).join("")}function AL(e){let n=e.match(IL);return n?n[1].replace(PL,"'"):e}function f_(e,n){return+We(e)>+We(n)}function ax(e,n){return+We(e)<+We(n)}function sx(e,n){return+We(e)==+We(n)}function xu(e,n){let t=()=>Bi(n?.in,NaN),i=n?.additionalDigits??2,o=RL(e),s;if(o.date){let f=FL(o.date,i);s=YL(f.restDateString,f.year)}if(!s||isNaN(+s))return t();let l=+s,u=0,d;if(o.time&&(u=BL(o.time),isNaN(u)))return t();if(o.timezone){if(d=zL(o.timezone),isNaN(d))return t()}else{let f=new Date(l+u),p=We(0,n?.in);return p.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),p.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),p}return We(l+u+d,n?.in)}var m_={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},OL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ML=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,kL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function RL(e){let n={},t=e.split(m_.dateTimeDelimiter),i;if(t.length>2)return n;if(/:/.test(t[0])?i=t[0]:(n.date=t[0],i=t[1],m_.timeZoneDelimiter.test(n.date)&&(n.date=e.split(m_.timeZoneDelimiter)[0],i=e.substr(n.date.length,e.length))),i){let o=m_.timezone.exec(i);o?(n.time=i.replace(o[1],""),n.timezone=o[1]):n.time=i}return n}function FL(e,n){let t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),i=e.match(t);if(!i)return{year:NaN,restDateString:""};let o=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?o:s*100,restDateString:e.slice((i[1]||i[2]).length)}}function YL(e,n){if(n===null)return new Date(NaN);let t=e.match(OL);if(!t)return new Date(NaN);let i=!!t[4],o=Oh(t[1]),s=Oh(t[2])-1,l=Oh(t[3]),u=Oh(t[4]),d=Oh(t[5])-1;if(i)return WL(n,u,d)?UL(n,u,d):new Date(NaN);{let f=new Date(0);return!VL(n,s,l)||!GL(n,o)?new Date(NaN):(f.setUTCFullYear(n,s,Math.max(o,l)),f)}}function Oh(e){return e?parseInt(e):1}function BL(e){let n=e.match(ML);if(!n)return NaN;let t=ny(n[1]),i=ny(n[2]),o=ny(n[3]);return ZL(t,i,o)?t*Ah+i*J0+o*1e3:NaN}function ny(e){return e&&parseFloat(e.replace(",","."))||0}function zL(e){if(e==="Z")return 0;let n=e.match(kL);if(!n)return 0;let t=n[1]==="+"?-1:1,i=parseInt(n[2]),o=n[3]&&parseInt(n[3])||0;return jL(i,o)?t*(i*Ah+o*J0):NaN}function UL(e,n,t){let i=new Date(0);i.setUTCFullYear(e,0,4);let o=i.getUTCDay()||7,s=(n-1)*7+t+1-o;return i.setUTCDate(i.getUTCDate()+s),i}var HL=[31,null,31,30,31,30,31,31,30,31,30,31];function lx(e){return e%400===0||e%4===0&&e%100!==0}function VL(e,n,t){return n>=0&&n<=11&&t>=1&&t<=(HL[n]||(lx(e)?29:28))}function GL(e,n){return n>=1&&n<=(lx(e)?366:365)}function WL(e,n,t){return n>=1&&n<=53&&t>=0&&t<=6}function ZL(e,n,t){return e===24?n===0&&t===0:t>=0&&t<60&&n>=0&&n<60&&e>=0&&e<25}function jL(e,n){return n>=0&&n<=59}var ca=class extends Error{},__=class extends ca{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}},v_=class extends ca{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}},g_=class extends ca{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}},Kr=class extends ca{},Du=class extends ca{constructor(n){super(`Invalid unit ${n}`)}},ui=class extends ca{},Qr=class extends ca{constructor(){super("Zone is an abstract class")}};var he="numeric",eo="short",nr="long",ps={year:he,month:he,day:he},Mh={year:he,month:eo,day:he},ry={year:he,month:eo,day:he,weekday:eo},kh={year:he,month:nr,day:he},Rh={year:he,month:nr,day:he,weekday:nr},Fh={hour:he,minute:he},Yh={hour:he,minute:he,second:he},Bh={hour:he,minute:he,second:he,timeZoneName:eo},zh={hour:he,minute:he,second:he,timeZoneName:nr},Uh={hour:he,minute:he,hourCycle:"h23"},Hh={hour:he,minute:he,second:he,hourCycle:"h23"},Vh={hour:he,minute:he,second:he,hourCycle:"h23",timeZoneName:eo},Gh={hour:he,minute:he,second:he,hourCycle:"h23",timeZoneName:nr},Wh={year:he,month:he,day:he,hour:he,minute:he},Zh={year:he,month:he,day:he,hour:he,minute:he,second:he},jh={year:he,month:eo,day:he,hour:he,minute:he},$h={year:he,month:eo,day:he,hour:he,minute:he,second:he},oy={year:he,month:eo,day:he,weekday:eo,hour:he,minute:he},qh={year:he,month:nr,day:he,hour:he,minute:he,timeZoneName:eo},Xh={year:he,month:nr,day:he,hour:he,minute:he,second:he,timeZoneName:eo},Jh={year:he,month:nr,day:he,weekday:nr,hour:he,minute:he,timeZoneName:nr},Kh={year:he,month:nr,day:he,weekday:nr,hour:he,minute:he,second:he,timeZoneName:nr};var rr=class{get type(){throw new Qr}get name(){throw new Qr}get ianaName(){return this.name}get isUniversal(){throw new Qr}offsetName(n,t){throw new Qr}formatOffset(n,t){throw new Qr}offset(n){throw new Qr}equals(n){throw new Qr}get isValid(){throw new Qr}};var ay=null,Il=class e extends rr{static get instance(){return ay===null&&(ay=new e),ay}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:t,locale:i}){return S_(n,t,i)}formatOffset(n,t){return fs(this.offset(n),t)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}};var ly=new Map;function $L(e){let n=ly.get(e);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),ly.set(e,n)),n}var qL={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function XL(e,n){let t=e.format(n).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,o,s,l,u,d,f,p]=i;return[l,o,s,u,d,f,p]}function JL(e,n){let t=e.formatToParts(n),i=[];for(let o=0;o<t.length;o++){let{type:s,value:l}=t[o],u=qL[s];s==="era"?i[u]=l:Ae(u)||(i[u]=parseInt(l,10))}return i}var sy=new Map,bn=class e extends rr{static create(n){let t=sy.get(n);return t===void 0&&sy.set(n,t=new e(n)),t}static resetCache(){sy.clear(),ly.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=e.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:t,locale:i}){return S_(n,t,i,this.name)}formatOffset(n,t){return fs(this.offset(n),t)}offset(n){if(!this.valid)return NaN;let t=new Date(n);if(isNaN(t))return NaN;let i=$L(this.name),[o,s,l,u,d,f,p]=i.formatToParts?JL(i,t):XL(i,t);u==="BC"&&(o=-Math.abs(o)+1);let g=wu({year:o,month:s,day:l,hour:d===24?0:d,minute:f,second:p,millisecond:0}),v=+t,C=v%1e3;return v-=C>=0?C:1e3+C,(g-v)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}};var cx={};function KL(e,n={}){let t=JSON.stringify([e,n]),i=cx[t];return i||(i=new Intl.ListFormat(e,n),cx[t]=i),i}var cy=new Map;function uy(e,n={}){let t=JSON.stringify([e,n]),i=cy.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(e,n),cy.set(t,i)),i}var dy=new Map;function QL(e,n={}){let t=JSON.stringify([e,n]),i=dy.get(t);return i===void 0&&(i=new Intl.NumberFormat(e,n),dy.set(t,i)),i}var hy=new Map;function eA(e,n={}){let l=n,{base:t}=l,i=Ev(l,["base"]),o=JSON.stringify([e,i]),s=hy.get(o);return s===void 0&&(s=new Intl.RelativeTimeFormat(e,n),hy.set(o,s)),s}var Qh=null;function tA(){return Qh||(Qh=new Intl.DateTimeFormat().resolvedOptions().locale,Qh)}var py=new Map;function ux(e){let n=py.get(e);return n===void 0&&(n=new Intl.DateTimeFormat(e).resolvedOptions(),py.set(e,n)),n}var fy=new Map;function iA(e){let n=fy.get(e);if(!n){let t=new Intl.Locale(e);n="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in n||(n=Te(Te({},dx),n)),fy.set(e,n)}return n}function nA(e){let n=e.indexOf("-x-");n!==-1&&(e=e.substring(0,n));let t=e.indexOf("-u-");if(t===-1)return[e];{let i,o;try{i=uy(e).resolvedOptions(),o=e}catch{let d=e.substring(0,t);i=uy(d).resolvedOptions(),o=d}let{numberingSystem:s,calendar:l}=i;return[o,s,l]}}function rA(e,n,t){return(t||n)&&(e.includes("-u-")||(e+="-u"),t&&(e+=`-ca-${t}`),n&&(e+=`-nu-${n}`)),e}function oA(e){let n=[];for(let t=1;t<=12;t++){let i=Fe.utc(2009,t,1);n.push(e(i))}return n}function aA(e){let n=[];for(let t=1;t<=7;t++){let i=Fe.utc(2016,11,13+t);n.push(e(i))}return n}function C_(e,n,t,i){let o=e.listingMode();return o==="error"?null:o==="en"?t(n):i(n)}function sA(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||ux(e.locale).numberingSystem==="latn"}var my=class{constructor(n,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;let u=i,{padTo:o,floor:s}=u,l=Ev(u,["padTo","floor"]);if(!t||Object.keys(l).length>0){let d=Te({useGrouping:!1},i);i.padTo>0&&(d.minimumIntegerDigits=i.padTo),this.inf=QL(n,d)}}format(n){if(this.inf){let t=this.floor?Math.floor(n):n;return this.inf.format(t)}else{let t=this.floor?Math.floor(n):Nu(n,3);return ri(t,this.padTo)}}},_y=class{constructor(n,t,i){this.opts=i,this.originalZone=void 0;let o;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){let l=-1*(n.offset/60),u=l>=0?`Etc/GMT+${l}`:`Etc/GMT${l}`;n.offset!==0&&bn.create(u).valid?(o=u,this.dt=n):(o="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,o=n.zone.name):(o="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);let s=Te({},this.opts);s.timeZone=s.timeZone||o,this.dtf=uy(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(t=>{if(t.type==="timeZoneName"){let i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return Ei(Te({},t),{value:i})}else return t}):n}resolvedOptions(){return this.dtf.resolvedOptions()}},vy=class{constructor(n,t,i){this.opts=Te({style:"long"},i),!t&&E_()&&(this.rtf=eA(n,i))}format(n,t){return this.rtf?this.rtf.format(n,t):hx(t,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,t){return this.rtf?this.rtf.formatToParts(n,t):[]}},dx={firstDay:1,minimalDays:4,weekend:[6,7]},Dt=class e{static fromOpts(n){return e.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,t,i,o,s=!1){let l=n||xt.defaultLocale,u=l||(s?"en-US":tA()),d=t||xt.defaultNumberingSystem,f=i||xt.defaultOutputCalendar,p=ep(o)||xt.defaultWeekSettings;return new e(u,d,f,p,l)}static resetCache(){Qh=null,cy.clear(),dy.clear(),hy.clear(),py.clear(),fy.clear()}static fromObject({locale:n,numberingSystem:t,outputCalendar:i,weekSettings:o}={}){return e.create(n,t,i,o)}constructor(n,t,i,o,s){let[l,u,d]=nA(n);this.locale=l,this.numberingSystem=t||u||null,this.outputCalendar=i||d||null,this.weekSettings=o,this.intl=rA(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=sA(this)),this.fastNumbersCached}listingMode(){let n=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&t?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:e.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,ep(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone(Ei(Te({},n),{defaultToEN:!0}))}redefaultToSystem(n={}){return this.clone(Ei(Te({},n),{defaultToEN:!1}))}months(n,t=!1){return C_(this,n,gy,()=>{let i=t?{month:n,day:"numeric"}:{month:n},o=t?"format":"standalone";return this.monthsCache[o][n]||(this.monthsCache[o][n]=oA(s=>this.extract(s,i,"month"))),this.monthsCache[o][n]})}weekdays(n,t=!1){return C_(this,n,yy,()=>{let i=t?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},o=t?"format":"standalone";return this.weekdaysCache[o][n]||(this.weekdaysCache[o][n]=aA(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[o][n]})}meridiems(){return C_(this,void 0,()=>Sy,()=>{if(!this.meridiemCache){let n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Fe.utc(2016,11,13,9),Fe.utc(2016,11,13,19)].map(t=>this.extract(t,n,"dayperiod"))}return this.meridiemCache})}eras(n){return C_(this,n,Cy,()=>{let t={era:n};return this.eraCache[n]||(this.eraCache[n]=[Fe.utc(-40,1,1),Fe.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[n]})}extract(n,t,i){let o=this.dtFormatter(n,t),s=o.formatToParts(),l=s.find(u=>u.type.toLowerCase()===i);return l?l.value:null}numberFormatter(n={}){return new my(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,t={}){return new _y(n,this.intl,t)}relFormatter(n={}){return new vy(this.intl,this.isEnglish(),n)}listFormatter(n={}){return KL(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||ux(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:T_()?iA(this.locale):dx}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}};var Ty=null,ln=class e extends rr{static get utcInstance(){return Ty===null&&(Ty=new e(0)),Ty}static instance(n){return n===0?e.utcInstance:new e(n)}static parseSpecifier(n){if(n){let t=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new e(Pl(t[1],t[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${fs(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${fs(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,t){return fs(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}};var tp=class extends rr{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function to(e,n){let t;if(Ae(e)||e===null)return n;if(e instanceof rr)return e;if(px(e)){let i=e.toLowerCase();return i==="default"?n:i==="local"||i==="system"?Il.instance:i==="utc"||i==="gmt"?ln.utcInstance:ln.parseSpecifier(i)||bn.create(e)}else return io(e)?ln.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new tp(e)}var xy={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},fx={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},lA=xy.hanidec.replace(/[\[|\]]/g,"").split("");function mx(e){let n=parseInt(e,10);if(isNaN(n)){n="";for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);if(e[t].search(xy.hanidec)!==-1)n+=lA.indexOf(e[t]);else for(let o in fx){let[s,l]=fx[o];i>=s&&i<=l&&(n+=i-s)}}return parseInt(n,10)}else return n}var by=new Map;function _x(){by.clear()}function wr({numberingSystem:e},n=""){let t=e||"latn",i=by.get(t);i===void 0&&(i=new Map,by.set(t,i));let o=i.get(n);return o===void 0&&(o=new RegExp(`${xy[t]}${n}`),i.set(n,o)),o}var vx=()=>Date.now(),gx="system",yx=null,Sx=null,Cx=null,Ex=60,Tx,bx=null,xt=class{static get now(){return vx}static set now(n){vx=n}static set defaultZone(n){gx=n}static get defaultZone(){return to(gx,Il.instance)}static get defaultLocale(){return yx}static set defaultLocale(n){yx=n}static get defaultNumberingSystem(){return Sx}static set defaultNumberingSystem(n){Sx=n}static get defaultOutputCalendar(){return Cx}static set defaultOutputCalendar(n){Cx=n}static get defaultWeekSettings(){return bx}static set defaultWeekSettings(n){bx=ep(n)}static get twoDigitCutoffYear(){return Ex}static set twoDigitCutoffYear(n){Ex=n%100}static get throwOnInvalid(){return Tx}static set throwOnInvalid(n){Tx=n}static resetCaches(){Dt.resetCache(),bn.resetCache(),Fe.resetCache(),_x()}};var cn=class{constructor(n,t){this.reason=n,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var xx=[0,31,59,90,120,151,181,212,243,273,304,334],Dx=[0,31,60,91,121,152,182,213,244,274,305,335];function Nr(e,n){return new cn("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${e}, which is invalid`)}function b_(e,n,t){let i=new Date(Date.UTC(e,n-1,t));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);let o=i.getUTCDay();return o===0?7:o}function wx(e,n,t){return t+(Al(e)?Dx:xx)[n-1]}function Nx(e,n){let t=Al(e)?Dx:xx,i=t.findIndex(s=>s<n),o=n-t[i];return{month:i+1,day:o}}function x_(e,n){return(e-n+7)%7+1}function ip(e,n=4,t=1){let{year:i,month:o,day:s}=e,l=wx(i,o,s),u=x_(b_(i,o,s),t),d=Math.floor((l-u+14-n)/7),f;return d<1?(f=i-1,d=Ll(f,n,t)):d>Ll(i,n,t)?(f=i+1,d=1):f=i,Te({weekYear:f,weekNumber:d,weekday:u},rp(e))}function Dy(e,n=4,t=1){let{weekYear:i,weekNumber:o,weekday:s}=e,l=x_(b_(i,1,n),t),u=ms(i),d=o*7+s-l-7+n,f;d<1?(f=i-1,d+=ms(f)):d>u?(f=i+1,d-=ms(i)):f=i;let{month:p,day:m}=Nx(f,d);return Te({year:f,month:p,day:m},rp(e))}function D_(e){let{year:n,month:t,day:i}=e,o=wx(n,t,i);return Te({year:n,ordinal:o},rp(e))}function wy(e){let{year:n,ordinal:t}=e,{month:i,day:o}=Nx(n,t);return Te({year:n,month:i,day:o},rp(e))}function Ny(e,n){if(!Ae(e.localWeekday)||!Ae(e.localWeekNumber)||!Ae(e.localWeekYear)){if(!Ae(e.weekday)||!Ae(e.weekNumber)||!Ae(e.weekYear))throw new Kr("Cannot mix locale-based week fields with ISO-based week fields");return Ae(e.localWeekday)||(e.weekday=e.localWeekday),Ae(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ae(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Ix(e,n=4,t=1){let i=np(e.weekYear),o=or(e.weekNumber,1,Ll(e.weekYear,n,t)),s=or(e.weekday,1,7);return i?o?s?!1:Nr("weekday",e.weekday):Nr("week",e.weekNumber):Nr("weekYear",e.weekYear)}function Px(e){let n=np(e.year),t=or(e.ordinal,1,ms(e.year));return n?t?!1:Nr("ordinal",e.ordinal):Nr("year",e.year)}function Iy(e){let n=np(e.year),t=or(e.month,1,12),i=or(e.day,1,Iu(e.year,e.month));return n?t?i?!1:Nr("day",e.day):Nr("month",e.month):Nr("year",e.year)}function Py(e){let{hour:n,minute:t,second:i,millisecond:o}=e,s=or(n,0,23)||n===24&&t===0&&i===0&&o===0,l=or(t,0,59),u=or(i,0,59),d=or(o,0,999);return s?l?u?d?!1:Nr("millisecond",o):Nr("second",i):Nr("minute",t):Nr("hour",n)}function Ae(e){return typeof e>"u"}function io(e){return typeof e=="number"}function np(e){return typeof e=="number"&&e%1===0}function px(e){return typeof e=="string"}function Ax(e){return Object.prototype.toString.call(e)==="[object Date]"}function E_(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function T_(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Ox(e){return Array.isArray(e)?e:[e]}function Ly(e,n,t){if(e.length!==0)return e.reduce((i,o)=>{let s=[n(o),o];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function Mx(e,n){return n.reduce((t,i)=>(t[i]=e[i],t),{})}function _s(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function ep(e){if(e==null)return null;if(typeof e!="object")throw new ui("Week settings must be an object");if(!or(e.firstDay,1,7)||!or(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(n=>!or(n,1,7)))throw new ui("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function or(e,n,t){return np(e)&&e>=n&&e<=t}function cA(e,n){return e-n*Math.floor(e/n)}function ri(e,n=2){let t=e<0,i;return t?i="-"+(""+-e).padStart(n,"0"):i=(""+e).padStart(n,"0"),i}function ua(e){if(!(Ae(e)||e===null||e===""))return parseInt(e,10)}function vs(e){if(!(Ae(e)||e===null||e===""))return parseFloat(e)}function op(e){if(!(Ae(e)||e===null||e==="")){let n=parseFloat("0."+e)*1e3;return Math.floor(n)}}function Nu(e,n,t=!1){let i=10**n;return(t?Math.trunc:Math.round)(e*i)/i}function Al(e){return e%4===0&&(e%100!==0||e%400===0)}function ms(e){return Al(e)?366:365}function Iu(e,n){let t=cA(n-1,12)+1,i=e+(n-t)/12;return t===2?Al(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function wu(e){let n=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(n=new Date(n),n.setUTCFullYear(e.year,e.month-1,e.day)),+n}function Lx(e,n,t){return-x_(b_(e,1,n),t)+n-1}function Ll(e,n=4,t=1){let i=Lx(e,n,t),o=Lx(e+1,n,t);return(ms(e)-i+o)/7}function ap(e){return e>99?e:e>xt.twoDigitCutoffYear?1900+e:2e3+e}function S_(e,n,t,i=null){let o=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);let l=Te({timeZoneName:n},s),u=new Intl.DateTimeFormat(t,l).formatToParts(o).find(d=>d.type.toLowerCase()==="timezonename");return u?u.value:null}function Pl(e,n){let t=parseInt(e,10);Number.isNaN(t)&&(t=0);let i=parseInt(n,10)||0,o=t<0||Object.is(t,-0)?-i:i;return t*60+o}function Ay(e){let n=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(n))throw new ui(`Invalid unit value ${e}`);return n}function Pu(e,n){let t={};for(let i in e)if(_s(e,i)){let o=e[i];if(o==null)continue;t[n(i)]=Ay(o)}return t}function fs(e,n){let t=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),o=e>=0?"+":"-";switch(n){case"short":return`${o}${ri(t,2)}:${ri(i,2)}`;case"narrow":return`${o}${t}${i>0?`:${i}`:""}`;case"techie":return`${o}${ri(t,2)}${ri(i,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function rp(e){return Mx(e,["hour","minute","second","millisecond"])}var uA=["January","February","March","April","May","June","July","August","September","October","November","December"],Oy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dA=["J","F","M","A","M","J","J","A","S","O","N","D"];function gy(e){switch(e){case"narrow":return[...dA];case"short":return[...Oy];case"long":return[...uA];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var My=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ky=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],hA=["M","T","W","T","F","S","S"];function yy(e){switch(e){case"narrow":return[...hA];case"short":return[...ky];case"long":return[...My];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Sy=["AM","PM"],pA=["Before Christ","Anno Domini"],fA=["BC","AD"],mA=["B","A"];function Cy(e){switch(e){case"narrow":return[...mA];case"short":return[...fA];case"long":return[...pA];default:return null}}function kx(e){return Sy[e.hour<12?0:1]}function Rx(e,n){return yy(n)[e.weekday-1]}function Fx(e,n){return gy(n)[e.month-1]}function Yx(e,n){return Cy(n)[e.year<0?0:1]}function hx(e,n,t="always",i=!1){let o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(t==="auto"&&s){let m=e==="days";switch(n){case 1:return m?"tomorrow":`next ${o[e][0]}`;case-1:return m?"yesterday":`last ${o[e][0]}`;case 0:return m?"today":`this ${o[e][0]}`;default:}}let l=Object.is(n,-0)||n<0,u=Math.abs(n),d=u===1,f=o[e],p=i?d?f[1]:f[2]||f[1]:d?o[e][0]:e;return l?`${u} ${p} ago`:`in ${u} ${p}`}function Bx(e,n){let t="";for(let i of e)i.literal?t+=i.val:t+=n(i.val);return t}var _A={D:ps,DD:Mh,DDD:kh,DDDD:Rh,t:Fh,tt:Yh,ttt:Bh,tttt:zh,T:Uh,TT:Hh,TTT:Vh,TTTT:Gh,f:Wh,ff:jh,fff:qh,ffff:Jh,F:Zh,FF:$h,FFF:Xh,FFFF:Kh},un=class e{static create(n,t={}){return new e(n,t)}static parseFormat(n){let t=null,i="",o=!1,s=[];for(let l=0;l<n.length;l++){let u=n.charAt(l);u==="'"?(i.length>0&&s.push({literal:o||/^\s+$/.test(i),val:i}),t=null,i="",o=!o):o||u===t?i+=u:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=u,t=u)}return i.length>0&&s.push({literal:o||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(n){return _A[n]}constructor(n,t){this.opts=t,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,Te(Te({},this.opts),t)).format()}dtFormatter(n,t={}){return this.loc.dtFormatter(n,Te(Te({},this.opts),t))}formatDateTime(n,t){return this.dtFormatter(n,t).format()}formatDateTimeParts(n,t){return this.dtFormatter(n,t).formatToParts()}formatInterval(n,t){return this.dtFormatter(n.start,t).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,t){return this.dtFormatter(n,t).resolvedOptions()}num(n,t=0){if(this.opts.forceSimple)return ri(n,t);let i=Te({},this.opts);return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(n)}formatDateTimeFromString(n,t){let i=this.loc.listingMode()==="en",o=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(v,C)=>this.loc.extract(n,v,C),l=v=>n.isOffsetFixed&&n.offset===0&&v.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,v.format):"",u=()=>i?kx(n):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(v,C)=>i?Fx(n,v):s(C?{month:v}:{month:v,day:"numeric"},"month"),f=(v,C)=>i?Rx(n,v):s(C?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),p=v=>{let C=e.macroTokenToFormatOpts(v);return C?this.formatWithSystemDefault(n,C):v},m=v=>i?Yx(n,v):s({era:v},"era"),g=v=>{switch(v){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return l({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return l({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return l({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return u();case"d":return o?s({day:"numeric"},"day"):this.num(n.day);case"dd":return o?s({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return o?s({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return o?s({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return o?s({month:"numeric"},"month"):this.num(n.month);case"MM":return o?s({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return o?s({year:"numeric"},"year"):this.num(n.year);case"yy":return o?s({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return o?s({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return o?s({year:"numeric"},"year"):this.num(n.year,6);case"G":return m("short");case"GG":return m("long");case"GGGGG":return m("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return p(v)}};return Bx(e.parseFormat(t),g)}formatDurationFromString(n,t){let i=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},o=d=>f=>{let p=i(f);return p?this.num(d.get(p),f.length):f},s=e.parseFormat(t),l=s.reduce((d,{literal:f,val:p})=>f?d:d.concat(p),[]),u=n.shiftTo(...l.map(i).filter(d=>d));return Bx(s,o(u))}};var Ux=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Au(...e){let n=e.reduce((t,i)=>t+i.source,"");return RegExp(`^${n}$`)}function Ou(...e){return n=>e.reduce(([t,i,o],s)=>{let[l,u,d]=s(n,o);return[Te(Te({},t),l),u||i,d]},[{},null,1]).slice(0,2)}function Mu(e,...n){if(e==null)return[null,null];for(let[t,i]of n){let o=t.exec(e);if(o)return i(o)}return[null,null]}function Hx(...e){return(n,t)=>{let i={},o;for(o=0;o<e.length;o++)i[e[o]]=ua(n[t+o]);return[i,null,t+o]}}var Vx=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,vA=`(?:${Vx.source}?(?:\\[(${Ux.source})\\])?)?`,Ry=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Gx=RegExp(`${Ry.source}${vA}`),Fy=RegExp(`(?:T${Gx.source})?`),gA=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,yA=/(\d{4})-?W(\d\d)(?:-?(\d))?/,SA=/(\d{4})-?(\d{3})/,CA=Hx("weekYear","weekNumber","weekDay"),EA=Hx("year","ordinal"),TA=/(\d{4})-(\d\d)-(\d\d)/,Wx=RegExp(`${Ry.source} ?(?:${Vx.source}|(${Ux.source}))?`),bA=RegExp(`(?: ${Wx.source})?`);function Lu(e,n,t){let i=e[n];return Ae(i)?t:ua(i)}function xA(e,n){return[{year:Lu(e,n),month:Lu(e,n+1,1),day:Lu(e,n+2,1)},null,n+3]}function ku(e,n){return[{hours:Lu(e,n,0),minutes:Lu(e,n+1,0),seconds:Lu(e,n+2,0),milliseconds:op(e[n+3])},null,n+4]}function sp(e,n){let t=!e[n]&&!e[n+1],i=Pl(e[n+1],e[n+2]),o=t?null:ln.instance(i);return[{},o,n+3]}function lp(e,n){let t=e[n]?bn.create(e[n]):null;return[{},t,n+1]}var DA=RegExp(`^T?${Ry.source}$`),wA=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function NA(e){let[n,t,i,o,s,l,u,d,f]=e,p=n[0]==="-",m=d&&d[0]==="-",g=(v,C=!1)=>v!==void 0&&(C||v&&p)?-v:v;return[{years:g(vs(t)),months:g(vs(i)),weeks:g(vs(o)),days:g(vs(s)),hours:g(vs(l)),minutes:g(vs(u)),seconds:g(vs(d),d==="-0"),milliseconds:g(op(f),m)}]}var IA={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Yy(e,n,t,i,o,s,l){let u={year:n.length===2?ap(ua(n)):ua(n),month:Oy.indexOf(t)+1,day:ua(i),hour:ua(o),minute:ua(s)};return l&&(u.second=ua(l)),e&&(u.weekday=e.length>3?My.indexOf(e)+1:ky.indexOf(e)+1),u}var PA=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function LA(e){let[,n,t,i,o,s,l,u,d,f,p,m]=e,g=Yy(n,o,i,t,s,l,u),v;return d?v=IA[d]:f?v=0:v=Pl(p,m),[g,new ln(v)]}function AA(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var OA=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,MA=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,kA=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function zx(e){let[,n,t,i,o,s,l,u]=e;return[Yy(n,o,i,t,s,l,u),ln.utcInstance]}function RA(e){let[,n,t,i,o,s,l,u]=e;return[Yy(n,u,t,i,o,s,l),ln.utcInstance]}var FA=Au(gA,Fy),YA=Au(yA,Fy),BA=Au(SA,Fy),zA=Au(Gx),Zx=Ou(xA,ku,sp,lp),UA=Ou(CA,ku,sp,lp),HA=Ou(EA,ku,sp,lp),VA=Ou(ku,sp,lp);function jx(e){return Mu(e,[FA,Zx],[YA,UA],[BA,HA],[zA,VA])}function $x(e){return Mu(AA(e),[PA,LA])}function qx(e){return Mu(e,[OA,zx],[MA,zx],[kA,RA])}function Xx(e){return Mu(e,[wA,NA])}var GA=Ou(ku);function Jx(e){return Mu(e,[DA,GA])}var WA=Au(TA,bA),ZA=Au(Wx),jA=Ou(ku,sp,lp);function Kx(e){return Mu(e,[WA,Zx],[ZA,jA])}var Qx="Invalid Duration",tD={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},$A=Te({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},tD),Ir=146097/400,Ru=146097/4800,qA=Te({years:{quarters:4,months:12,weeks:Ir/7,days:Ir,hours:Ir*24,minutes:Ir*24*60,seconds:Ir*24*60*60,milliseconds:Ir*24*60*60*1e3},quarters:{months:3,weeks:Ir/28,days:Ir/4,hours:Ir*24/4,minutes:Ir*24*60/4,seconds:Ir*24*60*60/4,milliseconds:Ir*24*60*60*1e3/4},months:{weeks:Ru/7,days:Ru,hours:Ru*24,minutes:Ru*24*60,seconds:Ru*24*60*60,milliseconds:Ru*24*60*60*1e3}},tD),Ol=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],XA=Ol.slice(0).reverse();function gs(e,n,t=!1){let i={values:t?n.values:Te(Te({},e.values),n.values||{}),loc:e.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||e.conversionAccuracy,matrix:n.matrix||e.matrix};return new di(i)}function iD(e,n){let t=n.milliseconds??0;for(let i of XA.slice(1))n[i]&&(t+=n[i]*e[i].milliseconds);return t}function eD(e,n){let t=iD(e,n)<0?-1:1;Ol.reduceRight((i,o)=>{if(Ae(n[o]))return i;if(i){let s=n[i]*t,l=e[o][i],u=Math.floor(s/l);n[o]+=u*t,n[i]-=u*l*t}return o},null),Ol.reduce((i,o)=>{if(Ae(n[o]))return i;if(i){let s=n[i]%1;n[i]-=s,n[o]+=s*e[i][o]}return o},null)}function JA(e){let n={};for(let[t,i]of Object.entries(e))i!==0&&(n[t]=i);return n}var di=class e{constructor(n){let t=n.conversionAccuracy==="longterm"||!1,i=t?qA:$A;n.matrix&&(i=n.matrix),this.values=n.values,this.loc=n.loc||Dt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(n,t){return e.fromObject({milliseconds:n},t)}static fromObject(n,t={}){if(n==null||typeof n!="object")throw new ui(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new e({values:Pu(n,e.normalizeUnit),loc:Dt.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(n){if(io(n))return e.fromMillis(n);if(e.isDuration(n))return n;if(typeof n=="object")return e.fromObject(n);throw new ui(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,t){let[i]=Xx(n);return i?e.fromObject(i,t):e.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,t){let[i]=Jx(n);return i?e.fromObject(i,t):e.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,t=null){if(!n)throw new ui("need to specify a reason the Duration is invalid");let i=n instanceof cn?n:new cn(n,t);if(xt.throwOnInvalid)throw new g_(i);return new e({invalid:i})}static normalizeUnit(n){let t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!t)throw new Du(n);return t}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,t={}){let i=Ei(Te({},t),{floor:t.round!==!1&&t.floor!==!1});return this.isValid?un.create(this.loc,i).formatDurationFromString(this,n):Qx}toHuman(n={}){if(!this.isValid)return Qx;let t=Ol.map(i=>{let o=this.values[i];return Ae(o)?null:this.loc.numberFormatter(Ei(Te({style:"unit",unitDisplay:"long"},n),{unit:i.slice(0,-1)})).format(o)}).filter(i=>i);return this.loc.listFormatter(Te({type:"conjunction",style:n.listStyle||"narrow"},n)).format(t)}toObject(){return this.isValid?Te({},this.values):{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=Nu(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;let t=this.toMillis();return t<0||t>=864e5?null:(n=Ei(Te({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},n),{includeOffset:!1}),Fe.fromMillis(t,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?iD(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;let t=e.fromDurationLike(n),i={};for(let o of Ol)(_s(t.values,o)||_s(this.values,o))&&(i[o]=t.get(o)+this.get(o));return gs(this,{values:i},!0)}minus(n){if(!this.isValid)return this;let t=e.fromDurationLike(n);return this.plus(t.negate())}mapUnits(n){if(!this.isValid)return this;let t={};for(let i of Object.keys(this.values))t[i]=Ay(n(this.values[i],i));return gs(this,{values:t},!0)}get(n){return this[e.normalizeUnit(n)]}set(n){if(!this.isValid)return this;let t=Te(Te({},this.values),Pu(n,e.normalizeUnit));return gs(this,{values:t})}reconfigure({locale:n,numberingSystem:t,conversionAccuracy:i,matrix:o}={}){let l={loc:this.loc.clone({locale:n,numberingSystem:t}),matrix:o,conversionAccuracy:i};return gs(this,l)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;let n=this.toObject();return eD(this.matrix,n),gs(this,{values:n},!0)}rescale(){if(!this.isValid)return this;let n=JA(this.normalize().shiftToAll().toObject());return gs(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(l=>e.normalizeUnit(l));let t={},i={},o=this.toObject(),s;for(let l of Ol)if(n.indexOf(l)>=0){s=l;let u=0;for(let f in i)u+=this.matrix[f][l]*i[f],i[f]=0;io(o[l])&&(u+=o[l]);let d=Math.trunc(u);t[l]=d,i[l]=(u*1e3-d*1e3)/1e3}else io(o[l])&&(i[l]=o[l]);for(let l in i)i[l]!==0&&(t[s]+=l===s?i[l]:i[l]/this.matrix[s][l]);return eD(this.matrix,t),gs(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let n={};for(let t of Object.keys(this.values))n[t]=this.values[t]===0?0:-this.values[t];return gs(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function t(i,o){return i===void 0||i===0?o===void 0||o===0:i===o}for(let i of Ol)if(!t(this.values[i],n.values[i]))return!1;return!0}};var Fu="Invalid Interval";function KA(e,n){return!e||!e.isValid?ys.invalid("missing or invalid start"):!n||!n.isValid?ys.invalid("missing or invalid end"):n<e?ys.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${n.toISO()}`):null}var ys=class e{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,t=null){if(!n)throw new ui("need to specify a reason the Interval is invalid");let i=n instanceof cn?n:new cn(n,t);if(xt.throwOnInvalid)throw new v_(i);return new e({invalid:i})}static fromDateTimes(n,t){let i=Yu(n),o=Yu(t),s=KA(i,o);return s??new e({start:i,end:o})}static after(n,t){let i=di.fromDurationLike(t),o=Yu(n);return e.fromDateTimes(o,o.plus(i))}static before(n,t){let i=di.fromDurationLike(t),o=Yu(n);return e.fromDateTimes(o.minus(i),o)}static fromISO(n,t){let[i,o]=(n||"").split("/",2);if(i&&o){let s,l;try{s=Fe.fromISO(i,t),l=s.isValid}catch{l=!1}let u,d;try{u=Fe.fromISO(o,t),d=u.isValid}catch{d=!1}if(l&&d)return e.fromDateTimes(s,u);if(l){let f=di.fromISO(o,t);if(f.isValid)return e.after(s,f)}else if(d){let f=di.fromISO(i,t);if(f.isValid)return e.before(u,f)}}return e.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",t){if(!this.isValid)return NaN;let i=this.start.startOf(n,t),o;return t?.useLocaleWeeks?o=this.end.reconfigure({locale:i.locale}):o=this.end,o=o.startOf(n,t),Math.floor(o.diff(i,n).get(n))+(o.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:t}={}){return this.isValid?e.fromDateTimes(n||this.s,t||this.e):this}splitAt(...n){if(!this.isValid)return[];let t=n.map(Yu).filter(l=>this.contains(l)).sort((l,u)=>l.toMillis()-u.toMillis()),i=[],{s:o}=this,s=0;for(;o<this.e;){let l=t[s]||this.e,u=+l>+this.e?this.e:l;i.push(e.fromDateTimes(o,u)),o=u,s+=1}return i}splitBy(n){let t=di.fromDurationLike(n);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,o=1,s,l=[];for(;i<this.e;){let u=this.start.plus(t.mapUnits(d=>d*o));s=+u>+this.e?this.e:u,l.push(e.fromDateTimes(i,s)),i=s,o+=1}return l}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;let t=this.s>n.s?this.s:n.s,i=this.e<n.e?this.e:n.e;return t>=i?null:e.fromDateTimes(t,i)}union(n){if(!this.isValid)return this;let t=this.s<n.s?this.s:n.s,i=this.e>n.e?this.e:n.e;return e.fromDateTimes(t,i)}static merge(n){let[t,i]=n.sort((o,s)=>o.s-s.s).reduce(([o,s],l)=>s?s.overlaps(l)||s.abutsStart(l)?[o,s.union(l)]:[o.concat([s]),l]:[o,l],[[],null]);return i&&t.push(i),t}static xor(n){let t=null,i=0,o=[],s=n.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),l=Array.prototype.concat(...s),u=l.sort((d,f)=>d.time-f.time);for(let d of u)i+=d.type==="s"?1:-1,i===1?t=d.time:(t&&+t!=+d.time&&o.push(e.fromDateTimes(t,d.time)),t=null);return e.merge(o)}difference(...n){return e.xor([this].concat(n)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Fu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=ps,t={}){return this.isValid?un.create(this.s.loc.clone(t),n).formatInterval(this):Fu}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:Fu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Fu}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:Fu}toFormat(n,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(n)}${t}${this.e.toFormat(n)}`:Fu}toDuration(n,t){return this.isValid?this.e.diff(this.s,n,t):di.invalid(this.invalidReason)}mapEndpoints(n){return e.fromDateTimes(n(this.s),n(this.e))}};var Ss=class{static hasDST(n=xt.defaultZone){let t=Fe.now().setZone(n).set({month:12});return!n.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(n){return bn.isValidZone(n)}static normalizeZone(n){return to(n,xt.defaultZone)}static getStartOfWeek({locale:n=null,locObj:t=null}={}){return(t||Dt.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:t=null}={}){return(t||Dt.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:t=null}={}){return(t||Dt.create(n)).getWeekendDays().slice()}static months(n="long",{locale:t=null,numberingSystem:i=null,locObj:o=null,outputCalendar:s="gregory"}={}){return(o||Dt.create(t,i,s)).months(n)}static monthsFormat(n="long",{locale:t=null,numberingSystem:i=null,locObj:o=null,outputCalendar:s="gregory"}={}){return(o||Dt.create(t,i,s)).months(n,!0)}static weekdays(n="long",{locale:t=null,numberingSystem:i=null,locObj:o=null}={}){return(o||Dt.create(t,i,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:t=null,numberingSystem:i=null,locObj:o=null}={}){return(o||Dt.create(t,i,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return Dt.create(n).meridiems()}static eras(n="short",{locale:t=null}={}){return Dt.create(t,null,"gregory").eras(n)}static features(){return{relative:E_(),localeWeek:T_()}}};function nD(e,n){let t=o=>o.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(n)-t(e);return Math.floor(di.fromMillis(i).as("days"))}function QA(e,n,t){let i=[["years",(d,f)=>f.year-d.year],["quarters",(d,f)=>f.quarter-d.quarter+(f.year-d.year)*4],["months",(d,f)=>f.month-d.month+(f.year-d.year)*12],["weeks",(d,f)=>{let p=nD(d,f);return(p-p%7)/7}],["days",nD]],o={},s=e,l,u;for(let[d,f]of i)t.indexOf(d)>=0&&(l=d,o[d]=f(e,n),u=s.plus(o),u>n?(o[d]--,e=s.plus(o),e>n&&(u=e,o[d]--,e=s.plus(o))):e=u);return[e,o,u,l]}function rD(e,n,t,i){let[o,s,l,u]=QA(e,n,t),d=n-o,f=t.filter(m=>["hours","minutes","seconds","milliseconds"].indexOf(m)>=0);f.length===0&&(l<n&&(l=o.plus({[u]:1})),l!==o&&(s[u]=(s[u]||0)+d/(l-o)));let p=di.fromObject(s,i);return f.length>0?di.fromMillis(d,i).shiftTo(...f).plus(p):p}var eO="missing Intl.DateTimeFormat.formatToParts support";function wt(e,n=t=>t){return{regex:e,deser:([t])=>n(mx(t))}}var tO="\xA0",sD=`[ ${tO}]`,lD=new RegExp(sD,"g");function iO(e){return e.replace(/\./g,"\\.?").replace(lD,sD)}function oD(e){return e.replace(/\./g,"").replace(lD," ").toLowerCase()}function no(e,n){return e===null?null:{regex:RegExp(e.map(iO).join("|")),deser:([t])=>e.findIndex(i=>oD(t)===oD(i))+n}}function aD(e,n){return{regex:e,deser:([,t,i])=>Pl(t,i),groups:n}}function w_(e){return{regex:e,deser:([n])=>n}}function nO(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function rO(e,n){let t=wr(n),i=wr(n,"{2}"),o=wr(n,"{3}"),s=wr(n,"{4}"),l=wr(n,"{6}"),u=wr(n,"{1,2}"),d=wr(n,"{1,3}"),f=wr(n,"{1,6}"),p=wr(n,"{1,9}"),m=wr(n,"{2,4}"),g=wr(n,"{4,6}"),v=b=>({regex:RegExp(nO(b.val)),deser:([S])=>S,literal:!0}),T=(b=>{if(e.literal)return v(b);switch(b.val){case"G":return no(n.eras("short"),0);case"GG":return no(n.eras("long"),0);case"y":return wt(f);case"yy":return wt(m,ap);case"yyyy":return wt(s);case"yyyyy":return wt(g);case"yyyyyy":return wt(l);case"M":return wt(u);case"MM":return wt(i);case"MMM":return no(n.months("short",!0),1);case"MMMM":return no(n.months("long",!0),1);case"L":return wt(u);case"LL":return wt(i);case"LLL":return no(n.months("short",!1),1);case"LLLL":return no(n.months("long",!1),1);case"d":return wt(u);case"dd":return wt(i);case"o":return wt(d);case"ooo":return wt(o);case"HH":return wt(i);case"H":return wt(u);case"hh":return wt(i);case"h":return wt(u);case"mm":return wt(i);case"m":return wt(u);case"q":return wt(u);case"qq":return wt(i);case"s":return wt(u);case"ss":return wt(i);case"S":return wt(d);case"SSS":return wt(o);case"u":return w_(p);case"uu":return w_(u);case"uuu":return wt(t);case"a":return no(n.meridiems(),0);case"kkkk":return wt(s);case"kk":return wt(m,ap);case"W":return wt(u);case"WW":return wt(i);case"E":case"c":return wt(t);case"EEE":return no(n.weekdays("short",!1),1);case"EEEE":return no(n.weekdays("long",!1),1);case"ccc":return no(n.weekdays("short",!0),1);case"cccc":return no(n.weekdays("long",!0),1);case"Z":case"ZZ":return aD(new RegExp(`([+-]${u.source})(?::(${i.source}))?`),2);case"ZZZ":return aD(new RegExp(`([+-]${u.source})(${i.source})?`),2);case"z":return w_(/[a-z_+-/]{1,256}?/i);case" ":return w_(/[^\S\n\r]/);default:return v(b)}})(e)||{invalidReason:eO};return T.token=e,T}var oO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function aO(e,n,t){let{type:i,value:o}=e;if(i==="literal"){let d=/^\s+$/.test(o);return{literal:!d,val:d?" ":o}}let s=n[i],l=i;i==="hour"&&(n.hour12!=null?l=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?l="hour12":l="hour24":l=t.hour12?"hour12":"hour24");let u=oO[l];if(typeof u=="object"&&(u=u[s]),u)return{literal:!1,val:u}}function sO(e){return[`^${e.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,e]}function lO(e,n,t){let i=e.match(n);if(i){let o={},s=1;for(let l in t)if(_s(t,l)){let u=t[l],d=u.groups?u.groups+1:1;!u.literal&&u.token&&(o[u.token.val[0]]=u.deser(i.slice(s,s+d))),s+=d}return[i,o]}else return[i,{}]}function cO(e){let n=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},t=null,i;return Ae(e.z)||(t=bn.create(e.z)),Ae(e.Z)||(t||(t=new ln(e.Z)),i=e.Z),Ae(e.q)||(e.M=(e.q-1)*3+1),Ae(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ae(e.u)||(e.S=op(e.u)),[Object.keys(e).reduce((s,l)=>{let u=n(l);return u&&(s[u]=e[l]),s},{}),t,i]}var By=null;function uO(){return By||(By=Fe.fromMillis(1555555555555)),By}function dO(e,n){if(e.literal)return e;let t=un.macroTokenToFormatOpts(e.val),i=Hy(t,n);return i==null||i.includes(void 0)?e:i}function zy(e,n){return Array.prototype.concat(...e.map(t=>dO(t,n)))}var cp=class{constructor(n,t){if(this.locale=n,this.format=t,this.tokens=zy(un.parseFormat(t),n),this.units=this.tokens.map(i=>rO(i,n)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){let[i,o]=sO(this.units);this.regex=RegExp(i,"i"),this.handlers=o}}explainFromTokens(n){if(this.isValid){let[t,i]=lO(n,this.regex,this.handlers),[o,s,l]=i?cO(i):[null,null,void 0];if(_s(i,"a")&&_s(i,"H"))throw new Kr("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:o,zone:s,specificOffset:l}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function Uy(e,n,t){return new cp(e,t).explainFromTokens(n)}function cD(e,n,t){let{result:i,zone:o,specificOffset:s,invalidReason:l}=Uy(e,n,t);return[i,o,s,l]}function Hy(e,n){if(!e)return null;let i=un.create(n,e).dtFormatter(uO()),o=i.formatToParts(),s=i.resolvedOptions();return o.map(l=>aO(l,e,s))}var Vy="Invalid DateTime",uD=864e13;function up(e){return new cn("unsupported zone",`the zone "${e.name}" is not supported`)}function Gy(e){return e.weekData===null&&(e.weekData=ip(e.c)),e.weekData}function Wy(e){return e.localWeekData===null&&(e.localWeekData=ip(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Ml(e,n){let t={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Fe(Ei(Te(Te({},t),n),{old:t}))}function vD(e,n,t){let i=e-n*60*1e3,o=t.offset(i);if(n===o)return[i,n];i-=(o-n)*60*1e3;let s=t.offset(i);return o===s?[i,o]:[e-Math.min(o,s)*60*1e3,Math.max(o,s)]}function N_(e,n){e+=n*60*1e3;let t=new Date(e);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function P_(e,n,t){return vD(wu(e),n,t)}function dD(e,n){let t=e.o,i=e.c.year+Math.trunc(n.years),o=e.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,s=Ei(Te({},e.c),{year:i,month:o,day:Math.min(e.c.day,Iu(i,o))+Math.trunc(n.days)+Math.trunc(n.weeks)*7}),l=di.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),u=wu(s),[d,f]=vD(u,t,e.zone);return l!==0&&(d+=l,f=e.zone.offset(d)),{ts:d,o:f}}function Bu(e,n,t,i,o,s){let{setZone:l,zone:u}=t;if(e&&Object.keys(e).length!==0||n){let d=n||u,f=Fe.fromObject(e,Ei(Te({},t),{zone:d,specificOffset:s}));return l?f:f.setZone(u)}else return Fe.invalid(new cn("unparsable",`the input "${o}" can't be parsed as ${i}`))}function I_(e,n,t=!0){return e.isValid?un.create(Dt.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(e,n):null}function Zy(e,n){let t=e.c.year>9999||e.c.year<0,i="";return t&&e.c.year>=0&&(i+="+"),i+=ri(e.c.year,t?6:4),n?(i+="-",i+=ri(e.c.month),i+="-",i+=ri(e.c.day)):(i+=ri(e.c.month),i+=ri(e.c.day)),i}function hD(e,n,t,i,o,s){let l=ri(e.c.hour);return n?(l+=":",l+=ri(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!t)&&(l+=":")):l+=ri(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!t)&&(l+=ri(e.c.second),(e.c.millisecond!==0||!i)&&(l+=".",l+=ri(e.c.millisecond,3))),o&&(e.isOffsetFixed&&e.offset===0&&!s?l+="Z":e.o<0?(l+="-",l+=ri(Math.trunc(-e.o/60)),l+=":",l+=ri(Math.trunc(-e.o%60))):(l+="+",l+=ri(Math.trunc(e.o/60)),l+=":",l+=ri(Math.trunc(e.o%60)))),s&&(l+="["+e.zone.ianaName+"]"),l}var gD={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},hO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},pO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},yD=["year","month","day","hour","minute","second","millisecond"],fO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],mO=["year","ordinal","hour","minute","second","millisecond"];function _O(e){let n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!n)throw new Du(e);return n}function pD(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return _O(e)}}function vO(e){if(dp===void 0&&(dp=xt.now()),e.type!=="iana")return e.offset(dp);let n=e.name,t=jy.get(n);return t===void 0&&(t=e.offset(dp),jy.set(n,t)),t}function fD(e,n){let t=to(n.zone,xt.defaultZone);if(!t.isValid)return Fe.invalid(up(t));let i=Dt.fromObject(n),o,s;if(Ae(e.year))o=xt.now();else{for(let d of yD)Ae(e[d])&&(e[d]=gD[d]);let l=Iy(e)||Py(e);if(l)return Fe.invalid(l);let u=vO(t);[o,s]=P_(e,u,t)}return new Fe({ts:o,zone:t,loc:i,o:s})}function mD(e,n,t){let i=Ae(t.round)?!0:t.round,o=(l,u)=>(l=Nu(l,i||t.calendary?0:2,!0),n.loc.clone(t).relFormatter(t).format(l,u)),s=l=>t.calendary?n.hasSame(e,l)?0:n.startOf(l).diff(e.startOf(l),l).get(l):n.diff(e,l).get(l);if(t.unit)return o(s(t.unit),t.unit);for(let l of t.units){let u=s(l);if(Math.abs(u)>=1)return o(u,l)}return o(e>n?-0:0,t.units[t.units.length-1])}function _D(e){let n={},t;return e.length>0&&typeof e[e.length-1]=="object"?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}var dp,jy=new Map,Fe=class e{constructor(n){let t=n.zone||xt.defaultZone,i=n.invalid||(Number.isNaN(n.ts)?new cn("invalid input"):null)||(t.isValid?null:up(t));this.ts=Ae(n.ts)?xt.now():n.ts;let o=null,s=null;if(!i)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(t))[o,s]=[n.old.c,n.old.o];else{let u=io(n.o)&&!n.old?n.o:t.offset(this.ts);o=N_(this.ts,u),i=Number.isNaN(o.year)?new cn("invalid input"):null,o=i?null:o,s=i?null:u}this._zone=t,this.loc=n.loc||Dt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=o,this.o=s,this.isLuxonDateTime=!0}static now(){return new e({})}static local(){let[n,t]=_D(arguments),[i,o,s,l,u,d,f]=t;return fD({year:i,month:o,day:s,hour:l,minute:u,second:d,millisecond:f},n)}static utc(){let[n,t]=_D(arguments),[i,o,s,l,u,d,f]=t;return n.zone=ln.utcInstance,fD({year:i,month:o,day:s,hour:l,minute:u,second:d,millisecond:f},n)}static fromJSDate(n,t={}){let i=Ax(n)?n.valueOf():NaN;if(Number.isNaN(i))return e.invalid("invalid input");let o=to(t.zone,xt.defaultZone);return o.isValid?new e({ts:i,zone:o,loc:Dt.fromObject(t)}):e.invalid(up(o))}static fromMillis(n,t={}){if(io(n))return n<-uD||n>uD?e.invalid("Timestamp out of range"):new e({ts:n,zone:to(t.zone,xt.defaultZone),loc:Dt.fromObject(t)});throw new ui(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,t={}){if(io(n))return new e({ts:n*1e3,zone:to(t.zone,xt.defaultZone),loc:Dt.fromObject(t)});throw new ui("fromSeconds requires a numerical input")}static fromObject(n,t={}){n=n||{};let i=to(t.zone,xt.defaultZone);if(!i.isValid)return e.invalid(up(i));let o=Dt.fromObject(t),s=Pu(n,pD),{minDaysInFirstWeek:l,startOfWeek:u}=Ny(s,o),d=xt.now(),f=Ae(t.specificOffset)?i.offset(d):t.specificOffset,p=!Ae(s.ordinal),m=!Ae(s.year),g=!Ae(s.month)||!Ae(s.day),v=m||g,C=s.weekYear||s.weekNumber;if((v||p)&&C)throw new Kr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(g&&p)throw new Kr("Can't mix ordinal dates with month/day");let T=C||s.weekday&&!v,b,S,I=N_(d,f);T?(b=fO,S=hO,I=ip(I,l,u)):p?(b=mO,S=pO,I=D_(I)):(b=yD,S=gD);let U=!1;for(let ct of b){let Ce=s[ct];Ae(Ce)?U?s[ct]=S[ct]:s[ct]=I[ct]:U=!0}let j=T?Ix(s,l,u):p?Px(s):Iy(s),k=j||Py(s);if(k)return e.invalid(k);let De=T?Dy(s,l,u):p?wy(s):s,[$,yt]=P_(De,f,i),He=new e({ts:$,zone:i,o:yt,loc:o});return s.weekday&&v&&n.weekday!==He.weekday?e.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${He.toISO()}`):He.isValid?He:e.invalid(He.invalid)}static fromISO(n,t={}){let[i,o]=jx(n);return Bu(i,o,t,"ISO 8601",n)}static fromRFC2822(n,t={}){let[i,o]=$x(n);return Bu(i,o,t,"RFC 2822",n)}static fromHTTP(n,t={}){let[i,o]=qx(n);return Bu(i,o,t,"HTTP",t)}static fromFormat(n,t,i={}){if(Ae(n)||Ae(t))throw new ui("fromFormat requires an input string and a format");let{locale:o=null,numberingSystem:s=null}=i,l=Dt.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0}),[u,d,f,p]=cD(l,n,t);return p?e.invalid(p):Bu(u,d,i,`format ${t}`,n,f)}static fromString(n,t,i={}){return e.fromFormat(n,t,i)}static fromSQL(n,t={}){let[i,o]=Kx(n);return Bu(i,o,t,"SQL",n)}static invalid(n,t=null){if(!n)throw new ui("need to specify a reason the DateTime is invalid");let i=n instanceof cn?n:new cn(n,t);if(xt.throwOnInvalid)throw new __(i);return new e({invalid:i})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,t={}){let i=Hy(n,Dt.fromObject(t));return i?i.map(o=>o?o.val:null).join(""):null}static expandFormat(n,t={}){return zy(un.parseFormat(n),Dt.fromObject(t)).map(o=>o.val).join("")}static resetCache(){dp=void 0,jy.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Gy(this).weekYear:NaN}get weekNumber(){return this.isValid?Gy(this).weekNumber:NaN}get weekday(){return this.isValid?Gy(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Wy(this).weekday:NaN}get localWeekNumber(){return this.isValid?Wy(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Wy(this).weekYear:NaN}get ordinal(){return this.isValid?D_(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ss.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ss.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ss.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ss.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let n=864e5,t=6e4,i=wu(this.c),o=this.zone.offset(i-n),s=this.zone.offset(i+n),l=this.zone.offset(i-o*t),u=this.zone.offset(i-s*t);if(l===u)return[this];let d=i-l*t,f=i-u*t,p=N_(d,l),m=N_(f,u);return p.hour===m.hour&&p.minute===m.minute&&p.second===m.second&&p.millisecond===m.millisecond?[Ml(this,{ts:d}),Ml(this,{ts:f})]:[this]}get isInLeapYear(){return Al(this.year)}get daysInMonth(){return Iu(this.year,this.month)}get daysInYear(){return this.isValid?ms(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ll(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ll(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){let{locale:t,numberingSystem:i,calendar:o}=un.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:o}}toUTC(n=0,t={}){return this.setZone(ln.instance(n),t)}toLocal(){return this.setZone(xt.defaultZone)}setZone(n,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(n=to(n,xt.defaultZone),n.equals(this.zone))return this;if(n.isValid){let o=this.ts;if(t||i){let s=n.offset(this.ts),l=this.toObject();[o]=P_(l,s,n)}return Ml(this,{ts:o,zone:n})}else return e.invalid(up(n))}reconfigure({locale:n,numberingSystem:t,outputCalendar:i}={}){let o=this.loc.clone({locale:n,numberingSystem:t,outputCalendar:i});return Ml(this,{loc:o})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;let t=Pu(n,pD),{minDaysInFirstWeek:i,startOfWeek:o}=Ny(t,this.loc),s=!Ae(t.weekYear)||!Ae(t.weekNumber)||!Ae(t.weekday),l=!Ae(t.ordinal),u=!Ae(t.year),d=!Ae(t.month)||!Ae(t.day),f=u||d,p=t.weekYear||t.weekNumber;if((f||l)&&p)throw new Kr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&l)throw new Kr("Can't mix ordinal dates with month/day");let m;s?m=Dy(Te(Te({},ip(this.c,i,o)),t),i,o):Ae(t.ordinal)?(m=Te(Te({},this.toObject()),t),Ae(t.day)&&(m.day=Math.min(Iu(m.year,m.month),m.day))):m=wy(Te(Te({},D_(this.c)),t));let[g,v]=P_(m,this.o,this.zone);return Ml(this,{ts:g,o:v})}plus(n){if(!this.isValid)return this;let t=di.fromDurationLike(n);return Ml(this,dD(this,t))}minus(n){if(!this.isValid)return this;let t=di.fromDurationLike(n).negate();return Ml(this,dD(this,t))}startOf(n,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;let i={},o=di.normalizeUnit(n);switch(o){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break;case"milliseconds":break}if(o==="weeks")if(t){let s=this.loc.getStartOfWeek(),{weekday:l}=this;l<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(o==="quarters"){let s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(n,t){return this.isValid?this.plus({[n]:1}).startOf(n,t).minus(1):this}toFormat(n,t={}){return this.isValid?un.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,n):Vy}toLocaleString(n=ps,t={}){return this.isValid?un.create(this.loc.clone(t),n).formatDateTime(this):Vy}toLocaleParts(n={}){return this.isValid?un.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:o=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let l=n==="extended",u=Zy(this,l);return u+="T",u+=hD(this,l,t,i,o,s),u}toISODate({format:n="extended"}={}){return this.isValid?Zy(this,n==="extended"):null}toISOWeekDate(){return I_(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:o=!1,extendedZone:s=!1,format:l="extended"}={}){return this.isValid?(o?"T":"")+hD(this,l==="extended",t,n,i,s):null}toRFC2822(){return I_(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return I_(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Zy(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let o="HH:mm:ss.SSS";return(t||n)&&(i&&(o+=" "),t?o+="z":n&&(o+="ZZ")),I_(this,o,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():Vy}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};let t=Te({},this.c);return n.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,t="milliseconds",i={}){if(!this.isValid||!n.isValid)return di.invalid("created by diffing an invalid DateTime");let o=Te({locale:this.locale,numberingSystem:this.numberingSystem},i),s=Ox(t).map(di.normalizeUnit),l=n.valueOf()>this.valueOf(),u=l?this:n,d=l?n:this,f=rD(u,d,s,o);return l?f.negate():f}diffNow(n="milliseconds",t={}){return this.diff(e.now(),n,t)}until(n){return this.isValid?ys.fromDateTimes(this,n):this}hasSame(n,t,i){if(!this.isValid)return!1;let o=n.valueOf(),s=this.setZone(n.zone,{keepLocalTime:!0});return s.startOf(t,i)<=o&&o<=s.endOf(t,i)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;let t=n.base||e.fromObject({},{zone:this.zone}),i=n.padding?this<t?-n.padding:n.padding:0,o=["years","months","days","hours","minutes","seconds"],s=n.unit;return Array.isArray(n.unit)&&(o=n.unit,s=void 0),mD(t,this.plus(i),Ei(Te({},n),{numeric:"always",units:o,unit:s}))}toRelativeCalendar(n={}){return this.isValid?mD(n.base||e.fromObject({},{zone:this.zone}),this,Ei(Te({},n),{numeric:"auto",units:["years","months","days"],calendary:!0})):null}static min(...n){if(!n.every(e.isDateTime))throw new ui("min requires all arguments be DateTimes");return Ly(n,t=>t.valueOf(),Math.min)}static max(...n){if(!n.every(e.isDateTime))throw new ui("max requires all arguments be DateTimes");return Ly(n,t=>t.valueOf(),Math.max)}static fromFormatExplain(n,t,i={}){let{locale:o=null,numberingSystem:s=null}=i,l=Dt.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0});return Uy(l,n,t)}static fromStringExplain(n,t,i={}){return e.fromFormatExplain(n,t,i)}static buildFormatParser(n,t={}){let{locale:i=null,numberingSystem:o=null}=t,s=Dt.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return new cp(s,n)}static fromFormatParser(n,t,i={}){if(Ae(n)||Ae(t))throw new ui("fromFormatParser requires an input string and a format parser");let{locale:o=null,numberingSystem:s=null}=i,l=Dt.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0});if(!l.equals(t.locale))throw new ui(`fromFormatParser called with a locale of ${l}, but the format parser was created for ${t.locale}`);let{result:u,zone:d,specificOffset:f,invalidReason:p}=t.explainFromTokens(n);return p?e.invalid(p):Bu(u,d,i,`format ${t.format}`,n,f)}static get DATE_SHORT(){return ps}static get DATE_MED(){return Mh}static get DATE_MED_WITH_WEEKDAY(){return ry}static get DATE_FULL(){return kh}static get DATE_HUGE(){return Rh}static get TIME_SIMPLE(){return Fh}static get TIME_WITH_SECONDS(){return Yh}static get TIME_WITH_SHORT_OFFSET(){return Bh}static get TIME_WITH_LONG_OFFSET(){return zh}static get TIME_24_SIMPLE(){return Uh}static get TIME_24_WITH_SECONDS(){return Hh}static get TIME_24_WITH_SHORT_OFFSET(){return Vh}static get TIME_24_WITH_LONG_OFFSET(){return Gh}static get DATETIME_SHORT(){return Wh}static get DATETIME_SHORT_WITH_SECONDS(){return Zh}static get DATETIME_MED(){return jh}static get DATETIME_MED_WITH_SECONDS(){return $h}static get DATETIME_MED_WITH_WEEKDAY(){return oy}static get DATETIME_FULL(){return qh}static get DATETIME_FULL_WITH_SECONDS(){return Xh}static get DATETIME_HUGE(){return Jh}static get DATETIME_HUGE_WITH_SECONDS(){return Kh}};function Yu(e){if(Fe.isDateTime(e))return e;if(e&&e.valueOf&&io(e.valueOf()))return Fe.fromJSDate(e);if(e&&typeof e=="object")return Fe.fromObject(e);throw new ui(`Unknown datetime argument: ${e}, of type ${typeof e}`)}var L_=class{},kl=function(e){return e.exposureLine="exposure-line",e.exposureSquare="exposure-square",e.gradient="gradient",e.line="line",e.square="square",e}(kl||{});var oi=function(e){return e.point="point",e.shape="shape",e.wms="wms",e}(oi||{}),pe=function(e){return e.adminRegions="adminRegions",e.adminRegions1="adminRegions1",e.adminRegions2="adminRegions2",e.adminRegions3="adminRegions3",e.adminRegions4="adminRegions4",e.affectedPopulation="affected_population",e.buildings="buildings",e.communityNotifications="community_notifications",e.cropland="cropland",e.damSites="dams",e.droughtPhaseClassification="drought_phase_classification",e.evacuationCenters="evacuation_centers",e.female_head_hh="female_head_hh",e.flood_vulnerability_index="flood_vulnerability_index",e.floodExtent="flood_extent",e.forecastSeverity="forecast_severity",e.forecastTrigger="forecast_trigger",e.gauges="gauges",e.glofasStations="glofas_stations",e.grassland="grassland",e.healthSites="health_sites",e.hotspotGeneral="Hotspot_General",e.hotspotHealth="Hotspot_Health",e.hotspotNutrition="Hotspot_Nutrition",e.hotspotWater="Hotspot_Water",e.housesAffected="houses_affected",e.ipcForecastLong="IPC_forecast_long",e.ipcForecastShort="IPC_forecast_short",e.livestockBodyCondition="livestock_body_condition",e.malariaRisk="malaria_risk",e.malariaSuitableTemperature="malaria_suitable_temperature",e.motorizedTravelTimeToHealth="motorized_travel_time_to_health",e.population="population",e.population_affected="population_affected",e.population_affected_percentage="population_affected_percentage",e.population_over65="population_over65",e.population_u5="population_u5",e.population_u8="population_u8",e.populationTotal="populationTotal",e.potentialCases="potential_cases",e.potentialCases65="potential_cases_65",e.potentialCasesU5="potential_cases_U5",e.potentialCasesU9="potential_cases_U9",e.poverty_incidence="poverty_incidence",e.probWithin50Km="prob_within_50km",e.rainfall="rainfall",e.rainfallForecast="rainfall_forecast",e.redCrossBranches="red_cross_branches",e.roads="roads",e.roof_type="roof_type",e.schools="schools",e.totalHouses="total_houses",e.totalIdps="total_idps",e.travel_time_cities="travel_time_cities",e.trigger="trigger",e.typhoonTrack="typhoon_track",e.vegetationCondition="vegetation_condition",e.vulnerability_score="vulnerability_score",e.vulnerableGroup="vulnerable_group",e.vulnerableHousing="vulnerable_housing",e.walkingTravelTimeToHealth="walking_travel_time_to_health",e.wall_type="wall_type",e.waterpoints="waterpoints",e.windspeed="windspeed",e}(pe||{}),SD=[pe.buildings,pe.roads],Cs=function(e){return e.adminRegions1="Admin Level 1",e.adminRegions2="Admin Level 2",e.adminRegions3="Admin Level 3",e.adminRegions4="Admin Level 4",e.cropland="Cropland",e.damSites="Dam Sites",e.evacuationCenters="Evacuation Centers",e.floodExtent="Flood extent",e.glofasStations="Glofas stations",e.grassland="Grassland",e.healthSites="Health Sites",e.population="Population",e.populationTotal="Total Population",e.rainfallExtent="Rainfall extent",e.redCrossBranches="Red Cross branches",e.typhoonTrack="Typhoon track",e.waterpoints="Waterpoints",e}(Cs||{});var ht=function(e){return e.adminRegions="adminRegions",e.aggregates="aggregates",e.outline="outline",e.point="point",e.wms="wms",e}(ht||{});var Pr=function(e){return e.adminBoundaryPane="ibf-admin-boundaries",e.aggregatePane="ibf-aggregate",e.outline="outline",e.overlayPane="overlayPane",e.popupPane="popup",e.wmsPane="ibf-wms",e}(Pr||{});var tt=function(e){return e.adminArea="admin-area",e.adminArea2="admin-area2",e.adminArea3="admin-area3",e.event="event",e.national="national",e}(tt||{});var it=(()=>{class e{constructor(){this.disasterTypeSubject=new Zt(null),this.getDisasterTypeSubscription=()=>this.disasterTypeSubject.asObservable()}setDisasterType(t){this.disasterType=t,this.disasterTypeSubject.next(this.disasterType)}getCountryDisasterTypeSettings(t,i){return t?.countryDisasterSettings.find(o=>o.disasterType===i?.disasterType)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var zi=function(e){return e.day0="0-day",e.day1="1-day",e.day2="2-day",e.day3="3-day",e.day4="4-day",e.day5="5-day",e.day6="6-day",e.day7="7-day",e.month0="0-month",e.month1="1-month",e.month2="2-month",e.month3="3-month",e.month4="4-month",e.month5="5-month",e.month6="6-month",e.month7="7-month",e.month8="8-month",e.month9="9-month",e.month10="10-month",e.month11="11-month",e.hour0="0-hour",e.hour1="1-hour",e.hour2="2-hour",e.hour3="3-hour",e.hour4="4-hour",e.hour5="5-hour",e.hour6="6-hour",e.hour7="7-hour",e.hour8="8-hour",e.hour9="9-hour",e.hour10="10-hour",e.hour11="11-hour",e.hour12="12-hour",e.hour13="13-hour",e.hour14="14-hour",e.hour15="15-hour",e.hour16="16-hour",e.hour17="17-hour",e.hour18="18-hour",e.hour19="19-hour",e.hour20="20-hour",e.hour21="21-hour",e.hour22="22-hour",e.hour23="23-hour",e.hour24="24-hour",e.hour25="25-hour",e.hour26="26-hour",e.hour27="27-hour",e.hour28="28-hour",e.hour29="29-hour",e.hour30="30-hour",e.hour31="31-hour",e.hour32="32-hour",e.hour33="33-hour",e.hour34="34-hour",e.hour35="35-hour",e.hour36="36-hour",e.hour37="37-hour",e.hour38="38-hour",e.hour39="39-hour",e.hour40="40-hour",e.hour41="41-hour",e.hour42="42-hour",e.hour43="43-hour",e.hour44="44-hour",e.hour45="45-hour",e.hour46="46-hour",e.hour47="47-hour",e.hour48="48-hour",e.hour49="49-hour",e.hour50="50-hour",e.hour51="51-hour",e.hour52="52-hour",e.hour53="53-hour",e.hour54="54-hour",e.hour55="55-hour",e.hour56="56-hour",e.hour57="57-hour",e.hour58="58-hour",e.hour59="59-hour",e.hour60="60-hour",e.hour61="61-hour",e.hour62="62-hour",e.hour63="63-hour",e.hour64="64-hour",e.hour65="65-hour",e.hour66="66-hour",e.hour67="67-hour",e.hour68="68-hour",e.hour69="69-hour",e.hour70="70-hour",e.hour71="71-hour",e.hour72="72-hour",e.hour73="73-hour",e.hour74="74-hour",e.hour75="75-hour",e.hour76="76-hour",e.hour77="77-hour",e.hour78="78-hour",e.hour79="79-hour",e.hour80="80-hour",e.hour81="81-hour",e.hour82="82-hour",e.hour83="83-hour",e.hour84="84-hour",e.hour85="85-hour",e.hour86="86-hour",e.hour87="87-hour",e.hour88="88-hour",e.hour89="89-hour",e.hour90="90-hour",e.hour91="91-hour",e.hour92="92-hour",e.hour93="93-hour",e.hour94="94-hour",e.hour95="95-hour",e.hour96="96-hour",e.hour97="97-hour",e.hour98="98-hour",e.hour99="99-hour",e.hour100="100-hour",e.hour101="101-hour",e.hour102="102-hour",e.hour103="103-hour",e.hour104="104-hour",e.hour105="105-hour",e.hour106="106-hour",e.hour107="107-hour",e.hour108="108-hour",e.hour109="109-hour",e.hour110="110-hour",e.hour111="111-hour",e.hour112="112-hour",e.hour113="113-hour",e.hour114="114-hour",e.hour115="115-hour",e.hour116="116-hour",e.hour117="117-hour",e.hour118="118-hour",e.hour119="119-hour",e.hour120="120-hour",e.hour121="121-hour",e.hour122="122-hour",e.hour123="123-hour",e.hour124="124-hour",e.hour125="125-hour",e.hour126="126-hour",e.hour127="127-hour",e.hour128="128-hour",e.hour129="129-hour",e.hour130="130-hour",e.hour131="131-hour",e.hour132="132-hour",e.hour133="133-hour",e.hour134="134-hour",e.hour135="135-hour",e.hour136="136-hour",e.hour137="137-hour",e.hour138="138-hour",e.hour139="139-hour",e.hour140="140-hour",e.hour141="141-hour",e.hour142="142-hour",e.hour143="143-hour",e.hour144="144-hour",e.hour145="145-hour",e.hour146="146-hour",e.hour147="147-hour",e.hour148="148-hour",e.hour149="149-hour",e.hour150="150-hour",e.hour151="151-hour",e.hour152="152-hour",e.hour153="153-hour",e.hour154="154-hour",e.hour155="155-hour",e.hour156="156-hour",e.hour157="157-hour",e.hour158="158-hour",e.hour159="159-hour",e.hour160="160-hour",e.hour161="161-hour",e.hour162="162-hour",e.hour163="163-hour",e.hour164="164-hour",e.hour165="165-hour",e.hour166="166-hour",e.hour167="167-hour",e.hour168="168-hour",e}(zi||{}),Lr=function(e){return e["0-day"]="0",e["1-day"]="1",e["2-day"]="2",e["3-day"]="3",e["4-day"]="4",e["5-day"]="5",e["6-day"]="6",e["7-day"]="7",e["0-month"]="0",e["1-month"]="1",e["2-month"]="2",e["3-month"]="3",e["4-month"]="4",e["5-month"]="5",e["6-month"]="6",e["7-month"]="7",e["8-month"]="8",e["9-month"]="9",e["10-month"]="10",e["11-month"]="11",e["0-hour"]="0",e["1-hour"]="1",e["2-hour"]="2",e["3-hour"]="3",e["4-hour"]="4",e["5-hour"]="5",e["6-hour"]="6",e["7-hour"]="7",e["8-hour"]="8",e["9-hour"]="9",e["10-hour"]="10",e["11-hour"]="11",e["12-hour"]="12",e["13-hour"]="13",e["14-hour"]="14",e["15-hour"]="15",e["16-hour"]="16",e["17-hour"]="17",e["18-hour"]="18",e["19-hour"]="19",e["20-hour"]="20",e["21-hour"]="21",e["22-hour"]="22",e["23-hour"]="23",e["24-hour"]="24",e["25-hour"]="25",e["26-hour"]="26",e["27-hour"]="27",e["28-hour"]="28",e["29-hour"]="29",e["30-hour"]="30",e["31-hour"]="31",e["32-hour"]="32",e["33-hour"]="33",e["34-hour"]="34",e["35-hour"]="35",e["36-hour"]="36",e["37-hour"]="37",e["38-hour"]="38",e["39-hour"]="39",e["40-hour"]="40",e["41-hour"]="41",e["42-hour"]="42",e["43-hour"]="43",e["44-hour"]="44",e["45-hour"]="45",e["46-hour"]="46",e["47-hour"]="47",e["48-hour"]="48",e["49-hour"]="49",e["50-hour"]="50",e["51-hour"]="51",e["52-hour"]="52",e["53-hour"]="53",e["54-hour"]="54",e["55-hour"]="55",e["56-hour"]="56",e["57-hour"]="57",e["58-hour"]="58",e["59-hour"]="59",e["60-hour"]="60",e["61-hour"]="61",e["62-hour"]="62",e["63-hour"]="63",e["64-hour"]="64",e["65-hour"]="65",e["66-hour"]="66",e["67-hour"]="67",e["68-hour"]="68",e["69-hour"]="69",e["70-hour"]="70",e["71-hour"]="71",e["72-hour"]="72",e["73-hour"]="73",e["74-hour"]="74",e["75-hour"]="75",e["76-hour"]="76",e["77-hour"]="77",e["78-hour"]="78",e["79-hour"]="79",e["80-hour"]="80",e["81-hour"]="81",e["82-hour"]="82",e["83-hour"]="83",e["84-hour"]="84",e["85-hour"]="85",e["86-hour"]="86",e["87-hour"]="87",e["88-hour"]="88",e["89-hour"]="89",e["90-hour"]="90",e["91-hour"]="91",e["92-hour"]="92",e["93-hour"]="93",e["94-hour"]="94",e["95-hour"]="95",e["96-hour"]="96",e["97-hour"]="97",e["98-hour"]="98",e["99-hour"]="99",e["100-hour"]="100",e["101-hour"]="101",e["102-hour"]="102",e["103-hour"]="103",e["104-hour"]="104",e["105-hour"]="105",e["106-hour"]="106",e["107-hour"]="107",e["108-hour"]="108",e["109-hour"]="109",e["110-hour"]="110",e["111-hour"]="111",e["112-hour"]="112",e["113-hour"]="113",e["114-hour"]="114",e["115-hour"]="115",e["116-hour"]="116",e["117-hour"]="117",e["118-hour"]="118",e["119-hour"]="119",e["120-hour"]="120",e["121-hour"]="121",e["122-hour"]="122",e["123-hour"]="123",e["124-hour"]="124",e["125-hour"]="125",e["126-hour"]="126",e["127-hour"]="127",e["128-hour"]="128",e["129-hour"]="129",e["130-hour"]="130",e["131-hour"]="131",e["132-hour"]="132",e["133-hour"]="133",e["134-hour"]="134",e["135-hour"]="135",e["136-hour"]="136",e["137-hour"]="137",e["138-hour"]="138",e["139-hour"]="139",e["140-hour"]="140",e["141-hour"]="141",e["142-hour"]="142",e["143-hour"]="143",e["144-hour"]="144",e["145-hour"]="145",e["146-hour"]="146",e["147-hour"]="147",e["148-hour"]="148",e["149-hour"]="149",e["150-hour"]="150",e["151-hour"]="151",e["152-hour"]="152",e["153-hour"]="153",e["154-hour"]="154",e["155-hour"]="155",e["156-hour"]="156",e["157-hour"]="157",e["158-hour"]="158",e["159-hour"]="159",e["160-hour"]="160",e["161-hour"]="161",e["162-hour"]="162",e["163-hour"]="163",e["164-hour"]="164",e["165-hour"]="165",e["166-hour"]="166",e["167-hour"]="167",e["168-hour"]="168",e}(Lr||{}),gn=function(e){return e.day="day",e.month="month",e.hour="hour",e}(gn||{}),A_=function(e){return e.default="ccc dd",e.typhoon="dd ccc",e["flash-floods"]="dd ccc",e}(A_||{}),O_=function(e){return e.default="LLL yyyy",e.typhoon="ccc dd LLL",e["flash-floods"]="ccc dd LLL",e}(O_||{});var Vt=(()=>{class e{constructor(){this.placeCodeSubject=new Zt(null),this.placeCodeHoverSubject=new Zt(null),this.setPlaceCode=t=>{this.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChangeByPlaceCode),this.placeCodeSubject.next(t)},this.onPlaceCodeChangeByPlaceCode=t=>i=>{i&&t&&(t=i.placeCode===t.placeCode?null:t)},this.clearPlaceCode=()=>{this.placeCodeSubject.next(null)},this.setPlaceCodeHover=t=>{this.getPlaceCodeHoverSubscription().subscribe(this.onPlaceCodeHoverChangeByPlaceCode),this.placeCodeHoverSubject.next(t)},this.onPlaceCodeHoverChangeByPlaceCode=t=>i=>{i&&t&&(t=i.placeCode===t.placeCode?null:t)},this.clearPlaceCodeHover=()=>{this.placeCodeHoverSubject.next(null)}}getPlaceCodeSubscription(){return this.placeCodeSubject.asObservable()}getPlaceCodeHoverSubscription(){return this.placeCodeHoverSubject.asObservable()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var en=(()=>{class e{constructor(t,i,o,s,l){if(this.countryService=t,this.disasterTypeService=i,this.eventService=o,this.apiService=s,this.placeCodeService=l,this.startingState={today:Fe.now(),timeStepButtons:[],activeLeadTime:null},this.state=this.startingState,this.timelineStateSubject=new Zt(this.startingState),this.isLoadingSubject=new Zt(!1),this.isLoading=this.isLoadingSubject.asObservable().pipe(aC(GC)),this.isInitialized=!1,this.onCountryChange=u=>{this.resetState(),this.country=u},this.onDisasterTypeChange=u=>{this.resetState(),this.disasterType=u},this.onInitialEventStateChange=u=>{this.eventState=u,this.country&&this.disasterType&&this.eventState&&this.loadTimeStepButtons()},this.onManualEventStateChange=u=>{this.eventState=u},this.leadTimeToLeadTimeButton=(u,d)=>{let f=u.leadTime,p=this.eventState.events.filter(T=>T.disasterSpecificProperties?.typhoonNoLandfallYet).map(T=>T.firstLeadTime).includes(f),m=Lr[f],g=this.alertsAllEvents?.[f]==="1"||u.forecastAlert,v=!p||p&&u.undefinedLeadTime,C=g&&v;this.state.timeStepButtons[d]={date:this.getLeadTimeDate(f,m,u.undefinedLeadTime),unit:f.split("-")[1],value:f,forecastAlert:C,trigger:C&&(u.trigger||this.alertsAllEvents[`${f}-forecastTrigger`]==="1"),active:!1,eventNames:u.eventNames}},this.onAlertPerLeadTime=u=>{this.alertsAllEvents=u,this.state.timeStepButtons=[],this.getVisibleLeadTimes().map(this.leadTimeToLeadTimeButton);let f,p;this.eventState.event?(f=this.eventState.event.firstTriggerLeadTime??this.eventState.event.firstLeadTime,p=this.eventState.event.eventName):this.eventState.events?.length==0&&(f=this.getFallbackNoTriggerLeadTime(this.disasterType.disasterType)),this.setTimelineState(f,p)},this.onLastUploadDate=u=>{u.timestamp||u.date?this.state.today=Fe.fromISO(u.timestamp||u.date):this.state.today=Fe.now(),this.isLoadingSubject.next(!0),this.apiService.getAlertPerLeadTime(this.country.countryCodeISO3,this.disasterType.disasterType,null).subscribe(this.onAlertPerLeadTime)},this.deactivateLeadTimeButton=u=>u.active=!1,this.isInitialized){console.warn("\u26A0\uFE0F TimelineService: Attempted multiple initialization - skipping");return}console.log("\u{1F504} TimelineService: Initializing subscriptions"),this.isInitialized=!0,this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.initialEventStateSubscription=this.eventService.getInitialEventStateSubscription().subscribe(this.onInitialEventStateChange),this.manualEventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onManualEventStateChange)}ngOnDestroy(){this.countrySubscription&&this.countrySubscription.unsubscribe(),this.disasterTypeSubscription&&this.disasterTypeSubscription.unsubscribe(),this.initialEventStateSubscription&&this.initialEventStateSubscription.unsubscribe(),this.manualEventStateSubscription&&this.manualEventStateSubscription.unsubscribe()}resetState(){this.alertsAllEvents=null,this.eventState=this.eventService.nullState,this.state=this.startingState}getTimelineStateSubscription(){return this.timelineStateSubject.asObservable()}getFallbackNoTriggerLeadTime(t){return t===fi.floods?zi.day1:t===fi.flashFloods?zi.hour1:null}loadTimeStepButtons(){this.country&&this.disasterType&&this.eventState&&this.apiService.getLastUploadDate(this.country.countryCodeISO3,this.disasterType.disasterType).subscribe(this.onLastUploadDate)}setTimelineState(t,i){this.placeCodeService.clearPlaceCode(),this.placeCodeService.clearPlaceCodeHover(),this.state.activeLeadTime=t,this.state.timeStepButtons.forEach(this.deactivateLeadTimeButton);let o=this.state.timeStepButtons.filter(s=>s.eventNames.includes(i)&&s.forecastAlert);for(let s of o)s.active=!0;this.timelineStateSubject.next(this.state),this.isLoadingSubject.next(!1)}getLeadTimeDate(t,i,o){if(!o){if(t.includes(gn.day))return this.state.today.plus({days:Number(i)});if(t.includes(gn.hour))return this.state.today.plus({hours:Number(i)});if(t.includes(gn.month))return this.state.today.plus({months:Number(i)})}}getVisibleLeadTimes(){let t=[],i=[],o=this.disasterType.minLeadTime,s=Number(this.disasterType.maxLeadTime.split("-")[0]);for(;Number(o.split("-")[0])<=s;)i.push(o),o=o.replace(o.split("-")[0],String(Number(o.split("-")[0])+1));for(let u of this.eventState.events){let d=u.duration||1,f=u.firstTriggerLeadTime||u.firstLeadTime;for(let p=0;p<d;p++){let m=`${String(Number(f.split("-")[0])+p)}-${u.firstLeadTime.split("-")[1]}`;if(!t.map(g=>g.leadTime).includes(m))m.includes(this.disasterType.leadTimeUnit)&&t.push({leadTime:m,eventNames:[u.eventName],forecastAlert:!0,trigger:u.alertLevel===xn.TRIGGER,undefinedLeadTime:!1});else{let g=t.find(v=>v.leadTime===m);g.eventNames.push(u.eventName),g.trigger=g.trigger||u.alertLevel===xn.TRIGGER}}}for(let u of i)!t.map(d=>d.leadTime).includes(u)&&this.filterVisibleLeadTimePerDisasterType(this.disasterType,u,t)&&t.push({leadTime:u,eventNames:[],forecastAlert:!1,trigger:!1,undefinedLeadTime:!1});t.sort((u,d)=>Number(Lr[u.leadTime])>Number(Lr[d.leadTime])?1:-1);let l=this.eventState?.events.filter(u=>u.disasterSpecificProperties?.typhoonNoLandfallYet);if(l)for(let u of l)t.push({leadTime:u.firstLeadTime,eventNames:[u.eventName],forecastAlert:!0,trigger:u.alertLevel===xn.TRIGGER,undefinedLeadTime:!0});return t}getDateFromLeadTime(t){return this.getLeadTimeDate(t,Lr[t],!1).toISODate()}filterVisibleLeadTimePerDisasterType(t,i,o){return t.disasterType===fi.typhoon?[zi.hour0,zi.hour24,zi.hour48,zi.hour72,zi.hour96,zi.hour120,zi.hour144,zi.hour168].includes(i)&&!o.map(s=>this.getDateFromLeadTime(s.leadTime)).includes(this.getDateFromLeadTime(i)):t.disasterType===fi.flashFloods?[zi.hour0,zi.hour24,zi.hour48].includes(i)&&!o.map(s=>this.getDateFromLeadTime(s.leadTime)).includes(this.getDateFromLeadTime(i)):!0}static{this.\u0275fac=function(i){return new(i||e)(Se($e),Se(it),Se(Ue),Se(Di),Se(Vt))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var yn=(()=>{class e{static loadAdminLevelLabels(t){let i={adminLevel1:"",adminLevel2:"",adminLevel3:"",adminLevel4:""};return t.adminRegionLabels[1]&&(i.adminLevel1=t.adminRegionLabels[1].plural),t.adminRegionLabels[2]&&(i.adminLevel2=t.adminRegionLabels[2].plural),t.adminRegionLabels[3]&&(i.adminLevel3=t.adminRegionLabels[3].plural),t.adminRegionLabels[4]&&(i.adminLevel4=t.adminRegionLabels[4].plural),i}constructor(t,i,o,s){this.countryService=t,this.disasterTypeService=i,this.eventService=o,this.timelineService=s,this.adminLevelSubject=new Zt(Vn.adminLevel1),this.oldAdminLevel=null,this.adminLevelButtonsSubject=new Zt([]),this.adminLevelLabel=new a1,this.activeLayerNames=[],this.onCountryChange=l=>{this.country=l},this.onDisasterTypeChange=l=>{this.disasterType=l,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType),this.activeLayerNames=[]},this.onInitialEventStateChange=l=>{this.eventState=l,this.activeLayerNames=[]},this.onTimelineStateChange=l=>{this.timelineState=l,this.country&&this.disasterType&&this.eventState&&this.timelineState&&this.processAdminLevel()},this.getAdminLevelSubscription=()=>this.adminLevelSubject.asObservable(),this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.eventService.getInitialEventStateSubscription().subscribe(this.onInitialEventStateChange),this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange)}processAdminLevel(){this.allCountryAdminLevels=Object.keys(this.country.adminRegionLabels).map(t=>Number(t)),this.setAdminLevel(this.countryDisasterSettings.defaultAdminLevel),this.adminLevelLabel=e.loadAdminLevelLabels(this.country),this.adminLevelButtons=this.allCountryAdminLevels.map(t=>({adminLevel:t,disabled:!this.countryDisasterSettings.adminLevels.includes(t),label:this.country.adminRegionLabels[t].plural,buttonTypeClass:this.getButtonTypeClass(t)})),this.adminLevelButtonsSubject.next(this.adminLevelButtons)}getAdminLevelButtonsSubscription(){return this.adminLevelButtonsSubject.asObservable()}setAdminLevel(t){this.adminLevel=t,this.adminLevelSubject.next(this.adminLevel)}zoomInAdminLevel(){let t=this.countryDisasterSettings.adminLevels;this.adminLevel<t[t.length-1]&&(this.adminLevel=this.adminLevel+1,this.adminLevelSubject.next(this.adminLevel))}zoomOutAdminLevel(){this.adminLevel>this.countryDisasterSettings.defaultAdminLevel&&(this.adminLevel=this.adminLevel-1,this.adminLevelSubject.next(this.adminLevel))}zoomToDefaultAdminLevel(){this.adminLevel=this.countryDisasterSettings.defaultAdminLevel,this.adminLevelSubject.next(this.adminLevel)}getButtonTypeClass(t){let i="breadcrumb-",o=this.allCountryAdminLevels?.length;return o===1?`${i}alone`:t===Vn.adminLevel1?`${i}start`:Number(t)===o?`${i}end`:`${i}middle`}getAdminLevelType(t){return this.countryDisasterSettings.adminLevels?.length===1?rn.single:this.isDeepestAdminLevel(t)?rn.deepest:rn.higher}isDeepestAdminLevel(t){return this.countryDisasterSettings.adminLevels[this.countryDisasterSettings.adminLevels.length-1]===this.adminLevel&&t?.adminLevel===this.adminLevel}static{this.\u0275fac=function(i){return new(i||e)(Se($e),Se(it),Se(Ue),Se(en))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var sr=63710088e-1,TW={centimeters:sr*100,centimetres:sr*100,degrees:360/(2*Math.PI),feet:sr*3.28084,inches:sr*39.37,kilometers:sr/1e3,kilometres:sr/1e3,meters:sr,metres:sr,miles:sr/1609.344,millimeters:sr*1e3,millimetres:sr*1e3,nauticalmiles:sr/1852,radians:1,yards:sr*1.0936};function $y(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function qy(e,n,t){if(e!==null)for(var i,o,s,l,u,d,f,p=0,m=0,g,v=e.type,C=v==="FeatureCollection",T=v==="Feature",b=C?e.features.length:1,S=0;S<b;S++){f=C?e.features[S].geometry:T?e.geometry:e,g=f?f.type==="GeometryCollection":!1,u=g?f.geometries.length:1;for(var I=0;I<u;I++){var U=0,j=0;if(l=g?f.geometries[I]:f,l!==null){d=l.coordinates;var k=l.type;switch(p=t&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(n(d,m,S,U,j)===!1)return!1;m++,U++;break;case"LineString":case"MultiPoint":for(i=0;i<d.length;i++){if(n(d[i],m,S,U,j)===!1)return!1;m++,k==="MultiPoint"&&U++}k==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(i=0;i<d.length;i++){for(o=0;o<d[i].length-p;o++){if(n(d[i][o],m,S,U,j)===!1)return!1;m++}k==="MultiLineString"&&U++,k==="Polygon"&&j++}k==="Polygon"&&U++;break;case"MultiPolygon":for(i=0;i<d.length;i++){for(j=0,o=0;o<d[i].length;o++){for(s=0;s<d[i][o].length-p;s++){if(n(d[i][o][s],m,S,U,j)===!1)return!1;m++}j++}U++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(qy(l.geometries[i],n,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function gO(e,n={}){if(e.bbox!=null&&n.recompute!==!0)return e.bbox;let t=[1/0,1/0,-1/0,-1/0];return qy(e,i=>{t[0]>i[0]&&(t[0]=i[0]),t[1]>i[1]&&(t[1]=i[1]),t[2]<i[0]&&(t[2]=i[0]),t[3]<i[1]&&(t[3]=i[1])}),t}var M_=gO;function hp(e){if(e.length>1&&$y(e[0])&&$y(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return hp(e[0]);throw new Error("coordinates must only contain numbers")}var ED=Zl(zu(),1);var R_=function(e){return e.ifTrigger="if-trigger",e.no="no",e.yes="yes",e}(R_||{});var Li=function(e){return e.break0="break0",e.break1="break1",e.break2="break2",e.break3="break3",e.break4="break4",e.break5="break5",e}(Li||{});var yO=e=>e.sort((n,t)=>n-t),Uu=(e,n)=>{let t=yO(e),i=(t.length-1)*n,o=Math.floor(i),s=i-o;return t[o+1]!==void 0?t[o]+s*(t[o+1]-t[o]):t[o]},Xy=e=>e.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ");var F_=[{id:"disaster-risk-reduction",label:"Disaster Risk Reduction",description:"Disaster Risk Reduction (DRR) is a systematic approach to identifying, assessing and reducing the risks of disaster.<br><br>It aims to reduce socio-economic vulnerabilities to disaster as well as dealing with the environmental and other hazards that trigger them.",icon:"Disaster risk reduction.svg"},{id:"shelter",label:"Shelter",description:"Shelter and Non-Food Items includes provision of shelter materials and non-food household item packages.<br><br>The theme also covers Camp Coordination and Camp Management.<br><br>Long-term/permanent reconstruction/rebuilding of housing is not covered by this area of focus.",icon:"Shelter.svg"},{id:"livelihood",label:"Livelihoods & Basic Needs",description:"Disasters can take a devastating toll on people's food security livelihoods and their basic needs.<br><br>They can increase people's socio-economic vulnerability and seriously impact their ability to recover, which in turn affects their ability to cope with future shocks and stresses.<br><br>These actions are aimed at protecting these needs as preparation for forecasted hazards.",icon:"Livelihood.svg"},{id:"health",label:"Health",description:"Health includes emergency medical services, equipment and supplies; reproductive health; psycho-social support; mobile medical clinics; and disease control and surveillance.",icon:"Health.svg"},{id:"wash",label:"WASH",description:"Water, Sanitation, and Hygiene includes emergency provision of safe drinking water, hygiene and sanitation services, environmental sanitation and water supply, as well as hygiene promotion campaigns.",icon:"Water-Sanitation-and-Hygiene.svg"},{id:"inclusion",label:"Protection, Gender and Inclusion",description:"People affected by disasters can have very different experiences.<br>A person's sex, gender identity, age, physical ability, race, nationality and many other factors can influence how they are vulnerable to, and affected by disasters, conflicts and crises. They can also affect how they respond and recover.<br><br>Emergencies can also make existing inequalities worse. This can be seen in the increase in incidences of sexual and gender-based violence (SGBV), violence against children and trafficking in human beings during and after emergencies.<br><ul><li><strong>Protection</strong> - addressing violence and keeping people safe from harm</li><li><strong>Gender and diversity</strong> - addressing discrimination and understanding people's different needs, risks and capacities</li><li><strong>Inclusion</strong> - actively addressing exclusion by meaningfully involving and engaging excluded people in our work</li></ul>",icon:"Gender.svg"},{id:"migration",label:"Migration",description:"Migration and displacement pose some of the biggest humanitarian challenges of our time.<br><br>These actions are aimed at supporting people on the move with saving lives and preventing suffering, help people cope with the risks and challenges of migration and work to protect and restore their dignity.",icon:"Internally-displaced.svg"}];var Ts=(()=>{class e{constructor(t,i,o,s,l,u,d){this.countryService=t,this.apiService=i,this.timelineService=o,this.disasterTypeService=s,this.adminLevelService=l,this.eventService=u,this.placeCodeService=d,this.alertAreaSubject=new Zt([]),this.onCountryChange=f=>{this.country=f},this.onDisasterTypeChange=f=>{this.disasterType=f,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.onTimelineStateChange=f=>{this.timelineState=f},this.onEventStatusChange=f=>{this.eventState=f},this.onAdminLevelChange=()=>{this.placeCode?this.adminLevelService.getAdminLevelType(this.placeCode)!==rn.higher&&this.loadAlertAreas():this.loadAlertAreas()},this.onPlaceCodeChange=f=>{this.placeCode=f,this.loadAlertAreas()},this.processAlertAreas=f=>{this.alertAreas=f,this.alertAreas.sort((p,m)=>p.forecastSeverity===m.forecastSeverity?p.mainExposureValue>m.mainExposureValue?-1:1:p.forecastSeverity>m.forecastSeverity?-1:1),this.getActiveLeadtime()&&this.alertAreas.forEach(p=>{this.formatDates(p),this.filterEapActionsByMonth(p),p.eapActions.forEach(m=>{if(m.aofLabel=F_.find(g=>g.id===m.aof).label,m?.month&&Object.keys(m.month).length){m.monthLong={};for(let g of Object.keys(m.month))m.monthLong[g]=Fe.utc(2022,m.month[g][this.currentRainSeasonName],1).monthLong}else m.month=null})}),this.alertAreaSubject.next(this.alertAreas)},this.formatDates=f=>{f.firstIssuedDate=Fe.fromISO(f.firstIssuedDate).toFormat("cccc, dd LLLL")},this.filterEapActionsByMonth=f=>{if(!this.countryDisasterSettings.showMonthlyEapActions)return;let p=this.getRegion(f);this.currentRainSeasonName=f.eventName.split("_")[0];let m=[];this.currentRainSeasonName&&(m=this.countryDisasterSettings.droughtSeasonRegions[p][this.currentRainSeasonName].actionMonths);let g=C=>m.includes(C.month[p][this.currentRainSeasonName]),v=C=>m.indexOf(C.month[p][this.currentRainSeasonName])<=m.indexOf(this.getCurrentMonth());f.eapActions=f.eapActions.filter(C=>g(C)&&v(C)).sort((C,T)=>{let b=C.month?.[p]?.[this.currentRainSeasonName],S=T.month?.[p]?.[this.currentRainSeasonName];return m.indexOf(b)-m.indexOf(S)})},this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange),this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.adminLevelService.getAdminLevelSubscription().subscribe(this.onAdminLevelChange),this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStatusChange),this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange)}loadAlertAreas(){if(this.country&&this.disasterType&&this.timelineState&&this.eventState){let t=this.placeCode?.adminLevel||this.countryDisasterSettings.defaultAdminLevel;if(t>this.countryDisasterSettings.defaultAdminLevel)this.apiService.getAlertAreas(this.country.countryCodeISO3,this.disasterType.disasterType,t,this.eventState.event?.eventName).subscribe(this.processAlertAreas);else if(this.eventState?.event)this.processAlertAreas(this.eventState.event.alertAreas);else if(this.eventState?.events.length){let i=this.eventState.events.flatMap(o=>o.alertAreas||[]);this.processAlertAreas(i)}else this.processAlertAreas([])}}getAlertAreas(){return this.alertAreaSubject.asObservable()}getRegion(t){let i="National";if(!this.countryDisasterSettings.droughtRegions)return i;let o=Object.keys(this.countryDisasterSettings.droughtRegions),s=l=>this.countryDisasterSettings.droughtRegions[l].includes(t.placeCode);for(let l of o)if(s(l))return l}checkEapAction(t,i,o,s){return this.apiService.checkEapAction(t,this.country.countryCodeISO3,this.disasterType.disasterType,i,o,s)}getCurrentMonth(){return this.timelineState.today.month}getActiveLeadtime(){return this.timelineState.activeLeadTime}static{this.\u0275fac=function(i){return new(i||e)(Se($e),Se(Di),Se(en),Se(it),Se(yn),Se(Ue),Se(Vt))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Po=(()=>{class e{constructor(t,i,o,s,l,u,d,f){this.countryService=t,this.adminLevelService=i,this.timelineService=o,this.apiService=s,this.eventService=l,this.placeCodeService=u,this.disasterTypeService=d,this.alertAreaService=f,this.layerSubject=new Zt(null),this.layers=[],this.triggeredAreaColor="var(--ion-color-ibf-outline-red)",this.nonTriggeredAreaColor="var(--ion-color-ibf-no-alert-primary)",this.layerDataCache={},this.state={bounds:[[-20,-20],[20,20]],colorGradientNoAlert:["#F2F5FD","#D6E0FA","#A0B6EB","#3D66B4","#0E357B"],colorGradientAlert:["#F3F0FF","#C8BAF5","#A38CEC","#7B59E2","#4F22D7"],defaultFillColor:"#A0B6EB",strokeColor:"#969696",noDataColor:"#d3dae0",transparentColor:"transparent",defaultFillOpacity:.8,defaultWeight:1},this.onCountryChange=p=>{this.country=p},this.onDisasterTypeChange=p=>{this.disasterType=p},this.onAdminLevelChange=p=>{this.adminLevel=p},this.onTimelineStateChange=p=>{this.timelineState=p},this.onEventStateChange=p=>{this.eventState=p},this.onAlertAreasChange=p=>{this.alertAreas=p,this.loadLayers()},this.onPlaceCodeChange=p=>{this.placeCode=p},this.onLayerChange=p=>{p.forEach(m=>{let g=this.getActiveState(m);m.type===oi.wms?this.loadWmsLayer(m,g,m.leadTimeDependent):m.name===pe.adminRegions1?this.loadAdminRegionLayer(g,Vn.adminLevel1):m.name===pe.adminRegions2?this.loadAdminRegionLayer(g,Vn.adminLevel2):m.name===pe.adminRegions3?this.loadAdminRegionLayer(g,Vn.adminLevel3):m.name===pe.adminRegions4?this.loadAdminRegionLayer(g,Vn.adminLevel4):m.name===pe.typhoonTrack?this.loadTyphoonTrackLayer(m,g):m.type===oi.point&&this.loadPointDataLayer(m,g)})},this.addTyphoonTrackLayer=(p,m)=>{this.addLayer({name:pe.typhoonTrack,label:Cs.typhoonTrack,type:oi.point,group:ht.point,description:this.getPopoverText(p),active:this.adminLevelService.activeLayerNames.length?this.adminLevelService.activeLayerNames.includes(pe.typhoonTrack):!0,show:!0,data:m,viewCenter:!1,order:0})},this.loadPointDataLayer=(p,m)=>{this.country&&(m?this.apiService.getPointData(this.country.countryCodeISO3,p.name,this.disasterType.disasterType).subscribe(g=>{this.addPointDataLayer(p,g)}):this.addPointDataLayer(p,null))},this.addPointDataLayer=(p,m)=>{this.addLayer({name:p.name,label:p.label,type:oi.point,group:ht.point,description:this.getPopoverText(p),active:this.adminLevelService.activeLayerNames.length?this.adminLevelService.activeLayerNames.includes(p.name):this.getActiveState(p),show:!0,data:m,viewCenter:!1,order:1})},this.filterNonAggregateLayers=p=>p.group!==ht.aggregates&&p.group!==ht.outline,this.removeAggregateLayers=()=>{this.layers=this.layers.filter(this.filterNonAggregateLayers)},this.getLayerIndexByName=p=>this.layers.findIndex(m=>m.name===p),this.getLayerByName=p=>{let m=this.getLayerIndexByName(p);return m!==-1?this.layers[m]:null},this.isLayerActive=(p,m)=>{if(p.group===ht.outline&&this.eventState?.events?.length>0)return!0;let g=m.active!=null,v=p.name===m.name,C=p.group===m.group,T=p.active;return g&&C&&(v?T=m.active:p.group&&(T=!1)),T},this.isLayerShown=(p,m)=>m.show==null||p.name!==m.name?p.show:m.show,this.updateLayer=p=>m=>{this.addLayer({name:p.name,label:p.label,type:p.type,description:p.description,active:this.adminLevelService.activeLayerNames.length?this.adminLevelService.activeLayerNames.includes(p.name):p.active,viewCenter:!1,data:m,wms:p.wms,colorProperty:p.group===ht.adminRegions?this.disasterType.mainExposureIndicator:p.colorProperty,colorBreaks:p.colorBreaks,numberFormatMap:p.numberFormatMap,legendColor:p.legendColor,group:p.group,order:p.order,unit:p.unit,dynamic:p.dynamic,show:p.show})},this.toggleLayer=p=>{if(!p){console.warn("toggleLayer called with undefined/null layer");return}p.active=!p.active,this.adminLevelService.activeLayerNames=[],this.updateLayers(p)},this.updateLayers=p=>{this.layers.forEach(m=>{if(m.name===p.name||m.group===ht.aggregates||m.group===ht.outline){let g=this.getLayerDataCacheKey(m.name);if(m.active=this.isLayerActive(m,p),m.show=this.isLayerShown(m,p),this.layerDataCache[g]){let v=this.layerDataCache[g];this.updateLayer(m)(v)}else m.active&&this.getLayerData(m).subscribe(v=>{this.layerDataCache[g]=v,this.updateLayer(m)(v)})}})},this.getLayerData=p=>{let m;if(p.name===pe.typhoonTrack)m=this.apiService.getTyphoonTrack(this.country.countryCodeISO3,this.eventState?.event?.eventName).pipe(jl(1));else if(p.type===oi.point)m=this.apiService.getPointData(this.country.countryCodeISO3,p.name,this.disasterType.disasterType).pipe(jl(1));else if(p.name===pe.adminRegions)m=this.apiService.getAdminRegions(this.country.countryCodeISO3,this.disasterType.disasterType,this.timelineState.activeLeadTime,this.adminLevel,this.eventState?.event?.eventName,this.getPlaceCodeParent()).pipe(jl(1));else if(p.group===ht.adminRegions){let g=Number(p.name.slice(-1));m=this.apiService.getAdminRegions(this.country.countryCodeISO3,this.disasterType.disasterType,this.timelineState.activeLeadTime,g,this.eventState?.event?.eventName,this.getPlaceCodeParent()).pipe(jl(1))}else p.group===ht.aggregates||p.group===ht.outline?m=this.getCombineAdminRegionData(this.country.countryCodeISO3,this.disasterType.disasterType,this.adminLevel,p.name,p.dynamic,this.timelineState.activeLeadTime,this.eventState?.event?.eventName).pipe(jl(1)):m=iC(null);return m},this.getAdminRegionFillColor=(p,m)=>{let g=this.state.defaultFillColor,v=this.eventState.events?.length?this.state.colorGradientAlert:this.state.colorGradientNoAlert;switch(!0){case p===null:g=this.state.noDataColor;break;case(p<=m[Li.break1]||!m[Li.break1]):g=v[0];break;case(p<=m[Li.break2]||!m[Li.break2]):g=v[1];break;case(p<=m[Li.break3]||!m[Li.break3]):g=v[2];break;case(p<=m[Li.break4]||!m[Li.break4]):g=v[3];break;case p>m[Li.break4]:g=v[4];break;default:g=this.state.defaultFillColor}return g},this.getAdminRegionFillOpacity=p=>{let m=this.state.defaultFillOpacity;return p.group===ht.adminRegions&&(m=0),m},this.getAdminRegionWeight=(p,m)=>{let g=p.name===pe.adminRegions?this.state.defaultWeight:p.group===ht.adminRegions?this.adminLevelLowerThanDefault(p.name)?3:.33:this.state.defaultWeight;if(this.placeCode){let v=this.alertAreas.find(C=>C.placeCode===m);this.placeCode.placeCode===m&&!v&&(g=3)}return g},this.adminLevelLowerThanDefault=p=>p.slice(-1)<String(this.adminLevel),this.getAdminRegionColor=p=>p.group===ht.adminRegions?this.state.strokeColor:this.state.transparentColor,this.getColorThreshold=(p,m,g)=>{if(g){let T={break0:0};return Object.keys(g).forEach(b=>{g[String(Number(b)+1)]&&(T[`break${b}`]=g[b].valueHigh)}),T}let v=p.features.map(T=>typeof T.properties[m]<"u"?T.properties[m]:T.properties.indicators?.[m]).filter((T,b,S)=>S.indexOf(T)===b);return{break0:Uu(v,0),break1:Uu(v,.2),break2:Uu(v,.4),break3:Uu(v,.6),break4:Uu(v,.8)}},this.setOutlineLayerStyle=p=>{let m=p.colorProperty;return g=>{let v=g?.properties?.placeCode,C=g?.properties?.placeCodeParent,T=this.getAreaByPlaceCode(v,C),b=typeof g.properties[m]<"u"?g.properties[m]:g.properties.indicators[m],S=this.getOutlineColor(b),I=this.getOutlineWeight(b,v,C,T);return{opacity:1,color:S,fillOpacity:0,weight:I}}},this.setAdminRegionStyle=p=>{let m=p.colorProperty,g=this.getColorThreshold(p.data,m,p.colorBreaks);return v=>{let C=v.properties.placeCode,T=typeof v.properties[m]<"u"?v.properties[m]:typeof v.properties.indicators<"u"?v.properties.indicators[m]:"undefined";if(T!=="undefined"){let b=this.getAdminRegionFillColor(T,g),S=this.getAdminRegionFillOpacity(p),I=this.getAdminRegionWeight(p,C),U=this.getAdminRegionColor(p);return{fillColor:b,fillOpacity:S,weight:I,color:U,className:`admin-boundary ${p.name}`}}}},this.setAdminRegionMouseOverStyle=(p,m)=>{let g=this.getAreaByPlaceCode(p,m);return g?g.alertLevel!==xn.TRIGGER?{color:this.nonTriggeredAreaColor,weight:5}:{color:this.triggeredAreaColor,weight:5}:{color:this.layers.find(T=>T.name===pe.trigger).data.features.find(T=>T.properties.placeCode===p).properties.indicators[pe.trigger]?this.triggeredAreaColor:this.nonTriggeredAreaColor,weight:5}},this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.adminLevelService.getAdminLevelSubscription().subscribe(this.onAdminLevelChange),this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange),this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange),this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange),this.alertAreaService.getAlertAreas().subscribe(this.onAlertAreasChange)}getPopoverText(t){return t.description?.[this.country.countryCodeISO3]?.[this.disasterType.disasterType]?t.description[this.country.countryCodeISO3][this.disasterType.disasterType]:""}loadLayers(){this.layers=[],this.layerSubject.next(null),this.country&&this.disasterType&&this.eventState&&this.timelineState&&this.adminLevel&&this.apiService.getLayers(this.country.countryCodeISO3,this.disasterType.disasterType).subscribe(this.onLayerChange)}loadTyphoonTrackLayer(t,i){this.country&&(i?this.apiService.getTyphoonTrack(this.country.countryCodeISO3,this.eventState?.event?.eventName).subscribe(o=>{this.addTyphoonTrackLayer(t,o)}):this.addTyphoonTrackLayer(t,null))}loadAdminRegionLayer(t,i){t&&i===this.adminLevel?this.apiService.getAdminRegions(this.country.countryCodeISO3,this.disasterType.disasterType,this.timelineState.activeLeadTime,i,this.eventState?.event?.eventName,this.getPlaceCodeParent()).subscribe(o=>{this.addAdminRegionLayer(o,i)}):this.addAdminRegionLayer(null,i)}addAdminRegionLayer(t,i){this.addLayer({name:`${ht.adminRegions}${i.toString()}`,label:`${ht.adminRegions}${i.toString()}`,group:ht.adminRegions,type:oi.shape,description:"",active:this.adminLevel===i,show:!0,data:t,viewCenter:this.adminLevel===i,colorProperty:this.disasterType.mainExposureIndicator,order:0})}loadAggregateLayer(t){if(!(!this.country||!this.disasterType)&&t.countryDisasterTypes[this.country.countryCodeISO3][this.disasterType.disasterType]?.includes("map")){let i=this.adminLevelService.activeLayerNames.length?this.adminLevelService.activeLayerNames.includes(t.name):this.getActiveState(t);i&&this.timelineState?this.getCombineAdminRegionData(this.country.countryCodeISO3,this.disasterType.disasterType,this.adminLevel,t.name,t.dynamic,this.timelineState.activeLeadTime,this.eventState?.event?.eventName).subscribe(o=>{this.addAggregateLayer(t,o,i)}):this.addAggregateLayer(t,null,i)}}getActiveState(t){return t.active===R_.yes||t.active===R_.ifTrigger&&this.eventState?.events?.length>0}addAggregateLayer(t,i,o){this.addLayer({name:t.name,label:t.label,type:oi.shape,description:this.getPopoverText(t),active:o,show:!0,data:i,viewCenter:!0,colorProperty:t.name,colorBreaks:t.colorBreaks,numberFormatMap:t.numberFormatMap,legendColor:this.eventState.events?.length?this.state.colorGradientAlert[2]:this.state.colorGradientNoAlert[2],group:t.name===pe.trigger?ht.outline:ht.aggregates,order:20+t.order,dynamic:t.dynamic,unit:t.unit})}loadWmsLayer(t,i,o){this.addLayer({name:t.name,label:t.label,type:oi.wms,group:ht.wms,description:this.getPopoverText(t),active:i,show:!0,viewCenter:!1,data:null,legendColor:t.legendColor,order:10,wms:{url:Ut.geoserverUrl,leadTimeDependent:o,format:"image/png",version:"1.1.0",attribution:"510 Global",crs:ED.CRS.EPSG4326,transparent:!0,viewparams:`countryCodeISO3:${this.country.countryCodeISO3}`}})}addLayer(t){let{name:i,viewCenter:o,data:s}=t,l=this.getLayerDataCacheKey(t.name);if(s&&(this.layerDataCache[l]=s),o&&s?.features?.length){let d=M_(s);this.state.bounds=hp(d)?[[d[1],d[0]],[d[3],d[2]]]:this.state.bounds}this.layerSubject.next(t);let u=this.getLayerIndexByName(i);u>=0?this.layers.splice(u,1,t):this.layers.push(t)}getLayerSubscription(){return this.layerSubject.asObservable()}getLayerDataCacheKey(t){return t===pe.waterpoints?`${this.country.countryCodeISO3}_${t}`:`${this.country.countryCodeISO3}_${this.disasterType.disasterType}_${this.timelineState.activeLeadTime}_${this.adminLevel.toString()}_${t}`}getPlaceCodeParent(t){t=t||this.placeCode;let i=this.adminLevelService.getAdminLevelType(t);return i===rn.single?null:i===rn.deepest?t?.placeCodeParent.placeCode:t?.placeCode}getCombineAdminRegionData(t,i,o,s,l,u,d){let f;l?f=this.apiService.getAdminAreaDynamicData(t,o,u,s,i,d):f=this.apiService.getAdminAreaData(t,o,s);let p=new L_;p.name=pe.adminRegions;let m=this.getLayerData(p);return oC(f,m).pipe(nC(([g,v])=>{let C=[];for(let T of v?.features||[]){let b=g.find(S=>{if(T.properties?.placeCode===S.placeCode)return S.value});T.properties.indicators={},T.properties.indicators[s]=b?b.value:null,C.push(T)}return v}))}getOutlineWeight(t,i,o,s){let l=t===1?3:.33;return this.placeCode&&![i,o].includes(this.placeCode.placeCode)&&s&&(l=l/3),l}getOutlineColor(t){return t===1?this.triggeredAreaColor:this.nonTriggeredAreaColor}getAreaByPlaceCode(t,i){return this.alertAreas.find(o=>o.placeCode===t)||this.alertAreas.find(o=>o.placeCode===i)}static{this.\u0275fac=function(i){return new(i||e)(Se($e),Se(yn),Se(en),Se(Di),Se(Ue),Se(Vt),Se(it),Se(Ts))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var B_=(()=>{class e{constructor(t,i,o,s){this.countryService=t,this.eventService=i,this.placeCodeService=o,this.disasterTypeService=s,this.breadcrumbsMapViewSubject=new Zt(null),this.aggregatesMapViewSubject=new Zt(null),this.onCountryChange=l=>{this.country=l},this.onDisasterTypeChange=l=>{this.disasterType=l,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.onEventStateChange=l=>{this.eventState=l,this.updateBreadcrumbsMapView()},this.onPlacecodeChange=l=>{this.placeCode=l,this.updateBreadcrumbsMapView()},this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange),this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlacecodeChange)}setAggregatesMapView(t){this.aggregatesMapView=t,this.aggregatesMapViewSubject.next(this.aggregatesMapView)}setBreadcrumbsMapView(t){this.breadcrumbsMapView=t,this.breadcrumbsMapViewSubject.next(this.breadcrumbsMapView),this.setAggregatesMapView(t)}updateBreadcrumbsMapView(){if(!this.eventState?.event&&this.placeCode){this.setAggregatesMapView(tt.adminArea);return}if(!this.eventState?.event){this.setBreadcrumbsMapView(tt.national);return}if(this.eventState.event&&!this.placeCode){this.setBreadcrumbsMapView(tt.event);return}if(this.placeCode?.placeCodeParent?.placeCodeParent){this.setBreadcrumbsMapView(tt.adminArea3);return}if(this.placeCode?.placeCodeParent){this.setBreadcrumbsMapView(tt.adminArea2);return}if(this.placeCode){this.setBreadcrumbsMapView(tt.adminArea);return}this.setBreadcrumbsMapView(tt.national)}getBreadcrumbsMapViewSubscription(){return this.breadcrumbsMapViewSubject.asObservable()}getAggregatesMapViewSubscription(){return this.aggregatesMapViewSubject.asObservable()}static{this.\u0275fac=function(i){return new(i||e)(Se($e),Se(Ue),Se(Vt),Se(it))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var SO=(e,n)=>n.adminLevel;function CO(e,n){if(e&1){let t=Ye();D(0,"ion-button",6),oe("click",function(){_e(t);let o=B(2);return ve(o.clickBreadcrumbButton(o.mapViewEnum.national,o.currentMapView===o.mapViewEnum.national))}),M(1),Y(2,"translate"),x()}if(e&2){let t=B(2);Ti("selected",t.currentMapView===t.mapViewEnum.national),W("ngClass",t.currentMapView===t.mapViewEnum.national?"breadcrumb-alone":"breadcrumb-start")("disabled",t.disableNationalView()),E(),ne(" ",Z(2,5,"breadcrumbs.national-view")," ")}}function EO(e,n){if(e&1){let t=Ye();D(0,"ion-button",7),oe("click",function(){_e(t);let o=B(2);return ve(o.clickBreadcrumbButton(o.mapViewEnum.event,o.currentMapView===o.mapViewEnum.event))}),M(1),x()}if(e&2){let t=B(2);Ti("selected",t.currentMapView===t.mapViewEnum.event),W("ngClass",t.currentMapView===t.mapViewEnum.event?"breadcrumb-end":"breadcrumb-middle"),E(),ne(" ",t.eventState==null||t.eventState.event==null?null:t.eventState.event.eventName.split("_")[0]," ")}}function TO(e,n){if(e&1){let t=Ye();D(0,"ion-button",8),oe("click",function(){_e(t);let o=B(2);return ve(o.clickBreadcrumbButton(o.mapViewEnum.adminArea,o.currentMapView===o.mapViewEnum.adminArea))}),x()}if(e&2){let t=B(2);Ti("selected",t.currentMapView===t.mapViewEnum.adminArea),W("ngClass",t.currentMapView===t.mapViewEnum.adminArea?"breadcrumb-end":"breadcrumb-middle")("innerHtml",t.currentMapView===t.mapViewEnum.adminArea?t.placeCode==null?null:t.placeCode.placeCodeName:t.currentMapView===t.mapViewEnum.adminArea2?t.placeCode==null||t.placeCode.placeCodeParent==null?null:t.placeCode.placeCodeParent.placeCodeName:t.placeCode==null||t.placeCode.placeCodeParent==null||t.placeCode.placeCodeParent.placeCodeParent==null?null:t.placeCode.placeCodeParent.placeCodeParent.placeCodeName,ot)}}function bO(e,n){if(e&1){let t=Ye();D(0,"ion-button",9),oe("click",function(){_e(t);let o=B(2);return ve(o.clickBreadcrumbButton(o.mapViewEnum.adminArea2,o.currentMapView===o.mapViewEnum.adminArea2))}),x()}if(e&2){let t=B(2);Ti("selected",t.currentMapView===t.mapViewEnum.adminArea2),W("ngClass",t.currentMapView===t.mapViewEnum.adminArea2?"breadcrumb-end":"breadcrumb-middle")("innerHtml",t.currentMapView===t.mapViewEnum.adminArea2?t.placeCode==null?null:t.placeCode.placeCodeName:t.placeCode==null||t.placeCode.placeCodeParent==null?null:t.placeCode.placeCodeParent.placeCodeName,ot)}}function xO(e,n){if(e&1){let t=Ye();D(0,"ion-button",10),oe("click",function(){_e(t);let o=B(2);return ve(o.clickBreadcrumbButton(o.mapViewEnum.adminArea3,o.currentMapView===o.mapViewEnum.adminArea3))}),M(1),x()}if(e&2){let t=B(2);Ti("selected",t.currentMapView===t.mapViewEnum.adminArea3),E(),ne(" ",t.placeCode==null?null:t.placeCode.placeCodeName," ")}}function DO(e,n){if(e&1&&(D(0,"div",0),se(1,CO,3,7,"ion-button",1)(2,EO,2,4,"ion-button",2)(3,TO,1,4,"ion-button",3)(4,bO,1,4,"ion-button",4)(5,xO,2,3,"ion-button",5),x()),e&2){let t=B();E(),re(t.showBreadcrumb(t.mapViewEnum.national)?1:-1),E(),re(t.showBreadcrumb(t.mapViewEnum.event)?2:-1),E(),re(t.showBreadcrumb(t.mapViewEnum.adminArea)?3:-1),E(),re(t.showBreadcrumb(t.mapViewEnum.adminArea2)?4:-1),E(),re(t.showBreadcrumb(t.mapViewEnum.adminArea3)?5:-1)}}function wO(e,n){if(e&1){let t=Ye();D(0,"ion-button",12),oe("click",function(){let o=_e(t).$implicit,s=B(2);return ve(s.clickAdminLevelButton(o.adminLevel))}),M(1),x()}if(e&2){let t=n.$implicit,i=B(2);Ti("selected",i.isAdminLevelActive(t.adminLevel,t.disabled)),W("ngClass",t.buttonTypeClass)("disabled",t.disabled),E(),ne(" ",t.label," ")}}function NO(e,n){if(e&1&&(D(0,"div",0),Bt(1,wO,2,5,"ion-button",11,SO),Y(3,"async"),x()),e&2){let t=B();E(),zt(Z(3,0,t.adminLevelButtons))}}var Jy=[fi.flashFloods,fi.floods,fi.drought],bD=(()=>{class e{constructor(t,i,o,s,l,u,d,f,p,m){this.adminLevelService=t,this.mapService=i,this.analyticsService=o,this.eventService=s,this.placeCodeService=l,this.countryService=u,this.disasterTypeService=d,this.mapViewService=f,this.translate=p,this.changeDetectorRef=m,this.mapViewEnum=tt,this.adminLevel=Vn,this.onCountryChange=g=>{this.country=g},this.onDisasterTypeChange=g=>{this.disasterType=g,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.onMapViewChange=g=>{this.currentMapView=g,this.changeDetectorRef.detectChanges()},this.onEventChange=g=>{this.eventState=g},this.onPlaceCodeChange=g=>{this.placeCode=g,this.changeDetectorRef.detectChanges()},this.isAdminLevelActive=(g,v)=>{let C=this.getAdminLevelLayer(g);return C?C.active&&!v:!1}}ngOnInit(){this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.mapViewSubscription=this.mapViewService.getBreadcrumbsMapViewSubscription().subscribe(this.onMapViewChange),this.eventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onEventChange),this.placeCodeSubscription=this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange),this.adminLevelButtons=this.adminLevelService.getAdminLevelButtonsSubscription()}ngOnDestroy(){this.mapViewSubscription.unsubscribe(),this.eventStateSubscription.unsubscribe(),this.placeCodeSubscription.unsubscribe(),this.countrySubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe()}clickAdminLevelButton(t){let i=this.getAdminLevelLayer(t);if(!i){console.warn(`No layer found for admin level: ${t}`);return}t!==this.adminLevelService.adminLevel?(this.adminLevelService.activeLayerNames=this.mapService.layers.filter(o=>o.active&&o.group!==ht.adminRegions).map(o=>o.name),this.placeCodeService.clearPlaceCode(),this.adminLevelService.setAdminLevel(t),this.analyticsService.logEvent(pt.adminLevel,{adminLevel:t,adminLevelState:i.active,page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name})):this.mapService.toggleLayer(i)}getAdminLevelLabel(t){return this.adminLevelService.adminLevelLabel?String(this.adminLevelService.adminLevelLabel[Vn[t]]):`Admin Level ${Vn[t]}`}getAdminLevelLayerName(t){return`${ht.adminRegions}${Vn[t]}`}getAdminLevelLayer(t){let i=this.getAdminLevelLayerName(t);return this.mapService.getLayerByName(i)}useBreadcrumbs(t){return Jy.includes(t?.disasterType)}clickBreadcrumbButton(t,i){if(!i){if(t===tt.adminArea2&&(this.adminLevelService.getAdminLevelType(this.placeCode)!==rn.deepest&&this.adminLevelService.zoomOutAdminLevel(),this.placeCodeService.setPlaceCode(this.placeCode.placeCodeParent)),t===tt.adminArea&&(this.currentMapView===tt.adminArea3?(this.adminLevelService.zoomOutAdminLevel(),this.placeCodeService.setPlaceCode(this.placeCode.placeCodeParent.placeCodeParent)):this.currentMapView===this.mapViewEnum.adminArea2&&(this.adminLevelService.getAdminLevelType(this.placeCode)!==rn.deepest&&this.adminLevelService.zoomOutAdminLevel(),this.placeCodeService.setPlaceCode(this.placeCode.placeCodeParent))),t===tt.event){this.adminLevelService.zoomToDefaultAdminLevel(),this.placeCodeService?.clearPlaceCode();return}if(t===tt.national){this.eventService?.resetEvents();return}}}showBreadcrumb(t){if(t===tt.national)return[tt.adminArea,tt.adminArea2,tt.adminArea3,tt.event,tt.national].includes(this.currentMapView);if(t===tt.event)return[tt.adminArea,tt.adminArea2,tt.adminArea3,tt.event].includes(this.currentMapView);if(t===tt.adminArea)return[tt.adminArea,tt.adminArea2,tt.adminArea3].includes(this.currentMapView);if(t===tt.adminArea2)return[tt.adminArea2,tt.adminArea3].includes(this.currentMapView);if(t===tt.adminArea3)return[tt.adminArea3].includes(this.currentMapView)}disableNationalView(){return this.eventState?.events?.length===1}static{this.\u0275fac=function(i){return new(i||e)(P(yn),P(Po),P(Kt),P(Ue),P(Vt),P($e),P(it),P(B_),P(qt),P(co))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-admin-level"]],standalone:!1,decls:2,vars:1,consts:[[1,"ion-margin-start","breadcrumbs-container"],["size","small","data-testid","breadcrumb-national-view",1,"breadcrumb",3,"ngClass","selected","disabled"],["size","small","data-testid","breadcrumb-event-view",1,"breadcrumb",3,"ngClass","selected"],["size","small","data-testid","breadcrumb-admin-area-view",1,"breadcrumb",3,"ngClass","selected","innerHtml"],["size","small","data-testid","breadcrumb-admin-area-2-view",1,"breadcrumb",3,"ngClass","selected","innerHtml"],["size","small","data-testid","breadcrumb-admin-area-3-view",1,"breadcrumb","breadcrumb-end",3,"selected"],["size","small","data-testid","breadcrumb-national-view",1,"breadcrumb",3,"click","ngClass","disabled"],["size","small","data-testid","breadcrumb-event-view",1,"breadcrumb",3,"click","ngClass"],["size","small","data-testid","breadcrumb-admin-area-view",1,"breadcrumb",3,"click","ngClass","innerHtml"],["size","small","data-testid","breadcrumb-admin-area-2-view",1,"breadcrumb",3,"click","ngClass","innerHtml"],["size","small","data-testid","breadcrumb-admin-area-3-view",1,"breadcrumb","breadcrumb-end",3,"click"],["size","small","fill","solid",1,"breadcrumb",3,"ngClass","selected","disabled"],["size","small","fill","solid",1,"breadcrumb",3,"click","ngClass","disabled"]],template:function(i,o){i&1&&se(0,DO,6,5,"div",0)(1,NO,4,2,"div",0),i&2&&re(o.useBreadcrumbs(o.disasterType)?0:1)},dependencies:[ya,Ke,Sa,Oe],styles:[".breadcrumbs-container[_ngcontent-%COMP%]{margin-top:20px}.breadcrumb[_ngcontent-%COMP%]{font-size:12px;margin:0;--background: var(--ion-color-ibf-white);--border-color: var(--ion-color-ibf-no-alert-primary);--border-width: 2px;--border-style: solid;--color: var(--ion-color-ibf-no-alert-primary)}.breadcrumb.selected[_ngcontent-%COMP%]{--background: var(--ion-color-ibf-no-alert-primary);--color: var(--ion-color-ibf-white)}.breadcrumb-start[_ngcontent-%COMP%]{--border-width: 2px 0px 2px 2px;--border-radius: var(--breadcrumb-radius) 0 0 var(--breadcrumb-radius)}.breadcrumb-middle[_ngcontent-%COMP%]{--border-radius: 0;--border-width: 2px 0px 2px 2px}.breadcrumb-end[_ngcontent-%COMP%]{--border-radius: 0 var(--breadcrumb-radius) var(--breadcrumb-radius) 0}.breadcrumb-alone[_ngcontent-%COMP%]{--border-radius: var(--breadcrumb-radius)}"],changeDetection:0})}}return e})();var z_=class{},xn=function(e){return e.NONE="none",e.WARNINGLOW="warning-low",e.WARNINGMEDIUM="warning-medium",e.WARNING="warning",e.TRIGGER="trigger",e}(xn||{});var Ue=(()=>{class e{constructor(t,i,o){this.apiService=t,this.countryService=i,this.disasterTypeService=o,this.nullState={events:null,event:null},this.state=this.nullState,this.initialEventStateSubject=new Zt(this.nullState),this.manualEventStateSubject=new Zt(this.nullState),this.onCountryChange=s=>{this.country=s},this.onDisasterTypeChange=s=>{this.resetState(),this.disasterType=s,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType),this.getEvents()},this.onGetDisasterTypeEvent=(s,l)=>u=>{s.alertLevel=u.some(({alertLevel:d})=>d!=xn.NONE),l(s)},this.onEvents=s=>{this.apiService.getLastUploadDate(this.country.countryCodeISO3,this.disasterType.disasterType).subscribe(l=>{this.onLastUploadDate(l,s)})},this.onLastUploadDate=(s,l)=>{if(s.timestamp||s.date?this.today=Fe.fromISO(s.timestamp||s.date):this.today=Fe.now(),this.state.events=l,l.length)for(let u of this.state.events)u.firstIssuedDate=Fe.fromISO(u.firstIssuedDate).toFormat("cccc, dd LLLL"),u.userTriggerDate=Fe.fromISO(u.userTriggerDate).toFormat("cccc, dd LLLL"),u.firstLeadTimeLabel=Lr[u.firstLeadTime],u.timeUnit=u.firstLeadTime?.split("-")[1],u.firstLeadTimeDate=u.firstLeadTime?this.getFirstLeadTimeDate(u.firstLeadTime,u.timeUnit):null,u.firstTriggerLeadTimeDate=u.firstTriggerLeadTime?this.getFirstLeadTimeDate(u.firstTriggerLeadTime,u.timeUnit):null,u.duration=this.getEventDuration(u),u.nrAlertAreas=u.alertAreas?.length;if(this.sortEvents(),l.length===1)this.setEventInitially(l[0]);else if(this.skipNationalView(this.disasterType.disasterType)){let u=l.filter(f=>f.alertLevel===xn.TRIGGER),d=u.length?u[0]:l[0];this.setEventInitially(d)}else this.setEventInitially(null);this.setAlertState()},this.setAlertState=()=>{let s=document.getElementById("app");s&&(this.state.events?.length?(s.classList.remove("no-alert"),s.classList.add("alert")):(s.classList.remove("alert"),s.classList.add("no-alert")))},this.isLastUploadDateLate=(s,l)=>{let d=l.leadTimeUnit===gn.day?"days":l.leadTimeUnit===gn.hour?"hours":l.leadTimeUnit===gn.month?"months":null,f=l.leadTimeUnit===gn.hour?6:1,p=Date.now();return(d==="hours"?kb(p,s):d==="days"?Ob(p,s):d==="months"?Bb(p,s):null)>f+.1},this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange)}switchEvent(t){let i=this.state.events.find(o=>o.eventName===t);this.setEventManually(i)}resetEvents(){this.setEventInitially(null)}setEventInitially(t){this.state.event=t,this.initialEventStateSubject.next(this.state),this.setAlertState()}setEventManually(t){this.state.event=t,this.manualEventStateSubject.next(this.state),this.setAlertState()}getInitialEventStateSubscription(){return this.initialEventStateSubject.asObservable()}getManualEventStateSubscription(){return this.manualEventStateSubject.asObservable()}resetState(){this.state=this.nullState,this.resetEvents()}getEvents(){this.country&&this.disasterType&&this.apiService.getEvents(this.country.countryCodeISO3,this.disasterType.disasterType).subscribe(this.onEvents)}getTriggerByDisasterType(t,i,o){t&&i&&this.apiService.getEvents(t,i.disasterType).subscribe(this.onGetDisasterTypeEvent(i,o))}skipNationalView(t){return!Jy.includes(t)}sortEvents(){this.state.events?.sort((t,i)=>{let o=t.disasterSpecificProperties?.typhoonNoLandfallYet?1:0,s=i.disasterSpecificProperties?.typhoonNoLandfallYet?1:0;return o!==s?o-s:this.leadTimeToNumber(t.firstLeadTime)>this.leadTimeToNumber(i.firstLeadTime)||this.leadTimeToNumber(t.firstLeadTime)===this.leadTimeToNumber(i.firstLeadTime)&&(t.duration>i.duration||t.duration===i.duration&&(t.firstIssuedDate>i.firstIssuedDate||t.firstIssuedDate===i.firstIssuedDate&&t.eventName>i.eventName))?1:-1})}leadTimeToNumber(t){return Number(t?.split("-")[0])}getEventDuration(t){if(this.disasterType.disasterType!==fi.drought)return;let i=this.countryDisasterSettings?.droughtSeasonRegions;for(let o of Object.keys(i))if(t.eventName?.toLowerCase().includes(o.toLowerCase())){let s=Fe.fromISO(t.endDate).plus({months:Number(Lr[t.firstLeadTime])}).month;for(let l of Object.values(i[o])){let u=l.rainMonths;if(u.includes(s)){let d=u[u.length-1];return d>=s?d-s+1:12-s+d+1}}}}getFirstLeadTimeDate(t,i){let o=Number(Lr[t]),s=i===gn.month?this.today.plus({months:Number(o)}):i===gn.day?this.today.plus({days:Number(o)}):i===gn.hour?this.today.plus({hours:Number(o)}):null;if(i===gn.month)return s.toFormat("LLLL yyyy");if(i===gn.day)return s.toFormat("d LLLL yyyy");if(i===gn.hour)return s.toFormat("cccc, dd LLLL HH:00")}static{this.\u0275fac=function(i){return new(i||e)(Se(Di),Se($e),Se(it))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function PO(e,n){if(e&1&&X(0,"img",0),e&2){let t=n.$implicit;lo("src","assets/logos/",t,"",$l)}}var xD=(()=>{class e{constructor(t,i){this.countryService=t,this.disasterTypeService=i}ngOnInit(){this.country=this.countryService.getCountrySubscription(),this.disasterType=this.disasterTypeService.getDisasterTypeSubscription()}static{this.\u0275fac=function(i){return new(i||e)(P($e),P(it))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-logos"]],standalone:!1,decls:4,vars:4,consts:[["data-testid","logo-image",3,"src"]],template:function(i,o){if(i&1&&(Bt(0,PO,1,2,"img",0,Xl),Y(2,"async"),Y(3,"async")),i&2){let s;zt((s=Z(2,0,o.country))==null?null:s.countryLogos[(s=Z(3,2,o.disasterType))==null?null:s.disasterType])}},dependencies:[Sa],styles:["[_nghost-%COMP%]{display:flex}img[_ngcontent-%COMP%]{height:3rem;padding:2px}"]})}}return e})();var AO=e=>({active:e});function OO(e,n){if(e&1&&(D(0,"strong",3),M(1),x()),e&2){let t=B();W("ngClass",It(4,AO,t.disasterType==null?null:t.disasterType.alertLevel)),E(),gC(" ",t.showCountry?t.countryName:""," ",t.disasterType==null?null:t.disasterType.disasterType," ",t.activeTriggerMsg," ")}}function MO(e,n){if(e&1&&(D(0,"strong"),M(1),x()),e&2){let t=B();E(),ne(" ",t.showEnvironmentLabel(t.environmentConfiguration)," ")}}function kO(e,n){e&1&&(D(0,"div",4),X(1,"ion-icon",9),x())}function RO(e,n){if(e&1){let t=Ye();D(0,"ion-title",10),oe("click",function(){_e(t);let o=B();return ve(o.presentPopover())}),M(1),Y(2,"translate"),x(),D(3,"ion-title",11),oe("click",function(){_e(t);let o=B();return ve(o.presentPopover())}),M(4),x()}if(e&2){let t=B();E(),ne(" ",Z(2,2,"user-state.logged-in-as")," "),E(3),ne(" ",t.authService.displayName," ")}}function FO(e,n){if(e&1){let t=Ye();D(0,"ion-button",12),oe("click",function(){_e(t);let o=B();return ve(o.doLogout())}),M(1),Y(2,"translate"),x()}e&2&&(E(),ne(" ",Z(2,1,"user-state.log-out")," "))}var hZ=(()=>{class e{constructor(t,i,o,s,l,u,d,f,p){this.authService=t,this.loaderService=i,this.analyticsService=o,this.eventService=s,this.disasterTypeService=l,this.countryService=u,this.apiService=d,this.popoverController=f,this.translateService=p,this.showCountry=!0,this.environmentConfiguration=Ut.configuration,this.onCountryChange=m=>{m&&(this.countryName=m.countryName)},this.onDisasterTypeChange=m=>{if(this.disasterType=m,this.disasterType){let g=this.disasterType.alertLevel?"yes":"no";this.activeTriggerMsg=this.translateService.instant(`dashboard-page.triggered-message.${g}`)}}}ngOnInit(){this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange)}ngOnChanges(t){}showEnvironmentLabel(t){return t==="production"?this.translateService.instant("login-page.environment-label.production"):t==="stage"?this.translateService.instant("login-page.environment-label.stage"):t}doLogout(){this.analyticsService.logEvent(pt.logOut,{page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),this.loaderService.setLoader("logout",!1),this.authService.logout(),window.location.reload()}presentPopover(){return ft(this,null,function*(){(yield this.popoverController.create({component:s1,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0})).present()})}static{this.\u0275fac=function(i){return new(i||e)(P(Nn),P(HC),P(Kt),P(Ue),P(it),P($e),P(Di),P(at),P(qt))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-user-state"]],inputs:{isLoggedIn:"isLoggedIn",showCountry:"showCountry"},standalone:!1,features:[Et],decls:16,vars:4,consts:[[1,"ion-justify-content-between","ion-align-items-center"],["size","medium","data-testid","heading-display-name-label",1,"font-[Montserrat]","uppercase"],["data-testid","heading-display-name-span"],[3,"ngClass"],[1,"inline-block","align-middle"],[1,"ion-align-items-center"],["lines","none"],[1,"ion-no-padding"],["data-testid","user-state-logout-button","size","small","shape","round","fill","outline","strong","true","color","fiveten-navy-900","data-test","logout-button",1,"user-state-log-out-button"],["src","/assets/icons/Alert_Title_Purple.svg","slot","start"],["size","small",1,"ion-no-padding",3,"click"],["size","small","data-testid","user-display-name",1,"ion-no-padding","cursor-pointer","font-bold","hover:underline",3,"click"],["data-testid","user-state-logout-button","size","small","shape","round","fill","outline","strong","true","color","fiveten-navy-900","data-test","logout-button",1,"user-state-log-out-button",3,"click"]],template:function(i,o){i&1&&(D(0,"ion-grid")(1,"ion-row",0)(2,"div")(3,"ion-title",1)(4,"span",2),M(5," IBF PORTAL "),se(6,OO,2,6,"strong",3)(7,MO,2,1,"strong"),x(),se(8,kO,2,0,"div",4),x()(),D(9,"div",5)(10,"ion-row",5),X(11,"app-logos"),D(12,"ion-item",6)(13,"ion-col",7),se(14,RO,5,4),x()(),se(15,FO,3,3,"ion-button",8),x()()()()),i&2&&(E(6),re(o.isLoggedIn?6:7),E(2),re(o.isLoggedIn&&(o.disasterType!=null&&o.disasterType.alertLevel)?8:-1),E(6),re(o.isLoggedIn?14:-1),E(),re(o.isLoggedIn?15:-1))},dependencies:[ya,Ke,uo,jp,Ze,Ot,dr,Kp,xD,Oe],styles:[".top-bar-button[_ngcontent-%COMP%]{height:40px;margin-top:0;margin-bottom:0;margin-left:0;padding-left:0}.active[_ngcontent-%COMP%]{background-color:var(--ion-color-ibf-primary-contrast);color:var(--ion-color-ibf-primary)}.user-state-log-out-button[_ngcontent-%COMP%]::part(native){border-color:var(--ion-color-fiveten-navy-300)}"]})}}return e})();var Hu=Zl(zu(),1),Ui=class{static mapToArray(n){let t=[];for(let i in n)n.hasOwnProperty(i)&&t.push(n[i]);return t}static handleEvent(n,t,i){0<t.observers.length&&n.run(()=>{t.emit(i)})}},Qy=(()=>{class e{constructor(t,i){this.element=t,this.zone=i,this.DEFAULT_ZOOM=1,this.DEFAULT_CENTER=(0,Hu.latLng)(38.907192,-77.036871),this.DEFAULT_FPZ_OPTIONS={},this.fitBoundsOptions=this.DEFAULT_FPZ_OPTIONS,this.panOptions=this.DEFAULT_FPZ_OPTIONS,this.zoomOptions=this.DEFAULT_FPZ_OPTIONS,this.zoomPanOptions=this.DEFAULT_FPZ_OPTIONS,this.options={},this.mapReady=new Oi,this.zoomChange=new Oi,this.centerChange=new Oi,this.onClick=new Oi,this.onDoubleClick=new Oi,this.onMouseDown=new Oi,this.onMouseUp=new Oi,this.onMouseMove=new Oi,this.onMouseOver=new Oi,this.onMouseOut=new Oi,this.onMapMove=new Oi,this.onMapMoveStart=new Oi,this.onMapMoveEnd=new Oi,this.onMapZoom=new Oi,this.onMapZoomStart=new Oi,this.onMapZoomEnd=new Oi}ngOnInit(){this.zone.runOutsideAngular(()=>{this.map=(0,Hu.map)(this.element.nativeElement,this.options),this.addMapEventListeners()}),this.center!=null&&this.zoom!=null&&this.setView(this.center,this.zoom),this.fitBounds!=null&&this.setFitBounds(this.fitBounds),this.maxBounds!=null&&this.setMaxBounds(this.maxBounds),this.minZoom!=null&&this.setMinZoom(this.minZoom),this.maxZoom!=null&&this.setMaxZoom(this.maxZoom),this.doResize(),this.mapReady.emit(this.map)}ngOnChanges(t){t.zoom&&t.center&&this.zoom!=null&&this.center!=null?this.setView(t.center.currentValue,t.zoom.currentValue):t.zoom?this.setZoom(t.zoom.currentValue):t.center&&this.setCenter(t.center.currentValue),t.fitBounds&&this.setFitBounds(t.fitBounds.currentValue),t.maxBounds&&this.setMaxBounds(t.maxBounds.currentValue),t.minZoom&&this.setMinZoom(t.minZoom.currentValue),t.maxZoom&&this.setMaxZoom(t.maxZoom.currentValue)}ngOnDestroy(){this.map!=null&&this.map.remove()}getMap(){return this.map}onResize(){this.delayResize()}addMapEventListeners(){let t=(o,s)=>{this.map.on(o,s)};t("click",o=>Ui.handleEvent(this.zone,this.onClick,o)),t("dblclick",o=>Ui.handleEvent(this.zone,this.onDoubleClick,o)),t("mousedown",o=>Ui.handleEvent(this.zone,this.onMouseDown,o)),t("mouseup",o=>Ui.handleEvent(this.zone,this.onMouseUp,o)),t("mouseover",o=>Ui.handleEvent(this.zone,this.onMouseOver,o)),t("mouseout",o=>Ui.handleEvent(this.zone,this.onMouseOut,o)),t("mousemove",o=>Ui.handleEvent(this.zone,this.onMouseMove,o)),t("zoomstart",o=>Ui.handleEvent(this.zone,this.onMapZoomStart,o)),t("zoom",o=>Ui.handleEvent(this.zone,this.onMapZoom,o)),t("zoomend",o=>Ui.handleEvent(this.zone,this.onMapZoomEnd,o)),t("movestart",o=>Ui.handleEvent(this.zone,this.onMapMoveStart,o)),t("move",o=>Ui.handleEvent(this.zone,this.onMapMove,o)),t("moveend",o=>Ui.handleEvent(this.zone,this.onMapMoveEnd,o));let i=()=>{let o=this.map.getZoom();o!==this.zoom&&(this.zoom=o,Ui.handleEvent(this.zone,this.zoomChange,o));let s=this.map.getCenter();(s!=null||this.center!=null)&&((s==null||this.center==null)&&s!==this.center||s.lat!==this.center.lat||s.lng!==this.center.lng)&&(this.center=s,Ui.handleEvent(this.zone,this.centerChange,s))};t("moveend",i),t("zoomend",i)}doResize(){this.zone.runOutsideAngular(()=>{this.map!=null&&this.map.invalidateSize({})})}delayResize(){this.resizeTimer!=null&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.doResize.bind(this),200)}setView(t,i){this.map!=null&&t!=null&&i!=null&&this.map.setView(t,i,this.zoomPanOptions)}setZoom(t){this.map!=null&&t!=null&&this.map.setZoom(t,this.zoomOptions)}setCenter(t){this.map!=null&&t!=null&&this.map.panTo(t,this.panOptions)}setFitBounds(t){this.map!=null&&t!=null&&this.map.fitBounds(t,this.fitBoundsOptions)}setMaxBounds(t){this.map!=null&&t!=null&&this.map.setMaxBounds(t)}setMinZoom(t){this.map!=null&&t!=null&&this.map.setMinZoom(t)}setMaxZoom(t){this.map!=null&&t!=null&&this.map.setMaxZoom(t)}static{this.\u0275fac=function(i){return new(i||e)(P(cC),P(Tv))}}static{this.\u0275dir=Ap({type:e,selectors:[["","leaflet",""]],hostBindings:function(i,o){i&1&&oe("resize",function(){return o.onResize()},!1,dC)},inputs:{fitBoundsOptions:[0,"leafletFitBoundsOptions","fitBoundsOptions"],panOptions:[0,"leafletPanOptions","panOptions"],zoomOptions:[0,"leafletZoomOptions","zoomOptions"],zoomPanOptions:[0,"leafletZoomPanOptions","zoomPanOptions"],options:[0,"leafletOptions","options"],zoom:[0,"leafletZoom","zoom"],center:[0,"leafletCenter","center"],fitBounds:[0,"leafletFitBounds","fitBounds"],maxBounds:[0,"leafletMaxBounds","maxBounds"],minZoom:[0,"leafletMinZoom","minZoom"],maxZoom:[0,"leafletMaxZoom","maxZoom"]},outputs:{mapReady:"leafletMapReady",zoomChange:"leafletZoomChange",centerChange:"leafletCenterChange",onClick:"leafletClick",onDoubleClick:"leafletDoubleClick",onMouseDown:"leafletMouseDown",onMouseUp:"leafletMouseUp",onMouseMove:"leafletMouseMove",onMouseOver:"leafletMouseOver",onMouseOut:"leafletMouseOut",onMapMove:"leafletMapMove",onMapMoveStart:"leafletMapMoveStart",onMapMoveEnd:"leafletMapMoveEnd",onMapZoom:"leafletMapZoom",onMapZoomStart:"leafletMapZoomStart",onMapZoomEnd:"leafletMapZoomEnd"},standalone:!1,features:[Et]})}}return e})(),Ky=class{constructor(n){this.leafletDirective=n}init(){}getMap(){return this.leafletDirective.getMap()}},DD=(()=>{class e{constructor(t,i){this.zone=i,this.onAdd=new Oi,this.onRemove=new Oi,this.leafletDirective=new Ky(t)}ngOnInit(){this.leafletDirective.init()}ngOnDestroy(){this.layer!=null&&(this.removeLayerEventListeners(this.layer),this.layer.remove())}ngOnChanges(t){if(t.layer){let i=t.layer.previousValue,o=t.layer.currentValue;this.zone.runOutsideAngular(()=>{i!=null&&(this.removeLayerEventListeners(i),i.remove()),o!=null&&(this.addLayerEventListeners(o),this.leafletDirective.getMap().addLayer(o))})}}addLayerEventListeners(t){this.onAddLayerHandler=i=>Ui.handleEvent(this.zone,this.onAdd,i),t.on("add",this.onAddLayerHandler),this.onRemoveLayerHandler=i=>Ui.handleEvent(this.zone,this.onRemove,i),t.on("remove",this.onRemoveLayerHandler)}removeLayerEventListeners(t){t.off("add",this.onAddLayerHandler),t.off("remove",this.onRemoveLayerHandler)}static{this.\u0275fac=function(i){return new(i||e)(P(Qy),P(Tv))}}static{this.\u0275dir=Ap({type:e,selectors:[["","leafletLayer",""]],inputs:{layer:[0,"leafletLayer","layer"]},outputs:{onAdd:"leafletLayerAdd",onRemove:"leafletLayerRemove"},standalone:!1,features:[Et]})}}return e})();var wD=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=_a({type:e})}static{this.\u0275inj=ma({})}}return e})();var BO=Zl(zu(),1),TZ=Zl(ID(),1);var PD=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=_a({type:e})}static{this.\u0275inj=ma({})}}return e})();var LD=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=_a({type:e})}static{this.\u0275inj=ma({imports:[Bp]})}}return e})();var AD=(()=>{class e{constructor(t,i,o,s){this.countryService=t,this.disasterTypeService=i,this.analyticsService=o,this.eventService=s,this.onCountryChange=l=>{this.country=l},this.onDisasterTypeChange=l=>{this.disasterType=l,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange)}ngOnDestroy(){this.countrySubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe()}ngOnChanges(t){}btnAction(){this.analyticsService.logEvent(pt.aboutTrigger,{page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),this.country&&this.disasterType&&window.open(this.countryDisasterSettings?.eapLink)}static{this.\u0275fac=function(i){return new(i||e)(P($e),P(it),P(Kt),P(Ue))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-about-btn"]],inputs:{btnLabel:"btnLabel"},standalone:!1,features:[Et],decls:2,vars:1,consts:[["data-testid","chat-about-trigger","size","small","strong","true","expand","full","shape","round","fill","outline","color","fiveten-neutral-900",1,"about-btn-button",3,"click"]],template:function(i,o){i&1&&(D(0,"ion-button",0),oe("click",function(){return o.btnAction()}),M(1),x()),i&2&&(E(),ne(" ",o.btnLabel,`
`))},dependencies:[Ke],styles:[".about-btn-button[_ngcontent-%COMP%]::part(native){background:var(--ion-color-fiveten-neutral-0);border-color:var(--ion-color-fiveten-navy-300)}"]})}}return e})();var Vu=(()=>{class e{constructor(t){this.popoverController=t}ngOnInit(){setTimeout(()=>ft(this,null,function*(){(yield this.popoverController.getTop())&&this.closePopover()}),1e4)}ngOnChanges(t){}closePopover(){this.popoverController.dismiss()}static{this.\u0275fac=function(i){return new(i||e)(P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-action-result-popover"]],inputs:{message:"message"},standalone:!1,features:[Et],decls:14,vars:7,consts:[[1,"popover-window-card"],["color","ibf-primary"],[1,"ion-padding-top","ion-text-center"],["lines","none"],["lines","none",2,"width","100%"],[1,"ion-text-end",2,"width","100%"],["fill","clear",2,"text-transform","uppercase",3,"click"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-card-title"),M(3),Y(4,"translate"),x()(),D(5,"ion-card-content",2)(6,"ion-item",3)(7,"span"),M(8),x()(),D(9,"ion-item",4)(10,"div",5)(11,"ion-button",6),oe("click",function(){return o.closePopover()}),M(12),Y(13,"translate"),x()()()()()),i&2&&(E(3),be(Z(4,3,"chat-component.common.save-actions.header")),E(5),ne(" ",o.message," "),E(4),ne(" ",Z(13,5,"chat-component.common.save-actions.prompt-button-label")," "))},dependencies:[Ke,bi,xi,Zi,ji,Ot,Oe],encapsulation:2})}}return e})();var OD=(()=>{class e{constructor(t,i,o){this.countryService=t,this.disasterTypeService=i,this.router=o,this.onCountryChange=s=>{this.country=s},this.onDisasterTypeChange=s=>{this.disasterType=s},this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange)}ngOnDestroy(){this.countrySubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe()}goToPage(){let t=this.router.serializeUrl(this.router.createUrlTree(["/log"],{queryParams:{countryCodeISO3:this.country.countryCodeISO3,disasterType:this.disasterType.disasterType}}));window.open(t,"_blank")}static{this.\u0275fac=function(i){return new(i||e)(P($e),P(it),P(PC))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-activation-log-button"]],standalone:!1,decls:3,vars:3,consts:[["data-testid","activation-log-button","size","small","strong","true","expand","full","shape","round","fill","outline","color","fiveten-neutral-900",1,"activation-log-button",3,"click"]],template:function(i,o){i&1&&(D(0,"ion-button",0),oe("click",function(){return o.goToPage()}),M(1),Y(2,"translate"),x()),i&2&&(E(),ne(" ",Z(2,1,"activation-page.page-title"),`
`))},dependencies:[Ke,Oe],styles:[".activation-log-button[_ngcontent-%COMP%]::part(native){background:var(--ion-color-fiveten-neutral-0);border-color:var(--ion-color-fiveten-navy-300)}"]})}}return e})();var MD=[{type:oi.point,name:pe.waterpoints,label:Cs.waterpoints,description:"waterpoints",active:!0,show:!0,viewCenter:!1,order:1},{type:oi.point,name:pe.redCrossBranches,label:Cs.redCrossBranches,description:"redCrossBranches",active:!0,show:!0,viewCenter:!1,order:2}];var Gu=(()=>{class e{constructor(t){this.popoverController=t,this.layer=MD[0]}closePopover(){this.popoverController.dismiss()}static{this.\u0275fac=function(i){return new(i||e)(P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-layer-control-info-popover"]],standalone:!1,decls:6,vars:2,consts:[[1,"popover-window-card"],["color","ibf-primary"],["name","close-circle","size","large","data-testid","close-matrix-icon",1,"popover-close-button",3,"click"],["data-testid","layer-info-title"],["data-testid","layer-info-content",1,"ion-padding-top",3,"innerHTML"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-icon",2),oe("click",function(){return o.closePopover()}),x(),D(3,"ion-card-title",3),M(4),x()(),X(5,"ion-card-content",4),x()),i&2&&(E(4),ne(" ",o.layer.label," "),E(),W("innerHTML",o.layer.description,ot))},dependencies:[bi,xi,Zi,ji,Ze],encapsulation:2})}}return e})();var Hn=function(e){return e.decimal0="decimal0",e.decimal2="decimal2",e.perc="perc",e}(Hn||{});var Wu=function(e){return e.Alert="alert",e.NoAlert="no-alert",e}(Wu||{}),H_=(()=>{class e{constructor(t,i,o,s,l,u,d,f,p){if(this.countryService=t,this.adminLevelService=i,this.timelineService=o,this.apiService=s,this.mapService=l,this.disasterTypeService=u,this.eventService=d,this.alertAreaService=f,this.placeCodeService=p,this.indicatorSubject=new Zt([]),this.indicators=[],this.aggregates=[],this.isInitialized=!1,this.onCountryChange=m=>{this.country=m},this.onDisasterTypeChange=m=>{this.disasterType=m,this.country},this.onTimelineStateChange=m=>{this.timelineState=m},this.onAdminLevelChange=m=>{this.adminLevel=m},this.onEventStateChange=m=>{this.eventState=m},this.onPlaceCodeChange=m=>{this.placeCode=m},this.onAlertAreasChange=m=>{this.alertAreas=m,this.loadMetadataAndAggregates()},this.onIndicatorChange=m=>{this.indicators=m,this.mapService.removeAggregateLayers(),this.indicators.forEach(g=>{this.mapService.loadAggregateLayer(g)}),this.indicatorSubject.next(this.indicators),this.loadAggregateInformation()},this.onEachIndicatorByFeatureAndAggregate=(m,g)=>v=>{let C=m.records.find(I=>I.indicator===v.name);C&&(g[v.name]=C.value);let T=Number(g[pe.trigger]),b=Number(g[this.disasterType.mainExposureIndicator]),S=this.eventState.events.length>0;T===1||b>0&&S?g.areaStatus=Wu.Alert:g.areaStatus=Wu.NoAlert},this.onEachPlaceCode=m=>{let g={placeCode:m.placeCode,placeCodeParent:m.placeCodeParent};return this.indicators.forEach(this.onEachIndicatorByFeatureAndAggregate(m,g)),g},this.onAggregateData=m=>{let g=this.aggregateOnPlaceCode(m);this.aggregates=g.map(this.onEachPlaceCode),this.nrAlertAreas=this.aggregates.filter(v=>v.areaStatus===Wu.Alert).length},this.aggregateReducer=(m,g,v,C)=>(T,b)=>{let S=0;return(C===null||C===b.placeCode)&&(S=(m?Number(b[v]):1)*(Number(b[g])||0)),T+S},this.isInitialized){console.warn("\u26A0\uFE0F AggregatesService: Attempted multiple initialization - skipping");return}console.log("\u{1F504} AggregatesService: Initializing subscriptions"),this.isInitialized=!0,this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.timelineSubscription=this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.adminLevelSubscription=this.adminLevelService.getAdminLevelSubscription().subscribe(this.onAdminLevelChange),this.initialEventStateSubscription=this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.manualEventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange),this.alertAreasSubscription=this.alertAreaService.getAlertAreas().subscribe(this.onAlertAreasChange),this.placeCodeSubscription=this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange)}ngOnDestroy(){this.countrySubscription&&this.countrySubscription.unsubscribe(),this.timelineSubscription&&this.timelineSubscription.unsubscribe(),this.disasterTypeSubscription&&this.disasterTypeSubscription.unsubscribe(),this.adminLevelSubscription&&this.adminLevelSubscription.unsubscribe(),this.initialEventStateSubscription&&this.initialEventStateSubscription.unsubscribe(),this.manualEventStateSubscription&&this.manualEventStateSubscription.unsubscribe(),this.alertAreasSubscription&&this.alertAreasSubscription.unsubscribe(),this.placeCodeSubscription&&this.placeCodeSubscription.unsubscribe()}loadMetadataAndAggregates(){this.country&&this.disasterType&&this.eventState&&this.timelineState&&this.adminLevel&&this.apiService.getIndicators(this.country.countryCodeISO3,this.disasterType.disasterType).subscribe(this.onIndicatorChange)}getIndicators(){return this.indicatorSubject.asObservable()}loadAggregateInformation(){this.country&&this.disasterType&&this.timelineState&&this.adminLevel&&this.eventState&&this.apiService.getAggregatesData(this.country.countryCodeISO3,this.disasterType.disasterType,this.adminLevel,this.timelineState.activeLeadTime,this.eventState.event?.eventName,this.mapService.getPlaceCodeParent(this.placeCode)).subscribe(this.onAggregateData)}aggregateOnPlaceCode(t){let i=[];return t.forEach(o=>{i.map(s=>s.placeCode).includes(o.placeCode)?i.find(s=>s.placeCode===o.placeCode).records.push(o):i.push({placeCode:o.placeCode,placeCodeParent:o.placeCodeParent,records:[o]})}),i}getAggregate(t,i,o,s){let l;this.disasterType&&(l=this.getWeighingIndicatorName(i));let u=this.aggregates.filter(f=>f.areaStatus===Wu.Alert).reduce(this.aggregateReducer(t,i,l,o),0),d;if(s===Hn.perc){let f=this.aggregates.reduce(this.aggregateReducer(!1,l,null,o),0);d=f===0?u:u/f}else d=u;return d}isAggregateNan(t,i,o){let s=this.aggregates;return i&&(s=this.aggregates.filter(l=>l.placeCode===i)),o&&(t=this.getWeighingIndicatorName(t)),s.every(l=>l[t]===null)}getWeighingIndicatorName(t){let i=this.indicators.find(o=>o.name===t).weightVar;return i||(i=this.indicators.find(o=>o.name===this.disasterType.mainExposureIndicator)?.name),i}static{this.\u0275fac=function(i){return new(i||e)(Se($e),Se(yn),Se(en),Se(Di),Se(Po),Se(it),Se(Ue),Se(Ts),Se(Vt))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Zu=(()=>{class e{constructor(){this.debugPrefix="\u{1F50D} [DEBUG]",this.initCounters=new Map,console.log(`${this.debugPrefix} Debug service initialized`)}logComponentInit(t,i){let s=(this.initCounters.get(t)||0)+1;this.initCounters.set(t,s);let l=s>3?" \u26A0\uFE0F MULTIPLE INITS!":"";console.log(`${this.debugPrefix} \u{1F680} ${t} - ngOnInit (${s}x)${l}`,i||""),s>5&&console.error(`${this.debugPrefix} \u{1F6A8} INFINITE LOOP DETECTED in ${t} - ${s} initializations!`)}logComponentDestroy(t){console.log(`${this.debugPrefix} \u{1F480} ${t} - ngOnDestroy`)}logComponentAfterViewInit(t,i){console.log(`${this.debugPrefix} \u{1F441}\uFE0F ${t} - ngAfterViewInit`,i||"")}logData(t,i,o){console.log(`${this.debugPrefix} \u{1F4CA} ${t} - ${i}:`,o)}logError(t,i){console.error(`${this.debugPrefix} \u274C ${t} - Error:`,i)}logRender(t,i){if(i){let o=i.getBoundingClientRect(),s=o.width>0&&o.height>0;console.log(`${this.debugPrefix} \u{1F3A8} ${t} - Rendered:`,{visible:s,width:o.width,height:o.height,display:getComputedStyle(i).display,visibility:getComputedStyle(i).visibility,opacity:getComputedStyle(i).opacity})}else console.log(`${this.debugPrefix} \u{1F3A8} ${t} - Rendered (no element)`)}logElementVisibility(t,i){let o=document.querySelector(i);o?this.logRender(t,o):console.log(`${this.debugPrefix} \u2753 ${t} - Element not found: ${i}`)}logDOMState(){console.log(`${this.debugPrefix} \u{1F30D} DOM State Analysis:`),this.logElementVisibility("DOM",'[data-testid="ibf-dashboard-interface"]'),this.logElementVisibility("DOM",".ibf-dashboard-left-column"),this.logElementVisibility("DOM",".ibf-dashboard-right-column"),this.logElementVisibility("DOM",'[data-testid="dashboard-top-bar"]'),this.logElementVisibility("DOM","app-chat"),this.logElementVisibility("DOM","app-timeline"),this.logElementVisibility("DOM","app-aggregates"),this.logElementVisibility("DOM","app-matrix"),this.logElementVisibility("DOM","app-map"),this.logElementVisibility("DOM",'[data-testid="dashboard-map-componenet"]'),this.logElementVisibility("DOM",".leaflet--map")}logCSSStyles(t,i){let o=document.querySelector(i);if(o){let s=getComputedStyle(o);console.log(`${this.debugPrefix} \u{1F3AD} ${t} - CSS for ${i}:`,{display:s.display,visibility:s.visibility,opacity:s.opacity,width:s.width,height:s.height,position:s.position,zIndex:s.zIndex,overflow:s.overflow,color:s.color,backgroundColor:s.backgroundColor})}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function zO(e,n){e&1&&(D(0,"ion-content",3),M(1),Y(2,"translate"),x()),e&2&&(E(),ne(" ",Z(2,1,"disclaimer-approximate-component.message")," "))}var RD=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=ce({type:e,selectors:[["app-disclaimer-approximate"]],standalone:!1,decls:4,vars:0,consts:[["fill","clear","shape","round","size","default","id","disclaimer-approximate-trigger"],["color","fiveten-navy-900","icon","information-circle-outline","slot","icon-only"],["data-testid","disclaimer-popover-layer","side","right","trigger","disclaimer-approximate-trigger","triggerAction","click","showBackdrop","false"],["data-testid","disclaimer-approximate-message",1,"ion-padding","font-size-12"]],template:function(i,o){i&1&&(D(0,"ion-button",0),X(1,"ion-icon",1),x(),D(2,"ion-popover",2),se(3,zO,3,3,"ng-template"),x())},dependencies:[Ke,Zp,Ze,YC,Oe],styles:["[_nghost-%COMP%]{margin:auto}ion-popover[_ngcontent-%COMP%]{--offset-x: 8px;--offset-y: -2px}"]})}}return e})();var bs=(()=>{class e{constructor(t){this.locale=t}transform(t,i=Hn.decimal0){if(t==null||isNaN(t))return"";let o=i===Hn.perc?"percent":"decimal",s=t>100||i===Hn.perc?2:1,l=0,u="";return i!==Hn.perc&&t>0&&t<20&&(u="< ",t>10?l=20:t>0&&(l=10)),t=t>0?Math.max(t,l):0,`${u}${new Intl.NumberFormat(this.locale,{maximumSignificantDigits:s,style:o,notation:"compact"}).format(t)}`}static{this.\u0275fac=function(i){return new(i||e)(P(bC,16))}}static{this.\u0275pipe=pC({name:"compact",type:e,pure:!0})}}return e})();var HO=(e,n)=>n.name;function VO(e,n){e&1&&(D(0,"ion-col",8)(1,"ion-item",11),X(2,"app-disclaimer-approximate",12),x()())}function GO(e,n){if(e&1&&(D(0,"ion-label",20),M(1),Y(2,"compact"),Y(3,"translate"),x()),e&2){let t=B().$implicit,i=B();E(),ga(" ",Z(3,5,Je(2,2,i.getAggregate(t.name,t.weightedAvg,t.numberFormatAggregate),t.numberFormatAggregate))," ",t.aggregateUnit," ")}}function WO(e,n){e&1&&(D(0,"ion-label",21),M(1),Y(2,"translate"),x()),e&2&&(E(),ne(" ",Z(2,1,"aggregates-component.default-value")," "))}function ZO(e,n){if(e&1){let t=Ye();D(0,"ion-row",10)(1,"ion-col",13)(2,"ion-item",14)(3,"ion-thumbnail",15),X(4,"ion-img",16),x(),D(5,"ion-label",17),M(6),x()()(),D(7,"ion-col",18)(8,"ion-item",19),se(9,GO,4,7,"ion-label",20)(10,WO,3,3,"ion-label",21),x()(),D(11,"ion-col",22),Y(12,"translate"),D(13,"ion-item",23)(14,"ion-button",24),oe("click",function(){let o=_e(t).$implicit,s=B();return ve(s.moreInfo(o))})("keydown.enter",function(){let o=_e(t).$implicit,s=B();return ve(s.moreInfo(o))}),X(15,"ion-icon",25),x()()()()}if(e&2){let t=n.$implicit,i=B();E(4),lo("src","assets/icons/",t.icon,""),E(),W("title",t.label),E(),ne(" ",t.label," "),E(3),re(i.isAggregateNan(t.name,t.weightedAvg)?10:9),E(2),W("title",Z(12,6,"aggregates-component.more-information"))}}var qZ=(()=>{class e{constructor(t,i,o,s,l,u,d,f,p,m,g,v){this.countryService=t,this.disasterTypeService=i,this.aggregatesService=o,this.placeCodeService=s,this.eventService=l,this.adminLevelService=u,this.popoverController=d,this.changeDetectorRef=f,this.translateService=p,this.analyticsService=m,this.mapViewService=g,this.debugService=v,this.indicators=[],this.aggregatesPlaceCodes=[],this.onCountryChange=C=>{this.country=C},this.onDisasterTypeChange=C=>{this.disasterType=C,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.onEventStateChange=C=>{this.eventState=C},this.onPlaceCodeChange=C=>{this.placeCode=C,this.changeDetectorRef.detectChanges()},this.onPlaceCodeHoverChange=C=>{this.placeCodeHover=C,this.changeDetectorRef.detectChanges()},this.onIndicatorChange=C=>{let T=b=>b.countryDisasterTypes[this.country.countryCodeISO3][this.disasterType.disasterType]?.includes("aggregate");this.indicators=C.filter(T)},this.debugService.logComponentInit("AggregatesComponent","Constructor called"),this.initialEventStateSubscription=this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.manualEventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange)}ngOnInit(){this.debugService.logComponentInit("AggregatesComponent","ngOnInit called"),this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.placeCodeSubscription=this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange),this.placeCodeHoverSubscription=this.placeCodeService.getPlaceCodeHoverSubscription().subscribe(this.onPlaceCodeHoverChange),this.indicatorSubscription=this.aggregatesService.getIndicators().subscribe(this.onIndicatorChange),this.mapView=this.mapViewService.getAggregatesMapViewSubscription()}ngOnDestroy(){this.indicatorSubscription.unsubscribe(),this.countrySubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe(),this.placeCodeSubscription.unsubscribe(),this.placeCodeHoverSubscription.unsubscribe(),this.initialEventStateSubscription.unsubscribe(),this.manualEventStateSubscription.unsubscribe()}moreInfo(t){return ft(this,null,function*(){let i=yield this.popoverController.create({component:Gu,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0,componentProps:{layer:{label:t.label,description:this.getPopoverText(t)}}});this.analyticsService.logEvent(pt.aggregateInformation,{indicator:t.name,page:kt.dashboard,isActiveTrigger:this.eventState.events?.length>0,component:this.constructor.name}),i.present()})}getPopoverText(t){return t.description?.[this.country.countryCodeISO3]?.[this.disasterType.disasterType]?t.description[this.country.countryCodeISO3][this.disasterType.disasterType]:""}getAggregate(t,i,o){return this.aggregatesService.getAggregate(i,t,this.getPlaceCodeValue(),o)}getAggregatesHeader(t){return this.disasterType?t===tt.national?this.placeCodeHover?{headerLabel:this.placeCodeHover.placeCodeName||this.placeCodeHover.placeCode,subHeaderLabel:`${this.translateService.instant("aggregates-component.predicted")} ${Xy(this.disasterType.label)}`}:{headerLabel:this.translateService.instant("aggregates-component.national-view"),subHeaderLabel:`${this.getEventCount()?.toString()} ${this.translateService.instant("aggregates-component.predicted")} ${Xy(this.disasterType.label)}${this.translateService.instant("aggregates-component.plural-suffix")}`}:t===tt.event?this.placeCodeHover?{headerLabel:this.placeCodeHover.placeCodeName,subHeaderLabel:this.getAdminAreaLabel("singular")}:{headerLabel:this.getEventNameString()||"",subHeaderLabel:`${this.getAreaCount()?.toString()} exposed ${this.getAdminAreaLabel()}`}:[tt.adminArea,tt.adminArea2,tt.adminArea3].includes(t)?this.placeCodeHover?{headerLabel:this.placeCodeHover.placeCodeName,subHeaderLabel:this.getAdminAreaLabel("singular")}:{headerLabel:this.placeCodeName(),subHeaderLabel:this.adminLevelService.getAdminLevelType(this.placeCode)===rn.higher?`${this.getAreaCount().toString()} exposed ${this.getAdminAreaLabel()}`:this.getAdminAreaLabel("singular")}:{headerLabel:t,subHeaderLabel:t}:{headerLabel:"",subHeaderLabel:""}}getEventNameString(){return this.placeCode?this.placeCode.eventName?.split("_")[0]:this.placeCodeHover?this.placeCodeHover.eventName?.split("_")[0]:this.eventState?.event?.eventName?.split("_")[0]}getAdminAreaLabel(t){return!this.country?.adminRegionLabels||!this.adminLevelService?.adminLevel?"":(t=t||(this.getAreaCount()===1?"singular":"plural"),this.country.adminRegionLabels[this.adminLevelService.adminLevel][t])}placeCodeName(){return this.placeCode?this.placeCode.placeCodeName:this.placeCodeHover?this.placeCodeHover.placeCodeName:""}getAreaCount(){return this.aggregatesService.nrAlertAreas??0}getEventCount(){return this.eventState?.events?.length??0}isAggregateNan(t,i){return this.aggregatesService.isAggregateNan(t,this.getPlaceCodeValue(),i)}getPlaceCodeValue(){let t=this.placeCode||this.placeCodeHover,i=this.adminLevelService.getAdminLevelType(t);return this.placeCodeHover?this.placeCodeHover.placeCode:i===rn.higher?null:t?t.placeCode:null}static{this.\u0275fac=function(i){return new(i||e)(P($e),P(it),P(H_),P(Vt),P(Ue),P(yn),P(at),P(co),P(qt),P(Kt),P(B_),P(Zu))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-aggregates"]],standalone:!1,decls:18,vars:7,consts:[[1,"ion-no-padding"],[1,"component-title",2,"background","var(--ion-color-ibf-secondary)"],["size-xl","10","size-lg","9","size-md","12","size-sm","11","size-xs","11",1,"ion-no-padding"],["lines","none","color","ibf-secondary",1,"component-title-item"],[1,"ion-no-padding","ion-no-margin","ion-align-items-center"],["color","ibf-black","data-testid","aggregates-header-label",1,"ion-text-wrap"],["color","ibf-black","data-testid","aggregates-sub-header-label",1,"ion-text-wrap"],[3,"innerHTML"],["size-xl","2","size-lg","3","size-md","0","size-sm","1","size-xs","1"],["data-testid","aggregate-list"],["data-testid","aggregates-row",1,"ion-no-padding"],["data-testid","aggregates-header-info-icon","color","transparent","lines","none",1,"aggregate-item-information-icon","ion-no-padding","m-0","cursor-pointer"],["data-testid","aggregates-disclaimer"],["size-xl","6","size-lg","5","size-md","8","size-sm","9","size-xs","9"],["color","ibf-white","lines","full",1,"aggregate-item","ion-no-padding","font-size-12"],["slot","start",1,"m-0","h-10","w-10","bg-slate-100","p-2"],[1,"object-contain",3,"src"],[1,"aggregate-item-label","ion-no-margin","ion-text-wrap",3,"title"],["data-testid","aggregates-affected-number","size-xl","4","size-lg","4","size-md","4","size-sm","2","size-xs","2"],["color","ibf-white",1,"aggregate-item-value","ion-no-padding","font-size-12",2,"--inner-padding-end","4px"],["data-test","aggregate-number",1,"ion-text-right","m-0"],["data-test","aggregate-na",1,"ion-text-right","m-0"],["size-xl","2","size-lg","3","size-md","0","size-sm","1","size-xs","1",3,"title"],["data-testid","aggregates-info-icon","color","ibf-white",1,"aggregate-item-information-icon","ion-no-padding","m-0","cursor-pointer"],["fill","clear","shape","round","size","default",1,"m-auto",3,"click","keydown.enter"],["color","fiveten-navy-900","icon","information-circle-outline","slot","icon-only"]],template:function(i,o){i&1&&(D(0,"div")(1,"ion-grid",0)(2,"ion-row",1)(3,"ion-col",2)(4,"ion-item",3)(5,"ion-col",4)(6,"ion-label",5)(7,"ion-text")(8,"strong"),M(9),Y(10,"async"),x()()(),D(11,"ion-label",6),X(12,"ion-text",7),Y(13,"async"),x()()()(),se(14,VO,3,0,"ion-col",8),x(),D(15,"div",9),Bt(16,ZO,16,8,"ion-row",10,HO),x()()()),i&2&&(E(9),be(o.getAggregatesHeader(Z(10,3,o.mapView)).headerLabel),E(3),W("innerHTML",o.getAggregatesHeader(Z(13,5,o.mapView)).subHeaderLabel,ot),E(2),re(o.indicators.length?14:-1),E(2),zt(o.indicators))},dependencies:[Ke,uo,jp,Ze,$p,Ot,si,dr,ho,Jp,RD,Sa,Oe,bs],styles:[".component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]{--inner-padding-end: 0;margin:4px}.component-title[_ngcontent-%COMP%]   .aggregate--title[_ngcontent-%COMP%]{width:100%;display:contents}.place-code-reset-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.aggregate-item[_ngcontent-%COMP%], .aggregate-item-value[_ngcontent-%COMP%], .aggregate-item-information-icon[_ngcontent-%COMP%]{--min-height: 2rem}.aggregate-item[_ngcontent-%COMP%], .aggregate-item[_ngcontent-%COMP%]::part(native), .aggregate-item-value[_ngcontent-%COMP%], .aggregate-item-value[_ngcontent-%COMP%]::part(native), .aggregate-item-information-icon[_ngcontent-%COMP%], .aggregate-item-information-icon[_ngcontent-%COMP%]::part(native){height:100%}.aggregate-item[_ngcontent-%COMP%]{--inner-padding-end: 0}.aggregate-item[_ngcontent-%COMP%]   .aggregate-item-label[_ngcontent-%COMP%]{line-height:1.2;white-space:normal;padding:0 4px}.aggregate-item-information-icon[_ngcontent-%COMP%]{--inner-padding-end: 0}"]})}}return e})();var jO=(e,n)=>n.id;function $O(e,n){if(e&1&&(D(0,"span"),M(1),x()),e&2){let t=B().$implicit;E(),ga("",t.countChecked," / ",t.count,"")}}function qO(e,n){e&1&&(D(0,"span",21),M(1),Y(2,"translate"),x()),e&2&&(E(),ne(" ",Z(2,1,"areas-of-focus-summary-component.not-applicable"),""))}function XO(e,n){if(e&1){let t=Ye();D(0,"ion-row",12),Mp(1),D(2,"ion-col",13)(3,"ion-item",14)(4,"ion-thumbnail",15),X(5,"ion-img",16),x(),D(6,"ion-label",17),M(7),x()()(),D(8,"ion-col",18)(9,"ion-item",19)(10,"ion-label",20),se(11,$O,2,2,"span")(12,qO,3,3,"span",21),x()()(),D(13,"ion-col",10)(14,"ion-item",22)(15,"ion-button",23),oe("click",function(){let o=_e(t).$implicit,s=B(2);return ve(s.moreInfo(o))}),X(16,"ion-icon",24),x()()(),kp(),x()}if(e&2){let t=n.$implicit;E(5),lo("src","assets/icons/",t.icon,""),E(2),ne(" ",t.label," "),E(4),re(t.count>0?11:12)}}function JO(e,n){if(e&1&&(D(0,"ion-row",0)(1,"ion-col",1)(2,"ion-item",2)(3,"ion-label",3)(4,"div",4),M(5),Y(6,"translate"),x(),D(7,"div",5),M(8),Y(9,"translate"),x()()()(),D(10,"ion-col",6)(11,"ion-item",7)(12,"ion-label",8)(13,"div",9),Y(14,"translate"),M(15),Y(16,"translate"),x()()()(),D(17,"ion-col",10),X(18,"ion-item",11),x()(),Bt(19,XO,17,4,"ion-row",12,jO)),e&2){let t=B();E(5),ne(" ",Z(6,4,"areas-of-focus-summary-component.title")," "),E(3),ne(" ",Z(9,6,"areas-of-focus-summary-component.aof-subtitle")," "),E(5),W("title",Z(14,8,"areas-of-focus-summary-component.tasks-subtitle")),E(2),ne(" ",Z(16,10,"areas-of-focus-summary-component.tasks-subtitle")," "),E(4),zt(t.areasOfFocus)}}var t9=(()=>{class e{constructor(t,i,o,s,l,u,d,f){this.alertAreaService=t,this.eventService=i,this.placeCodeService=o,this.changeDetectorRef=s,this.popoverController=l,this.analyticsService=u,this.disasterTypeService=d,this.countryService=f,this.areasOfFocus=F_,this.onCountryChange=p=>{this.country=p},this.onDisasterTypeChange=p=>{this.disasterType=p,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.onAlertAreasChange=p=>{this.alertAreas=p,this.calculateEAPActionStatus(this.alertAreas)},this.onPlaceCodeChange=p=>{this.placeCode=p,this.calculateEAPActionStatus(this.alertAreas)},this.onEachEAPAction=p=>m=>{p.id===m.aof&&(p.count+=1,m.checked&&(p.countChecked+=1))},this.onEachAlertArea=p=>m=>{m.eapActions.forEach(this.onEachEAPAction(p))},this.onEventStateChange=p=>{this.eventState=p}}ngOnInit(){this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.eapActionSubscription=this.alertAreaService.getAlertAreas().subscribe(this.onAlertAreasChange),this.placeCodeSubscription=this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange),this.initialEventStateSubscription=this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.manualEventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange)}ngOnDestroy(){this.countrySubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe(),this.eapActionSubscription.unsubscribe(),this.placeCodeSubscription.unsubscribe(),this.initialEventStateSubscription.unsubscribe(),this.manualEventStateSubscription.unsubscribe()}calculateEAPActionStatus(t){this.placeCode&&(t=t.filter(o=>o.placeCode===this.placeCode?.placeCode));let i=o=>{o.count=0,o.countChecked=0,t.forEach(this.onEachAlertArea(o))};t[t.length-1]?.eapActions&&this.areasOfFocus.forEach(i),this.changeDetectorRef.detectChanges()}moreInfo(t){return ft(this,null,function*(){let{id:i,label:o,description:s}=t,l=yield this.popoverController.create({component:Gu,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0,componentProps:{layer:{label:o,description:s}}});this.analyticsService.logEvent(pt.aggregateInformation,{indicator:i,page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),l.present()})}showAreasOfFocusSummary(){return!(!this.eventState?.events?.length||!this.countryDisasterSettings.enableEarlyActions)}static{this.\u0275fac=function(i){return new(i||e)(P(Ts),P(Ue),P(Vt),P(co),P(at),P(Kt),P(it),P($e))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-areas-of-focus-summary"]],standalone:!1,decls:1,vars:1,consts:[["color","ibf-secondary","data-test","action-title",1,"component-title"],["size-xl","6","size-lg","5","size-md","8","size-sm","9","size-xs","9",1,"ion-no-padding"],["lines","none","color","ibf-secondary",1,"component-title-item","ion-padding-left","ion-no-margin"],[1,"m-0"],[1,"mt-1","font-bold"],[1,"mb-1","text-xs"],["size-xl","4","size-lg","4","size-md","4","size-sm","2","size-xs","2",1,"ion-no-padding"],["lines","none","color","ibf-secondary",1,"component-title-item","ion-no-margin","ion-align-items-end"],[1,"m-0","text-right"],[1,"mb-1","text-xs",3,"title"],["size-xl","2","size-lg","3","size-md","0","size-sm","1","size-xs","1"],["lines","none","color","ibf-secondary",1,"component-title-item","ion-padding-left","ion-no-margin","ion-align-items-end"],["data-test","action-summary-types",1,"ion-no-padding",2,"margin-bottom","1px"],["size-xl","6","size-lg","5","size-md","8","size-sm","9","size-xs","9"],["lines","none","color","ibf-white",1,"areas-of-focus-item","ion-no-padding"],["slot","start",1,"areas-of-focus-item-thumbnail"],[1,"object-contain",3,"src"],[1,"areas-of-focus-item-label"],["size-xl","4","size-lg","4","size-md","4","size-sm","2","size-xs","2"],["lines","none",1,"areas-of-focus-item-value"],[1,"text-right"],[1,"actions-not-applicable"],["lines","none","data-test","icon-row","color","ibf-white",1,"areas-of-focus-item-information-icon","ion-no-padding",2,"--inner-padding-end","0px"],["fill","clear","shape","round","size","default",1,"m-auto",3,"click"],["color","fiveten-navy-900","icon","information-circle-outline","slot","icon-only"]],template:function(i,o){i&1&&se(0,JO,21,12),i&2&&re(o.showAreasOfFocusSummary()?0:-1)},dependencies:[Ke,uo,Ze,$p,Ot,si,dr,Jp,Oe],styles:[".component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]{--inner-padding-end: 0;height:48px}.component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]   .areas-of-focus--title[_ngcontent-%COMP%]{margin-top:4px}.component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]   .areas-of-focus--subtitle[_ngcontent-%COMP%]{margin-bottom:0}.component-title[_ngcontent-%COMP%]   .component-title-item[_ngcontent-%COMP%]   .component-title-thumbnail[_ngcontent-%COMP%]{height:24px;width:24px}.areas-of-focus-item[_ngcontent-%COMP%], .areas-of-focus-item-value[_ngcontent-%COMP%], .areas-of-focus-item-information-icon[_ngcontent-%COMP%]{--min-height: 2.5rem;height:2.5rem}.areas-of-focus-item[_ngcontent-%COMP%]{--inner-padding-end: 0}.areas-of-focus-item[_ngcontent-%COMP%]   .areas-of-focus-item-thumbnail[_ngcontent-%COMP%]{background:var(--ion-color-fiveten-neutral-100);border:.2rem solid var(--ion-color-fiveten-neutral-100);width:2.5rem;height:2.5rem;align-self:start;margin:0!important;padding:4px}.areas-of-focus-item[_ngcontent-%COMP%]   .areas-of-focus-item-label[_ngcontent-%COMP%]{line-height:1.2;font-size:12px;margin:0!important;white-space:normal!important;padding:0 4px!important}.areas-of-focus-item-value[_ngcontent-%COMP%]{--background: var(--ion-color-fiveten-neutral-0)}.areas-of-focus-item-value[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0!important;font-size:12px;white-space:normal!important}.areas-of-focus-item-information-icon[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0 auto!important;padding-top:.2em;max-width:20px}.areas-of-focus-item-information-icon[_ngcontent-%COMP%]{--inner-padding-end: .2rem;cursor:pointer}.actions-not-applicable[_ngcontent-%COMP%]{color:var(--ion-color-ibf-grey)}"]})}}return e})();var KO=e=>({lastUploadDate:e}),QO=e=>({supportEmailAddress:e}),eM=()=>[],tM=(e,n,t)=>({adminAreaLabel:e,placeName:n,parentName:t}),iM=e=>({defaultAdminAreaLabel:e}),nM=e=>({adminAreaLabelPlural:e}),rM=(e,n)=>n.name,oM=(e,n)=>n.eventName;function aM(e,n){if(e&1&&(X(0,"span",3),Y(1,"translate")),e&2){let t=B();W("innerHTML",Je(1,1,"chat-component.common.warn-label.message",It(4,KO,t.lastUploadDate)),ot)}}function sM(e,n){if(e&1&&(X(0,"app-tooltip",4),Y(1,"translate")),e&2){let t=B();W("value",Je(1,1,"chat-component.common.warn-label.tooltip",It(4,QO,t.supportEmailAddress)))}}function lM(e,n){e&1&&(D(0,"ion-row")(1,"ion-col",7),X(2,"app-about-btn",8),Y(3,"translate"),x(),D(4,"ion-col",7),X(5,"app-activation-log-button",9),x(),D(6,"ion-col",7),X(7,"app-ibf-guide-button"),x(),D(8,"ion-col",7),X(9,"app-export-view"),x()()),e&2&&(E(2),W("btnLabel",Z(3,1,"chat-component.common.about-button-label")))}function cM(e,n){if(e&1&&X(0,"app-event-speech-bubble",5),e&2){let t=B();W("type","no-event")("event",null)("selectedEvent",t.eventState==null||t.eventState.event==null?null:t.eventState.event.eventName)("disasterType",t.disasterType)("countryCodeISO3",t.country==null?null:t.country.countryCodeISO3)("areas",SC(9,eM))("adminAreaLabelPlural",t.adminAreaLabelPlural)("mainExposureIndicatorLabel",t.mainExposureIndicatorLabel)("mainExposureIndicatorNumberFormat",t.mainExposureIndicatorNumberFormat)}}function uM(e,n){if(e&1&&X(0,"app-event-speech-bubble",10),e&2){let t=B().$implicit,i=B(2);W("type","active")("event",t)("selectedEvent",i.eventState==null||i.eventState.event==null?null:i.eventState.event.eventName)("disasterType",i.disasterType)("countryCodeISO3",i.country==null?null:i.country.countryCodeISO3)("areas",i.alertAreas)("adminAreaLabelPlural",i.adminAreaLabelPlural)("mainExposureIndicatorLabel",i.mainExposureIndicatorLabel)("mainExposureIndicatorNumberFormat",i.mainExposureIndicatorNumberFormat)("countryDisasterSettings",i.countryDisasterSettings)("cardColors",i.getCardColors(t))}}function dM(e,n){if(e&1&&se(0,uM,1,11,"app-event-speech-bubble",10),e&2){let t=B(2);re(t.filteredAreas.length===0?0:-1)}}function hM(e,n){if(e&1&&Bt(0,dM,1,1,null,null,oM),e&2){let t=B();zt(t.eventState==null?null:t.eventState.events)}}function pM(e,n){if(e&1){let t=Ye();D(0,"ion-button",20),oe("click",function(){_e(t);let o=B(2);return ve(o.revertAreaSelection())}),D(1,"span",21),M(2),Y(3,"translate"),x(),X(4,"ion-icon",22),x()}e&2&&(E(2),be(Z(3,1,"chat-component.common.back")))}function fM(e,n){if(e&1&&(D(0,"ion-note",17),X(1,"span",23),Y(2,"translate"),M(3),Y(4,"compact"),x()),e&2){let t=B().$implicit,i=B();E(),W("innerHTML",Z(2,2,"chat-component."+i.disasterTypeName+".active-event.exposed"),ot),E(2),ne(" ",Je(4,4,t.mainExposureValue,i.mainExposureIndicatorNumberFormat)," ")}}function mM(e,n){e&1&&(D(0,"ion-note",18)(1,"span"),M(2),Y(3,"translate"),x()()),e&2&&(E(2),be(Z(3,1,"chat-component.common.no-info")))}function _M(e,n){if(e&1&&(D(0,"ion-item",19)(1,"ion-label",24),M(2),Y(3,"translate"),x()()),e&2){let t=B(2);E(2),ne(" ",Je(3,1,"chat-component.common.save-actions.no-actions-admin-level",It(4,iM,t.country.adminRegionLabels[t.countryDisasterSettings.defaultAdminLevel].singular)),"")}}function vM(e,n){if(e&1&&(D(0,"ion-item",19),X(1,"ion-label",25),Y(2,"translate"),x()),e&2){let t=B(2);E(),W("innerHTML",Je(2,1,"chat-component.common.save-actions.no-actions",It(4,nM,t.adminAreaLabelPlural)),ot)}}function gM(e,n){if(e&1&&(D(0,"span")(1,"strong"),M(2),x()()),e&2){let t=B().$implicit,i=B(2).$implicit,o=B();E(2),ne(" (",t.monthLong[o.getRegion(i.placeCode)],")")}}function yM(e,n){if(e&1){let t=Ye();D(0,"ion-item",31),oe("click",function(){let o=_e(t).$implicit,s=B(2).$implicit,l=B();return ve(l.changeAction(s.placeCode,o.action,!o.checked))}),D(1,"ion-checkbox",32),oe("ionChange",function(o){let s=_e(t).$implicit,l=B(2).$implicit,u=B();return ve(u.changeAction(l.placeCode,s.action,o.detail.checked))})("click",function(o){return _e(t),ve(o.stopPropagation())}),x(),D(2,"ion-label",33)(3,"strong"),M(4),x(),M(5),se(6,gM,3,1,"span"),x()()}if(e&2){let t=n.$implicit;E(),W("checked",t.checked),E(3),ne("",t.aofLabel,": "),E(),ne("",t.label," "),E(),re(t.month?6:-1)}}function SM(e,n){if(e&1){let t=Ye();D(0,"form",26),oe("submit",function(){_e(t);let o=B().$implicit,s=B();return ve(s.submitEapAction(o.placeCode))}),D(1,"ion-list",27),Bt(2,yM,7,4,"ion-item",28,Xl),x(),D(4,"ion-row",29)(5,"ion-col")(6,"ion-button",30),M(7),Y(8,"translate"),x()()()()}if(e&2){let t=B().$implicit;E(2),zt(t.eapActions),E(4),W("disabled",t.submitDisabled),E(),ne(" ",Z(8,2,"chat-component.common.save-actions.submit-button-label")," ")}}function CM(e,n){if(e&1&&(D(0,"app-dialogue-turn",6)(1,"ion-row")(2,"ion-col",11)(3,"div",12)(4,"span",13),X(5,"ion-icon",14)(6,"span",3),Y(7,"translate"),x()()(),D(8,"ion-col",15),se(9,pM,5,3,"ion-button",16),x()(),se(10,fM,5,7,"ion-note",17)(11,mM,4,3,"ion-note",18)(12,_M,4,6,"ion-item",19)(13,vM,3,6,"ion-item",19)(14,SM,9,4,"form"),x()),e&2){let t=n.$implicit,i=B();W("borderColor",i.getCardColors(i.eventState==null?null:i.eventState.event).borderColor)("isSelected",!0),E(5),va("color",i.getCardColors(i.eventState==null?null:i.eventState.event).iconColor),E(),va("color",i.getCardColors(i.eventState==null?null:i.eventState.event).headerTextColor),W("innerHTML",Je(7,10,"chat-component."+i.disasterTypeName+".active-event.place-name",EC(13,tM,i.adminAreaLabel,t.name,i.getAreaParentString(t))),ot),E(3),re(i.placeCode?9:-1),E(),re(t.mainExposureValue?10:11),E(2),re((i.eventState==null||i.eventState.event==null?null:i.eventState.event.alertLevel)==="trigger"&&i.countryDisasterSettings.enableEarlyActions&&i.adminLevel>i.countryDisasterSettings.defaultAdminLevel?12:!i.countryDisasterSettings.enableEarlyActions||!t.eapActions.length?13:t.eapActions.length?14:-1)}}var FD=(()=>{class e{constructor(t,i,o,s,l,u,d,f,p,m,g,v,C,T){this.alertAreaService=t,this.authService=i,this.eventService=o,this.placeCodeService=s,this.disasterTypeService=l,this.timelineService=u,this.countryService=d,this.aggregatesService=f,this.changeDetectorRef=p,this.translateService=m,this.analyticsService=g,this.popoverController=v,this.adminLevelService=C,this.debugService=T,this.changedActions=[],this.submitDisabled=!0,this.lastUploadDateFormat="cccc, dd LLLL HH:mm",this.isLastUploadDateLate=!1,this.supportEmailAddress=Ut.supportEmailAddress,this.onCountryChange=b=>{this.country=b},this.onDisasterTypeChange=b=>{this.disasterType=b,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.onIndicatorChange=b=>{this.indicators=b,this.setupChatText()},this.onEventStateChange=b=>{this.eventState=b},this.onTimelineStateChange=b=>{this.timelineState=b,this.setupChatText()},this.onAlertAreasChange=b=>{this.alertAreas=b,this.alertAreas.forEach(S=>{this.disableSubmitButtonForArea(S)}),this.onPlaceCodeChange(this.placeCode)},this.onPlaceCodeChange=b=>{this.placeCode=b;let S=this.timelineState?.timeStepButtons.find(I=>I.value===this.timelineState?.activeLeadTime);if(b&&(!S||S.forecastAlert)){let I=U=>U.placeCode===b.placeCode;this.filteredAreas=this.alertAreas.filter(I)}else this.setDefaultFilteredAreas();this.changeDetectorRef.detectChanges()},this.setDefaultFilteredAreas=()=>{this.filteredAreas=[]},this.setupChatText=()=>{if(this.country&&this.disasterType&&this.indicators.length&&this.timelineState){this.adminLevel=this.placeCode?.adminLevel||this.countryDisasterSettings.defaultAdminLevel,this.adminAreaLabel=this.country.adminRegionLabels[this.adminLevel].singular,this.adminAreaLabelPlural=this.country.adminRegionLabels[this.adminLevel].plural.toLowerCase(),this.changeDetectorRef.detectChanges(),this.disasterTypeLabel=this.disasterType.label,this.disasterTypeName=this.disasterType.disasterType;let b=this.indicators.find(S=>S.name===this.disasterType.mainExposureIndicator);this.mainExposureIndicatorLabel=b?.label.toLowerCase(),this.mainExposureIndicatorNumberFormat=b?.numberFormatMap,this.updateSuccessMessage=this.translateService.instant("chat-component.common.save-actions.update-success"),this.updateFailureMessage=this.translateService.instant("chat-component.common.save-actions.update-failure"),this.setLastModelRunDate(this.disasterType),this.changeDetectorRef.detectChanges()}},this.setLastModelRunDate=b=>{let S=this.timelineState.today;this.lastUploadDate=S?S.toFormat(this.lastUploadDateFormat):"unknown",this.isLastUploadDateLate=this.eventService.isLastUploadDateLate(S.toJSDate(),b)},this.disableSubmitButtonForArea=b=>b.submitDisabled=!0,this.filterAreaByPlaceCode=b=>S=>S.placeCode===b,this.filterChangedEAPActionByChangedEAPAction=b=>S=>S.action!==b.action,this.filterEAPActionByEAPAction=b=>S=>S.action===b,this.filterEAPActionByPlaceCode=b=>S=>S.placeCode===b,this.checkEAPAction=b=>this.alertAreaService.checkEapAction(b.action,b.checked,b.placeCode,this.eventState?.event?.eventName),this.getRegion=b=>{if(this.countryDisasterSettings.droughtRegions){for(let S of Object.keys(this.countryDisasterSettings.droughtRegions))if(this.countryDisasterSettings.droughtRegions[S].includes(b))return S}else return"National"},this.debugService.logComponentInit("ChatComponent","Constructor called")}ngOnInit(){this.debugService.logComponentInit("ChatComponent","ngOnInit called"),this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.eapActionSubscription=this.alertAreaService.getAlertAreas().subscribe(this.onAlertAreasChange),this.placeCodeSubscription=this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.initialEventStateSubscription=this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.manualEventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange),this.timelineStateSubscription=this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange),this.indicatorSubscription=this.aggregatesService.getIndicators().subscribe(this.onIndicatorChange)}ngOnDestroy(){this.countrySubscription.unsubscribe(),this.eapActionSubscription.unsubscribe(),this.placeCodeSubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe(),this.initialEventStateSubscription.unsubscribe(),this.manualEventStateSubscription.unsubscribe(),this.timelineStateSubscription.unsubscribe(),this.indicatorSubscription.unsubscribe()}changeAction(t,i,o){this.analyticsService.logEvent(pt.eapAction,{placeCode:t,eapAction:i,eapActionStatus:o,page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name});let s=this.filterAreaByPlaceCode(t),u=this.alertAreas.find(s).eapActions.find(this.filterEAPActionByEAPAction(i));u.checked=o,this.changedActions.includes(u)?this.changedActions=this.changedActions.filter(this.filterChangedEAPActionByChangedEAPAction(u)):this.changedActions.push(u),this.alertAreas.find(s).submitDisabled=this.changedActions.length===0,this.changeDetectorRef.detectChanges()}submitEapAction(t){this.analyticsService.logEvent(pt.eapSubmit,{placeCode:t,page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),this.alertAreas.find(this.filterAreaByPlaceCode(t)).submitDisabled=!0,rC(this.changedActions.filter(this.filterEAPActionByPlaceCode(t)).map(this.checkEAPAction)).subscribe({next:()=>this.actionResult(this.updateSuccessMessage),error:()=>{this.actionResult(this.updateFailureMessage),this.revertActionStatusIfFailed()}})}revertActionStatusIfFailed(){let t=this.alertAreas.find(i=>i.placeCode===this.changedActions[0].placeCode);for(let i of t.eapActions)this.changedActions.includes(i)&&(i.checked=!i.checked)}actionResult(t){return ft(this,null,function*(){let i=yield this.popoverController.create({component:Vu,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0,componentProps:{message:t}});yield i.present(),i.onDidDismiss().then(()=>{this.placeCodeService.setPlaceCode(this.placeCode),this.changedActions=[]})})}revertAreaSelection(){this.adminLevelService.getAdminLevelType(this.placeCode)!==rn.deepest&&this.adminLevelService.zoomOutAdminLevel(),this.placeCode.placeCodeParent?this.placeCodeService.setPlaceCode(this.placeCode.placeCodeParent):this.placeCodeService.clearPlaceCode()}getAreaParentString(t){return t.nameParent?` (${t.nameParent})`:""}getCardColors(t){let i={iconColor:"var(--ion-color-ibf-black)",headerTextColor:"var(--ion-color-ibf-black)",borderColor:null};return t?t.disasterSpecificProperties?t.disasterSpecificProperties.eapAlertClass?{iconColor:`var(--ion-color-${t.disasterSpecificProperties.eapAlertClass.color})`,headerTextColor:`var(--ion-color-${t.disasterSpecificProperties.eapAlertClass.textColor||t.disasterSpecificProperties.eapAlertClass.color})`,borderColor:`var(--ion-color-${t.disasterSpecificProperties.eapAlertClass.color})`}:t.alertLevel!==xn.TRIGGER?i:{iconColor:"var(--ion-color-fiveten-red-500)",headerTextColor:"var(--ion-color-fiveten-red-500)",borderColor:"var(--ion-color-fiveten-red-500)"}:t.alertLevel!==xn.TRIGGER?i:{iconColor:"var(--ion-color-fiveten-red-500)",headerTextColor:"var(--ion-color-fiveten-red-500)",borderColor:"var(--ion-color-fiveten-red-500)"}:i}static{this.\u0275fac=function(i){return new(i||e)(P(Ts),P(Nn),P(Ue),P(Vt),P(it),P(en),P($e),P(H_),P(co),P(qt),P(Kt),P(at),P(yn),P(Zu))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-chat"]],standalone:!1,decls:12,vars:9,consts:[["scrollY","true",1,"ion-padding-bottom"],[3,"isLastUploadDateLate"],[2,"padding-right","20px"],[3,"innerHTML"],["color","danger",1,"absolute",3,"value"],[3,"type","event","selectedEvent","disasterType","countryCodeISO3","areas","adminAreaLabelPlural","mainExposureIndicatorLabel","mainExposureIndicatorNumberFormat"],[3,"borderColor","isSelected"],["size","6","size-md","12","size-lg","6"],[3,"btnLabel"],["data-testid","trigger-log-button"],[3,"type","event","selectedEvent","disasterType","countryCodeISO3","areas","adminAreaLabelPlural","mainExposureIndicatorLabel","mainExposureIndicatorNumberFormat","countryDisasterSettings","cardColors"],[1,"flex","flex-row","gap-2"],[1,"event-header"],[1,"event-header--icon-title"],["src","/assets/icons/Alert_Title.svg","slot","start",1,"alert-icon"],["size-lg","auto","size-md","auto","size-sm","auto"],["color","ibf-primary","size","small","shape","round"],["size","small","color","ibf-black"],["size","small"],["lines","none",1,"background-light"],["color","ibf-primary","size","small","shape","round",3,"click"],[1,"ion-hide-sm-down"],["name","arrow-back","slot","start"],["data-testid","main-exposure-indicator",1,"font-semibold",3,"innerHTML"],[1,"ion-text-wrap"],[1,"ion-text-wrap",3,"innerHTML"],[3,"submit"],[1,"background-light"],["lines","full",1,"p-0"],[1,"ion-nowrap","ion-align-items-center"],["color","ibf-primary","type","submit","expand","full","size","small","strong","true","shape","round",3,"disabled"],["lines","full",1,"p-0",3,"click"],["slot","start","color","ibf-primary","name","action.action",3,"ionChange","click","checked"],[1,"action-label","ion-text-wrap"]],template:function(i,o){i&1&&(D(0,"ion-content",0)(1,"app-dialogue-turn",1)(2,"p",2),X(3,"span",3),Y(4,"translate"),se(5,aM,2,6,"span",3)(6,sM,2,6,"app-tooltip",4),x(),se(7,lM,10,3,"ion-row"),x(),se(8,cM,1,10,"app-event-speech-bubble",5)(9,hM,2,0),Bt(10,CM,15,17,"app-dialogue-turn",6,rM),x()),i&2&&(E(),W("isLastUploadDateLate",o.isLastUploadDateLate),E(2),W("innerHTML",Je(4,6,"chat-component.common.warn-label.hello",o.authService),ot),E(2),re(o.lastUploadDate?5:-1),E(),re(o.isLastUploadDateLate?6:-1),E(),re(o.lastUploadDate?7:-1),E(),re(!(o.eventState==null||o.eventState.events==null)&&o.eventState.events.length?9:8),E(2),zt(o.filteredAreas))},styles:["ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:12px}ion-content[_ngcontent-%COMP%]   .background-light[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: none}ion-content[_ngcontent-%COMP%]   .chat-icon[_ngcontent-%COMP%]{width:1.5rem;padding:1px}ion-checkbox[_ngcontent-%COMP%]{margin-inline-end:8px!important}.event-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-weight:700;font-size:.875rem}.event-header[_ngcontent-%COMP%]   .event-header--icon-title[_ngcontent-%COMP%]{align-self:center;flex-grow:3}.alert-icon[_ngcontent-%COMP%]{float:left;margin-right:5px;margin-top:3px}"]})}}return e})();var YD=(()=>{class e{constructor(t){this.popoverController=t}ngOnChanges(t){}closePopover(){this.popoverController.dismiss()}static{this.\u0275fac=function(i){return new(i||e)(P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-community-notification-photo-popup"]],inputs:{url:"url"},standalone:!1,features:[Et],decls:8,vars:4,consts:[[1,"popover-window-card"],["color","ibf-primary"],["name","close-circle","size","large",1,"popover-close-button",3,"click"],[1,"ion-padding-top","ion-text-center"],[3,"src"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-icon",2),oe("click",function(){return o.closePopover()}),x(),D(3,"ion-card-title"),M(4),Y(5,"translate"),x()(),D(6,"ion-card-content",3),X(7,"img",4),x()()),i&2&&(E(4),be(Z(5,2,"map-popups.community-notification.photo-popup.title")),E(3),Jl("src",o.url,$l))},dependencies:[bi,xi,Zi,ji,Ze,Oe],encapsulation:2})}}return e})();var EM=e=>({formattedDate:e}),TM=e=>({type:e}),bM=e=>({nameVillage:e}),xM=e=>({description:e}),DM=e=>({nameVolunteer:e});function wM(e,n){if(e&1){let t=Ye();D(0,"ion-button",5),oe("click",function(){_e(t);let o=B();return ve(o.openPhotoPopup(o.markerProperties==null?null:o.markerProperties.photoUrl))}),M(1),Y(2,"translate"),X(3,"ion-icon",6),x()}if(e&2){let t=B();W("disabled",!(t.markerProperties!=null&&t.markerProperties.photoUrl)),E(),ne("",Z(2,2,"map-popups.community-notification.photo")," ")}}function NM(e,n){e&1&&(D(0,"div",3)(1,"strong"),M(2),Y(3,"translate"),x()()),e&2&&(E(2),be(Z(3,1,"map-popups.community-notification.no-photo")))}var BD=(()=>{class e{constructor(t,i,o,s){this.popoverController=t,this.alertController=i,this.apiService=o,this.translate=s,this.alertDismissRole={cancel:"cancel",confirm:"confirm"}}ngOnInit(){this.updateContent()}ngOnChanges(t){t.markerProperties&&this.updateContent()}updateContent(){this.markerProperties?.uploadTime&&(this.formattedDate=Fe.fromISO(this.markerProperties.uploadTime).toFormat("d LLLL y, HH:mm"))}openPhotoPopup(t){return ft(this,null,function*(){(yield this.popoverController.create({component:YD,animated:!0,cssClass:"ibf-popover ibf-popover-large",translucent:!0,showBackdrop:!0,componentProps:{url:t}})).present()})}dismissCommunityNotification(t){return ft(this,null,function*(){let i=yield this.alertController.create({header:this.translate.instant("map-popups.community-notification.delete"),message:this.translate.instant("map-popups.community-notification.delete-question"),buttons:[{text:this.translate.instant("map-popups.community-notification.delete-cancel"),role:this.alertDismissRole.cancel},{text:this.translate.instant("map-popups.community-notification.delete-confirm"),role:this.alertDismissRole.confirm}]});yield i.present();let{role:o}=yield i.onDidDismiss();!o||o!==this.alertDismissRole.confirm||this.apiService.dismissCommunityNotification(t).subscribe({next:()=>this.actionResult(this.translate.instant("map-popups.community-notification.delete-successs")),error:()=>this.actionResult(this.translate.instant("map-popups.community-notification.delete-fail"))})})}actionResult(t){return ft(this,null,function*(){let i=yield this.popoverController.create({component:Vu,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0,componentProps:{message:t}});yield i.present(),i.onDidDismiss().then(()=>{window.location.reload()})})}static{this.\u0275fac=function(i){return new(i||e)(P(at),P(Qp),P(Di),P(qt))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-community-notification-popup"]],inputs:{markerProperties:"markerProperties"},standalone:!1,features:[Et],decls:19,vars:37,consts:[[1,"community-notification-title"],[1,"community-notification-info",3,"innerHTML"],["type","button","color","ibf-primary","shape","round","expand","full",3,"disabled"],[1,"community-notification-info"],["type","button","color","ibf-primary","shape","round","expand","full","fill","outline",3,"click"],["type","button","color","ibf-primary","shape","round","expand","full",3,"click","disabled"],["slot","start","name","image"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"strong"),M(2),Y(3,"translate"),x()(),X(4,"div",1),Y(5,"translate"),X(6,"div",1),Y(7,"translate"),X(8,"div",1),Y(9,"translate"),X(10,"div",1),Y(11,"translate"),X(12,"div",1),Y(13,"translate"),se(14,wM,4,4,"ion-button",2)(15,NM,4,3,"div",3),D(16,"ion-button",4),oe("click",function(){return o.dismissCommunityNotification(o.markerProperties==null?null:o.markerProperties.pointDataId)}),M(17),Y(18,"translate"),x()),i&2&&(E(2),be(Z(3,8,"map-popups.community-notification.title")),E(2),W("innerHTML",Je(5,10,"map-popups.community-notification.date",It(27,EM,o.formattedDate||"")),ot),E(2),W("innerHTML",Je(7,13,"map-popups.community-notification.hazard-type",It(29,TM,(o.markerProperties==null?null:o.markerProperties.type)||"")),ot),E(2),W("innerHTML",Je(9,16,"map-popups.community-notification.village-name",It(31,bM,(o.markerProperties==null?null:o.markerProperties.nameVillage)||"")),ot),E(2),W("innerHTML",Je(11,19,"map-popups.community-notification.description",It(33,xM,(o.markerProperties==null?null:o.markerProperties.description)||"")),ot),E(2),W("innerHTML",Je(13,22,"map-popups.community-notification.volunteer",It(35,DM,(o.markerProperties==null?null:o.markerProperties.nameVolunteer)||"")),ot),E(2),re(o.markerProperties!=null&&o.markerProperties.photoUrl?14:15),E(3),be(Z(18,25,"map-popups.community-notification.delete")))},dependencies:[Ke,Ze,Oe],styles:[".community-notification-title[_ngcontent-%COMP%]{margin-bottom:5px;font-size:17px}.community-notification-info[_ngcontent-%COMP%]{margin-bottom:5px;font-size:14px;word-wrap:normal}"]})}}return e})();var IM=(e,n)=>n.countryCodeISO3;function PM(e,n){if(e&1&&(D(0,"ion-select-option",1),M(1),x()),e&2){let t=n.$implicit;Jl("value",t.countryCodeISO3),E(),ne(" ",t.countryName," ")}}function LM(e,n){if(e&1){let t=Ye();D(0,"ion-item")(1,"ion-select",0),oe("ionChange",function(o){_e(t);let s=B();return ve(s.handleCountryChange(o))}),Bt(2,PM,2,2,"ion-select-option",1,IM),x()()}if(e&2){let t=B();E(),W("value",t.country?t.country.countryCodeISO3:null),E(),zt(t.countryService.countries)}}var g9=(()=>{class e{constructor(t){this.countryService=t,this.onCountryChange=i=>{this.country=i}}ngOnInit(){this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange)}ngOnDestroy(){this.countrySubscription.unsubscribe()}handleCountryChange(t){this.countryService.selectCountry(t.detail.value)}static{this.\u0275fac=function(i){return new(i||e)(P($e))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-country-switcher"]],standalone:!1,decls:1,vars:1,consts:[["label","Country","placeholder","Select Country","data-testid","country-switcher-dropdown","interface","popover",3,"ionChange","value"],[3,"value"]],template:function(i,o){i&1&&se(0,LM,4,1,"ion-item"),i&2&&re(o.countryService.countries.length>1?0:-1)},dependencies:[Ot,kC,RC,OC],encapsulation:2})}}return e})();function AM(e,n){if(e&1&&(D(0,"div")(1,"span",3),M(2),x(),X(3,"br"),x()),e&2){let t=B();E(2),be(t.firstLine)}}function OM(e,n){if(e&1&&(D(0,"div")(1,"span",4),M(2),x(),X(3,"br"),x()),e&2){let t=B();E(2),be(t.thirdLine)}}function MM(e,n){if(e&1&&X(0,"ion-icon",2),e&2){let t=B();W("src",t.trigger?"/assets/icons/Alert_Title_Purple.svg":"/assets/icons/Alert_Title_Purple_Clear.svg")}}var zD=(()=>{class e{constructor(t,i){this.disasterTypeService=t,this.timelineService=i,this.date=Fe.now(),this.dateFormat="",this.monthFormat="",this.hourFormat="HH:00",this.onTimelineStateChange=()=>{let o=this.disasterTypeService?.disasterType?.disasterType;this.dateFormat=A_[o]||A_.default,this.monthFormat=O_[o]||O_.default,o===fi.floods&&(this.firstLine=this.date.toFormat(this.dateFormat)),this.secondLine=this.date?this.date.toFormat(this.monthFormat):"Undetermined",o===fi.typhoon||o===fi.flashFloods?this.forecastAlert&&(this.thirdLine=this.date?this.date.toFormat(this.hourFormat):o===fi.typhoon?"Landfall":""):this.thirdLine=""}}ngOnInit(){this.timelineStateSubscription=this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange)}ngOnChanges(t){(t.date||t.forecastAlert||t.trigger)&&this.onTimelineStateChange()}ngOnDestroy(){this.timelineStateSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)(P(it),P(en))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-date-button"]],inputs:{date:"date",forecastAlert:"forecastAlert",trigger:"trigger"},standalone:!1,features:[Et],decls:6,vars:4,consts:[[1,"date-text"],[1,"second-line"],["slot","end",1,"warning-icon","ml-1",3,"src"],[1,"first-line"],[1,"third-line"]],template:function(i,o){i&1&&(D(0,"span",0),se(1,AM,4,1,"div"),D(2,"span",1),M(3),x(),se(4,OM,4,1,"div"),x(),se(5,MM,1,1,"ion-icon",2)),i&2&&(E(),re(o.firstLine?1:-1),E(2),be(o.secondLine),E(),re(o.thirdLine?4:-1),E(),re(o.forecastAlert?5:-1))},dependencies:[Ze],styles:[".first-line[_ngcontent-%COMP%]{font-size:14px}.second-line[_ngcontent-%COMP%]{font-size:10px;font-weight:700}.third-line[_ngcontent-%COMP%]{font-size:10px}.date-text[_ngcontent-%COMP%]{float:left}.alert-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-left:5px}"]})}}return e})();var RM=["*"];function FM(e,n){e&1&&vC(0)}function YM(e,n){e&1&&mC(0)}function BM(e,n){if(e&1&&(D(0,"ion-text",6),M(1),x()),e&2){let t=B();E(),ne(" First issued: ",t.firstIssuedDate," ")}}var G_=(()=>{class e{constructor(){this.isLastUploadDateLate=!1,this.isSelected=!1,this.borderColor=null,this.mouseOver=!1}ngOnChanges(t){t.isSelected&&!this.isSelected&&(this.mouseOver=!1)}onMouseOver(){this.mouseOver=!0}onMouseOut(){this.mouseOver=!1}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=ce({type:e,selectors:[["app-dialogue-turn"]],inputs:{firstIssuedDate:"firstIssuedDate",isLastUploadDateLate:"isLastUploadDateLate",isSelected:"isSelected",borderColor:"borderColor"},standalone:!1,features:[Et],ngContentSelectors:RM,decls:8,vars:6,consts:[["contentTemplate",""],["data-test","chat",1,"dialogue-turn","ion-align-items-start"],[1,"dialogue-turn--content"],[3,"mouseover","focus","mouseout","blur"],["data-testid","dialogue-turn-content",1,"space-y-2"],[4,"ngTemplateOutlet"],[1,"float-right","text-[10px]"]],template:function(i,o){if(i&1){let s=Ye();_C(),se(0,FM,1,0,"ng-template",null,0,TC),D(2,"div",1)(3,"div",2)(4,"ion-card",3),oe("mouseover",function(){return _e(s),ve(o.onMouseOver())})("focus",function(){return _e(s),ve(o.onMouseOver())})("mouseout",function(){return _e(s),ve(o.onMouseOut())})("blur",function(){return _e(s),ve(o.onMouseOut())}),D(5,"ion-card-content",4),se(6,YM,1,0,"ng-container",5)(7,BM,2,1,"ion-text",6),x()()()()}if(i&2){let s=Kl(1);E(2),Ti("is-late",o.isLastUploadDateLate),E(2),va("border-color",o.mouseOver||o.isSelected?o.borderColor:null),E(2),W("ngTemplateOutlet",s),E(),re(o.firstIssuedDate?7:-1)}},dependencies:[DC,bi,xi,ho],styles:[".dialogue-turn[_ngcontent-%COMP%]{display:flex}.dialogue-turn[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{box-shadow:none;background-color:var(--ion-color-fiveten-neutral-100);color:var(--ion-color-ibf-black);border:.125rem solid var(--ion-color-fiveten-neutral-100)}.dialogue-turn--content[_ngcontent-%COMP%]{position:relative;order:2;transform-origin:top left;width:100%}.dialogue-turn--content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:0}.dialogue-turn--content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{-webkit-inline-start:8px!important;padding-inline-start:8px!important;-webkit-inline-end:8px!important;padding-inline-end:8px!important;padding-top:8px!important;padding-bottom:8px!important}.dialogue-turn.is-late[_ngcontent-%COMP%]   .dialogue-turn--content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.dialogue-turn.is-late[_ngcontent-%COMP%]   .dialogue-turn--content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:var(--ion-color-ibf-primary)}.dialogue-turn[_ngcontent-%COMP%]   .dialogue-turn--content[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_speak;animation-duration:.3s;animation-direction:forwards;animation-iteration-count:1}@keyframes _ngcontent-%COMP%_speak{0%{opacity:0}50%{opacity:.2}95%{transform:scale(1.06)}to{opacity:1;transform:scale(1)}}"]})}}return e})();var UD=(()=>{class e{getAssetUrl(t){if(!this.isEmbeddedMode())return t;let i=t.startsWith("/")?t.substring(1):t;return i.startsWith("http")?t:`${Ut.assetBasePath}/${i}`}getAssetUrls(t){return t.map(i=>this.getAssetUrl(i))}resolveAssetUrls(t){return this.isEmbeddedMode()?this.deepResolveUrls(t):t}deepResolveUrls(t){if(typeof t=="string")return t.includes("/assets/")||t.includes("/icons/")||t.includes("/images/")?this.getAssetUrl(t):t;if(Array.isArray(t))return t.map(i=>this.deepResolveUrls(i));if(t&&typeof t=="object"){let i={};for(let[o,s]of Object.entries(t))i[o]=this.deepResolveUrls(s);return i}return t}isEmbeddedMode(){if(typeof window>"u")return!1;try{return!!(document.querySelector("ibf-dashboard[embedded-mode]")||window.location.pathname.includes(Ut.assetBasePath)||window.location.hostname.includes("espocrm")||window.location.hostname.includes("crm"))}catch{return!1}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var HM=(e,n)=>n.label;function VM(e,n){if(e&1){let t=Ye();D(0,"div")(1,"ion-icon",0),oe("click",function(){let o=_e(t).$implicit,s=B();return ve(s.switchDisasterType(o))}),x()()}if(e&2){let t=n.$implicit,i=B();E(),W("ngClass",t!=null&&t.alertLevel?"triggered":"")("src",i.getButtonSvg(t.disasterType,t.alertLevel)),Op("data-testid","disaster-type-button-"+t.disasterType)("data-test-selected",i.isSelectedDisaster(t.disasterType)?"selected-disaster":"")}}var x9=(()=>{class e{constructor(t,i,o,s,l,u){this.disasterTypeService=t,this.countryService=i,this.eventService=o,this.placeCodeService=s,this.authService=l,this.assetUrlService=u,this.disasterTypesCounter=0,this.disasterTypes=[],this.onUserChange=d=>{this.user=d,this.user&&this.country&&this.setupDisasterTypes(this.user,this.country)},this.onCountryChange=d=>{this.country=d,this.user&&this.country&&this.setupDisasterTypes(this.user,this.country)},this.setupDisasterTypes=(d,f)=>{f&&(this.disasterTypesCounter=0,this.disasterTypes=f.disasterTypes.filter(p=>d.disasterTypes.includes(p.disasterType)),this.disasterTypes.sort((p,m)=>p.disasterType>m.disasterType?1:-1),this.disasterTypes.forEach(p=>{this.eventService.getTriggerByDisasterType(f.countryCodeISO3,p,this.onGetDisasterTypeActiveTrigger(this.disasterTypes))}))},this.onGetDisasterTypeActiveTrigger=d=>()=>{if(this.disasterTypesCounter++,this.disasterTypesCounter===d.length){let f=d.find(({alertLevel:m})=>m),p=f||this.disasterTypes[0];this.selectedDisasterType=p.disasterType,this.disasterTypeService.setDisasterType(p)}}}ngOnInit(){this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.authSubscription=this.authService.getAuthSubscription().subscribe(this.onUserChange)}ngOnDestroy(){this.countrySubscription.unsubscribe(),this.authSubscription.unsubscribe()}switchDisasterType(t){this.placeCodeService.clearPlaceCode(),this.placeCodeService.clearPlaceCodeHover(),this.disasterTypeService.setDisasterType(t),this.selectedDisasterType=t.disasterType}isSelectedDisaster(t){return this.selectedDisasterType===t}getButtonSvg(t,i){let o=`${this.isSelectedDisaster(t)?"selected":"nonSelected"}${i?"":"Non"}Triggered`,s=o1[t][o];return this.assetUrlService.getAssetUrl(s)}static{this.\u0275fac=function(i){return new(i||e)(P(it),P($e),P(Ue),P(Vt),P(Nn),P(UD))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-disaster-type"]],standalone:!1,decls:3,vars:0,consts:[["slot","start",1,"disaster-type-button",3,"click","ngClass","src"]],template:function(i,o){i&1&&(D(0,"ion-row"),Bt(1,VM,2,4,"div",null,HM),x()),i&2&&(E(),zt(o.disasterTypes))},dependencies:[ya,Ze,dr],styles:[".disaster-type-button[_ngcontent-%COMP%]{cursor:pointer;display:block;margin:0 2px;height:32px;width:32px}.disaster-type-button[_ngcontent-%COMP%]:hover{opacity:.85;transition:.3s}"]})}}return e})();var GM=e=>({supportEmailAddress:e}),W_=e=>({adminAreaLabelPlural:e}),HD=(e,n,t,i,o,s)=>({setTriggerSource:e,forecastSourceLabel:n,forecastSourceUrl:t,eventName:i,adminAreaLabelPlural:o,eapLink:s}),VD=(e,n,t,i,o)=>({forecastSourceLabel:e,forecastSourceUrl:n,eventName:t,adminAreaLabelPlural:i,eapLink:o});function WM(e,n){e&1&&(M(0),Y(1,"translate")),e&2&&ne(" ",Z(1,1,"set-trigger-component.no-access.header")," ")}function ZM(e,n){e&1&&(M(0),Y(1,"translate")),e&2&&ne(" ",Z(1,1,"set-trigger-component.select-areas.header")," ")}function jM(e,n){e&1&&(M(0),Y(1,"translate")),e&2&&ne(" ",Z(1,1,"set-trigger-component.confirm.header")," ")}function $M(e,n){if(e&1&&(X(0,"span",9),Y(1,"translate")),e&2){let t=B(2);W("innerHTML",Je(1,1,"set-trigger-component.select-areas.content",Nv(4,HD,t.forecastSource==null?null:t.forecastSource.setTriggerSource,(t.forecastSource==null?null:t.forecastSource.label)||"Unkown",(t.forecastSource==null?null:t.forecastSource.url)||"#",t.eventName,t.adminAreaLabelPlural,t.eapLink)),ot)}}function qM(e,n){if(e&1&&(X(0,"span",9),Y(1,"translate")),e&2){let t=B(2);W("innerHTML",Je(1,1,"set-trigger-component.select-areas.content-no-source",wv(4,VD,(t.forecastSource==null?null:t.forecastSource.label)||"Unkown",(t.forecastSource==null?null:t.forecastSource.url)||"#",t.eventName,t.adminAreaLabelPlural,t.eapLink)),ot)}}function XM(e,n){if(e&1&&(D(0,"ion-item",8),X(1,"span",9),Y(2,"translate"),x(),X(3,"br"),D(4,"ion-item",8),X(5,"span",9),Y(6,"translate"),x(),D(7,"ion-item",8),se(8,$M,2,11,"span",9)(9,qM,2,10,"span",9),x(),D(10,"ion-item",8),X(11,"span",9),Y(12,"translate"),x(),D(13,"ion-item",8),X(14,"span",10),Y(15,"translate"),x(),X(16,"br")),e&2){let t=B();E(),W("innerHTML",Je(2,5,"set-trigger-component.no-access.content",It(15,GM,t.supportEmailAddress)),ot),E(4),W("innerHTML",Z(6,8,"set-trigger-component.no-access.about"),ot),E(3),re(t.forecastSource!=null&&t.forecastSource.setTriggerSource?8:9),E(3),W("innerHTML",Z(12,10,"set-trigger-component.no-access.please-note"),ot),E(3),W("innerHTML",Je(15,12,"set-trigger-component.confirm.bullet-list",It(17,W_,t.adminAreaLabelPlural)),ot)}}function JM(e,n){if(e&1&&(X(0,"span",9),Y(1,"translate")),e&2){let t=B(2);W("innerHTML",Je(1,1,"set-trigger-component.select-areas.content",Nv(4,HD,t.forecastSource==null?null:t.forecastSource.setTriggerSource,(t.forecastSource==null?null:t.forecastSource.label)||"Unkown",(t.forecastSource==null?null:t.forecastSource.url)||"#",t.eventName,t.adminAreaLabelPlural,t.eapLink)),ot)}}function KM(e,n){if(e&1&&(X(0,"span",9),Y(1,"translate")),e&2){let t=B(2);W("innerHTML",Je(1,1,"set-trigger-component.select-areas.content-no-source",wv(4,VD,(t.forecastSource==null?null:t.forecastSource.label)||"Unkown",(t.forecastSource==null?null:t.forecastSource.url)||"#",t.eventName,t.adminAreaLabelPlural,t.eapLink)),ot)}}function QM(e,n){if(e&1&&(M(0),D(1,"span"),M(2),Y(3,"compact"),x()),e&2){let t=B().$implicit,i=B(2);ne(" "," - "," "),E(2),be(Je(3,2,t.mainExposureValue,i.mainExposureIndicatorNumberFormat))}}function e2(e,n){if(e&1){let t=Ye();D(0,"ion-item",14),oe("click",function(){let o=_e(t).$implicit,s=B(2);return ve(s.selectedAreas[o.name]=!s.selectedAreas[o.name])}),D(1,"ion-checkbox",15),Dv("ngModelChange",function(o){let s=_e(t).$implicit,l=B(2);return xv(l.selectedAreas[s.name],o)||(l.selectedAreas[s.name]=o),ve(o)}),oe("click",function(o){return _e(t),ve(o.stopPropagation())}),x(),D(2,"ion-label",16),M(3),se(4,QM,4,5),x()()}if(e&2){let t=n.$implicit,i=B(2);E(),lo("name","selectedAreas[",t.name,"]"),bv("ngModel",i.selectedAreas[t.name]),E(2),ne("",t.name," "),E(),re(t.mainExposureValue&&t.mainExposureValue>0?4:-1)}}function t2(e,n){if(e&1&&(D(0,"ion-item",8),se(1,JM,2,11,"span",9)(2,KM,2,10,"span",9),x(),D(3,"ion-item",8)(4,"ion-label",11),M(5),Y(6,"translate"),x()(),D(7,"ion-list",12),Bt(8,e2,5,5,"ion-item",13,Xl),x()),e&2){let t=B();E(),re(t.forecastSource!=null&&t.forecastSource.setTriggerSource?1:2),E(4),ne(" ",Je(6,2,"set-trigger-component.select-areas.select-areas",It(5,W_,t.adminAreaLabelPlural))," "),E(3),zt(t.areas)}}function i2(e,n){if(e&1){let t=Ye();X(0,"ion-item",17),Y(1,"translate"),X(2,"ion-item",18),Y(3,"translate"),D(4,"ion-item",19),oe("click",function(){_e(t);let o=B();return ve(o.understood=!o.understood)}),D(5,"ion-checkbox",20),Dv("ngModelChange",function(o){_e(t);let s=B();return xv(s.understood,o)||(s.understood=o),ve(o)}),oe("click",function(o){return _e(t),ve(o.stopPropagation())}),x(),D(6,"ion-label",21),M(7),Y(8,"translate"),x()()}if(e&2){let t=B();W("innerHTML",Z(1,4,"set-trigger-component.confirm.note"),ot),E(2),W("innerHTML",Je(3,6,"set-trigger-component.confirm.bullet-list",It(11,W_,t.adminAreaLabelPlural)),ot),E(3),bv("ngModel",t.understood),E(2),ne("",Z(8,9,"set-trigger-component.confirm.understand")," ")}}function n2(e,n){e&1&&(M(0),Y(1,"translate")),e&2&&ne(" ",Z(1,1,"set-trigger-component.select-areas.back")," ")}function r2(e,n){e&1&&(M(0),Y(1,"translate")),e&2&&ne(" ",Z(1,1,"set-trigger-component.confirm.back")," ")}function o2(e,n){e&1&&(M(0),Y(1,"translate")),e&2&&ne(" ",Z(1,1,"set-trigger-component.select-areas.continue")," ")}function a2(e,n){e&1&&(M(0),Y(1,"translate")),e&2&&ne(" ",Z(1,1,"set-trigger-component.confirm.continue")," ")}function s2(e,n){if(e&1){let t=Ye();D(0,"ion-item",7)(1,"ion-label"),M(2),Y(3,"translate"),x(),D(4,"div",22)(5,"ion-button",23),oe("click",function(){_e(t);let o=B();return ve(o.popoverStep==="select-areas"?o.closePopover():o.backToSelectAreasStep())}),se(6,n2,2,3)(7,r2,2,3),x(),D(8,"ion-button",24),oe("click",function(){_e(t);let o=B();return ve(o.popoverStep==="select-areas"?o.continueToConfirmStep():o.submitSetTriggerAreas())}),se(9,o2,2,3)(10,a2,2,3),x()()()}if(e&2){let t=B();E(2),ga(" ",t.getCheckedCount()," ",Je(3,5,"set-trigger-component.select-areas.checked-count",It(8,W_,t.adminAreaLabelPlural))," "),E(4),re(t.popoverStep==="select-areas"?6:t.popoverStep==="confirm"?7:-1),E(2),W("disabled",t.popoverStep==="select-areas"?t.isContinueDisabled():t.isSubmitDisabled()),E(),re(t.popoverStep==="select-areas"?9:t.popoverStep==="confirm"?10:-1)}}var GD=(()=>{class e{constructor(t,i,o,s,l){this.popoverController=t,this.apiService=i,this.translateService=o,this.analyticsService=s,this.eventService=l,this.popoverStep="select-areas",this.selectedAreas={},this.understood=!1,this.supportEmailAddress=Ut.supportEmailAddress}ngOnChanges(t){t.areas&&(this.selectedAreas={})}getCheckedCount(){return Object.values(this.selectedAreas).filter(t=>t).length}closePopover(){this.popoverController.dismiss(null,"cancel")}isContinueDisabled(){return!Object.values(this.selectedAreas).some(t=>t)}isSubmitDisabled(){return!this.understood}continueToConfirmStep(){this.popoverStep="confirm"}backToSelectAreasStep(){this.popoverStep="select-areas"}submitSetTriggerAreas(){let i=this.areas.filter(s=>this.selectedAreas[s.name]).map(s=>s.eventPlaceCodeId);this.analyticsService.logEvent(pt.aboutTrigger,{page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),this.apiService.setTrigger(i,this.countryCodeISO3,this.disasterType,!1).subscribe({next:()=>{window.location.reload()},error:()=>this.actionResult(this.translateService.instant("set-trigger-component.confirm.error"))})}actionResult(t){return ft(this,null,function*(){let i=yield this.popoverController.create({component:Vu,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0,componentProps:{message:t}});yield i.present(),i.onDidDismiss().then(()=>{window.location.reload()})})}static{this.\u0275fac=function(i){return new(i||e)(P(at),P(Di),P(qt),P(Kt),P(Ue))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-set-trigger-popover"]],inputs:{eapLink:"eapLink",forecastSource:"forecastSource",adminAreaLabelPlural:"adminAreaLabelPlural",areas:"areas",mainExposureIndicatorNumberFormat:"mainExposureIndicatorNumberFormat",hasSetTriggerPermission:"hasSetTriggerPermission",countryCodeISO3:"countryCodeISO3",disasterType:"disasterType",eventName:"eventName"},standalone:!1,features:[Et],decls:14,vars:3,consts:[[1,"popover-window-card"],["color","ibf-primary"],["name","close-circle","size","large",1,"popover-close-button",3,"click"],[1,"font-[Montserrat]","font-semibold"],[1,"inline-block","align-middle"],["name","warning"],[1,"ion-padding-top","ion-text-center"],["lines","none",1,"ion-margin-top"],["lines","none"],[3,"innerHTML"],[1,"bullet-list",3,"innerHTML"],[1,"mb-0","font-[Montserrat]","font-semibold"],[1,"background-light","ion-no-padding"],["lines","none",1,"area-item"],["lines","none",1,"area-item",3,"click"],["slot","start","color","ibf-primary",1,"m-2",3,"ngModelChange","click","ngModel","name"],[1,"ion-text-wrap","m-0"],["lines","none",1,"font-[Montserrat]","font-semibold",3,"innerHTML"],["lines","none",1,"ion-margin-bottom","bullet-list",3,"innerHTML"],["lines","none",3,"click"],["slot","start","color","ibf-primary","name","understood",1,"mr-2",3,"ngModelChange","click","ngModel"],[1,"ion-text-wrap"],[1,"space-x-2"],["size","default","fill","clear","shape","round","color","dark",3,"click"],["size","default","fill","solid","shape","round","color","ibf-trigger-alert-primary",3,"click","disabled"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-icon",2),oe("click",function(){return o.closePopover()}),x(),D(3,"ion-card-title",3)(4,"div",4),X(5,"ion-icon",5),x(),se(6,WM,2,3)(7,ZM,2,3)(8,jM,2,3),x()(),D(9,"ion-card-content",6),se(10,XM,17,19)(11,t2,10,7)(12,i2,9,13)(13,s2,11,10,"ion-item",7),x()()),i&2&&(E(6),re(o.hasSetTriggerPermission?o.popoverStep==="select-areas"?7:8:6),E(4),re(o.hasSetTriggerPermission?o.popoverStep==="select-areas"?11:o.popoverStep==="confirm"?12:-1:10),E(3),re(o.hasSetTriggerPermission?13:-1))},dependencies:[Ql,ic,Ke,bi,xi,Zi,ji,Wp,Ze,Ot,si,rc,Vp,Oe,bs],styles:[".bullet-list[_ngcontent-%COMP%]  ul{list-style-type:disc;padding-left:20px}.area-item[_ngcontent-%COMP%]{--min-height: 34px}"]})}}return e})();function l2(e,n){if(e&1&&(D(0,"div",0),M(1),Y(2,"translate"),x()),e&2){let t=B(2);E(),ne(" ",Z(2,1,"chat-component."+t.disasterTypeName+".event-switcher.current-event-message")," ")}}function c2(e,n){if(e&1){let t=Ye();D(0,"ion-button",3),oe("click",function(){_e(t);let o=B(2);return ve(o.switchEvent(o.event))}),M(1),Y(2,"translate"),X(3,"ion-icon",4),x()}if(e&2){let t=B(2);Ti("font-bold",(t.event==null?null:t.event.eventName)===t.selectedEventName),E(),ne(" ",Je(2,3,"chat-component."+t.disasterTypeName+".event-switcher.current-event-message",t.event)," ")}}function u2(e,n){if(e&1){let t=Ye();D(0,"ion-button",5),oe("click",function(){_e(t);let o=B(2);return ve(o.switchEvent(o.event))}),M(1),Y(2,"translate"),X(3,"ion-icon",6),x()}if(e&2){let t=B(2);Ti("font-bold",(t.event==null?null:t.event.eventName)===t.selectedEventName),E(),ne(" ",Z(2,3,"chat-component."+t.disasterTypeName+".event-switcher.switch-event-button")," ")}}function d2(e,n){if(e&1&&se(0,l2,3,3,"div",0)(1,c2,4,6,"ion-button",1)(2,u2,4,5,"ion-button",2),e&2){let t=B();re((t.event==null?null:t.event.eventName)===t.selectedEventName&&!t.showLessButton()?0:-1),E(),re((t.event==null?null:t.event.eventName)===t.selectedEventName&&t.showLessButton()?1:-1),E(),re((t.event==null?null:t.event.eventName)!==t.selectedEventName?2:-1)}}var WD=(()=>{class e{constructor(t,i,o){this.disasterTypeService=t,this.eventService=i,this.timelineService=o,this.onEventStateChange=s=>{this.eventState=s,this.selectedEventName=this.eventState?.event?.eventName},this.onDisasterTypeChange=s=>{this.disasterTypeName=s.disasterType},this.onTimelineStateChange=s=>{this.timelineState=s}}ngOnInit(){this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.initialEventStateSubscription=this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.manualEventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange),this.timelineStateSubscription=this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange)}ngOnDestroy(){this.disasterTypeSubscription.unsubscribe(),this.initialEventStateSubscription.unsubscribe(),this.manualEventStateSubscription.unsubscribe(),this.timelineStateSubscription.unsubscribe()}multipleActiveEvents(){return this.eventState?.events.length>1}showLessButton(){return!this.eventService.skipNationalView(this.disasterTypeName)}switchEvent(t){if(this.selectedEventName===t.eventName){this.eventService.resetEvents();return}this.selectedEventName=t.eventName,this.timelineState.timeStepButtons?.length&&(this.eventService.switchEvent(t.eventName),this.timelineService.setTimelineState(t.firstTriggerLeadTime||t.firstLeadTime,t.eventName))}static{this.\u0275fac=function(i){return new(i||e)(P(it),P(Ue),P(en))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-event-switcher"]],inputs:{event:"event"},standalone:!1,decls:1,vars:1,consts:[[1,"mt-2","text-center","italic"],["shape","round","slot","start","color","ibf-trigger-alert-primary","size","small","expand","full",1,"mt-2",3,"font-bold"],["data-testid","event-switch-button","shape","round","slot","start","color","ibf-trigger-alert-primary","size","small","strong","true","expand","full",1,"mt-2",3,"font-bold"],["shape","round","slot","start","color","ibf-trigger-alert-primary","size","small","expand","full",1,"mt-2",3,"click"],["name","arrow-back","slot","start"],["data-testid","event-switch-button","shape","round","slot","start","color","ibf-trigger-alert-primary","size","small","strong","true","expand","full",1,"mt-2",3,"click"],["name","arrow-forward","slot","end"]],template:function(i,o){i&1&&se(0,d2,3,3),i&2&&re(o.multipleActiveEvents()?0:-1)},dependencies:[Ke,Ze,Oe],encapsulation:2})}}return e})();var ZD=(()=>{class e{constructor(t){this.sanitizer=t}get safeValue(){return this.sanitizer.bypassSecurityTrustHtml(this.value||"")}static{this.\u0275fac=function(i){return new(i||e)(P(zp))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-tooltip-popover"]],inputs:{value:"value"},standalone:!1,decls:1,vars:1,consts:[[1,"ion-padding","tooltip--label",3,"innerHTML"]],template:function(i,o){i&1&&X(0,"ion-label",0),i&2&&W("innerHTML",o.safeValue,ot)},dependencies:[si],styles:["[_nghost-%COMP%]{display:inline-block}ion-label[_ngcontent-%COMP%]{font-size:12px}"]})}}return e})();function f2(e,n){if(e&1){let t=Ye();D(0,"ion-button",1),oe("click",function(o){_e(t);let s=B();return ve(s.presentPopover(o))}),X(1,"ion-icon",2),x()}if(e&2){let t=B();E(),W("color",t.color)}}var xs=(()=>{class e{constructor(t){this.popoverController=t}ngOnChanges(t){}presentPopover(t){return ft(this,null,function*(){let i=yield this.popoverController.create({component:ZD,componentProps:{value:this.value},cssClass:"tooltip--container leading-tight",event:t,showBackdrop:!1});yield i.present(),yield i.onDidDismiss()})}static{this.\u0275fac=function(i){return new(i||e)(P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-tooltip"]],inputs:{value:"value",color:"color"},standalone:!1,features:[Et],decls:1,vars:1,consts:[["fill","clear","shape","round","size","small",1,"tooltip--button","ion-no-padding","ion-no-margin"],["fill","clear","shape","round","size","small",1,"tooltip--button","ion-no-padding","ion-no-margin",3,"click"],["name","information-circle-outline","size","small","aria-hidden","true","slot","icon-only",3,"color"]],template:function(i,o){i&1&&se(0,f2,2,1,"ion-button",0),i&2&&re(o.value?0:-1)},dependencies:[Ke,Ze],styles:["ul{list-style-type:disc;padding-left:20px}"]})}}return e})();var m2=e=>({adminAreaLabelPlural:e}),_2=e=>({firstLeadTimeDate:e}),v2=e=>({date:e}),g2=(e,n)=>n.eventPlaceCodeId;function y2(e,n){if(e&1&&(X(0,"span",5),Y(1,"translate")),e&2){let t=B(2);W("innerHTML",Je(1,1,"chat-component."+(t.disasterType==null?null:t.disasterType.disasterType)+".active-event.first-warning-date",It(4,_2,t.event.firstLeadTimeDate)),ot)}}function S2(e,n){if(e&1&&X(0,"span",5),e&2){let t=B(2);W("innerHTML",t.typhoonLandfallText,ot)}}function C2(e,n){if(e&1&&(D(0,"span"),M(1),Y(2,"translate"),x()),e&2){let t=B(2);E(),be(Je(2,1,"chat-component.common.alertLevel.expected",It(4,v2,t.event.firstTriggerLeadTimeDate||t.event.firstLeadTimeDate)))}}function E2(e,n){if(e&1&&(X(0,"p",5),Y(1,"translate")),e&2){let t=B(2);W("innerHTML",Je(1,1,"chat-component.common.alertLevel.set-by",t.event),ot)}}function T2(e,n){if(e&1&&(D(0,"p")(1,"span",6),M(2),Y(3,"translate"),x(),D(4,"a",8),M(5),x()()),e&2){let t=B(2);E(2),ne("",Z(3,3,"chat-component.common.alertLevel.source")," "),E(2),W("href",t.countryDisasterSettings==null?null:t.countryDisasterSettings.forecastSource.url,$l),E(),be(t.countryDisasterSettings==null?null:t.countryDisasterSettings.forecastSource.label)}}function b2(e,n){if(e&1&&(D(0,"span"),M(1),Y(2,"titlecase"),Y(3,"compact"),x()),e&2){let t=B(2);E(),be("("+Z(2,1,t.mainExposureIndicatorLabel)+" "+Je(3,3,t.event.mainExposureValueSum,t.mainExposureIndicatorNumberFormat)+")")}}function x2(e,n){e&1&&(D(0,"span"),M(1),Y(2,"translate"),x()),e&2&&(E(),be("("+Z(2,1,"chat-component.common.alertLevel.no-data")+")"))}function D2(e,n){if(e&1&&(D(0,"span"),M(1),x()),e&2){let t=B().$implicit;E(),ne("(",t.nameParent,")")}}function w2(e,n){if(e&1&&(M(0),D(1,"span"),M(2),Y(3,"compact"),x()),e&2){let t=B().$implicit,i=B(3);ne(" "," - "," "),E(2),be(Je(3,2,t.mainExposureValue,i.mainExposureIndicatorNumberFormat))}}function N2(e,n){if(e&1){let t=Ye();D(0,"li",12),oe("click",function(){let o=_e(t).$implicit,s=B(3);return ve(s.selectArea(o))})("keydown.enter",function(){let o=_e(t).$implicit,s=B(3);return ve(s.selectArea(o))}),M(1),se(2,D2,2,1,"span")(3,w2,4,5),x()}if(e&2){let t=n.$implicit;E(),ne(" ",t.name," "),E(),re(t.nameParent?2:-1),E(),re(t.mainExposureValue&&t.mainExposureValue>0?3:-1)}}function I2(e,n){if(e&1){let t=Ye();D(0,"ion-button",13),oe("click",function(){_e(t);let o=B(3);return ve(o.openSetTriggerPopover())}),M(1),Y(2,"translate"),x()}e&2&&(E(),be(Z(2,1,"chat-component.common.set-trigger.btn-text")))}function P2(e,n){if(e&1&&(D(0,"div")(1,"ul",9),Bt(2,N2,4,3,"li",10,g2),x()(),se(4,I2,3,3,"ion-button",11)),e&2){let t=B(2);E(2),zt(t.areas),E(2),re(t.disasterType.enableSetWarningToTrigger&&t.event.alertLevel!=="trigger"?4:-1)}}function L2(e,n){if(e&1&&X(0,"app-event-switcher",7),e&2){let t=B(2);W("event",t.event)}}function A2(e,n){if(e&1&&(D(0,"app-dialogue-turn",0)(1,"div",1)(2,"span",2),X(3,"ion-icon",3),D(4,"span"),M(5),x()(),X(6,"app-tooltip",4),Y(7,"translate"),x(),D(8,"p"),se(9,y2,2,6,"span",5),x(),D(10,"p")(11,"span",6),M(12),x(),se(13,S2,1,1,"span",5)(14,C2,3,6,"span"),x(),se(15,E2,2,4,"p",5)(16,T2,6,5,"p"),D(17,"p")(18,"span",6),M(19),Y(20,"translate"),x(),M(21,"\xA0"),D(22,"span"),M(23),x(),se(24,b2,4,6,"span")(25,x2,3,3,"span"),x(),se(26,P2,5,1)(27,L2,1,1,"app-event-switcher",7),x()),e&2){let t=B();W("isSelected",t.eventBubbleIsSelected(t.event.eventName))("borderColor",t.cardColors.borderColor)("firstIssuedDate",t.event.firstIssuedDate),E(3),va("color",t.cardColors.iconColor),E(),va("color",t.cardColors.headerTextColor),E(),be(t.event.header),E(),W("value",Z(7,18,"chat-component.common.event-tooltip")),E(3),re(t.showFirstWarningDate()?9:-1),E(3),ne("",t.event.disasterSpecificProperties.eapAlertClass.label,": "),E(),re(t.typhoonLandfallText?13:14),E(2),re(t.event.userTrigger?15:t.countryDisasterSettings!=null&&t.countryDisasterSettings.forecastSource?16:-1),E(4),be(Je(20,20,"chat-component.common.alertLevel.exposed-areas",It(23,m2,t.adminAreaLabelPlural))),E(4),be(t.event.nrAlertAreas+" "),E(),re(t.event.mainExposureValueSum?24:25),E(2),re(t.event.eventName===t.selectedEvent?26:-1),E(),re(t.event?27:-1)}}function O2(e,n){if(e&1&&(D(0,"app-dialogue-turn"),X(1,"p",5),Y(2,"translate"),x()),e&2){let t=B();E(),W("innerHTML",Z(2,1,"chat-component."+(t.disasterType==null?null:t.disasterType.disasterType)+".no-event.welcome"),ot)}}var jD=(()=>{class e{constructor(t,i,o,s,l,u){this.authService=t,this.placeCodeService=i,this.eventService=o,this.adminLevelService=s,this.translateService=l,this.popoverController=u,this.onPlaceCodeHoverChange=d=>{this.placeCodeHover=d},this.onUserChange=d=>{d&&(this.userRole=d.userRole)}}ngOnChanges(t){t.event&&this.event&&(this.typhoonLandfallText=this.showTyphoonLandfallText(this.event),this.event.header=this.getHeader(this.event),this.event.mainExposureValueSum=this.getEventMainExposureValue(this.event,this.mainExposureIndicatorNumberFormat))}ngAfterViewChecked(){this.placeCodeHoverSubscription=this.placeCodeService.getPlaceCodeHoverSubscription().subscribe(this.onPlaceCodeHoverChange),this.authService.getAuthSubscription().subscribe(this.onUserChange),this.typhoonLandfallText=this.showTyphoonLandfallText(this.event),this.event&&(this.event.header=this.getHeader(this.event),this.event.mainExposureValueSum=this.getEventMainExposureValue(this.event,this.mainExposureIndicatorNumberFormat))}ngOnDestroy(){this.placeCodeHoverSubscription.unsubscribe()}getEventMainExposureValue(t,i){let o=t.alertAreas?.reduce((s,l)=>s+l.mainExposureValue,0);return i===Hn.perc?o/t.alertAreas?.length||1:o}selectArea(t){this.adminLevelService.zoomInAdminLevel(),this.placeCodeService.setPlaceCode({countryCodeISO3:this.countryCodeISO3,placeCodeName:t.name,placeCode:t.placeCode,placeCodeParentName:t.nameParent,adminLevel:t.adminLevel,eventName:this.event?.eventName||null})}hasSetTriggerPermission(){return[Pv.Admin,Pv.LocalAdmin].includes(this.userRole)}eventBubbleIsSelected(t){return t===this.eventService.state?.event?.eventName||t===this.placeCodeHover?.eventName}getHeader(t){let i=`chat-component.${this.disasterType?.disasterType}.active-event.header`;return Lr[t.firstLeadTime]==="0"&&(i+="-ongoing"),t.alertLevel!==xn.TRIGGER&&(i+="-below-trigger"),this.translateService.instant(i,{firstLeadTimeDate:t.firstLeadTimeDate,firstTriggerLeadTimeDate:t.firstTriggerLeadTimeDate,eventName:t.eventName?.split("_")[0]||this.disasterType?.label,disasterTypeLabel:this.disasterType?.label})}showTyphoonLandfallText(t){if(this.disasterType?.disasterType!==fi.typhoon||!t)return;let i=t.firstLeadTime===zi.hour0,o=t.disasterSpecificProperties?.typhoonLandfall,s=t.disasterSpecificProperties?.typhoonNoLandfallYet,l=t.alertLevel===xn.TRIGGER?"":this.translateService.instant("chat-component.typhoon.active-event.warning");return`${this.translateService.instant(`chat-component.typhoon.active-event.${i?"ongoing-event":"upcoming-event"}.${s?"no-landfall-yet":o?"landfall":"no-landfall"}`,{firstLeadTimeDate:t.firstLeadTimeDate})} ${l}`}showFirstWarningDate(){return this.disasterType?.disasterType!==fi.floods?!1:this.event.firstLeadTime!==this.event.firstTriggerLeadTime}openSetTriggerPopover(){return ft(this,null,function*(){yield(yield this.popoverController.create({component:GD,animated:!0,cssClass:"ibf-popover ibf-popover-large",translucent:!0,showBackdrop:!0,componentProps:{forecastSource:this.countryDisasterSettings?.forecastSource,eapLink:this.countryDisasterSettings?.eapLink,adminAreaLabelPlural:this.adminAreaLabelPlural,areas:this.areas,mainExposureIndicatorNumberFormat:this.mainExposureIndicatorNumberFormat,hasSetTriggerPermission:this.hasSetTriggerPermission(),countryCodeISO3:this.countryCodeISO3,disasterType:this.disasterType.disasterType,eventName:this.event?.eventName?.split("_")[0]}})).present()})}static{this.\u0275fac=function(i){return new(i||e)(P(Nn),P(Vt),P(Ue),P(yn),P(qt),P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-event-speech-bubble"]],inputs:{type:"type",event:"event",selectedEvent:"selectedEvent",disasterType:"disasterType",countryDisasterSettings:"countryDisasterSettings",countryCodeISO3:"countryCodeISO3",areas:"areas",adminAreaLabelPlural:"adminAreaLabelPlural",mainExposureIndicatorLabel:"mainExposureIndicatorLabel",mainExposureIndicatorNumberFormat:"mainExposureIndicatorNumberFormat",cardColors:"cardColors"},standalone:!1,features:[Et],decls:2,vars:2,consts:[[3,"isSelected","borderColor","firstIssuedDate"],[1,"event-header"],[1,"event-header--icon-title"],["src","/assets/icons/Alert_Title.svg","slot","start",1,"alert-icon"],["data-testid","tooltip-button","color","ibf-no-alert-primary",1,"event-header--tooltip",3,"value"],[3,"innerHTML"],[1,"font-semibold"],[3,"event"],["target","_blank",3,"href"],[1,"list-inside","list-disc","text-xs"],["tabindex","0",1,"my-1","cursor-pointer","hover:underline"],["data-testid","set-trigger-button","shape","round","slot","start","size","small","strong","true","expand","full","fill","outline","color","fiveten-red-700",1,"set-trigger-button"],["tabindex","0",1,"my-1","cursor-pointer","hover:underline",3,"click","keydown.enter"],["data-testid","set-trigger-button","shape","round","slot","start","size","small","strong","true","expand","full","fill","outline","color","fiveten-red-700",1,"set-trigger-button",3,"click"]],template:function(i,o){i&1&&se(0,A2,28,25,"app-dialogue-turn",0)(1,O2,3,3,"app-dialogue-turn"),i&2&&(re(o.type==="active"?0:-1),E(),re(o.disasterType&&o.type==="no-event"?1:-1))},dependencies:[Ke,Ze,G_,WD,xs,wC,Oe,bs],styles:["app-dialogue-turn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], app-dialogue-turn[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], app-dialogue-turn[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:12px}.action-label[_ngcontent-%COMP%]{font-size:small}ion-checkbox[_ngcontent-%COMP%]{margin-inline-end:8px!important}.event-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-weight:700;font-size:.875rem}.event-header[_ngcontent-%COMP%]   .event-header--icon-title[_ngcontent-%COMP%]{align-self:center;flex-grow:3}.event-header[_ngcontent-%COMP%]   .event-header--tooltip[_ngcontent-%COMP%]{align-self:start}.alert-icon[_ngcontent-%COMP%]{float:left;margin-right:5px;margin-top:3px}.set-trigger-button[_ngcontent-%COMP%]::part(native){background:var(--ion-color-ibf-white);border-color:var(--ion-color-fiveten-red-500)}"]})}}return e})();var $D=(()=>{class e{constructor(t){this.popoverController=t}closePopover(){this.popoverController.dismiss()}getOperatingSystem(){let t="Unknown";return navigator.appVersion.includes("Win")&&(t="Windows"),navigator.appVersion.includes("Mac")&&(t="MacOS"),navigator.appVersion.includes("Linux")&&(t="Linux"),t}static{this.\u0275fac=function(i){return new(i||e)(P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-export-view-popover"]],standalone:!1,decls:23,vars:24,consts:[["data-test","export-view-popover",1,"popover-window-card"],["color","ibf-primary"],["data-testid","export-view-close-button","name","close-circle","size","large",1,"popover-close-button",3,"click"],["data-testid","export-view-title"],[1,"ion-padding-top"],[1,"ion-margin-bottom"],["data-testid","export-view-windows-os"],["href","https://support.microsoft.com/en-us/windows/open-snipping-tool-and-take-a-screenshot-a35ac9ff-4a58-24c9-3253-f12bac9f9d44","target","_blank",1,"no-underline","hover:underline",3,"title"],["data-testid","export-view-mac-os"],["href","https://support.apple.com/en-us/HT201361","title","'export-view.instruction-mac' | translate","target","_blank",1,"no-underline","hover:underline"],["data-testid","export-view-linux-os"],["href","https://help.ubuntu.com/stable/ubuntu-help/screen-shot-record.html","title","'export-view.instruction-linux' | translate","target","_blank",1,"no-underline","hover:underline"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-icon",2),oe("click",function(){return o.closePopover()}),x(),D(3,"ion-card-title",3),M(4),Y(5,"translate"),x()(),D(6,"ion-card-content",4)(7,"div",5),M(8),Y(9,"translate"),x(),D(10,"ion-text",6)(11,"a",7),Y(12,"translate"),M(13),Y(14,"translate"),x()(),D(15,"ion-text",8)(16,"a",9),M(17),Y(18,"translate"),x()(),D(19,"ion-text",10)(20,"a",11),M(21),Y(22,"translate"),x()()()()),i&2&&(E(4),ne(" ",Z(5,12,"export-view.title")," "),E(4),ne(" ",Z(9,14,"export-view.instruction")," "),E(2),Ti("ion-hide",o.getOperatingSystem()!=="Windows"),E(),W("title",Z(12,16,"export-view.instruction-windows")),E(2),ne(" ",Z(14,18,"export-view.instruction-windows")," "),E(2),Ti("ion-hide",o.getOperatingSystem()!=="MacOS"),E(2),ne(" ",Z(18,20,"export-view.instruction-mac")," "),E(2),Ti("ion-hide",o.getOperatingSystem()!=="Linux"),E(2),ne(" ",Z(22,22,"export-view.instruction-linux")," "))},dependencies:[bi,xi,Zi,ji,Ze,ho,Oe],encapsulation:2})}}return e})();var qD=(()=>{class e{constructor(t,i,o){this.popoverController=t,this.analyticsService=i,this.eventService=o}presentPopover(){return ft(this,null,function*(){let t=yield this.popoverController.create({component:$D,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0});this.analyticsService.logEvent(pt.exportView,{page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),t.present()})}static{this.\u0275fac=function(i){return new(i||e)(P(at),P(Kt),P(Ue))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-export-view"]],standalone:!1,decls:3,vars:3,consts:[["data-testid","export-view-button","size","small","strong","true","expand","full","shape","round","fill","outline","color","fiveten-neutral-900",1,"export-view-button",3,"click"]],template:function(i,o){i&1&&(D(0,"ion-button",0),oe("click",function(){return o.presentPopover()}),M(1),Y(2,"translate"),x()),i&2&&(E(),ne(" ",Z(2,1,"export-view.title"),`
`))},dependencies:[Ke,Oe],styles:[".export-view-button[_ngcontent-%COMP%]::part(native){background:var(--ion-color-fiveten-neutral-0);border-color:var(--ion-color-fiveten-navy-300)}"]})}}return e})();var XD=(()=>{class e{constructor(t){this.popoverController=t,this.emailAddress=Ut.supportEmailAddress}closePopover(){this.popoverController.dismiss()}static{this.\u0275fac=function(i){return new(i||e)(P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-forgot-password-popover"]],standalone:!1,decls:12,vars:4,consts:[[1,"popover-window-card"],["color","ibf-primary"],["name","close-circle","size","large",1,"popover-close-button",3,"click"],[1,"ion-padding-top","ion-text-center"],["lines","none"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-icon",2),oe("click",function(){return o.closePopover()}),x(),D(3,"ion-card-title"),M(4,"Forgot password?"),x()(),D(5,"ion-card-content",3)(6,"ion-item",4)(7,"span"),M(8),Y(9,"translate"),D(10,"strong"),M(11),x()()()()()),i&2&&(E(8),ne(" ",Z(9,2,"login-page.forgot-password-message")," "),E(3),be(o.emailAddress))},dependencies:[bi,xi,Zi,ji,Ze,Ot,Oe],encapsulation:2})}}return e})();var M2=(e,n)=>({videoInsert:e,pdfUrl:n}),k2=e=>({whatsNewUrl:e});function R2(e,n){if(e&1&&(X(0,"br"),D(1,"div"),X(2,"iframe",6),x()),e&2){let t=B();E(2),W("src",t.safeVideoUrl,uC)}}var JD=(()=>{class e{constructor(t,i,o){this.popoverController=t,this.domSanitizer=i,this.translateService=o,this.whatsNewUrl=Ut.whatsNewUrl}ngOnInit(){this.safeVideoUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.videoUrl),this.videoInsert=this.videoUrl?this.translateService.instant("ibf-guide-component.video-insert"):""}closePopover(){this.popoverController.dismiss()}static{this.\u0275fac=function(i){return new(i||e)(P(at),P(zp),P(qt))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-ibf-guide-popover"]],standalone:!1,decls:13,vars:17,consts:[["data-test","ibf-guide-popover",1,"popover-window-card"],["color","ibf-primary"],["data-testid","ibf-guide-close-button","name","close-circle","size","large",1,"popover-close-button",3,"click"],["data-testid","ibf-guide-title"],["data-testid","ibf-guide-content",1,"ion-padding-top"],[3,"innerHTML"],["width","560","height","315","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-icon",2),oe("click",function(){return o.closePopover()}),x(),D(3,"ion-card-title",3),M(4),Y(5,"translate"),x()(),D(6,"ion-card-content",4),X(7,"p",5),Y(8,"translate"),X(9,"br")(10,"p",5),Y(11,"translate"),se(12,R2,3,1),x()()),i&2&&(E(4),be(Z(5,4,"ibf-guide-component.title")),E(3),W("innerHTML",Je(8,6,"ibf-guide-component.video-pdf-description",CC(12,M2,o.videoInsert,o.pdfUrl)),ot),E(3),W("innerHTML",Je(11,9,"ibf-guide-component.whats-new-description",It(15,k2,o.whatsNewUrl)),ot),E(2),re(o.videoUrl?12:-1))},dependencies:[bi,xi,Zi,ji,Ze,Oe],encapsulation:2})}}return e})();var KD=(()=>{class e{constructor(t,i,o,s){this.countryService=t,this.popoverController=i,this.analyticsService=o,this.eventService=s,this.onCountryChange=l=>{l&&(this.pdfUrl=l.notificationInfo.linkPdf,this.videoUrl=l.notificationInfo.linkVideo)},this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange)}ngOnDestroy(){this.countrySubscription.unsubscribe()}presentPopover(){return ft(this,null,function*(){let t=yield this.popoverController.create({component:JD,componentProps:{videoUrl:this.videoUrl,pdfUrl:this.pdfUrl},animated:!0,cssClass:"ibf-popover ibf-popover-large",translucent:!0,showBackdrop:!0});this.analyticsService.logEvent(pt.watchIbfGuide,{page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),t.present()})}static{this.\u0275fac=function(i){return new(i||e)(P($e),P(at),P(Kt),P(Ue))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-ibf-guide-button"]],standalone:!1,decls:3,vars:3,consts:[["data-testid","ibf-guide-button","size","small","strong","true","expand","full","shape","round","fill","outline","color","fiveten-neutral-900",1,"ibf-guide-button",3,"click"]],template:function(i,o){i&1&&(D(0,"ion-button",0),oe("click",function(){return o.presentPopover()}),M(1),Y(2,"translate"),x()),i&2&&(E(),ne(" ",Z(2,1,"ibf-guide-component.title"),`
`))},dependencies:[Ke,Oe],styles:[".ibf-guide-button[_ngcontent-%COMP%]::part(native){background:var(--ion-color-fiveten-neutral-0);border-color:var(--ion-color-fiveten-navy-300)}"]})}}return e})();function F2(e,n){if(e&1&&M(0),e&2){let t=B();ne(" ",t.unit," ")}}function Y2(e,n){if(e&1&&M(0),e&2){let t=B();ne(" ",t.unit," ")}}var Z_=(()=>{class e{constructor(){this.addComma=t=>Math.round(t).toLocaleString("en-US")}ngOnInit(){this.updateStyles()}ngOnChanges(t){this.updateStyles()}updateStyles(){!this.backgroundColor||!this.textColor||!this.thresholdDescription||!this.thresholdPosition||this.barWidth===null||this.barWidth===void 0||this.barValue===null||this.barValue===void 0||this.thresholdValue===null||this.thresholdValue===void 0||(this.barBackgroundStyle=this.getBarBackgroundStyle(),this.barThresholdStyle=this.getBarThresholdStyle(),this.barLevelStyle=this.getBarLevelStyle(),this.descriptionStyle=this.getDescriptionStyle(),this.valueStyle=this.getValueStyle())}getBarBackgroundStyle(){return`
      border-radius: 10px;
      height: 20px;
      background-color: #d4d3d2;
      width: 100%;
    `}getBarThresholdStyle(){return`
      border-radius:10px 0 0 10px;
      border-right: dashed;
      border-right-width: thin;
      height:20px;
      width: ${this.thresholdPosition}%
    `}getBarLevelStyle(){return`
      border-radius:10px;
      height:20px;
      line-height:20px;
      background-color:${this.backgroundColor};
      color:${this.textColor};
      text-align:center;
      white-space: nowrap;
      min-width: 20%;
      width:${this.barWidth}%
    `}getDescriptionStyle(){return`
      height:20px;
      background-color:none;
      border-right: dashed;
      border-right-width: thin;
      float: left; width: ${this.thresholdPosition}%;
      padding-top: 5px;
      margin-bottom:10px;
      text-align: right;
      padding-right: 2px`}getValueStyle(){return`
    height:20px;
    background-color:none;
    margin-left: ${this.thresholdPosition+1}%;
    text-align: left;
    width: 20%;
    padding-top: 5px
    `}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=ce({type:e,selectors:[["app-threshold-bar"]],inputs:{backgroundColor:"backgroundColor",textColor:"textColor",barWidth:"barWidth",barValue:"barValue",thresholdDescription:"thresholdDescription",thresholdValue:"thresholdValue",unit:"unit",thresholdPosition:"thresholdPosition"},standalone:!1,features:[Et],decls:13,vars:15,template:function(i,o){i&1&&(D(0,"div")(1,"div")(2,"div")(3,"div")(4,"strong"),M(5),x(),se(6,F2,1,1),x()()()(),D(7,"div"),M(8),x(),D(9,"div")(10,"strong"),M(11),x(),se(12,Y2,1,1),x()),i&2&&(E(),ql(o.barBackgroundStyle),E(),ql(o.barThresholdStyle),E(),ql(o.barLevelStyle),E(2),be(o.addComma(o.barValue)),E(),re(o.unit?6:-1),E(),ql(o.descriptionStyle),E(),ne("",o.thresholdDescription,":"),E(),ql(o.valueStyle),E(2),be(o.thresholdValue),E(),re(o.unit?12:-1))},encapsulation:2})}}return e})();function B2(e,n){if(e&1&&(D(0,"div",1)(1,"div")(2,"ion-label",2)(3,"span",3),M(4),x(),M(5),Y(6,"translate"),x(),D(7,"ion-label",4),X(8,"ion-icon",5),M(9),Y(10,"translate"),x()(),X(11,"app-tooltip",6),Y(12,"translate"),x(),D(13,"div",7)(14,"ion-label",8),M(15),Y(16,"translate"),x()(),X(17,"app-threshold-bar",9),Y(18,"translate"),Y(19,"translate")),e&2){let t=B();E(4),be(t.currentString),E(),ne(" ",Z(6,14,"map-popups.river-gauge.sea-level")," "),E(2),W("color",t.difference<=0?"success":"danger"),E(),W("name",t.difference<=0?"caret-down-outline":"caret-up-outline"),E(),ga("",t.differenceAbsolute," ",Z(10,16,"map-popups.river-gauge.unit"),""),E(2),W("value",Z(12,18,"map-popups.river-gauge.tooltip")),E(4),be(Z(16,20,"map-popups.river-gauge.current")),E(2),W("barWidth",t.triggerWidth)("barValue",t.current)("thresholdDescription",Z(18,22,"map-popups.river-gauge.normal"))("thresholdValue",t.reference)("thresholdPosition",80)("unit",Z(19,24,"map-popups.river-gauge.unit"))}}function z2(e,n){e&1&&(D(0,"ion-label",0),M(1),Y(2,"translate"),x()),e&2&&(E(),ne(" ",Z(2,1,"map-popups.river-gauge.no-data")," "))}var ew=(()=>{class e{constructor(t){this.translate=t,this.current=0,this.currentString="",this.previous=0,this.reference=0,this.difference=0,this.differenceAbsolute=0,this.triggerWidth=0}ngOnInit(){this.updateContent()}ngOnChanges(t){t.data&&this.updateContent()}updateContent(){if(!this.data?.dynamicData)return;let t=this.data.dynamicData;this.current=this.roundTo(Number(t["water-level"]),2),this.currentString=isNaN(this.current)?"":String(this.current),this.previous=Number(t["water-level-previous"]),this.reference=this.roundTo(Number(t["water-level-reference"]),0),this.difference=this.roundTo(this.current-this.previous,2),this.differenceAbsolute=Math.abs(this.difference),this.triggerWidth=this.calculateTriggerWidth(this.current,this.reference)}roundTo(t,i){if(isNaN(t))return 0;let o=Math.pow(10,i);return Math.round(t*o)/o}calculateTriggerWidth(t,i){if(i===0)return 0;let o=Math.round(t/i*100);return Math.max(Math.min(o,115),0)}static{this.\u0275fac=function(i){return new(i||e)(P(qt))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-river-gauge-popup-content"]],inputs:{data:"data"},standalone:!1,features:[Et],decls:2,vars:1,consts:[[1,"pb-1","pr-2","text-gray-500"],[1,"mb-1","flex","justify-between"],[1,"pr-2"],[1,"text-lg","font-semibold"],[1,"mr-1",3,"color"],[3,"name"],["color","ibf-no-alert-primary",3,"value"],[1,"mb-1"],[1,"font-semibold"],["backgroundColor","var(--ion-color-ibf-no-alert-primary)","textColor","var(--ion-color-ibf-white)",3,"barWidth","barValue","thresholdDescription","thresholdValue","thresholdPosition","unit"]],template:function(i,o){i&1&&se(0,B2,20,26)(1,z2,3,3,"ion-label",0),i&2&&re(o.current?0:1)},dependencies:[Ze,si,xs,Z_,Oe],encapsulation:2})}}return e})();var tw=(()=>{class e{constructor(t){this.translate=t}ngOnInit(){this.updateContent()}ngOnChanges(t){t.data&&this.updateContent()}updateContent(){this.data&&(this.dateAndTime=this.getDateAndTime(),this.category=this.data.category)}getDateAndTime(){return Fe.fromISO(this.data.timestamp).toFormat("ccc, dd LLLL, HH:mm")}static{this.\u0275fac=function(i){return new(i||e)(P(qt))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-typhoon-trackpoint-popup-content"]],inputs:{data:"data"},standalone:!1,features:[Et],decls:14,vars:4,consts:[[2,"display","flex","flex-direction","row","justify-content","space-between"],[2,"margin-bottom","8px"],["width","32","height","32","viewBox","0 0 32 32","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M26.8211 16.1286L26.8028 16.0965C26.6224 15.7859 26.3267 15.5591 25.98 15.4655C25.6334 15.372 25.2638 15.4192 24.9518 15.5969L22.8259 16.8254C23.0049 15.3864 22.7191 13.9279 22.0103 12.6631C21.9984 12.6347 21.9847 12.6071 21.9691 12.5806L21.9554 12.5622L17.9831 5.67707C17.894 5.52297 17.7755 5.38791 17.6343 5.27963C17.4931 5.17135 17.3319 5.09196 17.16 5.04598C16.9882 5.00001 16.8089 4.98836 16.6325 5.0117C16.4562 5.03504 16.2861 5.09291 16.1321 5.182L16.0954 5.20034C15.786 5.38181 15.5605 5.67798 15.4679 6.02465C15.3753 6.37131 15.423 6.74054 15.6006 7.05227L16.8239 9.17467C15.3552 8.99448 13.8677 9.29695 12.5859 10.0365L12.5355 10.064L5.67673 14.0291C5.5227 14.1182 5.38772 14.2368 5.27949 14.3781C5.17126 14.5194 5.09191 14.6806 5.04596 14.8526C5.00001 15.0245 4.98837 15.2039 5.01169 15.3803C5.03502 15.5568 5.09286 15.727 5.18191 15.8811L5.20023 15.9132C5.28928 16.0673 5.40779 16.2023 5.54901 16.3106C5.69022 16.4189 5.85137 16.4983 6.02325 16.5442C6.19513 16.5902 6.37438 16.6019 6.55076 16.5785C6.72714 16.5552 6.8972 16.4973 7.05122 16.4082L9.18169 15.1797C9.00449 16.6386 9.3017 18.1158 10.0293 19.3924C10.0319 19.4039 10.0366 19.4147 10.043 19.4245L10.0522 19.4383L14.0245 26.3234C14.2046 26.6344 14.5006 26.8612 14.8477 26.954C15.1947 27.0468 15.5643 26.9981 15.8755 26.8185L15.9122 26.8002C16.2224 26.6195 16.4486 26.3233 16.5413 25.9763C16.634 25.6293 16.5857 25.2597 16.407 24.9482L15.1837 22.8258C16.5925 23.0018 18.0208 22.7291 19.2659 22.0466C19.3212 22.0227 19.3748 21.9951 19.4263 21.964L19.44 21.9549L26.3263 17.9805C26.6357 17.7991 26.8611 17.5029 26.9538 17.1562C27.0464 16.8096 26.9987 16.4403 26.8211 16.1286ZM12.4347 18.0631C12.4301 18.0585 12.4301 18.0539 12.4255 18.0493C11.8868 17.1079 11.7406 15.9921 12.0185 14.9436C12.2963 13.8951 12.9759 12.9983 13.91 12.4476C13.9191 12.4431 13.9329 12.4339 13.942 12.4293C13.9512 12.4247 13.9558 12.4201 13.9649 12.4156C14.9062 11.8793 16.0204 11.7349 17.0671 12.0137C18.1138 12.2924 19.0089 12.9719 19.5591 13.9054C19.5637 13.9145 19.5729 13.9283 19.5775 13.9374C19.5821 13.9466 19.5866 13.9512 19.5912 13.9604C20.1288 14.9084 20.2701 16.0306 19.9843 17.0825C19.6985 18.1343 19.0088 19.0305 18.0655 19.5758C18.0609 19.5804 18.0564 19.5804 18.0518 19.5849C17.1047 20.1261 15.9819 20.2698 14.9291 19.9845C13.8764 19.6993 12.9794 19.0084 12.4347 18.0631Z","fill","var(--ion-color-ibf-primary)"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"div")(2,"div",1),M(3," Date and time: "),D(4,"strong"),M(5),x()(),D(6,"div"),M(7," Category (ECWMF): "),D(8,"strong"),M(9),Y(10,"translate"),x()()(),D(11,"div"),sC(),D(12,"svg",2),X(13,"path",3),x()()()),i&2&&(E(5),be(o.dateAndTime),E(4),be(Z(10,2,"map-popups.PHL.typhoon.category."+o.category)))},dependencies:[Oe],encapsulation:2})}}return e})();var V2=e=>({leadTime:e}),G2=e=>({returnPeriod:e});function W2(e,n){if(e&1&&(X(0,"br"),M(1),Y(2,"translate")),e&2){let t=B(2);E(),ne(" ",Je(2,1,"map-popups.glofas-station.forecast-return",It(4,G2,t.data==null||t.data.station==null||t.data.station.dynamicData==null?null:t.data.station.dynamicData.forecastReturnPeriod))," ")}}function Z2(e,n){if(e&1&&(D(0,"div",1)(1,"strong"),M(2),Y(3,"translate"),D(4,"span",2),Y(5,"translate"),X(6,"ion-icon",3),x()(),se(7,W2,3,6),x(),X(8,"app-threshold-bar",4),Y(9,"translate")),e&2){let t=B();E(2),ne("",Je(3,10,"map-popups.glofas-station.river-discharge",It(17,V2,t.getLeadTimeString()))," "),E(2),W("title",Z(5,13,"map-popups.glofas-station.river-discharge-explanation")),E(3),re((t.data==null||t.data.station==null||t.data.station.dynamicData==null?null:t.data.station.dynamicData.forecastReturnPeriod)>0?7:-1),E(),W("backgroundColor",t.barBackgroundColor)("textColor",t.barTextColor)("barWidth",t.triggerWidth)("barValue",t.barValue)("thresholdDescription",Z(9,15,"map-popups.glofas-station.threshold-description"))("thresholdValue",t.data==null||t.data.station==null||t.data.station.dynamicData==null?null:t.data.station.dynamicData.triggerLevel)("thresholdPosition",80)}}function j2(e,n){e&1&&(D(0,"div",0)(1,"div")(2,"ion-label",5),M(3),Y(4,"translate"),x()()()),e&2&&(E(3),ne(" ",Z(4,1,"map-popups.glofas-station.no-data")," "))}var iw=(()=>{class e{constructor(){this.defautEapAlertClass={label:"No action",color:"ibf-no-alert-primary",value:0}}ngOnInit(){this.updateContent()}ngOnChanges(t){t.data&&this.updateContent()}updateContent(){if(!this.data)return;let t=Number(this.data.station.dynamicData?.forecastLevel)-Number(this.data.station.dynamicData?.triggerLevel),i=.05,o=Number(this.data.station.dynamicData?.triggerLevel??0),s=Math.abs(t)/o<i,l=Number(this.data.station.dynamicData?.forecastLevel??0);t===0||!s?this.barValue=l:this.barValue=o+Math.sign(t)*o*i,this.triggerWidth=Math.max(Math.min(Math.round(this.barValue/Number(this.data.station.dynamicData?.triggerLevel)*100),115),0),this.eapAlertClass=this.data.eapAlertClasses[this.data.station.dynamicData?.eapAlertClass]||this.defautEapAlertClass,this.barBackgroundColor=`var(--ion-color-${this.eapAlertClass.color})`,this.barTextColor=`var(--ion-color-${this.eapAlertClass.textColor||"ibf-white"})`}getLeadTimeString(){if(!this.data?.leadTime)return"";let[t,i]=this.data.leadTime.split("-");return`${t} ${i}${Number(t)===1?"":"s"}`}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=ce({type:e,selectors:[["app-glofas-station-popup-content"]],inputs:{data:"data"},standalone:!1,features:[Et],decls:2,vars:1,consts:[[2,"margin-bottom","4px","display","flex","justify-content","space-between"],[2,"margin-bottom","4px"],[2,"cursor","default",3,"title"],["name","information-circle-outline"],["unit","m3/s",3,"backgroundColor","textColor","barWidth","barValue","thresholdDescription","thresholdValue","thresholdPosition"],[2,"font-size","18px","padding-right","8px"]],template:function(i,o){i&1&&se(0,Z2,10,19)(1,j2,5,3,"div",0),i&2&&re(!(o.data==null||o.data.station==null)&&o.data.station.dynamicData?0:1)},dependencies:[Ze,si,Z_,Oe],encapsulation:2})}}return e})();function q2(e,n){if(e&1&&X(0,"app-river-gauge-popup-content",2),e&2){let t=B();W("data",t.riverGauge)}}function X2(e,n){if(e&1&&X(0,"app-typhoon-trackpoint-popup-content",2),e&2){let t=B();W("data",t.typhoonData)}}function J2(e,n){if(e&1&&X(0,"app-glofas-station-popup-content",2),e&2){let t=B();W("data",t.glofasData)}}function K2(e,n){if(e&1&&(D(0,"div",0),M(1),x()),e&2){let t=B();W("ngClass",t.footerClass),E(),ne(" ",t.footerContent," ")}}var j_=(()=>{class e{constructor(t){this.translate=t,this.ibfLayerName=pe,this.defautEapAlertClass={label:"No action",color:"ibf-no-alert-primary",value:0},this.headerClass={"rounded-t-lg p-2 text-white":!0},this.footerClass={"rounded-b-lg border-t px-2 py-1 text-center font-semibold":!0},this.allowedLayers=[pe.gauges,pe.typhoonTrack,pe.glofasStations]}ngOnInit(){this.initializeComponent()}ngOnChanges(t){(t.layerName||t.riverGauge||t.typhoonTrackPoint||t.glofasData)&&this.initializeComponent()}initializeComponent(){!this.layerName||!this.allowedLayers.includes(this.layerName)||!this.riverGauge&&!this.typhoonTrackPoint&&!this.glofasData||(this.layerName===pe.typhoonTrack&&(this.typhoonData={timestamp:this.typhoonTrackPoint.timestamp,category:this.typhoonTrackPoint.category},this.headerClass["bg-ibf-primary"]=!0),this.layerName===pe.gauges&&(this.headerClass["bg-ibf-no-alert-primary"]=!0),this.layerName===pe.glofasStations&&this.glofasData.eapAlertClasses&&(this.eapAlertClass=this.glofasData.eapAlertClasses[this.glofasData.station.dynamicData?.eapAlertClass]??this.defautEapAlertClass,this.headerClass["bg-"+this.eapAlertClass.color]=!0,this.headerClass["text-"+this.eapAlertClass.textColor]=!!this.eapAlertClass.textColor,this.headerClass["text-ibf-white"]=!this.eapAlertClass.textColor,this.footerClass["text-"+this.eapAlertClass.textColor||this.eapAlertClass.color]=!0),this.title=this.getTitle(),this.footerContent=this.getFooterContent())}getTitle(){return this.layerName===pe.gauges?`${String(this.translate.instant("map-popups.river-gauge.header"))} ${this.riverGauge.fid} ${this.riverGauge.name}`:this.layerName===pe.typhoonTrack?`Typhoon track${this.typhoonTrackPoint.passed?" (passed)":""}`:this.layerName===pe.glofasStations?`${this.glofasData.station.stationCode} STATION: ${this.glofasData.station.stationName}`:""}getFooterContent(){if(this.layerName===pe.gauges){let t=this.riverGauge.dynamicData?.["water-level"],i=this.riverGauge.dynamicData?.["water-level-reference"];if(t==null)return"";let o=String(this.translate.instant("map-popups.river-gauge.below")),s=String(this.translate.instant("map-popups.river-gauge.above"));return t<=i?o:s}if(this.layerName===pe.typhoonTrack){let{lat:t,lng:i}=this.typhoonTrackPoint.markerLatLng,o=Math.abs(t).toFixed(4),s=Math.abs(i).toFixed(4),l=t>0?"N":"S",u=i>0?"E":"W";return`${o}\xB0 ${l}, ${s}\xB0 ${u}`}return this.layerName===pe.glofasStations?this.eapAlertClass.label:""}static{this.\u0275fac=function(i){return new(i||e)(P(qt))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-dynamic-point-popup"]],inputs:{layerName:"layerName",riverGauge:"riverGauge",typhoonTrackPoint:"typhoonTrackPoint",glofasData:"glofasData"},standalone:!1,features:[Et],decls:8,vars:6,consts:[[3,"ngClass"],[1,"p-2"],[3,"data"]],template:function(i,o){if(i&1&&(D(0,"div",0)(1,"strong"),M(2),x()(),D(3,"div",1),se(4,q2,1,1,"app-river-gauge-popup-content",2)(5,X2,1,1,"app-typhoon-trackpoint-popup-content",2)(6,J2,1,1,"app-glofas-station-popup-content",2),x(),se(7,K2,2,2,"div",0)),i&2){let s;W("ngClass",o.headerClass),E(2),be(o.title),E(),Ti("rounded-b-lg",!o.footerContent),E(),re((s=o.layerName)===o.ibfLayerName.gauges?4:s===o.ibfLayerName.typhoonTrack?5:s===o.ibfLayerName.glofasStations?6:-1),E(3),re(o.footerContent?7:-1)}},dependencies:[ya,ew,tw,iw],encapsulation:2})}}return e})();var Q2=["loginForm"];function ek(e,n){e&1&&X(0,"ion-icon",8)}function tk(e,n){e&1&&X(0,"ion-icon",9)}var a8=(()=>{class e{constructor(t,i){this.authService=t,this.popoverController=i,this.model={email:"",password:""},this.inputType="password",this.labelShow="Show password",this.labelHide="Hide password"}onSubmit(){this.authService.login(this.model.email.toLowerCase(),this.model.password).add(()=>{this.loginForm.resetForm()})}presentPopover(){return ft(this,null,function*(){yield(yield this.popoverController.create({component:XD,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0})).present()})}isPassword(){return this.inputType==="password"}toggleInputType(){this.inputType=this.isPassword()?"text":"password"}static{this.\u0275fac=function(i){return new(i||e)(P(Nn),P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-login-form"]],viewQuery:function(i,o){if(i&1&&Rp(Q2,5),i&2){let s;Fp(s=Yp())&&(o.loginForm=s.first)}},standalone:!1,decls:24,vars:20,consts:[["loginForm","ngForm"],[1,"login-form",3,"ngSubmit"],["type","submit","hidden","",3,"disabled"],["position","stacked"],["name","email","type","email","required","","inputmode","email","pattern",".+@.+\\.[a-z]+","autocomplete","email username","clearInput","true","data-test","input-user",3,"ngModelChange","ngModel"],[1,"ion-align-items-center",2,"display","flex","width","100%"],["name","password","required","","autocomplete","current-password","minlength","4","clearInput","true","clearOnEdit","false","data-test","input-password",3,"ngModelChange","ngModel","type"],["type","button","fill","clear","size","default",1,"eye-button",3,"click","title"],["slot","icon-only","name","eye","aria-hidden","true"],["slot","icon-only","name","eye-off","aria-hidden","true"],["type","submit","shape","round","color","fiveten-navy-900","expand","full","data-test","login-button",3,"disabled"],["tabindex","0",1,"ion-margin-vertical",3,"click","keydown.enter"],["color","ibf-no-alert-primary",2,"cursor","pointer","text-decoration","underline"]],template:function(i,o){if(i&1){let s=Ye();D(0,"form",1,0),oe("ngSubmit",function(){return _e(s),ve(o.onSubmit())}),X(2,"input",2),D(3,"ion-item")(4,"ion-label",3),M(5),Y(6,"translate"),x(),D(7,"ion-input",4),oe("ngModelChange",function(u){return _e(s),ve(o.model.email=u)}),x()(),D(8,"ion-item")(9,"ion-label",3),M(10),Y(11,"translate"),x(),D(12,"div",5)(13,"ion-input",6),oe("ngModelChange",function(u){return _e(s),ve(o.model.password=u)}),x(),D(14,"ion-button",7),oe("click",function(){return _e(s),ve(o.toggleInputType())}),se(15,ek,1,0,"ion-icon",8)(16,tk,1,0,"ion-icon",9),x()()(),D(17,"ion-button",10),M(18),Y(19,"translate"),x(),D(20,"div",11),oe("click",function(){return _e(s),ve(o.presentPopover())})("keydown.enter",function(){return _e(s),ve(o.presentPopover())}),D(21,"ion-text",12),M(22),Y(23,"translate"),x()()()}if(i&2){let s=Kl(1);E(2),W("disabled",!s.form.valid),E(3),be(Z(6,12,"login-page.email")),E(2),W("ngModel",o.model.email),E(3),be(Z(11,14,"login-page.password")),E(3),W("ngModel",o.model.password)("type",o.inputType),E(),W("title",o.isPassword()?o.labelShow:o.labelHide),Op("aria-label",o.isPassword()?o.labelShow:o.labelHide),E(),re(o.isPassword()?15:16),E(2),W("disabled",!s.form.valid),E(),be(Z(19,16,"login-page.title")),E(4),be(Z(23,18,"login-page.forgot-password"))}},dependencies:[nc,Ql,ec,Up,Hp,LC,ic,tc,Ke,Ze,qp,Ot,si,ho,Gp,Oe],styles:["ion-label[position=stacked][_ngcontent-%COMP%]{--color: var(--ion-color-ibf-no-alert-primary)}ion-input[_ngcontent-%COMP%]{border:none;background:transparent}ion-input[_ngcontent-%COMP%]     .native-input{box-shadow:none}.eye-button[_ngcontent-%COMP%]{--color: var(--ion-color-ibf-no-alert-primary)}"],changeDetection:0})}}return e})();var hi=Zl(zu(),1);var Gt=Zl(zu(),1);var nw=(()=>{class e{constructor(t,i,o,s,l){this.eventService=t,this.analyticsService=i,this.injector=o,this.applicationRef=s,this.componentFactoryResolver=l,this.TYPHOON_TRACK_NORMAL_POINT_SIZE=15,this.TYPHOON_TRACK_LATEST_POINT_SIZE=26,this.onMapMarkerClick=u=>()=>{this.analyticsService.logEvent(u,{page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name})}}createMarkerCommunityNotification(t,i){if(t.dismissed)return;let o=t.nameVillage,s=(0,Gt.marker)(i,{title:o,icon:(0,Gt.icon)(i1),alt:"Community notifications"});return s.bindPopup(this.renderPopUpHTML(t),{minWidth:220}),s.on("click",this.onMapMarkerClick(pt.communityNotification)),s}renderPopUpHTML(t){let i=document.createElement("popup-component"),s=this.componentFactoryResolver.resolveComponentFactory(BD).create(this.injector,[],i);return this.applicationRef.attachView(s.hostView),s.instance.markerProperties=t,i}formatAsCoordinate(t){let i=`${Math.abs(t.lat).toFixed(4)}\xB0 ${t.lat>0?"N":"S"}`,o=`${Math.abs(t.lng).toFixed(4)}\xB0 ${t.lng>0?"E":"W"}`;return`${i}, ${o}`}createMarkerStation(t,i,o,s){let l=s.find(C=>C.eventName===t.stationCode||C.eventName===t.stationName),u=l?.firstTriggerLeadTime||l?.firstLeadTime,d=t.stationName,f=t.dynamicData?.eapAlertClass||"no",p=`glofas-station glofas-station-${f}`,m=Ei(Te({},Lv),{iconUrl:`assets/markers/glofas-station-${f}-trigger.svg`,iconRetinaUrl:`assets/markers/glofas-station-${f}-trigger.svg`,className:p}),g=`trigger-popup-${f}`,v=(0,Gt.marker)(i,{title:d,icon:m?(0,Gt.icon)(m):(0,Gt.divIcon)({className:p}),zIndexOffset:700});return v.bindPopup(this.createMarkerStationPopup(t,o,u),{minWidth:350,className:g}),v.on("click",this.onMapMarkerClick(pt.glofasStation)),v}createMarkerTyphoonTrack(t,i,o,s){let l=xu(t.timestampOfTrackpoint),u=xu(o),d=sx(l,s),f="ccc, dd LLLL, HH:mm",p="typhoon-track-icon";ax(u,l)?p+=" typhoon-track-icon-future":d?p+=" typhoon-track-icon-latest":p+=" typhoon-track-icon-past",(t.firstLandfall||t.closestToLand)&&(p+=" typhoon-track-icon-firstLandfall");let m=ox(l,f),g=(0,Gt.marker)(i,{title:m,icon:(0,Gt.divIcon)({className:p,iconSize:d?[this.TYPHOON_TRACK_LATEST_POINT_SIZE,this.TYPHOON_TRACK_LATEST_POINT_SIZE]:[this.TYPHOON_TRACK_NORMAL_POINT_SIZE,this.TYPHOON_TRACK_NORMAL_POINT_SIZE]}),zIndexOffset:700});return g.bindPopup(this.createMarkerTyphoonTrackPopup(t.timestampOfTrackpoint,t.category,i,!f_(l,u)),{minWidth:350,className:"typhoon-track-popup"}),g.on("click",this.onMapMarkerClick(pt.typhoonTrack)),g}createMarkerRedCrossBranch(t,i){let o=t.branchName,s=(0,Gt.marker)(i,{title:o,icon:(0,Gt.icon)($C),alt:"Red Cross branches"});return s.bindPopup(this.createMarkerRedCrossPopup(t)),s.on("click",this.onMapMarkerClick(pt.redCrossBranch)),s}createMarkerDam(t,i){let o=t.damName,s=(0,Gt.marker)(i,{title:o,icon:(0,Gt.icon)(jC)});return s.bindPopup(this.createMarkerDamPopup(t)),s.on("click",this.onMapMarkerClick(pt.dam)),s}createMarkerHealthSite(t,i){let o=t.name,s=(0,Gt.marker)(i,{title:o,icon:(0,Gt.icon)(t.dynamicData?.exposure?XC:qC)});return s&&(s.bindPopup(this.createHealthSitePopup(t)),s.on("click",this.onMapMarkerClick(pt.healthSite))),s}createMarkerWaterpoint(t,i){let o=t.fid,s=(0,Gt.marker)(i,{title:o,icon:(0,Gt.icon)(t.dynamicData?.exposure?KC:JC)});return s.bindPopup(this.createMarkerWaterpointPopup(t,i)),s.on("click",this.onMapMarkerClick(pt.waterPoint)),s}createMarkerEvacuationCenter(t,i){let o=t.evacuationCenterName,s=(0,Gt.marker)(i,{title:o,icon:(0,Gt.icon)(QC)});return s.bindPopup(this.createMarkerEvacuationCenterPopup(t,i)),s.on("click",this.onMapMarkerClick(pt.evacuationCenter)),s}createMarkerSchool(t,i){let o=t.name,s=(0,Gt.marker)(i,{title:o,icon:(0,Gt.icon)(t.dynamicData?.exposure?t1:e1)});return s.bindPopup(this.createMarkerSchoolPopup(t,i)),s.on("click",this.onMapMarkerClick(pt.school)),s}createMarkerRiverGauges(t,i){let s=(0,Gt.marker)(i,{title:t.name,icon:(0,Gt.icon)(n1)});return s.bindPopup(this.createMarkerRiverGaugePopup(t),{minWidth:350,className:"river-gauge-popup"}),s.on("click",this.onMapMarkerClick(pt.riverGauge)),s}createThresholdPopup(t,i,o,s,l,u,d,f){let p=l-u,m=.05,g=Math.abs(p)/u<m,v=p===0||!g?l:u+Math.sign(p)*u*m,C=Math.max(Math.min(Math.round(v/u*100),115),0),T=j=>Math.round(j).toLocaleString("en-US"),b=`<strong>${i}</strong>`,S=this.createThresholdBar(o,t,C,T(l),f,T(u),80),I=`
    <div style="margin-bottom:5px">
      ${d}
    </div>
    ${S}
    `,U=`
      <div style="text-align: center">
        <strong>${s}</strong>
      </div>
    `;return this.createDynamicPointPopup(o,b,I,U)}createMarkerStationPopup(t,i,o){let s=zi.day7,l=o||s,u=i?.eapAlertClasses||{},d=this.componentFactoryResolver.resolveComponentFactory(j_).create(this.injector);return d.instance.layerName=pe.glofasStations,d.instance.glofasData={station:t,leadTime:l,eapAlertClasses:u},d.changeDetectorRef.detectChanges(),d.location.nativeElement}createMarkerTyphoonTrackPopup(t,i,o,s){let l=this.componentFactoryResolver.resolveComponentFactory(j_).create(this.injector);return l.instance.layerName=pe.typhoonTrack,l.instance.typhoonTrackPoint={timestamp:t,category:i,markerLatLng:o,passed:s},l.changeDetectorRef.detectChanges(),l.location.nativeElement}createMarkerRedCrossPopup(t){let i="UNKNOWN";return`
      <div style="margin-bottom: 5px"><strong>Branch: ${t.branchName}</strong></div>
      <div style="margin-bottom: 5px">Nr. of volunteers: ${String(t.numberOfVolunteers??i)}</div>
      <div style="margin-bottom: 5px">Contact person: ${t.contactPerson??i}</div>
      <div style="margin-bottom: 5px">Contact address: ${t.contactAddress??i}</div>
      <div style="margin-bottom: 5px">Contact number: ${t.contactNumber??i}</div>
    `.trim()}createMarkerDamPopup(t){let i=t.damName??"",o=t.fullSupplyCapacity!=null?Math.round(t.fullSupplyCapacity).toLocaleString():"";return`
      <div style="margin-bottom: 5px">
        <strong>Dam: ${i}</strong>
      </div>
      <div style="margin-bottom: 5px">
        Full Supply Capacity: ${o} million m<sup>3</sup>
      </div>
    `.trim()}createMarkerEvacuationCenterPopup(t,i){return`<div style="margin-bottom: 5px"><strong>Evacuation center: ${t.evacuationCenterName}</strong></div><div style="margin-bottom: 5px">Coordinate: ${this.formatAsCoordinate(i)}
    </div>`}createMarkerSchoolPopup(t,i){return`<div style="margin-bottom: 5px"><strong>Name: ${t.name}</strong></div><div style="margin-bottom: 5px">Coordinate: ${this.formatAsCoordinate(i)}
    </div>`}createHealthSitePopup(t){let i=t.name??"",o=t.type??"";return`
      <div style="margin-bottom: 5px">
        <strong>Name: ${i}</strong>
      </div>
      <div style="margin-bottom: 5px">
        Type: ${o}
      </div>
    `.trim()}createMarkerWaterpointPopup(t,i){return`
      <div style="margin-bottom: 5px"><strong>Name: ${t.name}</strong></div>
      ${t.type?`<div style="margin-bottom: 5px">Type: ${t.type}</div>`:""}
      ${t.report_date?`<div style="margin-bottom: 5px">Report date: ${t.report_date}</div>`:""}
      <div style="margin-bottom: 5px">Coordinate: ${this.formatAsCoordinate(i)}</div>
    `}createMarkerDefault(t){let i=(0,Gt.marker)(t,{icon:(0,Gt.icon)(Lv)});return i.on("click",this.onMapMarkerClick(pt.mapMarker)),i}createMarkerRiverGaugePopup(t){let i=this.componentFactoryResolver.resolveComponentFactory(j_).create(this.injector);return i.instance.layerName=pe.gauges,i.instance.riverGauge=t,i.changeDetectorRef.detectChanges(),i.location.nativeElement}createDynamicPointPopup(t,i,o,s){let l="var(--ion-color-ibf-white)";return`
      <div style="background: ${t}; color: ${l}; padding: 8px; border-radius: 8px 8px 0 0">
        ${i}
      </div>
      <div style="padding: 8px;">
        ${o}
      </div>
      <div style="background: ${l}; color: ${t}; padding: 0 8px; border-radius: 0 0 8px 8px">
        <div style="border-top: 1px solid var(--ion-color-ibf-grey-light); padding: 8px 0">
          ${s}
        </div>
      </div>

    `}createThresholdBar(t,i,o,s,l,u,d){return`
    <div>
      <div style="border-radius:10px;height:20px;background-color:#d4d3d2; width: 100%">
        <div style="border-radius:10px 0 0 10px; border-right: dashed; border-right-width: thin;height:20px;width: ${d}%">
          <div style="
            border-radius:10px;
            height:20px;
            line-height:20px;
            background-color:${t};
            color:${i};
            text-align:center;
            white-space: nowrap;
            min-width: 20%;
            width:${o}%">${s}

          </div>
        </div>
      </div>
    </div>
    <div style="
      height:20px;
      background-color:none;
      border-right: dashed;
      border-right-width: thin;
      float: left; width: ${d}%;
      padding-top: 5px;
      margin-bottom:10px;
      text-align: right;
      padding-right: 2px">
      ${l}:
    </div>
    <div style="height:20px;background-color:none; margin-left: ${d+1}%; text-align: left; width: 20%; padding-top: 5px; margin-bottom:10px">
      <strong>${u}</strong>
    </div>
    `}static{this.\u0275fac=function(i){return new(i||e)(Se(Ue),Se(Kt),Se(lC),Se(fC),Se(hC))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ai=function(e){return e.fullSquare="full-square",e.fullSquareGradient="full-square-gradient",e.line="line",e.outlineSquare="outline-square",e.pin="pin",e}(Ai||{}),rw=(()=>{class e{constructor(t,i,o,s){this.mapService=t,this.eventService=i,this.countryService=o,this.disasterTypeService=s,this.legendDivTitle="<div><strong>Map Legend</strong></div>",this.layerIconURLPrefix="assets/markers/",this.layerIcon={[pe.glofasStations]:"glofas-station.svg",[pe.typhoonTrack]:"typhoon-track.png",[pe.redCrossBranches]:"red-cross-marker.svg",[pe.damSites]:"dam-marker.svg",[pe.waterpoints]:"water-point-marker.svg",[pe.healthSites]:"health-center-marker.svg",[pe.evacuationCenters]:"evacuation-center-marker.svg",[pe.schools]:"school-marker.svg",[pe.communityNotifications]:"community-notification-marker.svg",[pe.gauges]:"river-gauge-marker.svg"},this.getLabel=(l,u,d)=>f=>{let p=d?"  -  "+d[f]:"";if(u.colorBreaks){let m=u.colorBreaks?.[f+1]?.valueLow,g=u.colorBreaks?.[f+1]?.valueHigh;return m===g?this.numberFormat(g,u)+p+"<br/>":this.numberFormat(m,u)+"&ndash;"+this.numberFormat(g,u)+p+"<br/>"}else{let m=this.numberFormat(l[f],u),g=this.numberFormat(l[f+1],u);return m+(typeof l[f+1]<"u"?"&ndash;"+g:"+")+p+"<br/>"}},this.onEventStateChange=l=>{this.eventState=l},this.onCountryChange=l=>{this.country=l},this.onDisasterTypeChange=l=>{this.disasterType=l},this.singleRowLegend=(l,u,d)=>{let f=l===Ai.fullSquareGradient?'style="margin-bottom: 0px; margin-top: 0px; height: 14px;"':'style="margin-bottom: 8px; margin-top: 8px;"',p=l===Ai.pin?18:14,m=l===Ai.pin?`<img src="${u}" />`:"",g=`height: ${p}px; width: 14px; margin-right: 4px; `;switch(l){case Ai.fullSquare:case Ai.fullSquareGradient:g+=`background: ${u}`;break;case Ai.outlineSquare:g+=`border: 2px solid ${u}`;break;case Ai.line:g+=`background: ${u}; border-color: #fff; border-style: solid; border-width: 6px 0;`;break;default:break}let v=l===Ai.pin&&d!==Cs.typhoonTrack?'style="padding-top: 2px;"':"";return`
    <ion-row class="ion-nowrap" ${f}>
      <div style="${g}">${m}</div>
      <ion-label class="ion-text-wrap" ${v}>${d}</ion-label>
    </ion-row>
    `},this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange),this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange)}getLegendTitle(){return this.legendDivTitle}getPointLegendString(t,i){let o=String(this.layerIcon[t.name]);if(!o)throw new Error(`Icon not found for layer: ${t.name}`);let s=i?"-exposed":"",l=this.layerIconURLPrefix+o.slice(0,-4)+s+o.slice(-4),u=i?`Exposed ${t.label}`:t.label;return this.singleRowLegend(Ai.pin,l,u)}getGlofasPointLegendString(t,i,o){let s=String(this.layerIcon[t.name]);if(!s)throw new Error(`Icon not found for layer: ${t.name}`);let l=this.layerIconURLPrefix+s.slice(0,-4)+i+s.slice(-4);return this.singleRowLegend(Ai.pin,l,`GloFAS ${o}`)}getShapeLegendString(t){if(t.name===pe.trigger)return this.singleRowLegend(Ai.outlineSquare,"red",t.label);if(!t.data)return"";let i=this.mapService.getColorThreshold(t.data,t.colorProperty,t.colorBreaks),o=Object.values(i),s;t.colorBreaks&&(s=Object.values(t.colorBreaks).map(m=>m.label));let l=this.eventState?.events?.length?this.mapService.state.colorGradientAlert:this.mapService.state.colorGradientNoAlert,u=this.getFeatureColorByColorsAndColorThresholds(l,i),d=this.getLabel(o,t,s),f="<div>";f+=this.layerTitle(t.label,t.unit);let p=t.data?.features.find(m=>m.properties?.indicators[t.name]===null);f+="<div style='margin-top: 8px'>",p&&(f+=this.singleRowLegend(Ai.fullSquareGradient,this.mapService.state.noDataColor,"No data"));for(let m=0;m<o.length;m++)o[m]!==null&&(m===0||o[m]>o[m-1])&&(f+=this.singleRowLegend(Ai.fullSquareGradient,u(o[m+1]),d(m)));return f+="</div></div>",f}getWmsLegendString(t){let i="<div>",o="type",s=t.legendColor[this.country.countryCodeISO3]?.[this.disasterType.disasterType]||t.legendColor[this.country.countryCodeISO3]||t.legendColor,l=s[o],d=s["value"];switch(l){case kl.exposureLine:i+=this.layerTitle(t.label),i+=this.singleRowLegend(Ai.line,d[0],"Exposed "+t.label),i+=this.singleRowLegend(Ai.line,d[1],"Non-exposed "+t.label);break;case kl.exposureSquare:i+=this.layerTitle(t.label),i+=this.singleRowLegend(Ai.fullSquare,d[0],"Exposed "+t.label),i+=this.singleRowLegend(Ai.fullSquare,d[1],"Non-exposed "+t.label);break;case kl.gradient:i+=this.layerTitle(t.label,t.unit),i+="<ion-row>";for(let f of d)i+=`<div style="width: 14px; height: 14px; background:${f}"></div>`;i+="</ion-row>",i+=`<ion-row style="margin-top: 4px"><ion-label>Low</ion-label><ion-label style="margin-left: ${this.getWmsGradientCaptionMargin(d.length)}px;">High</ion-label></ion-row>`;break;case kl.square:i+=this.singleRowLegend(Ai.fullSquare,d[0],t.label);break;case kl.line:i+=this.singleRowLegend(Ai.line,d[0],t.label);break;default:break}return i+="</div>",i}getWmsGradientCaptionMargin(t){return t<=4?(t-2)*14:7+(t-4)*14}getFeatureColorByColorsAndColorThresholds(t,i){return o=>!i[Li.break1]||o<=i[Li.break1]?t[0]:!i[Li.break2]||o<=i[Li.break2]?t[1]:!i[Li.break3]||o<=i[Li.break3]?t[2]:!i[Li.break4]||o<=i[Li.break4]?t[3]:t[4]}numberFormat(t,i){return t===null?null:i.numberFormatMap===Hn.perc?Math.round(t*100).toLocaleString()+"%":i.numberFormatMap===Hn.decimal2?(Math.round(t*100)/100).toLocaleString():i.numberFormatMap===Hn.decimal0?t>1e7?Math.round(t/1e6).toLocaleString()+"M":t>1e6?(Math.round(t/1e5)/10).toLocaleString()+"M":t>1e4?Math.round(t/1e3).toLocaleString()+"k":t>1e3?(Math.round(t/100)/10).toLocaleString()+"k":Math.round(t).toLocaleString():Math.round(t).toLocaleString()}layerTitle(t,i){return`<ion-row style="margin-top: 8px; margin-bottom: 8px;">
      <ion-label><strong>${t}${i?" ("+i+")":""}</strong></ion-label>
    </ion-row>`}static{this.\u0275fac=function(i){return new(i||e)(Se(Po),Se(Ue),Se($e),Se(it))}}static{this.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var rk=(e,n)=>n.name;function ok(e,n){if(e&1&&X(0,"div",1),e&2){let t=B().$implicit;W("leafletLayer",t.leafletLayer)}}function ak(e,n){if(e&1&&(D(0,"div"),se(1,ok,1,1,"div",1),x()),e&2){let t=n.$implicit;E(),re(t.active&&t.show?1:-1)}}var N8=(()=>{class e{constructor(t,i,o,s,l,u,d,f,p,m,g){this.countryService=t,this.disasterTypeService=i,this.timelineService=o,this.mapService=s,this.placeCodeService=l,this.eventService=u,this.analyticsService=d,this.pointMarkerService=f,this.mapLegendService=p,this.adminLevelService=m,this.debugService=g,this.layers=[],this.osmTileLayer=(0,hi.tileLayer)(WC,{attribution:ZC}),this.leafletOptions=Ei(Te({},r1),{layers:[this.osmTileLayer]}),this.leafletLayersControl={baseLayers:{},overlays:{}},this.onLayerChange=v=>{v?(v=v.data||v.type===oi.wms?this.createLayer(v):v,v.viewCenter&&this.zoomToArea()):this.layers=[],this.addToLayersControl(),this.triggerWindowResize(),this.updateLegend()},this.onCountryChange=v=>{this.country=v,this.map&&this.country&&this.setInitialMapView()},this.onDisasterTypeChange=v=>{this.disasterType=v,this.countryDisasterSettings=this.disasterTypeService.getCountryDisasterTypeSettings(this.country,this.disasterType)},this.onTimelineStateChange=v=>{this.timelineState=v,this.lastUploadDate=this.timelineState?.today.toUTC().toString()},this.onEventStateChange=v=>{this.eventState=v},this.onPlaceCodeChange=v=>{this.placeCode=v,this.layers.forEach(C=>{C.leafletLayer&&"resetStyle"in C.leafletLayer&&C.leafletLayer.resetStyle()}),this.zoomToArea(),!this.placeCode&&this.map&&this.map.eachLayer(C=>{C.closePopup()})},this.triggerWindowResize=()=>{window.setTimeout(()=>window.dispatchEvent(new UIEvent("resize")),200)},this.getPointToLayerByLayer=v=>(C,T)=>{switch(v){case pe.glofasStations:return this.pointMarkerService.createMarkerStation(C.properties,T,this.countryDisasterSettings,this.eventState?.events);case pe.redCrossBranches:return this.pointMarkerService.createMarkerRedCrossBranch(C.properties,T);case pe.typhoonTrack:return this.pointMarkerService.createMarkerTyphoonTrack(C.properties,T,this.lastUploadDate,this.closestPointToTyphoon);case pe.damSites:return this.pointMarkerService.createMarkerDam(C.properties,T);case pe.waterpoints:return this.pointMarkerService.createMarkerWaterpoint(C.properties,T);case pe.healthSites:return this.pointMarkerService.createMarkerHealthSite(C.properties,T);case pe.evacuationCenters:return this.pointMarkerService.createMarkerEvacuationCenter(C.properties,T);case pe.schools:return this.pointMarkerService.createMarkerSchool(C.properties,T);case pe.communityNotifications:return this.pointMarkerService.createMarkerCommunityNotification(C.properties,T);case pe.gauges:return this.pointMarkerService.createMarkerRiverGauges(C.properties,T);default:return this.pointMarkerService.createMarkerDefault(T)}},this.getIconCreateFunction=v=>{let C=v.getChildCount(),T=v.getAllChildMarkers().some(I=>I.feature.properties.dynamicData?.exposure)?" exposed":"",b,S;switch(!0){case C<=10:b=30,S=`waterpoint-cluster-10${T}`;break;case C<100:b=40,S=`waterpoint-cluster-100${T}`;break;case C<1e3:b=60,S=`waterpoint-cluster-1000${T}`;break;default:b=80,S=`waterpoint-cluster-10000${T}`;break}return(0,hi.divIcon)({html:"<b>"+String(C)+"</b>",className:S,iconSize:(0,hi.point)(b,b)})},this.onAdminRegionMouseOver=v=>C=>{C.target.setStyle(this.mapService.setAdminRegionMouseOverStyle(v.properties.placeCode,v.properties.placeCodeParent)),this.placeCodeService.setPlaceCodeHover({countryCodeISO3:v.properties.countryCodeISO3,placeCode:v.properties.placeCode,placeCodeName:v.properties.name,placeCodeParentName:v.properties.nameParent,eventName:v.properties.eventName,adminLevel:v.properties.adminLevel})},this.onAdminRegionClickByLayerAndFeatureAndElement=v=>()=>{let C=v.properties.adminLevel,T=v.properties.placeCode;if(this.analyticsService.logEvent(pt.mapPlaceSelect,{placeCode:T,page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),this.eventState.event){if(this.eventState.event&&T!==this.placeCode?.placeCode){let b=C>(Number(this.placeCode?.adminLevel)||0);b&&this.adminLevelService.zoomInAdminLevel(),this.placeCodeService.setPlaceCode({placeCode:T,countryCodeISO3:v.properties.countryCodeISO3,placeCodeName:v.properties.name,placeCodeParent:b?this.placeCode:this.placeCode?.placeCodeParent,placeCodeParentName:v.properties.nameParent,adminLevel:C,eventName:v.properties.eventName})}}else if(v.properties.eventName){let b=this.eventState?.events?.find(S=>S.eventName===v.properties.eventName);this.eventService.switchEvent(v.properties.eventName),this.timelineService.setTimelineState(b?.firstTriggerLeadTime||b?.firstLeadTime,b?.eventName)}},this.debugService.logComponentInit("MapComponent","Constructor called"),this.layerSubscription=this.mapService.getLayerSubscription().subscribe(this.onLayerChange),this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange),this.placeCodeSubscription=this.placeCodeService.getPlaceCodeSubscription().subscribe(this.onPlaceCodeChange),this.initialEventStateSubscription=this.eventService.getInitialEventStateSubscription().subscribe(this.onEventStateChange),this.manualEventStateSubscription=this.eventService.getManualEventStateSubscription().subscribe(this.onEventStateChange),this.timelineStateSubscription=this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange)}ngAfterViewInit(){this.debugService.logComponentAfterViewInit("MapComponent",{mapExists:!!this.map,leafletOptions:this.leafletOptions}),this.map&&this.initLegend(),setTimeout(()=>{this.debugService.logElementVisibility("MapComponent",".leaflet--map"),this.debugService.logElementVisibility("MapComponent",'[data-testid="dashboard-map-componenet"]'),this.debugService.logCSSStyles("MapComponent",".leaflet--map")},100)}ngOnDestroy(){this.layerSubscription.unsubscribe(),this.countrySubscription.unsubscribe(),this.placeCodeSubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe(),this.initialEventStateSubscription.unsubscribe(),this.manualEventStateSubscription.unsubscribe(),this.timelineStateSubscription.unsubscribe()}zoomToArea(){if(this.mapService.adminLevel){let t=this.layers.find(i=>i.name===`${ht.adminRegions}${this.mapService.adminLevel}`);if(t){let i=JSON.parse(JSON.stringify(t.data));if(this.placeCode?i.features=t.data?.features.filter(o=>{let s=o?.properties?.placeCode===this.placeCode.placeCode,l=o?.properties?.placeCodeParent===this.placeCode.placeCodeParent;return s||l}):i.features=t.data?.features,i.features.length){let o=M_(i),s=o[2]-o[0],l=o[3]-o[1],u=.1;this.mapService.state.bounds=hp(o)?[[o[1]-u*l,o[0]-u*s],[o[3]+u*l,o[2]+u*s]]:this.mapService.state.bounds,this.map.fitBounds(this.mapService.state.bounds)}}}}initLegend(){this.legend=new hi.Control,this.legend.setPosition("bottomleft"),this.legend.onAdd=()=>(this.legendDiv=hi.DomUtil.create("div","info legend invisible"),this.legendDiv.innerHTML+=this.mapLegendService.getLegendTitle(),this.legendDiv),this.legend.addTo(this.map)}updateLegend(){if(!this.legendDiv)return;this.map.options.zoomControl||(this.map.options.zoomControl=!0,this.map.addControl(new hi.Control.Zoom),this.legendDiv.classList.remove("invisible"));let t=this.layers.filter(s=>s.active&&s.group!==ht.adminRegions).filter((s,l,u)=>l===u.findIndex(d=>d.name===s.name)),i=`<details data-testid="map-legend" open><summary><div data-testid="map-legend-header" class="legend-header">${this.mapLegendService.getLegendTitle()}
    <ion-icon class="icon-down" name="chevron-down-outline"></ion-icon>
    <ion-icon class="icon-up" name="chevron-up-outline"></ion-icon></div>
    </summary>`,o=t.sort((s,l)=>s.order-l.order);for(let s of o){let l=[];switch(s.type){case oi.point:if(this.isMultiLinePointLayer(s.name))for(let u of[!1,!0]){let d=this.mapLegendService.getPointLegendString(s,u);l.push(d)}else if(s.name===pe.glofasStations)for(let u of this.getGlofasStationStates()){let d=this.mapLegendService.getGlofasPointLegendString(s,`-${u.key}-trigger`,u.label);l.push(d)}else{let u=this.mapLegendService.getPointLegendString(s,!1);l.push(u)}break;case oi.shape:l.push(this.mapLegendService.getShapeLegendString(s));break;case oi.wms:l.push(this.mapLegendService.getWmsLegendString(s));break;default:l.push(`<p id='legend-${s.name}'>${s.label}</p>`);break}for(let u of l)i+=u}i+="</details>",this.legendDiv.innerHTML=i}isMultiLinePointLayer(t){return[pe.healthSites,pe.schools,pe.waterpoints].includes(t)&&this.disasterType.disasterType===fi.flashFloods&&this.eventState.events?.length>0}getGlofasStationStates(){let t=[];for(let[i,o]of Object.entries(this.countryDisasterSettings?.eapAlertClasses))t.push({key:i,label:o.label,value:o.value});return t.sort((i,o)=>o.value-i.value),t}onMapReady(t){this.debugService.logData("MapComponent","onMapReady called",{mapReceived:!!t,mapSize:t?t.getSize():null}),this.map=t,this.map.createPane(Pr.wmsPane),this.map.createPane(Pr.adminBoundaryPane),this.map.createPane(Pr.outline),this.map.createPane(Pr.aggregatePane),this.triggerWindowResize(),this.ensureMapViewIsSet(),this.debugService.logData("MapComponent","Map panes created and window resized",{mapContainer:this.map.getContainer(),mapSize:this.map.getSize(),countryAvailable:!!this.country})}setInitialMapView(){if(!this.map||!this.country)return;let t=this.getCountryCoordinates(),i=this.getCountryDefaultZoom();t&&(this.map.setView([t.lat,t.lng],i),this.debugService.logData("MapComponent","Initial map view set",{country:this.country.countryCodeISO3,coordinates:t,zoom:i}))}ensureMapViewIsSet(){if(!this.map)return;let t=this.map.getCenter(),i=this.map.getZoom();if(!t||i===void 0||i===null){let o=[9,40],s=5;this.map.setView(o,s),this.debugService.logData("MapComponent","Fallback map view set",{center:o,zoom:s,reason:"Map had no valid center/zoom"})}else this.country&&this.setInitialMapView()}getCountryCoordinates(){return this.country&&{ETH:{lat:9.145,lng:40.4897},UGA:{lat:1.3733,lng:32.2903},KEN:{lat:-.0236,lng:37.9062},ZMB:{lat:-13.1339,lng:27.8493},MWI:{lat:-13.2543,lng:34.3015},PHL:{lat:12.8797,lng:121.774},BGD:{lat:23.685,lng:90.3563}}[this.country.countryCodeISO3]||null}getCountryDefaultZoom(){return this.country?{ETH:6,UGA:7,KEN:6,ZMB:6,MWI:7,PHL:6,BGD:7}[this.country.countryCodeISO3]||6:5}createLayer(t){if(this.layers=this.layers.filter(i=>i.name!==t.name),t.type===oi.point){let i=this.createPointLayer(t);for(let o of i){let s=Object.assign({},t);s.leafletLayer=o,this.layers.push(s)}}return t.type===oi.shape&&(t.leafletLayer=this.createAdminRegionsLayer(t),this.layers.push(t)),t.type===oi.wms&&(t.leafletLayer=this.createWmsLayer(t),this.layers.push(t)),t}addToLayersControl(){this.layers.forEach(t=>{this.leafletLayersControl.overlays[t.name]=t.leafletLayer})}createPointLayer(t){if(!t.data)return;t.name===pe.typhoonTrack&&this.calculateClosestPointToTyphoon(t);let i=(0,hi.geoJSON)(t.data,{pointToLayer:this.getPointToLayerByLayer(t.name)});if(t.name===pe.waterpoints){let o=(0,hi.markerClusterGroup)({iconCreateFunction:this.getIconCreateFunction,maxClusterRadius:50}),s=JSON.parse(JSON.stringify(t.data));s.features=s.features.filter(p=>p.properties.dynamicData?.exposure);let l=(0,hi.geoJSON)(s,{pointToLayer:this.getPointToLayerByLayer(t.name)});o.addLayer(l);let u=(0,hi.markerClusterGroup)({iconCreateFunction:this.getIconCreateFunction,maxClusterRadius:50}),d=JSON.parse(JSON.stringify(t.data));d.features=d.features.filter(p=>!p.properties.dynamicData?.exposure);let f=(0,hi.geoJSON)(d,{pointToLayer:this.getPointToLayerByLayer(t.name)});return u.addLayer(f),[o,u]}if(t.name===pe.healthSites&&t.data.features.length>1e3){let o=(0,hi.markerClusterGroup)({iconCreateFunction:this.getIconCreateFunction,maxClusterRadius:10});return o.addLayer(i),[o]}return[i]}getAdminRegionLayerPane(t){let i=Pr.overlayPane;switch(t.group){case ht.aggregates:i=Pr.aggregatePane;break;case ht.adminRegions:i=Pr.adminBoundaryPane;break;default:i=Pr.overlayPane;break}return i}createThresHoldPopupAdminRegions(t,i,o,s){let u=i["properties"][t.colorProperty],d=u>o,f=d?"var(--ion-color-ibf-trigger-alert-primary-contrast)":"var(--ion-color-ibf-no-alert-primary-contrast)",p=i.properties.name,g=s[s.length-1].split("-")[1],v=`${t.label} for current ${g} selected`,C=d?"var(--ion-color-ibf-trigger-alert-primary)":"var(--ion-color-ibf-no-alert-primary)",T=d?"ACTIVATE EARLY ACTIONS":"No action";return this.pointMarkerService.createThresholdPopup(f,p,C,T,u,o,v,"Alert threshold")}createAdminRegionsLayer(t){if(!t.data)return;let i;return t.group===ht.outline?i=(0,hi.geoJSON)(t.data,{pane:Pr.outline,style:this.mapService.setOutlineLayerStyle(t),interactive:!1}):i=(0,hi.geoJSON)(t.data,{pane:this.getAdminRegionLayerPane(t),style:this.mapService.setAdminRegionStyle(t),onEachFeature:(o,s)=>{s.on("mouseover",this.onAdminRegionMouseOver(o)),s.on("mouseout",()=>{i.resetStyle(),this.placeCodeService.clearPlaceCodeHover()}),s.on("click",this.onAdminRegionClickByLayerAndFeatureAndElement(o))}}),i}createWmsLayer(t){if(!t.wms)return;let i=[],o=this.eventState.event?[this.eventState.event]:this.eventState.events.length>0?this.eventState.events:[new z_];for(let l of o){let u=this.getWmsLayerName(t,l);i.includes(u)||i.push(u)}let s={pane:Pr.wmsPane,layers:i.join(","),format:t.wms.format,version:t.wms.version,attribution:t.wms.attribution,crs:t.wms.crs,transparent:t.wms.transparent,viewparams:t.wms.viewparams};return hi.tileLayer.wms(t.wms.url,s)}getWmsLayerName(t,i){let o;t.wms.leadTimeDependent&&(!this.eventState.event&&i.firstLeadTime?o=i.firstLeadTime:o=this.timelineState.activeLeadTime);let s=o?`_${o}`:"",l=SD.includes(t.name)?"":`_${this.country.countryCodeISO3}`;return`ibf-system:${t.name}${s}${l}`}calculateClosestPointToTyphoon(t){if(!t.data?.features?.length){this.closestPointToTyphoon=void 0;return}let i=xu(this.lastUploadDate),o=t.data.features.map(({properties:l})=>xu(String(l.timestampOfTrackpoint))).filter(l=>!f_(l,i));if(o.length===0){this.closestPointToTyphoon=void 0;return}let s=Nb(o);this.closestPointToTyphoon=s}static{this.\u0275fac=function(i){return new(i||e)(P($e),P(it),P(en),P(Po),P(Vt),P(Ue),P(Kt),P(nw),P(rw),P(yn),P(Zu))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-map"]],standalone:!1,decls:3,vars:1,consts:[["leaflet","","data-test","leaflet-map",1,"leaflet--map",3,"leafletMapReady","leafletOptions"],[3,"leafletLayer"]],template:function(i,o){i&1&&(D(0,"div",0),oe("leafletMapReady",function(l){return o.onMapReady(l)}),Bt(1,ak,2,1,"div",null,rk),x()),i&2&&(W("leafletOptions",o.leafletOptions),E(),zt(o.layers))},dependencies:[Qy,DD],styles:[".leaflet--map[_ngcontent-%COMP%]{width:100%;height:100%}"]})}}return e})();var L8=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=ce({type:e,selectors:[["app-map-controls"]],standalone:!1,decls:1,vars:0,template:function(i,o){i&1&&X(0,"app-admin-level")},dependencies:[bD],styles:["app-admin-level[_ngcontent-%COMP%]{position:absolute;top:-10px;left:45px;z-index:500}"]})}}return e})();var sk=e=>({height:e}),lk=(e,n)=>n.name;function ck(e,n){if(e&1){let t=Ye();D(0,"ion-icon",12),oe("click",function(){_e(t);let o=B().$implicit,s=B(3);return ve(s.toggleLayer(o))}),x()}if(e&2){let t=B().$implicit;W("name",t.active?"checkbox":"square-outline")}}function uk(e,n){if(e&1){let t=Ye();D(0,"ion-icon",13),oe("click",function(){_e(t);let o=B().$implicit,s=B(3);return ve(s.toggleLayer(o))}),x()}if(e&2){let t=B().$implicit;W("name",t.active?"radio-button-on-outline":"radio-button-off-outline")}}function dk(e,n){if(e&1){let t=Ye();D(0,"ion-row",5)(1,"ion-item",6),se(2,ck,1,1,"ion-icon",7)(3,uk,1,1,"ion-icon",8),D(4,"ion-label",9),M(5),x(),D(6,"ion-button",10),Y(7,"translate"),oe("click",function(o){let s=_e(t).$implicit,l=B(3);return ve(l.presentPopover(o,s))}),X(8,"ion-icon",11),x()()()}if(e&2){let t=n.$implicit,i=B(3);E(),lo("className","matrix-layer ",t.name,""),E(),re(i.isCheckBox(t.group)?2:-1),E(),re(i.isRadioButton(t.group)?3:-1),E(),W("title",t.label),E(),ne(" ",t.label," "),E(),W("title",Z(7,7,"aggregates-component.more-information"))}}function hk(e,n){if(e&1&&(D(0,"div",3)(1,"ion-list",4),Bt(2,dk,9,9,"ion-row",5,lk),x()()),e&2){let t=B(2);E(2),zt(t.getLayersInOrder())}}function pk(e,n){if(e&1){let t=Ye();D(0,"div",0)(1,"ion-button",1),oe("click",function(){_e(t);let o=B();return ve(o.toggleLayerMenu())}),D(2,"div")(3,"ion-text"),M(4),Y(5,"translate"),x(),X(6,"ion-icon",2),x()(),se(7,hk,4,0,"div",3),x()}if(e&2){let t=B();W("ngStyle",It(6,sk,t.getLayerMenuContainerHeightInRem()+"rem")),E(4),ne(" ",Z(5,4,"layers-menu.menu-toggle-label"),""),E(2),W("name",t.isLayerMenuOpen?"chevron-down-outline":"chevron-up-outline"),E(),re(t.isLayerMenuOpen?7:-1)}}var R8=(()=>{class e{constructor(t,i,o,s,l){this.analyticsService=t,this.eventService=i,this.mapService=o,this.popoverController=s,this.menuController=l,this.layers=[],this.IbfLayerType=oi,this.IbfLayerName=pe,this.IbfLayerGroup=ht,this.hideLayerControlToggleButton=!1,this.BUTTON_HEIGHT=2.26,this.LINE_HEIGHT=1.5,this.isLayerMenuOpen=!1,this.onLayerChange=u=>{if(!(u&&u.name===pe.trigger))if(u){let d=this.layers.findIndex(f=>f.name===u.name);d>=0?this.layers.splice(d,1,u):(this.isLayerMenuOpen=!1,u.group!==ht.adminRegions&&this.layers.push(u))}else this.layers=[]},this.sortLayers=(u,d)=>u.order>d.order?1:u.order===d.order?0:-1,this.getLayerMenuContainerHeightInRem=()=>this.isLayerMenuOpen?(this.getLayersInOrder().length+1)*this.LINE_HEIGHT+this.BUTTON_HEIGHT:this.BUTTON_HEIGHT,this.layerSubscription=this.mapService.getLayerSubscription().subscribe(this.onLayerChange)}ngOnDestroy(){this.layerSubscription.unsubscribe()}presentPopover(t,i){return ft(this,null,function*(){t.stopPropagation();let o=yield this.popoverController.create({component:Gu,animated:!0,cssClass:"ibf-popover ibf-popover-normal",translucent:!0,showBackdrop:!0,componentProps:{layer:i}});this.analyticsService.logEvent(pt.mapLayerInformation,{mapLayerName:i.name,mapLayerStatus:i.active,page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),o.present()})}toggleLayer(t){this.analyticsService.logEvent(pt.mapLayer,{mapLayerName:t.name,mapLayerStatus:!t.active,page:kt.dashboard,isActiveTrigger:this.eventService.state.events?.length>0,component:this.constructor.name}),this.mapService.toggleLayer(t)}isLayerControlMenuOpen(){return ft(this,null,function*(){this.hideLayerControlToggleButton=yield this.menuController.isOpen("layer-control")})}getLayersInOrder(){return this.layers.filter(t=>t.order>=0).sort(this.sortLayers)}isCheckBox(t){return[ht.point,ht.wms].includes(t)}isRadioButton(t){return[ht.aggregates,ht.outline].includes(t)}toggleLayerMenu(){this.isLayerMenuOpen=!this.isLayerMenuOpen}static{this.\u0275fac=function(i){return new(i||e)(P(Kt),P(Ue),P(Po),P(at),P(BC))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-matrix"]],standalone:!1,decls:1,vars:1,consts:[["id","layer-menu-container",3,"ngStyle"],["color","ibf-no-alert-primary ","data-testid","layer-menu-toggle-button","id","layer-menu-toggle-button",1,"ion-no-margin","ion-justify-content-between",3,"click"],[3,"name"],["data-testid","layer-menu","id","layer-menu"],[1,"ion-no-padding"],[1,"ion-justify-content-between","ion-nowrap"],["lines","none",3,"className"],["data-testid","matrix-checkbox",1,"single-layer-toggler",3,"name"],["data-testid","matrix-radio-button",1,"single-layer-toggler",3,"name"],[1,"ion-text-wrap","ion-no-margin",2,"margin-left","8px",3,"title"],["slot","end","fill","clear",1,"ion-no-margin","info-button",3,"click","title"],["color","ibf-no-alert-primary","name","information-circle-outline","data-test","matrix-icon",1,"info-icon"],["data-testid","matrix-checkbox",1,"single-layer-toggler",3,"click","name"],["data-testid","matrix-radio-button",1,"single-layer-toggler",3,"click","name"]],template:function(i,o){i&1&&se(0,pk,8,8,"div",0),i&2&&re(o.layers.length?0:-1)},dependencies:[xC,Ke,Ze,Ot,si,rc,dr,ho,Oe],styles:["#layer-menu-container[_ngcontent-%COMP%]{position:fixed;z-index:900;bottom:1.5rem;right:0;width:13vw;height:1.5rem;display:flex;flex-direction:column;max-height:17.26rem}@media (max-width: 1280px){#layer-menu-container[_ngcontent-%COMP%]{width:16vw}}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu-toggle-button[_ngcontent-%COMP%]{width:100%;height:2.26rem;min-height:2.26rem;--border-radius: .25rem 0 0 0}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu-toggle-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu-toggle-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]{bottom:0;overflow-y:auto}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{min-height:1.5rem;border:1px solid var(--ion-color-ibf-no-alert-primary);border-top:none}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:98%;--min-height: $line-height;--padding-bottom: 0;--padding-top: 0;--padding-start: .25rem;--padding-end: .25rem;--inner-padding-start: 0;--inner-padding-end: 0}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:1rem;height:1rem}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .single-layer-toggler[_ngcontent-%COMP%]{font-size:1.3rem;cursor:pointer;color:var(--ion-color-ibf-no-alert-primary)}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{width:80%;font-size:.75rem}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]{--background-hover: #fff;--ripple-color: #fff}#layer-menu-container[_ngcontent-%COMP%]   #layer-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1.3rem;cursor:pointer}"]})}}return e})();var B8=(()=>{class e{constructor(t){this.popoverController=t}closePopover(){this.popoverController.dismiss()}static{this.\u0275fac=function(i){return new(i||e)(P(at))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-screen-orientation-popover"]],inputs:{device:"device"},standalone:!1,decls:20,vars:12,consts:[[1,"popover-window-card"],["color","ibf-primary"],[1,"ion-padding-top","ion-text-center"],["lines","none"],[1,"ion-margin-bottom","ion-text-wrap"],[1,"ion-text-wrap"],["lines","none",2,"width","100%"],[1,"ion-text-end",2,"width","100%"],["fill","clear",2,"text-transform","uppercase",3,"click"]],template:function(i,o){i&1&&(D(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-card-title"),M(3),Y(4,"translate"),x()(),D(5,"ion-card-content",2)(6,"ion-item",3)(7,"ion-col")(8,"ion-label",4)(9,"strong"),M(10),Y(11,"translate"),x()(),D(12,"ion-label",5),M(13),Y(14,"translate"),x()()(),D(15,"ion-item",6)(16,"div",7)(17,"ion-button",8),oe("click",function(){return o.closePopover()}),M(18),Y(19,"translate"),x()()()()()),i&2&&(E(3),be(Z(4,4,"dashboard-page.screen-orientation."+o.device+".title")),E(7),be(Z(11,6,"dashboard-page.screen-orientation."+o.device+".warning-message")),E(3),ne(" ",Z(14,8,"dashboard-page.screen-orientation."+o.device+".instructions-message")," "),E(5),ne(" ",Z(19,10,"chat-component.common.save-actions.prompt-button-label")," "))},dependencies:[Ke,bi,xi,Zi,ji,uo,Ot,si,Oe],encapsulation:2})}}return e})();var fk=(e,n)=>n.value;function mk(e,n){e&1&&X(0,"ion-progress-bar",1)}function _k(e,n){if(e&1&&(D(0,"ion-button",4),X(1,"app-date-button",5),x()),e&2){let t=n.$implicit;Ti("active",t.active)("forecast-alert",t.forecastAlert),Jl("color",t.forecastAlert?"ibf-trigger-alert-tertiary":"ibf-no-alert-tertiary"),E(),W("date",t.date)("forecastAlert",t.forecastAlert)("trigger",t.trigger)}}function vk(e,n){e&1&&(X(0,"app-tooltip",3),Y(1,"translate")),e&2&&W("value",Z(1,1,"timeline-component.tooltip"))}function gk(e,n){if(e&1&&(Bt(0,_k,2,8,"ion-button",2,fk),se(2,vk,2,3,"app-tooltip",3)),e&2){let t=B();zt(t.timelineState.timeStepButtons),E(2),re(t.timelineState.timeStepButtons.length>0?2:-1)}}var U8=(()=>{class e{constructor(t,i,o,s){this.timelineService=t,this.eventService=i,this.placeCodeService=o,this.changeDetectorRef=s,this.onTimelineStateChange=l=>{this.timelineState=l,this.changeDetectorRef.detectChanges()},this.onPlaceCodeHoverChange=l=>{if(!this.eventService.state.event){if(this.placeCodeHover=l,this.placeCodeHover){let u=this.timelineState?.timeStepButtons?.filter(d=>d.eventNames.includes(l.eventName));for(let d of u)d.active=!0;this.changeDetectorRef.detectChanges()}else if(this.timelineState?.timeStepButtons){for(let u of this.timelineState.timeStepButtons)u.active=!1;this.changeDetectorRef.detectChanges()}}}}ngOnInit(){this.timelineStateSubscription=this.timelineService.getTimelineStateSubscription().subscribe(this.onTimelineStateChange),this.placeCodeHoverSubscription=this.placeCodeService.getPlaceCodeHoverSubscription().subscribe(this.onPlaceCodeHoverChange)}ngOnDestroy(){this.timelineStateSubscription.unsubscribe(),this.placeCodeHoverSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)(P(en),P(Ue),P(Vt),P(co))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-timeline"]],standalone:!1,decls:4,vars:3,consts:[["lines","none",1,"ion-no-padding"],["type","indeterminate","color","ibf-grey",1,"ion-margin"],["expand","full","fill","solid","data-testid","timeline-button",1,"pointer-events-none","first:ml-0",3,"color","active","forecast-alert"],["data-testid","tooltip-button","color","ibf-no-alert-primary",1,"event-header--tooltip",3,"value"],["expand","full","fill","solid","data-testid","timeline-button",1,"pointer-events-none","first:ml-0",3,"color"],[3,"date","forecastAlert","trigger"]],template:function(i,o){i&1&&(D(0,"ion-item",0),se(1,mk,1,0,"ion-progress-bar",1),Y(2,"async"),se(3,gk,3,1),x()),i&2&&(E(),re(Z(2,1,o.timelineService.isLoading)?1:3))},dependencies:[Ke,Ot,MC,zD,xs,Sa,Oe],styles:["ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0;--height: 40px;--min-height: 40px}ion-button[_ngcontent-%COMP%]{height:100%!important;text-align:left;--border-style: solid;--border-color: transparent}ion-button[_ngcontent-%COMP%]::part(native){border-width:.1rem}ion-button.active[_ngcontent-%COMP%]{--border-color: var(--ion-color-ibf-trigger-alert-primary);--ion-color-contrast: var(--ion-color-ibf-trigger-alert-primary)}ion-button.forecast-alert[_ngcontent-%COMP%]{--border-color: var(--ion-color-ibf-trigger-alert-tertiary);--ion-color-contrast: var(--ion-color-ibf-trigger-alert-primary)}ion-button.forecast-alert.active[_ngcontent-%COMP%]{--border-color: var(--ion-color-ibf-trigger-alert-primary);--ion-color-contrast: var(--ion-color-ibf-trigger-alert-primary)}"]})}}return e})();var V8=(()=>{class e{constructor(t,i,o,s,l,u){this.countryService=t,this.apiService=i,this.alertController=o,this.toastController=s,this.disasterTypeService=l,this.translateService=u,this.backendMockScenarioComponentTranslateNode="dashboard-page.dev-menu.mock-scenario",this.alertHeaderLabelNode="alert-header",this.alertSubHeaderLabelNode="alert-sub-header",this.alertMessageNode="alert-message",this.alertButtonCancelLabelNode="alert-button-cancel",this.alertButtonNoTriggerLabelNode="alert-button-no-trigger",this.alertButtonTriggerLabelNode="alert-button-trigger",this.alertErrorApiErrorNode="alert-error-api-error",this.onCountryChange=d=>{this.country=d},this.onDisasterTypeChange=d=>{this.disasterType=d},this.onTranslate=d=>{this.alertHeaderLabel=d[this.alertHeaderLabelNode],this.alertSubHeaderLabel=d[this.alertSubHeaderLabelNode],this.alertMessage=this.translateService.instant(`${this.backendMockScenarioComponentTranslateNode}.${this.alertMessageNode}`,{countryName:this.country.countryName,disasterTypeLabel:this.disasterType.disasterType}),this.alertButtonCancelLabel=d[this.alertButtonCancelLabelNode],this.alertButtonNoTriggerLabel=d[this.alertButtonNoTriggerLabelNode],this.alertButtonTriggerLabel=d[this.alertButtonTriggerLabelNode],this.alertErrorApiError=d[this.alertErrorApiErrorNode],this.handleBackendMockScenarioChange()},this.onClickBackendMockScenarioChange=()=>{this.translateService.get(this.backendMockScenarioComponentTranslateNode).subscribe(this.onTranslate)}}ngOnInit(){this.countrySubscription=this.countryService.getCountrySubscription().subscribe(this.onCountryChange),this.disasterTypeSubscription=this.disasterTypeService.getDisasterTypeSubscription().subscribe(this.onDisasterTypeChange)}ngOnDestroy(){this.countrySubscription.unsubscribe(),this.disasterTypeSubscription.unsubscribe()}presentToast(t){return ft(this,null,function*(){(yield this.toastController.create({message:t,duration:2e3})).present()})}handleBackendMockScenarioChange(){return ft(this,null,function*(){let t=yield this.alertController.create({cssClass:"mock-scenario-alert",header:this.alertHeaderLabel,subHeader:this.alertSubHeaderLabel,message:this.alertMessage,buttons:[{text:this.alertButtonCancelLabel,role:"cancel"},{text:this.alertButtonNoTriggerLabel,cssClass:"no-trigger-scenario-button",handler:()=>(this.mockApiRefresh(!1,!0,t),!1)},{text:this.alertButtonTriggerLabel,cssClass:"trigger-scenario-button",handler:()=>(this.mockApiRefresh(!0,!0,t),!1)}]});t.present()})}mockApiRefresh(t,i,o){this.apiService.mock(this.country,t,i,this.disasterType).subscribe({next:()=>{this.processMockSuccess(o)},error:s=>{s.status===202?this.processMockSuccess(o):this.presentToast(this.alertErrorApiError)}})}processMockSuccess(t){this.countryService.selectCountry(this.country.countryCodeISO3),t.dismiss(!0)}static{this.\u0275fac=function(i){return new(i||e)(P($e),P(Di),P(Qp),P(zC),P(it),P(qt))}}static{this.\u0275cmp=ce({type:e,selectors:[["app-backend-mock-scenario"]],standalone:!1,decls:2,vars:1,consts:[["button","true",3,"click","translate"]],template:function(i,o){i&1&&(Mp(0),D(1,"ion-item",0),oe("click",function(){return o.onClickBackendMockScenarioChange()}),x(),kp()),i&2&&(E(),W("translate","dashboard-page.dev-menu.mock-scenario.button-label"))},dependencies:[Ot,NC],encapsulation:2})}}return e})();var Cj=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=_a({type:e})}static{this.\u0275inj=ma({imports:[LD,Bp,AC,UC,PD,wD,Iv,Iv]})}}return e})();yC(FD,[nc,ec,tc,Ke,Wp,uo,Zp,Ze,Ot,si,rc,Xp,dr,Vp,AD,OD,G_,jD,qD,KD,xs],[Oe,bs]);export{kt as a,pt as b,$e as c,Kt as d,it as e,Fe as f,B8 as g,Zu as h,ox as i,xu as j,xn as k,Ue as l,qZ as m,t9 as n,V8 as o,FD as p,g9 as q,x9 as r,Sk as s,N8 as t,L8 as u,R8 as v,U8 as w,hZ as x,JD as y,a8 as z,Cj as A};
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

@microsoft/dynamicproto-js/lib/dist/esm/dynamicproto-js.js:
  (*!
   * Microsoft Dynamic Proto Utility, 1.1.11
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
*/
